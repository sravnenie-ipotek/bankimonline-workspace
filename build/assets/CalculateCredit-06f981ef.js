import{i as me,r as P,b as M,j as e,l as r,h as I,w as S,R as X,x as _e,y as he,z as pe,I as ge,J as xe,K as je,A as ye,D as fe,E as be,F as Z,G as we,H as ve}from"./index-1d92caf1.js";import{u as K,b as x,c as D,E as C,D as y,T as J,d as B,f as _,e as f,F as E,o as Se,g as Y,a as L,h as ee,L as Me}from"./index-f859d475.js";import{P as Oe}from"./ProgressBar-877bd764.js";import{V as Pe}from"./VideoPoster-0e93c845.js";import{S as ae,a as Ie,L as De,U as Ae,A as Fe,F as Ce,B as qe,b as Ne,P as Be,c as Ee,d as Ye,e as Le,O as ke}from"./SourceOfIncomeModal-5c666327.js";import{F as k,a as T,R as p,C as c,D as q,b as te,c as Q}from"./StringInput-7d0df2df.js";import{s as U,I as Te}from"./IncreasePayment-fda0b0db.js";import{Y as Ve,R as Re,I as $e,N as ze,B as We,E as Ue,A as He,C as Ge,T as Je,a as Ke,b as Qe,H as Xe,M as Ze,c as ea,P as aa}from"./Taxes-1ff6f40c.js";import{c as H,a as ta}from"./calculatePeriod-d6d018d2.js";import{U as v,a as oa,c as oe,A as N,b as na,d as ra,O as ia,e as ne,g as G}from"./componentsByIncomeSource-5606a7ee.js";import{F as sa,o as re,d as la}from"./otherBorrowersSlice-ccc0b766.js";import"./borrowersPersonalDataSlice-9b3d7020.js";import"./ShieldCheckIcon-1d2fad20.js";const ca=me({name:"credit",initialState:{},reducers:{updateCreditData:(a,d)=>({...a,...d.payload})}}),{updateCreditData:da}=ca.actions,ua=()=>{const[a,d]=P.useState(51130),[o,m]=P.useState(2654),{t,i18n:h}=M();h.language=h.language.split("-")[0];const g=[{value:"option_1",label:t("calculate_credit_target_option_1")},{value:"option_2",label:t("calculate_credit_target_option_2")},{value:"option_3",label:t("calculate_credit_target_option_3")},{value:"option_4",label:t("calculate_credit_target_option_4")},{value:"option_5",label:t("calculate_credit_target_option_5")},{value:"option_6",label:t("calculate_credit_target_option_6")}],l=[{value:"option_1",label:t("calculate_mortgage_when_options_1")},{value:"option_2",label:t("calculate_mortgage_when_options_2")},{value:"option_3",label:t("calculate_mortgage_when_options_3")},{value:"option_4",label:t("calculate_mortgage_when_options_4")}],V=[{value:"option_1",label:t("calculate_credit_prolong_option_1")},{value:"option_2",label:t("calculate_credit_prolong_option_2")},{value:"option_3",label:t("calculate_credit_prolong_option_3")},{value:"option_4",label:t("calculate_credit_prolong_option_4")},{value:"option_5",label:t("calculate_credit_prolong_option_5")},{value:"option_6",label:t("calculate_credit_prolong_option_6")},{value:"option_7",label:t("calculate_credit_prolong_option_7")}],R=[{value:"city_1",label:t("calculate_mortgage_city_1")},{value:"city_2",label:t("calculate_mortgage_city_2")},{value:"city_3",label:t("calculate_mortgage_city_3")}],{setFieldValue:j,values:s,errors:u,touched:b,setFieldTouched:w}=K(),A=x(i=>i.activeField),O=D(),$=i=>{O(U("period")),j("period",i)},z=i=>{O(U("monthlyPayment")),j("monthlyPayment",i)};return P.useEffect(()=>{if(A==="period"){const i=H(s.loanAmount,0,s.period,5);Number.isNaN(i)||j("monthlyPayment",i)}else{const i=ta(s.loanAmount,0,s.monthlyPayment,5);Number.isNaN(i)||j("period",i)}},[A,j,s.loanAmount,s.monthlyPayment,s.period]),P.useLayoutEffect(()=>{const i=H(s.loanAmount,0,1,5),W=H(s.loanAmount,0,30,5);Number.isNaN(i)||d(i),i===0&&d(1),Number.isNaN(i)||m(W)},[s.loanAmount]),e.jsx(e.Fragment,{children:e.jsxs(k,{children:[e.jsx(T,{title:t("sidebar_sub_calculate_credit")}),e.jsxs(p,{children:[e.jsx(c,{children:e.jsx(q,{title:t("calculate_why"),data:g,placeholder:t("calculate_credit_target_ph"),value:s.purposeOfLoan,onChange:i=>j("purposeOfLoan",i),onBlur:()=>w("purposeOfLoan",!0),error:b.purposeOfLoan&&u.purposeOfLoan})}),e.jsxs(c,{children:[e.jsx(te,{handleChange:i=>{O(U("period")),j("loanAmount",i)},name:"loanAmount",title:t("calculate_amount"),value:s.loanAmount,placeholder:"1,000,000",error:u.loanAmount}),u.loanAmount&&e.jsx(C,{error:u.loanAmount})]}),e.jsx(c,{children:e.jsx(q,{title:t("calculate_when"),data:l,placeholder:t("calculate_mortgage_when_options_ph"),value:s.whenDoYouNeedMoney,onChange:i=>j("whenDoYouNeedMoney",i),onBlur:()=>w("whenDoYouNeedMoney",!0),error:b.whenDoYouNeedMoney&&u.whenDoYouNeedMoney})})]}),e.jsx(p,{children:e.jsx(c,{children:e.jsx(q,{title:t("calculate_prolong"),data:V,placeholder:t("calculate_mortgage_first_ph"),value:s.loanDeferral,onChange:i=>j("loanDeferral",i),onBlur:()=>w("loanDeferral",!0),error:b.loanDeferral&&u.loanDeferral})})}),s.purposeOfLoan&&s.purposeOfLoan==="option_6"&&e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(te,{handleChange:i=>{j("priceOfEstate",i)},name:"PriceOfEstate",title:t("calculate_mortgage_price"),value:s.priceOfEstate,placeholder:"1,000,000",error:u.priceOfEstate}),u.priceOfEstate&&e.jsx(C,{error:u.priceOfEstate})]}),e.jsx(c,{children:e.jsx(q,{title:t("calculate_mortgage_city"),data:R,placeholder:t("city"),value:s.cityWhereYouBuy,onChange:i=>j("cityWhereYouBuy",i),onBlur:()=>w("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:t("search"),nothingFoundText:t("nothing_found"),error:b.cityWhereYouBuy&&u.cityWhereYouBuy})}),e.jsxs(c,{children:[e.jsx(J,{title:t("have_mortgage_title")}),e.jsx(Ve,{value:s.haveMortgage,onChange:i=>j("haveMortgage",i),error:b.haveMortgage&&u.haveMortgage})]})]})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(ae,{disableCurrency:!0,unitsMax:t("calculate_mortgage_period_units_max"),unitsMin:t("calculate_mortgage_period_units_min"),value:s.period,name:"Period",min:1,max:30,error:u.period,title:t("calculate_mortgage_period"),handleChange:$}),u.period&&e.jsx(C,{error:u.period})]}),e.jsxs(c,{children:[e.jsx(ae,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:o,max:a,error:u.monthlyPayment,title:t("calculate_mortgage_initial_payment"),handleChange:z,value:s.monthlyPayment}),e.jsx(Te,{}),u.monthlyPayment&&e.jsx(C,{error:u.monthlyPayment})]}),e.jsx(c,{})]})]})})},ma=B().shape({purposeOfLoan:_().required("Выберите ответ"),loanAmount:f().when("purposeOfLoan",{is:r.t("calculate_credit_target_option_6"),then:a=>a.max(1e6,r.t("error_loan_of_amount_credit_max_1000000")),otherwise:a=>a.max(2e5,r.t("error_loan_of_amount_credit_max_200000"))}).required(r.t("error_required_to_fill_out")),whenDoYouNeedMoney:_().required(r.t("error_select_answer")),loanDeferral:_().required(r.t("error_select_answer")),period:f().min(1,r.t("error_min__credit_period")).max(30,r.t("error_max_credit_period")).required(r.t("error_required_to_fill_out")),monthlyPayment:f().required(r.t("error_required_to_fill_out"))}),_a=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const o=D(),m=I(),t=x(l=>l.credit),h=x(l=>l.login.isLogin),g={purposeOfLoan:t.purposeOfLoan||"",loanAmount:t.loanAmount||2e5,whenDoYouNeedMoney:t.whenDoYouNeedMoney||"",loanDeferral:t.loanDeferral||"",priceOfEstate:t.priceOfEstate||null,cityWhereYouBuy:t.cityWhereYouBuy||"",haveMortgage:t.haveMortgage||null,period:t.period||30,monthlyPayment:t.monthlyPayment||5368};return e.jsxs(e.Fragment,{children:[e.jsx(E,{initialValues:g,validationSchema:ma,validateOnMount:!0,onSubmit:l=>{o(da(l)),h?m("/services/calculate-credit/2"):o(Se())},children:e.jsxs(Y,{children:[e.jsxs(L,{children:[e.jsx(Pe,{title:a("sidebar_sub_calculate_credit"),text:a("calculate_mortgage_banner_subtext"),size:"small"}),e.jsx(ua,{})]}),e.jsx(Ie,{})]})}),e.jsx(De,{})]})},ha=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const o=x(t=>t.login.loginData),m=x(t=>t.credit);return e.jsxs(k,{children:[e.jsx(T,{title:a("calculate_mortgage_final")}),e.jsx(Ae,{credit:m.loanAmount,nameSurname:o==null?void 0:o.nameSurname,phoneNumber:o==null?void 0:o.phoneNumber}),e.jsx(Fe,{text:a("calculate_mortgage_warning")}),e.jsx(p,{children:e.jsx(Ce,{})}),e.jsx(qe,{})]})},pa={},ga=B().shape({}),xa=()=>e.jsx(E,{initialValues:pa,validationSchema:ga,validateOnMount:!0,onSubmit:()=>{console.log("нажата кнопка")},children:e.jsxs(Y,{children:[e.jsx(L,{children:e.jsx(ha,{})}),e.jsx(Q,{})]})}),ja=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const{values:o}=K(),m=x(t=>t.login.loginData);return e.jsxs(k,{children:[e.jsx(T,{title:a("calculate_mortgage_step2_title")}),e.jsxs(Re,{children:[e.jsx($e,{}),e.jsx(v,{name:m==null?void 0:m.nameSurname,phone:m==null?void 0:m.phoneNumber})]}),e.jsxs(p,{children:[e.jsx(ze,{}),e.jsx(We,{}),e.jsx(Ue,{})]}),e.jsxs(p,{children:[e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(He,{}),o.additionalCitizenships==="yes"&&e.jsx(Ge,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Je,{}),o.taxes==="yes"&&e.jsx(Ke,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Qe,{}),o.childrens==="yes"&&e.jsx(Xe,{})]})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(Ze,{}),e.jsx(ea,{}),e.jsx(aa,{})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(Ne,{}),e.jsx(c,{}),e.jsx(c,{})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(sa,{}),e.jsx(c,{children:o.familyStatus==="option_2"&&e.jsx(Be,{})}),e.jsx(c,{children:o.partnerPayMortgage==="yes"&&o.familyStatus==="option_2"&&e.jsx(Ee,{})})]})]})},ya=B().shape({nameSurname:_().required(r.t("error_name_surname")),birthday:_().required(r.t("error_date")),education:_().required(r.t("error_select_answer")),additionalCitizenships:_().required(r.t("error_select_answer")),citizenshipsDropdown:ee().when("additionalCitizenships",{is:"yes",then:a=>a.min(1,r.t("error_select_answer")),otherwise:a=>a.min(0)}),taxes:_().required(r.t("error_select_answer")),countriesPayTaxes:ee().when("taxes",{is:"yes",then:a=>a.min(1,r.t("error_select_answer")),otherwise:a=>a.min(0)}),childrens:_().required(r.t("error_select_answer")),howMuchChildrens:f().required(r.t("error_fill_field")),medicalInsurance:_().required(r.t("error_select_answer")),isForeigner:_().required(r.t("error_select_answer")),publicPerson:_().required(r.t("error_select_answer")),borrowers:f().min(1,r.t("error_quantity_borrowers")).required(r.t("error_quantity_borrowers")),familyStatus:_().required(r.t("error_select_answer")),partnerPayMortgage:_().when("familyStatus",{is:r.t("calculate_mortgage_family_status_option_2"),then:a=>a.required(r.t("error_select_answer")),otherwise:a=>a.notRequired()})}),fa=()=>{const a=D(),d=I(),o=x(h=>h.mortgage),t={nameSurname:x(h=>h.login.loginData).nameSurname||o.nameSurname||"",birthday:o.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:o.education||"",additionalCitizenships:o.additionalCitizenships||null,citizenshipsDropdown:o.citizenshipsDropdown||[],taxes:o.taxes||null,countriesPayTaxes:o.countriesPayTaxes||[],childrens:o.childrens||null,howMuchChildrens:o.howMuchChildrens||1,medicalInsurance:o.medicalInsurance||null,isForeigner:o.isForeigner||null,publicPerson:o.publicPerson||null,borrowers:o.borrowers||null,familyStatus:o.familyStatus||"",partnerPayMortgage:o.partnerPayMortgage||null,addPartner:o.addPartner||""};return e.jsx(E,{initialValues:t,validationSchema:ya,validateOnMount:!0,onSubmit:h=>{a(S(h)),d("/services/calculate-credit/3")},children:e.jsxs(Y,{children:[e.jsx(L,{children:e.jsx(ja,{})}),e.jsx(Q,{})]})})},ba=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const o=I(),{values:m}=K(),{mainSourceOfIncome:t,additionalIncome:h,obligation:g}=m,l=D(),V=x(n=>n.borrowers.sourceOfIncomeModal),R=x(n=>n.borrowers.additionalIncomeModal),j=x(n=>n.borrowers.obligationModal),s=x(n=>n.otherBorrowers.otherBorrowers),u=x(n=>n.login.loginData),b=()=>{l(S(m)),l(_e())},w=()=>{l(S(m)),l(he())},A=()=>{l(S(m)),l(pe())},O=n=>{l(ge({id:n}))},$=n=>{l(xe({id:n}))},z=n=>{l(je({id:n}))},i=n=>{l(ye(n))},W=n=>{l(fe(n))},ie=n=>{l(be(n))},se=n=>{l(re(n));const de=!s.some(ue=>ue.id===n)?G(s):n;o({pathname:"/services/other-borrowers/1/",search:Z({pageId:String(de)}).toString()})},le=()=>{l(re(G(s))),l(S(m)),o({pathname:"/services/other-borrowers/1/",search:Z({pageId:G(s).toString()}).toString()})},ce=n=>{l(la(n))};return e.jsxs(k,{children:[e.jsx(T,{title:a("calculate_mortgage_step3_title")}),e.jsx(v,{name:u==null?void 0:u.nameSurname,phone:u==null?void 0:u.phoneNumber}),e.jsxs(p,{children:[e.jsx(oa,{}),oe[t]&&oe[t].map((n,F)=>e.jsx(X.Fragment,{children:n},F)),e.jsx(c,{})]}),e.jsx(p,{children:t&&e.jsxs(c,{children:[V.map(n=>e.jsx(v,{onEdit:()=>i(n.id),onDelete:()=>O(n.id),enableEdit:!0,name:`${a("source_of_income")}${n.id+1}`},n.id)),e.jsx(N,{onClick:b,color:"#FBE54D",value:a("add_place_to_work"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(na,{}),h&&h!=="option_1"&&e.jsx(ra,{}),e.jsx(c,{})]}),h&&h!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[R.map(n=>e.jsx(v,{onEdit:()=>W(n.id),onDelete:()=>$(n.id),enableEdit:!0,name:`${a("additional_source_of_income")}${n.id+1}`},n.id)),e.jsx(N,{onClick:w,color:"#FBE54D",value:a("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(ia,{}),ne[g]&&ne[g].map((n,F)=>e.jsx(X.Fragment,{children:n},F)),e.jsx(c,{})]}),g&&g!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[j.map(n=>e.jsx(v,{onEdit:()=>ie(n.id),onDelete:()=>z(n.id),enableEdit:!0,name:`${a("obligation")}${n.id+1}`},n.id)),e.jsx(N,{onClick:A,color:"#FBE54D",value:a("add_obligation"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[s&&e.jsx(J,{title:a("borrower")}),e.jsxs(p,{style:{columnGap:"2rem"},children:[s.map(n=>e.jsx(c,{children:e.jsx(v,{onEdit:()=>se(n.id),onDelete:()=>ce(n.id),enableEdit:!0,name:n.nameSurname},n.id)},n.id)),!s&&e.jsx(J,{title:a("borrower")}),e.jsx(c,{children:e.jsx(N,{value:a("add_borrower"),onClick:le,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(c,{})]})]})]})},wa=B().shape({mainSourceOfIncome:_().required(r.t("error_select_answer")),monthlyIncome:f().required(r.t("error_fill_field")),startDate:_().required(r.t("error_date")),fieldOfActivity:_().when("mainSourceOfIncome",{is:a=>a!=null&&a!=="",then:a=>a.required(r.t("error_select_field_of_activity")),otherwise:a=>a.notRequired()}),profession:_().required(r.t("error_fill_field")),companyName:_().required(r.t("error_fill_field")),additionalIncome:_().required(r.t("error_select_one_of_the_options")),additionalIncomeAmount:f().when("additionalIncome",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_fill_field")),otherwise:a=>a.notRequired()}),obligation:_().required(r.t("error_select_one_of_the_options")),bank:_().when("obligation",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_select_bank")),otherwise:a=>a.notRequired()}),monthlyPaymentForAnotherBank:f().when("obligation",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_fill_field")),otherwise:a=>a.notRequired()}),endDate:_().required(r.t("error_date"))}),va=()=>{const a=D(),d=I(),o=x(t=>t.mortgage),m={mainSourceOfIncome:o.mainSourceOfIncome||"",monthlyIncome:o.monthlyIncome||null,startDate:o.startDate||new Date().getTime(),fieldOfActivity:o.fieldOfActivity||"",profession:o.profession||"",companyName:o.companyName||"",additionalIncome:o.additionalIncome||"",additionalIncomeAmount:o.additionalIncomeAmount||null,obligation:o.obligation||"",bank:o.bank||"",monthlyPaymentForAnotherBank:o.monthlyPaymentForAnotherBank||null,endDate:o.endDate||new Date().getTime(),amountIncomeCurrentYear:(o==null?void 0:o.amountIncomeCurrentYear)||null,noIncome:o.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(E,{initialValues:m,validationSchema:wa,validateOnMount:!0,onSubmit:t=>{a(S(t)),d("/services/calculate-credit/4")},children:e.jsxs(Y,{children:[e.jsx(L,{children:e.jsx(ba,{})}),e.jsx(Q,{})]})}),e.jsx(Ye,{}),e.jsx(Le,{}),e.jsx(ke,{})]})},Ya=()=>{const{stepNumber:a}=we(),{t:d,i18n:o}=M(),m=I();if(o.language=o.language.split("-")[0],!x(l=>l.login.isLogin)&&a!=="1"){m("/services/calculate-credit/1");return}const h=[d("calculate_credit_calculator"),d("mortgage_refinance_step_2"),d("calculate_mortgage_income"),d("calculate_mortgage_programs")];let g;switch(a){case"1":g=e.jsx(_a,{});break;case"2":g=e.jsx(fa,{});break;case"3":g=e.jsx(va,{});break;case"4":g=e.jsx(xa,{});break;default:g=e.jsx(ve,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[e.jsx(Oe,{progress:a,data:h}),e.jsx(P.Suspense,{fallback:e.jsx(Me,{}),children:g})]})};export{Ya as default};
