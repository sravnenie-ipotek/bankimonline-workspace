🎯 Core Purpose
Action #6: "Сортировать по" (Sort by) - Allow users to filter mortgage programs by specific mortgage types to help them find the most suitable options.
📋 Filter Options Logic
1. כל תוכניות המשכנתא (All Mortgage Programs)
What it does: Shows ALL available mortgage programs from all banks
No filtering applied - displays the complete list
Default state when user first lands on the page
2. משכנתאות בריבית פריים (Prime Rate Mortgages)
What it does: Filters to show ONLY programs linked to Bank of Israel's prime interest rate
Business logic: These are variable rate mortgages that fluctuate with the central bank's prime rate
Typically lower initial rates but with interest rate risk
3. משכנתאות בריבית קבועה (Fixed Rate Mortgages)
What it does: Shows ONLY fixed-rate mortgage programs
Business logic: Interest rate remains constant throughout the loan term
Higher initial rates but provides payment certainty
4. משכנתאות בריבית משתנה (Variable Rate Mortgages)
What it does: Shows ONLY variable rate programs (non-prime linked)
Business logic: Rates can change based on market conditions or bank policies
Different from prime - may be linked to other indices
⚙️ Technical Logic Flow
Backend Processing
User selects filter option from dropdown
System identifies mortgage type from selection
Database query filters bank programs by program_type field:
prime_rate for prime mortgages
fixed_rate for fixed mortgages
variable_rate for variable mortgages
all or no filter for all programs
Results are sorted according to admin-configured priority
Filtered list returned to frontend
Display Logic
Bank cards refresh to show only matching programs
Calculation results update based on filtered programs
"No results" message if no programs match the filter
Sorting within filtered results by:
Interest rate (lowest first)
Monthly payment (lowest first)
Bank priority/preference
🎨 User Experience Logic
Visual Feedback
Selected filter highlighted in dropdown
Program count indicator showing "X programs found"
Bank cards update smoothly without page reload
Maintain user's mortgage parameters in top banner
State Management
Remember filter selection if user navigates back
Reset to "All Programs" if user changes mortgage parameters
Preserve selection during sorting changes
🔧 Admin Configuration Logic
Content Management
Dropdown labels editable in admin panel for all languages
Filter options can be enabled/disabled per market
Order of options configurable by admin
Default selection can be set by admin
Program Classification
Bank employees set program types when creating mortgage products
Programs can have multiple types (e.g., prime + variable)
Admin can override program categorization if needed
📊 Business Intelligence Logic
Analytics Tracking
Track which filters are most used by customers
Monitor conversion rates per filter type
A/B test filter ordering and naming
Regional preferences for different mortgage types
CRM Integration
Save filter selection to customer profile
Bank employees see preferred mortgage types
Marketing targeting based on filter usage patterns
🚨 Edge Cases & Error Handling
No Results Scenario
Show message: "No programs match your criteria"
Suggest: "Try selecting 'All Programs' or adjust your parameters"
Fallback: Automatically expand to show nearest matches
Data Integrity
Validate program types exist in database
Handle missing translations gracefully
Default to "All Programs" if filter data corrupted
This filtering system is designed to simplify the mortgage selection process by letting users focus on their preferred interest rate structure, making the complex mortgage landscape more navigable.