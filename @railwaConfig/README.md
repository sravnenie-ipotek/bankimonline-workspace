# 🚂 Railway Configuration Templates

This folder contains configuration files for Railway deployment - both for **self-contained apps** (that create their own database) and apps that use **external PostgreSQL**.

## 📁 Contents

### 🎯 SELF-CONTAINED APP (App Creates Own DB)
- **`SELF_CONTAINED_SETUP.md`** - **START HERE** - For apps that create their own database
- **`server-self-contained.js`** - Simple Express server (no external DB)
- **`package-self-contained.json`** - Minimal dependencies (no DB libs)
- **`env-self-contained.txt`** - Environment variables (no DATABASE_URL)

### 🚀 SIMPLE SETUP (External Database)
- **`SIMPLIFIED_SETUP.md`** - Why Nixpacks > Dockerfile
- **`railway-simple.json`** - Minimal Railway config (uses Nixpacks)
- **`nixpacks.toml`** - Optional Nixpacks customization

### 🔧 Advanced/Legacy Configuration Files  
- **`railway.json`** - Railway config with Dockerfile builder
- **`Dockerfile`** - Container build configuration (only if needed)
- **`package.json`** - Full dependencies with database libs
- **`env-example.txt`** - Environment variables with DATABASE_URL

### 💾 External Database Files
- **`server-template.js`** - Express.js server with PostgreSQL connection
- **`database-setup.sql`** - PostgreSQL database initialization script
- **`build-railway.sh`** - Build script for complex deployments

### 📖 Documentation
- **`RAILWAY_SETUP_PROMPT.md`** - Comprehensive setup instructions for AI agents
- **`QUICK_SETUP_GUIDE.md`** - Quick reference guide
- **`README.md`** - This file

## 🚀 Quick Usage

### For Self-Contained Apps (Recommended)
1. **Follow instructions** in `SELF_CONTAINED_SETUP.md`
2. **Copy `server-self-contained.js`** to your project as `server.js`
3. **Copy `package-self-contained.json`** as your `package.json`
4. **Use `railway-simple.json`** (minimal config)

### For External Database Apps
1. **Follow instructions** in `RAILWAY_SETUP_PROMPT.md`
2. **Copy `server-template.js`** to your project as `server.js`
3. **Copy `env-example.txt`** content to `.env` for local development
4. **Run `database-setup.sql`** in Railway PostgreSQL

## 🎯 For AI Agents

### Self-Contained Apps
Use **`SELF_CONTAINED_SETUP.md`** for apps that create their own database (in-memory, file-based, etc.)

### External Database Apps  
Use **`RAILWAY_SETUP_PROMPT.md`** for apps that need Railway PostgreSQL service. It contains:

- ✅ Step-by-step Railway setup instructions
- ✅ All necessary configuration files
- ✅ Environment variable requirements
- ✅ Database setup procedures
- ✅ Deployment verification steps
- ✅ Troubleshooting guides

## 🌟 Features Included

### 🔧 Server Features
- Express.js application server
- PostgreSQL database connection
- CORS configuration for Railway
- Health check endpoints
- Error handling middleware
- Graceful shutdown handling
- Static file serving for frontend

### 🗄️ Database Features
- Automatic Railway PostgreSQL connection
- SSL support for production
- Database health monitoring
- Sample table schemas
- Migration scripts

### 🚂 Railway Features
- Auto-deployment from GitHub
- Environment variable management
- Build optimization
- Container deployment
- PostgreSQL service integration

## 📋 Environment Variables

### Required in Railway Dashboard
```env
NODE_ENV=production
RAILWAY_ENVIRONMENT=production
JWT_SECRET=your-super-secure-jwt-secret-key-here
CORS_ALLOWED_ORIGINS=*
```

### Auto-Generated by Railway
```env
DATABASE_URL=postgresql://...
PORT=8003
```

## 🔍 Verification Endpoints

After deployment, these endpoints will be available:

- **`/api/health`** - Database and server health status
- **`/api/test`** - Basic API functionality test
- **`/api/db-test`** - Database connection test
- **`/api/users`** - Sample users API (GET/POST)

## 💡 Tips

1. **Start with `QUICK_SETUP_GUIDE.md`** for rapid deployment
2. **Use `RAILWAY_SETUP_PROMPT.md`** for AI agent instructions
3. **Customize `server-template.js`** for your specific needs
4. **Run `database-setup.sql`** in Railway PostgreSQL interface
5. **Monitor deployment** in Railway dashboard logs

## 🆘 Support

If you encounter issues:
1. Check Railway dashboard logs
2. Verify environment variables are set
3. Ensure DATABASE_URL is available
4. Review the troubleshooting section in setup guides

---

**Ready to deploy to Railway?**
- 🎯 **Self-contained app?** → Start with `SELF_CONTAINED_SETUP.md`
- 🗄️ **Need PostgreSQL?** → Start with `QUICK_SETUP_GUIDE.md` 