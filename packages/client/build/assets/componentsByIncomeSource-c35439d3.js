import{j as o}from"./ui-vendor-5a9cd79c.js";import{u as _}from"./form-vendor-3025b96d.js";import{a as I,E as y,S as T}from"./index-f0724ccb.js";import{a as O}from"./useDropdownData-a5f9f8a4.js";import{C as m}from"./Column-a76f721c.js";import{M as z}from"./AddButton-e8c9ce63.js";import{u}from"./i18n-vendor-5cfd36a0.js";import{D as C}from"./DropdownMenu-4b9ce17d.js";import{F as B}from"./FormattedInput-94d27b7f.js";import{C as S}from"./Calendar-ef2e6f19.js";import{u as H}from"./react-vendor-19e41fc0.js";import{c as K}from"./index-c0d564f3.js";const se=e=>Math.max(0,...e.map(a=>a.id))+1,R=()=>{const{t:e,i18n:n}=u();return o.jsx(z,{children:e("add_inc")})},ce=({screenLocation:e="mortgage_step3",excludeNoIncome:n=!1})=>{const{t:a,i18n:l}=u(),{getContent:t}=I(e),{values:s,setFieldValue:i,errors:d,setFieldTouched:p,touched:c,setFieldError:j,validateField:r}=_(),x=g=>{if(!g)return!1;const b=g.toLowerCase();return b==="option_1"||b==="1"||b.includes("no_additional")||b.includes("no additional")||b.includes("none")};e==null||e.includes("credit"),e==null||e.includes("refinance");const v=O(e,"additional_income","full"),F=(v==null?void 0:v.options)||[],h=n?F.filter(g=>!x(g.value)&&g.value!=="no_additional_income"):F;console.log("Additional income values:",{errors:d.additionalIncome,touched:c.additionalIncome});const f=g=>{console.log("Additional income change:",{willShowAmountField:!x(g)}),i("additionalIncome",g,!0),p("additionalIncome",!0,!1)};return o.jsxs(m,{children:[o.jsx(C,{title:t("calculate_mortgage_has_additional",a("calculate_mortgage_has_additional")),placeholder:t("calculate_mortgage_has_additional_ph",a("calculate_mortgage_has_additional_ph")),data:h,value:s.additionalIncome,onChange:f,onBlur:()=>p("additionalIncome",!0,!0),error:c.additionalIncome&&d.additionalIncome}),o.jsx(R,{})]})},de=()=>{const{t:e,i18n:n}=u(),{values:a,setFieldValue:l,errors:t,setFieldTouched:s,touched:i}=_();return o.jsxs(m,{children:[o.jsx(B,{title:e("calculate_mortgage_monthly_income"),placeholder:e("calculate_mortgage_monthly_income_ph"),value:a.additionalIncomeAmount,handleChange:d=>l("additionalIncomeAmount",d),onBlur:()=>s("additionalIncomeAmount"),error:i.additionalIncomeAmount&&t.additionalIncomeAmount,size:"xs"}),i.additionalIncomeAmount&&t.additionalIncomeAmount&&o.jsx(y,{error:t.additionalIncomeAmount})]})},me=({screenLocation:e="mortgage_step3"})=>{u();const{getContent:n}=I(e),{values:a,setFieldValue:l,touched:t,errors:s,setFieldTouched:i,setFieldError:d}=_(),p=r=>{if(!r)return!1;const x=r.toLowerCase();return x==="option_1"||x==="no_obligations"||x.includes("no_obligation")||x.includes("no obligation")||x.includes("none")},c=O(e,"types","full");if(c.loading)return o.jsx("div",{children:"Loading obligations..."});c.error&&console.warn("❌ Obligations dropdown error:",c.error),console.log("Obligation debug:",{value:a.obligation,errors:s.obligation,touched:t.obligation});const j=r=>{console.log("Obligation value changed:",{value:r,willShowBankFields:!p(r)}),l("obligation",r),i("obligation",!0)};return o.jsxs(m,{children:[o.jsx(C,{title:c.label||n("calculate_mortgage_obligations","Obligations"),data:c.options,placeholder:c.placeholder||n("calculate_mortgage_obligations_ph","Select obligation type"),value:a.obligation,onChange:j,onBlur:()=>i("obligation"),error:t.obligation&&s.obligation,disabled:c.loading}),c.error&&o.jsx(y,{error:n("error_dropdown_load_failed","Failed to load obligations options. Please refresh the page.")})]})},P=({screenLocation:e="calculate_credit_3"})=>{u();const{getContent:n}=I("common"),{values:a,setFieldValue:l,errors:t,touched:s,setFieldTouched:i}=_(),d=e==="calculate_credit_3"&&a.obligation,p=d?n("obligation_bank_title","Bank Lender"):n("bank_title","Bank"),c=n(d?"obligation_bank_placeholder":"bank_placeholder","Select bank"),j=[{value:"1",label:n("bank_option_1","Bank Hapoalim")},{value:"2",label:n("bank_option_2","Bank Leumi")},{value:"3",label:n("bank_option_3","Bank Discount")},{value:"4",label:n("bank_option_4","Bank Mizrahi")},{value:"5",label:n("bank_option_5","Other Bank")}];return o.jsx(m,{children:o.jsx(C,{title:p,placeholder:c,data:j,value:a.bank,onChange:r=>l("bank",r),onBlur:()=>i("bank"),error:s.bank&&t.bank,disabled:!1})})},N=()=>{u();const{getContent:e}=I("common"),{values:n,setFieldValue:a,errors:l}=_();return o.jsxs(m,{children:[o.jsx(S,{title:e("obligation_end_date_title","Obligation End Date"),value:n.endDate,onChange:t=>a("endDate",t),placeholder:"ДД / ММ / ГГ",error:l.endDate}),l.endDate&&o.jsx(y,{error:l.endDate})]})},A=()=>{u();const{getContent:e}=I("common"),{values:n,setFieldValue:a,errors:l,setFieldTouched:t,touched:s}=_();return o.jsxs(m,{children:[o.jsx(B,{value:n.monthlyPaymentForAnotherBank,title:e("obligation_monthly_payment_title","Monthly Payment"),placeholder:e("obligation_monthly_payment_placeholder","Enter monthly payment amount"),name:"MonthlyPayment",handleChange:i=>a("monthlyPaymentForAnotherBank",i),onBlur:()=>t("monthlyPayment"),error:s.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank,size:"xs"}),s.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank&&o.jsx(y,{error:l.monthlyPaymentForAnotherBank})]})},ue={bank_loan:[o.jsx(P,{},"Bank"),o.jsx(A,{},"MonthlyPayment"),o.jsx(N,{},"EndDate")],consumer_credit:[o.jsx(P,{},"Bank"),o.jsx(A,{},"MonthlyPayment"),o.jsx(N,{},"EndDate")],credit_card:[o.jsx(A,{},"MonthlyPayment")],other:[o.jsx(A,{},"MonthlyPayment")]},he=({screenLocation:e="mortgage_step3"})=>{var F;const{t:n,i18n:a}=u(),{getContent:l}=I(e),{values:t,setFieldValue:s,errors:i,touched:d,setFieldTouched:p,setFieldError:c}=_(),j=h=>{if(!h)return!1;const f=h.toLowerCase();return f.includes("unemployed")||f.includes("no_income")||f.includes("no income")||f.includes("option_5")||f.includes("option_6")||f.includes("main_source_income_option_5")||f.includes("main_source_income_option_6")},r=O(e,"source","full"),x=e!=null&&e.includes("credit")&&((F=r==null?void 0:r.options)==null?void 0:F.length)>0?r.options:Array.from({length:7},(h,f)=>{const g=f+1,b=`calculate_mortgage_main_source_option_${g}`,$=`calculate_mortgage_main_source_option_${g}`;return{value:`option_${g}`,label:l(b,n($))}}).filter(h=>h.label&&h.label!==h.value);i.mainSourceOfIncome,d.mainSourceOfIncome,d.mainSourceOfIncome&&i.mainSourceOfIncome;const v=h=>{console.log("MainSourceOfIncome change:",{value:h,willRequireFields:!j(h)}),s("mainSourceOfIncome",h,!0),p("mainSourceOfIncome",!0,!1)};return o.jsxs(m,{children:[o.jsx(C,{data:x,title:e!=null&&e.includes("credit")&&(r!=null&&r.label)?r.label:l("calculate_mortgage_main_source",n("calculate_mortgage_main_source")),placeholder:e!=null&&e.includes("credit")&&(r!=null&&r.placeholder)?r.placeholder:l("calculate_mortgage_main_source_ph",n("calculate_mortgage_main_source_ph")),value:t.mainSourceOfIncome||"",onChange:v,onBlur:()=>p("mainSourceOfIncome",!0,!0),error:d.mainSourceOfIncome&&i.mainSourceOfIncome,disabled:(e==null?void 0:e.includes("credit"))&&(r==null?void 0:r.loading)}),(e==null?void 0:e.includes("credit"))&&(r==null?void 0:r.error)&&o.jsx(y,{error:l("error_dropdown_load_failed","Failed to load main source options. Please refresh the page.")})]})},V=()=>{const{t:e,i18n:n}=u(),{values:a,setFieldValue:l,errors:t,setFieldTouched:s,touched:i}=_();return o.jsxs(m,{children:[o.jsx(T,{placeholder:e("calculate_mortgage_company"),value:a.companyName,title:e("calculate_mortgage_company"),name:"СompanyName",onChange:d=>l("companyName",d),onBlur:()=>s("companyName"),error:i.companyName&&t.companyName}),i.companyName&&t.companyName&&o.jsx(y,{error:t.companyName})]})},M=({screenLocation:e})=>{const n=H(),a=e||(n.pathname.includes("calculate-mortgage")?"mortgage_step3":n.pathname.includes("refinance-mortgage")?"refinance_mortgage_3":"calculate_credit_3"),{getContent:l}=I(a),{values:t,setFieldValue:s,errors:i,setFieldTouched:d,touched:p}=_(),c=O(a,"activity","full");return c.loading,c.error&&console.warn("❌ Field of activity dropdown error:",c.error),o.jsxs(m,{children:[o.jsx(C,{data:c.options,title:c.label||l("calculate_mortgage_field_of_activity","Field of Activity"),placeholder:c.placeholder||l("calculate_mortgage_field_of_activity_ph","Select field of activity"),searchable:!0,searchPlaceholder:l("search","Search..."),value:t.fieldOfActivity,onChange:j=>{s("fieldOfActivity",j,!0),d("fieldOfActivity",!0,!1)},onBlur:()=>d("fieldOfActivity",!0,!0),error:p.fieldOfActivity&&i.fieldOfActivity,disabled:c.loading}),c.error&&o.jsx(y,{error:l("error_dropdown_load_failed","Failed to load field of activity options. Please refresh the page.")})]})},q="_hint_1enfl_1",G={hint:q},J=K.bind(G),Q=({text:e})=>o.jsx("div",{className:J("hint"),children:e}),k=()=>{const{t:e,i18n:n}=u(),{values:a,setFieldValue:l,errors:t,setFieldTouched:s,touched:i}=_();return o.jsxs(m,{children:[o.jsx(B,{title:e("calculate_mortgage_monthly_income"),placeholder:e("calculate_mortgage_monthly_income_ph"),value:a.monthlyIncome,handleChange:d=>l("monthlyIncome",d),onBlur:()=>s("monthlyIncome"),error:i.monthlyIncome&&t.monthlyIncome,size:"xs"}),o.jsx(Q,{text:e("calculate_mortgage_monthly_income_hint")}),i.monthlyIncome&&t.monthlyIncome&&o.jsx(y,{error:t.monthlyIncome})]})},w=()=>{const{t:e,i18n:n}=u(),{values:a,setFieldValue:l,errors:t}=_();return o.jsxs(m,{children:[o.jsx(S,{title:e("no_income"),value:a.noIncome,onChange:s=>l("noIncome",s),placeholder:e("date_ph"),error:t.noIncome}),t.noIncome&&o.jsx(y,{error:t.noIncome})]})},D=()=>{const{t:e,i18n:n}=u(),{values:a,setFieldValue:l,errors:t,setFieldTouched:s,touched:i}=_();return o.jsxs(m,{children:[o.jsx(T,{placeholder:e("calculate_mortgage_profession_ph"),value:a.profession,title:e("calculate_mortgage_profession"),name:"Profession",onChange:d=>l("profession",d),onBlur:()=>s("profession"),error:i.profession&&t.profession}),i.profession&&t.profession&&o.jsx(y,{error:t.profession})]})};function U(){const{t:e,i18n:n}=u();return o.jsx(z,{children:e("calculate_mortgage_step3_ctx")})}const E=()=>{const{t:e,i18n:n}=u(),{values:a,setFieldValue:l,errors:t}=_();return o.jsxs(m,{children:[o.jsx(S,{title:e("calculate_mortgage_start_date"),value:a.startDate,onChange:s=>l("startDate",s),placeholder:e("date_ph"),error:t.startDate}),o.jsx(U,{}),t.startDate&&o.jsx(y,{error:t.startDate})]})},W=e=>({employee:[o.jsx(k,{screenLocation:e},"MonthlyIncome1"),o.jsx(E,{screenLocation:e},"StartDate1"),o.jsx(M,{screenLocation:e},"FieldOfActivity1"),o.jsx(V,{screenLocation:e},"CompanyName1"),o.jsx(D,{screenLocation:e},"Profession1")],selfemployed:[o.jsx(k,{screenLocation:e},"MonthlyIncome2"),o.jsx(E,{screenLocation:e},"StartDate2"),o.jsx(M,{screenLocation:e},"FieldOfActivity2"),o.jsx(V,{screenLocation:e},"CompanyName2"),o.jsx(D,{screenLocation:e},"Profession2")],pension:[o.jsx(k,{screenLocation:e},"MonthlyIncome4"),o.jsx(m,{},"column")],unemployed:[o.jsx(w,{screenLocation:e},"NoIncome5"),o.jsx(m,{},"column")],unpaid_leave:[o.jsx(w,{screenLocation:e},"NoIncome6"),o.jsx(m,{},"column")],student:[o.jsx(k,{screenLocation:e},"MonthlyIncome7"),o.jsx(m,{},"column")],other:[o.jsx(k,{screenLocation:e},"MonthlyIncome8"),o.jsx(m,{},"column")]}),_e=W("auto-detect");export{ce as A,he as M,me as O,de as a,ue as b,_e as c,W as d,se as g};
