import{j as e}from"./ui-vendor-5a9cd79c.js";import{c as u}from"./index-3dbb29a1.js";import{a as C,M,k as T,c as B,I as L}from"./index-ec77e4e1.js";import{i as N,u as w}from"./i18n-vendor-5cfd36a0.js";import{P as O}from"./PercentIcon-69cb9491.js";import{r as k,u as F,f as I}from"./react-vendor-19e41fc0.js";import{C as U}from"./Column-054126c6.js";const $=c=>{const t=c%10,i=c%100;return t===1&&i!==11?N.t("year_singular"):[2,3,4].includes(t)&&![12,13,14].includes(i)?N.t("year_dual"):N.t("year_plural")},R=c=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",...c,children:e.jsx("path",{fill:"#FBE54D",d:"M16.25 2.5h-1.875v-.625a.625.625 0 1 0-1.25 0V2.5h-6.25v-.625a.625.625 0 0 0-1.25 0V2.5H3.75A1.25 1.25 0 0 0 2.5 3.75v12.5a1.25 1.25 0 0 0 1.25 1.25h12.5a1.25 1.25 0 0 0 1.25-1.25V3.75a1.25 1.25 0 0 0-1.25-1.25ZM5.625 3.75v.625a.625.625 0 0 0 1.25 0V3.75h6.25v.625a.625.625 0 1 0 1.25 0V3.75h1.875v2.5H3.75v-2.5h1.875Zm10.625 12.5H3.75V7.5h12.5v8.75Z"})}),V="_modal_11yd4_1",G="_ellipse_11yd4_74",Z={modal:V,"modal-header":"_modal-header_11yd4_11","modal-header__title":"_modal-header__title_11yd4_16","modal-content__text":"_modal-content__text_11yd4_27","modal-content__row":"_modal-content__row_11yd4_35","modal-content__title":"_modal-content__title_11yd4_48","modal-content__condition":"_modal-content__condition_11yd4_65",ellipse:G},d=u.bind(Z),H=({isVisible:c,onClose:t,title:i,description:r,conditionFinance:n,conditionPeriod:v,conditionBid:_})=>{const{t:o,i18n:h}=w(),{getContent:m}=C("bank_offers"),[l,p]=k.useState("description"),f=[{value:"description",label:m("description","description")},{value:"condition",label:m("condition","condition")}],g=x=>{p(x)};return e.jsx(M,{isVisible:c,onCancel:t,children:e.jsxs("div",{className:d("modal"),children:[e.jsxs("div",{className:d("modal-header"),children:[e.jsx("div",{className:d("modal-header__title"),children:i}),e.jsx(T,{handleChange:g,tabs:f,tab:l})]}),e.jsxs("div",{children:[l==="description"&&e.jsx("div",{className:d("modal-content"),children:e.jsx("p",{className:d("modal-content__text"),children:r})}),l==="condition"&&e.jsxs("div",{className:d("modal-content"),children:[e.jsxs("div",{className:d("modal-content__row"),children:[e.jsx("p",{className:d("modal-content__condition"),children:o("calculate_mortgage_parameters_initial")}),e.jsxs("div",{className:d("modal-content__title"),children:[e.jsx("span",{className:d("ellipse")}),e.jsx("p",{children:n})]})]}),e.jsxs("div",{className:d("modal-content__row"),children:[e.jsx("p",{className:d("modal-content__condition"),children:o("mortgage_term")}),e.jsxs("div",{className:d("modal-content__title"),children:[e.jsx("span",{className:d("ellipse")}),e.jsx("p",{children:v})]})]}),e.jsxs("div",{className:d("modal-content__row"),children:[e.jsx("p",{className:d("modal-content__condition"),children:o("bid")}),e.jsx("p",{className:d("modal-content__title"),children:_})]})]})]})]})})},Y="_card_ixwh9_1",z="_wrapper_ixwh9_83",q={card:Y,"card-title":"_card-title_ixwh9_9","card-title__ellipse":"_card-title__ellipse_ixwh9_14","card-title__text":"_card-title__text_ixwh9_20","card-title__info":"_card-title__info_ixwh9_27","card-content":"_card-content_ixwh9_30","card-content__desc":"_card-content__desc_ixwh9_35","card-content__price":"_card-content__price_ixwh9_42","card-desc":"_card-desc_ixwh9_53","card-desc__content":"_card-desc__content_ixwh9_64","card-desc__content-desc":"_card-desc__content-desc_ixwh9_69","card-desc__content-title":"_card-desc__content-title_ixwh9_76",wrapper:z},a=u.bind(q),ne=({title:c,mortgageAmount:t,monthlyPayment:i,percent:r,period:n,description:v,conditionFinance:_,conditionPeriod:o,conditionBid:h})=>{const{t:m,i18n:l}=w(),p=t.toLocaleString("en-US"),f=i.toLocaleString("en-US"),[g,{open:x,close:j}]=B();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:a("card"),children:[e.jsxs("div",{className:a("card-title"),children:[e.jsx("span",{className:a("card-title__ellipse")}),e.jsx("p",{className:a("card-title__text"),children:c}),e.jsx(L,{className:a("card-title__info"),onClick:x,size:20})]}),e.jsxs("div",{className:a("wrapper"),children:[e.jsxs("div",{className:a("card-content"),children:[e.jsx("p",{className:a("card-content__desc"),children:m("mortgage_total")}),e.jsxs("p",{className:a("card-content__price"),children:[p," ₪"]})]}),e.jsxs("div",{className:a("card-content"),children:[e.jsx("p",{className:a("card-content__desc"),children:m("mortgage_monthly")}),e.jsxs("p",{className:a("card-content__price"),children:[f," ₪"]})]})]}),e.jsxs("div",{className:a("wrapper"),children:[e.jsxs("div",{className:a("card-desc"),children:[e.jsx(O,{}),e.jsxs("div",{className:a("card-desc__content"),children:[e.jsx("p",{className:a("card-desc__content-desc"),children:m("mortgage_percnt")}),e.jsxs("p",{className:a("card-desc__content-title"),children:[Number(r).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:a("card-desc"),children:[e.jsx(R,{}),e.jsxs("div",{className:a("card-desc__content"),children:[e.jsx("p",{className:a("card-desc__content-desc"),children:m("mortgage_term")}),e.jsxs("p",{className:a("card-desc__content-title"),children:[n," ",$(n)]})]})]})]})]}),e.jsx(H,{isVisible:g,onClose:j,title:c,description:v,conditionFinance:_,conditionPeriod:o,conditionBid:h})]})},W=()=>{const c=F();return c.pathname.includes("/calculate-mortgage")?"mortgage":c.pathname.includes("/calculate-credit")?"credit":c.pathname.includes("/refinance-mortgage")?"refinance-mortgage":c.pathname.includes("/refinance-credit")?"refinance-credit":null},E=()=>({}).VITE_NODE_API_BASE_URL||"https://bankimonline.com/api",se=async c=>{var _;const t=E(),i=N.language||"en",r=i==="he"?"he-IL":i==="ru"?"ru-RU":"en-US",n=await fetch(`${t}/customer/compare-banks`,{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":r},body:JSON.stringify(c)});if(!n.ok){const o=await n.text();throw console.error("❌ [BANK-API] Error:",n.status,o),new Error(`API Error: ${n.status} - ${o}`)}return((_=(await n.json()).data)==null?void 0:_.bank_offers)||[]},de=async()=>{var c;try{const t=E(),i=N.language||"en",r=i==="he"?"he-IL":i==="ru"?"ru-RU":"en-US",n=await fetch(`${t}/customer/mortgage-programs`,{method:"GET",headers:{"Content-Type":"application/json","Accept-Language":r}});if(n.ok)return((c=(await n.json()).data)==null?void 0:c.programs)||[];throw console.warn("⚠️ [MORTGAGE-PROGRAMS-API] Failed to fetch programs"),new Error(`Failed to fetch programs: ${n.status}`)}catch(t){throw console.error("❌ [MORTGAGE-PROGRAMS-API] Error:",t),t}},oe=(c,t,i,r,n,v)=>{const _=r==="credit",o=n||`sess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let h;if(t!=null&&t.birthday){const g=new Date(t.birthday);if(!isNaN(g.getTime())){const x=new Date;h=x.getFullYear()-g.getFullYear();const j=x.getMonth()-g.getMonth();(j<0||j===0&&x.getDate()<g.getDate())&&h--,(h<18||h>100)&&(h=void 0)}}const m=(t==null?void 0:t.monthlyIncome)||(i==null?void 0:i.monthlyIncome)||(c==null?void 0:c.monthlyIncome)||0;let l=0,p=0;_?(l=c.loanAmount||0,p=0):r==="refinance-mortgage"?(l=c.mortgageBalance||0,p=c.priceOfEstate||0):(l=c.priceOfEstate&&c.initialFee?c.priceOfEstate-c.initialFee:c.priceOfEstate*.5,p=c.priceOfEstate||0);const f={loan_type:_?"credit":"mortgage",amount:l,property_value:p,monthly_income:m,birth_date:t==null?void 0:t.birthday,employment_start_date:i==null?void 0:i.startDate,age:h||35,employment_years:(i==null?void 0:i.employmentYears)||0,property_ownership:c.propertyOwnership||"no_property",session_id:o,client_id:v,education:t==null?void 0:t.education,citizenship:t==null?void 0:t.citizenship,marital_status:t==null?void 0:t.familyStatus,children_count:(t==null?void 0:t.childrens)==="yes"?(t==null?void 0:t.childrenCount)||1:0,property_city:c==null?void 0:c.cityWhereYouBuy,property_type:_||c==null?void 0:c.typeSelect,is_first_apartment:_?!1:(c==null?void 0:c.willBeYourFirst)==="1",has_medical_insurance:(t==null?void 0:t.medicalInsurance)==="yes",is_foreigner:(t==null?void 0:t.isForeigner)==="yes",is_public_figure:(t==null?void 0:t.publicPerson)==="yes"};return console.log("Bank offers API request payload:",{requestPayload:f,isCredit:_,parameters:c,userPersonalData:t}),f},J=c=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...c,children:e.jsx("path",{fill:"#FBE54D",d:"M3.75 8.25h3.094a3 3 0 0 0 5.812 0h7.594a.75.75 0 1 0 0-1.5h-7.594a3 3 0 0 0-5.812 0H3.75a.75.75 0 0 0 0 1.5Zm6-2.25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm10.5 9.75h-1.594a3 3 0 0 0-5.812 0H3.75a.75.75 0 1 0 0 1.5h9.094a3 3 0 0 0 5.812 0h1.594a.75.75 0 1 0 0-1.5ZM15.75 18a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z"})}),K="_parameters_1op4u_1",Q="_wrapper_1op4u_49",X={parameters:K,"parameters-title":"_parameters-title_1op4u_11","parameters-title__text":"_parameters-title__text_1op4u_16","parameters-title__icon":"_parameters-title__icon_1op4u_22","parameters-data":"_parameters-data_1op4u_29","parameters-data__title":"_parameters-data__title_1op4u_35","parameters-data__desc":"_parameters-data__desc_1op4u_41",wrapper:Q},s=u.bind(X),re=({cost:c,initialPayment:t,period:i,credit:r,onEditClick:n})=>{const{t:v,i18n:_}=w(),{getContent:o}=C("mortgage_step4"),h=I(),m=W(),l=m==="credit",p=c!=null?Number(c):void 0,f=t!=null?Number(t):void 0,g=r!=null?Number(r):void 0,x=i!=null?Number(i):void 0,j=()=>{switch(m){case"mortgage":return"/services/calculate-mortgage/1";case"credit":return"/services/calculate-credit/1";case"refinance-mortgage":return"/services/refinance-mortgage/1";case"refinance-credit":return"/services/refinance-credit/1";default:return"/services/calculate-mortgage/1"}},y=p!==void 0?p.toLocaleString("en-US"):void 0,b=f!==void 0?f.toLocaleString("en-US"):void 0,S=g!==void 0?g.toLocaleString("en-US"):void 0,A=x!==void 0?x*12:void 0;return e.jsx(U,{children:e.jsxs("div",{className:s("parameters"),children:[e.jsxs("div",{className:s("parameters-title"),children:[e.jsx("p",{className:s("parameters-title__text"),children:o("calculate_mortgage_parameters","calculate_mortgage_parameters")}),e.jsx(J,{onClick:n||(()=>h(j())),className:s("parameters-title__icon")})]}),e.jsxs("div",{className:s("wrapper"),children:[S&&e.jsxs("div",{className:s("parameters-data"),children:[e.jsxs("div",{className:s("parameters-data__title"),children:[S," ₪"]}),e.jsx("div",{className:s("parameters-data__desc"),children:v("sum_credit")})]}),y&&e.jsxs("div",{className:s("parameters-data"),children:[e.jsxs("div",{className:s("parameters-data__title"),children:[y," ₪"]}),e.jsx("div",{className:s("parameters-data__desc"),children:o(l?"calculate_credit_parameters_cost":"calculate_mortgage_parameters_cost",l?"calculate_credit_parameters_cost":"calculate_mortgage_parameters_cost")})]}),b&&e.jsxs("div",{className:s("parameters-data"),children:[e.jsxs("div",{className:s("parameters-data__title"),children:[b," ₪"]}),e.jsx("div",{className:s("parameters-data__desc"),children:o("calculate_mortgage_parameters_initial","calculate_mortgage_parameters_initial")})]})]}),A&&e.jsx("div",{className:s("wrapper"),children:e.jsxs("div",{className:s("parameters-data"),children:[e.jsxs("div",{className:s("parameters-data__title"),children:[A," ",o("calculate_mortgage_parameters_months","calculate_mortgage_parameters_months")]}),e.jsx("div",{className:s("parameters-data__desc"),children:o(l?"calculate_credit_parameters_period":"calculate_mortgage_parameters_period",l?"calculate_credit_parameters_period":"calculate_mortgage_parameters_period")})]})})]})})};export{H as B,re as M,ne as P,de as a,se as f,oe as t,W as u};
