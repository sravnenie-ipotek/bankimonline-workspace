import{j as e}from"./ui-vendor-5a9cd79c.js";import{u as f}from"./form-vendor-429348f6.js";import{a as I,E as y,S as E}from"./index-edeff406.js";import{C as _}from"./Column-b52dd59a.js";import{M as T}from"./AddButton-9bc99600.js";import{u as g}from"./i18n-vendor-5cfd36a0.js";import{D as O}from"./DropdownMenu-c93145d6.js";import{F as k}from"./FormattedInput-d86805f8.js";import{a as A}from"./useDropdownData-1abe74c0.js";import{C as S}from"./Calendar-2ac6e5e2.js";import{u as H}from"./react-vendor-19e41fc0.js";import{c as K}from"./index-bc53121f.js";const re=o=>Math.max(0,...o.map(n=>n.id))+1,R=()=>{const{t:o,i18n:a}=g();return e.jsx(T,{children:o("add_inc")})},se=({screenLocation:o="mortgage_step3",excludeNoIncome:a=!1})=>{const{t:n,i18n:l}=g(),{getContent:t}=I(o),{values:r,setFieldValue:s,errors:u,setFieldTouched:p,touched:c,setFieldError:b,validateField:i}=f(),h=m=>{if(!m)return!1;const x=m.toLowerCase();return x==="option_1"||x==="1"||x.includes("no_additional")||x.includes("no additional")||x.includes("none")},j=[{value:"option_1",label:t("calculate_mortgage_has_additional_option_1",n("calculate_mortgage_has_additional_option_1"))},{value:"option_2",label:t("calculate_mortgage_has_additional_option_2",n("calculate_mortgage_has_additional_option_2"))},{value:"option_3",label:t("calculate_mortgage_has_additional_option_3",n("calculate_mortgage_has_additional_option_3"))},{value:"option_4",label:t("calculate_mortgage_has_additional_option_4",n("calculate_mortgage_has_additional_option_4"))},{value:"option_5",label:t("calculate_mortgage_has_additional_option_5",n("calculate_mortgage_has_additional_option_5"))},{value:"option_6",label:t("calculate_mortgage_has_additional_option_6",n("calculate_mortgage_has_additional_option_6"))},{value:"option_7",label:t("calculate_mortgage_has_additional_option_7",n("calculate_mortgage_has_additional_option_7"))}],v=a?j.filter(m=>!h(m.value)&&m.value!=="no_additional_income"):j;console.log("🔍 AdditionalIncome debug:",{currentValue:r.additionalIncome,originalOptions:j,filteredOptions:v,excludeNoIncome:a,isNoAdditionalIncomeValue:h(r.additionalIncome),errors:u.additionalIncome,touched:c.additionalIncome});const d=m=>{console.log("🔍 AdditionalIncome onChange:",{value:m,currentValue:r.additionalIncome,isNoAdditionalIncomeValue:h(m),willShowAmountField:!h(m)}),s("additionalIncome",m,!0),p("additionalIncome",!0,!1)};return e.jsxs(_,{children:[e.jsx(O,{title:t("calculate_mortgage_has_additional",n("calculate_mortgage_has_additional")),placeholder:t("calculate_mortgage_has_additional_ph",n("calculate_mortgage_has_additional_ph")),data:v,value:r.additionalIncome,onChange:d,onBlur:()=>p("additionalIncome",!0,!0),error:c.additionalIncome&&u.additionalIncome}),e.jsx(R,{})]})},ce=()=>{const{t:o,i18n:a}=g(),{values:n,setFieldValue:l,errors:t,setFieldTouched:r,touched:s}=f();return e.jsxs(_,{children:[e.jsx(k,{title:o("calculate_mortgage_monthly_income"),placeholder:o("calculate_mortgage_monthly_income_ph"),value:n.additionalIncomeAmount,handleChange:u=>l("additionalIncomeAmount",u),onBlur:()=>r("additionalIncomeAmount"),error:s.additionalIncomeAmount&&t.additionalIncomeAmount,size:"xs"}),s.additionalIncomeAmount&&t.additionalIncomeAmount&&e.jsx(y,{error:t.additionalIncomeAmount})]})},de=({screenLocation:o="mortgage_step3"})=>{g();const{getContent:a}=I(o),{values:n,setFieldValue:l,touched:t,errors:r,setFieldTouched:s,setFieldError:u}=f(),p=i=>{if(!i)return!1;const h=i.toLowerCase();return h==="option_1"||h==="no_obligations"||h.includes("no_obligation")||h.includes("no obligation")||h.includes("none")},c=A(o,"types","full");c.loading&&console.log("🔄 Loading obligations dropdown options..."),c.error&&console.warn("❌ Obligations dropdown error:",c.error),console.log("🔍 Obligation debug:",{currentValue:n.obligation,options:c.options,isNoObligationValue:p(n.obligation),errors:r.obligation,touched:t.obligation});const b=i=>{console.log("🔍 Obligation onChange:",{value:i,currentValue:n.obligation,isNoObligationValue:p(i),willShowBankFields:!p(i)}),l("obligation",i),s("obligation",!0)};return e.jsxs(_,{children:[e.jsx(O,{title:c.label||a("calculate_mortgage_obligations","Obligations"),data:c.options,placeholder:c.placeholder||a("calculate_mortgage_obligations_ph","Select obligation type"),value:n.obligation,onChange:b,onBlur:()=>s("obligation"),error:t.obligation&&r.obligation,disabled:c.loading}),c.error&&e.jsx(y,{error:a("error_dropdown_load_failed","Failed to load obligations options. Please refresh the page.")})]})},V=({screenLocation:o="calculate_credit_3"})=>{g();const{getContent:a}=I("common"),{values:n,setFieldValue:l,errors:t,touched:r,setFieldTouched:s}=f(),u=o==="calculate_credit_3"&&n.obligation,p=u?a("obligation_bank_title","Bank Lender"):a("bank_title","Bank"),c=a(u?"obligation_bank_placeholder":"bank_placeholder","Select bank"),b=[{value:"1",label:a("bank_option_1","Bank Hapoalim")},{value:"2",label:a("bank_option_2","Bank Leumi")},{value:"3",label:a("bank_option_3","Bank Discount")},{value:"4",label:a("bank_option_4","Bank Mizrahi")},{value:"5",label:a("bank_option_5","Other Bank")}];return e.jsx(_,{children:e.jsx(O,{title:p,placeholder:c,data:b,value:n.bank,onChange:i=>l("bank",i),onBlur:()=>s("bank"),error:r.bank&&t.bank,disabled:!1})})},B=()=>{g();const{getContent:o}=I("common"),{values:a,setFieldValue:n,errors:l}=f();return e.jsxs(_,{children:[e.jsx(S,{title:o("obligation_end_date_title","Obligation End Date"),value:a.endDate,onChange:t=>n("endDate",t),placeholder:"ДД / ММ / ГГ",error:l.endDate}),l.endDate&&e.jsx(y,{error:l.endDate})]})},C=()=>{g();const{getContent:o}=I("common"),{values:a,setFieldValue:n,errors:l,setFieldTouched:t,touched:r}=f();return e.jsxs(_,{children:[e.jsx(k,{value:a.monthlyPaymentForAnotherBank,title:o("obligation_monthly_payment_title","Monthly Payment"),placeholder:o("obligation_monthly_payment_placeholder","Enter monthly payment amount"),name:"MonthlyPayment",handleChange:s=>n("monthlyPaymentForAnotherBank",s),onBlur:()=>t("monthlyPayment"),error:r.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank,size:"xs"}),r.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank&&e.jsx(y,{error:l.monthlyPaymentForAnotherBank})]})},me={bank_loan:[e.jsx(V,{},"Bank"),e.jsx(C,{},"MonthlyPayment"),e.jsx(B,{},"EndDate")],consumer_credit:[e.jsx(V,{},"Bank"),e.jsx(C,{},"MonthlyPayment"),e.jsx(B,{},"EndDate")],credit_card:[e.jsx(C,{},"MonthlyPayment")],other:[e.jsx(C,{},"MonthlyPayment")]},ue=({screenLocation:o="mortgage_step3"})=>{var v;const{t:a,i18n:n}=g(),{getContent:l}=I(o),{values:t,setFieldValue:r,errors:s,touched:u,setFieldTouched:p,setFieldError:c}=f(),b=d=>{if(!d)return!1;const m=d.toLowerCase();return m.includes("unemployed")||m.includes("no_income")||m.includes("no income")||m.includes("option_5")||m.includes("option_6")||m.includes("main_source_income_option_5")||m.includes("main_source_income_option_6")},i=A(o,"source","full"),h=o!=null&&o.includes("credit")&&((v=i==null?void 0:i.options)==null?void 0:v.length)>0?i.options:Array.from({length:7},(d,m)=>{const x=m+1,z=`calculate_mortgage_main_source_option_${x}`,$=`calculate_mortgage_main_source_option_${x}`;return{value:`option_${x}`,label:l(z,a($))}}).filter(d=>d.label&&d.label!==d.value);console.log("🔍 MainSourceOfIncome options:",{options:h,currentValue:t.mainSourceOfIncome,selectedItem:h.find(d=>d.value===t.mainSourceOfIncome),errors:s.mainSourceOfIncome,touched:u.mainSourceOfIncome,errorShowing:u.mainSourceOfIncome&&s.mainSourceOfIncome});const j=d=>{console.log("🔍 MainSourceOfIncome onChange:",{value:d,currentValue:t.mainSourceOfIncome,dropdownOptions:h,selectedOption:h.find(m=>m.value===d)}),console.log("🔍 MainSourceOfIncome validation debug:",{value:d,isEmpty:!d||d===""||d===null||d===void 0,isNoIncomeValue:b(d),willRequireFields:!b(d)}),r("mainSourceOfIncome",d,!0),p("mainSourceOfIncome",!0,!1)};return e.jsxs(_,{children:[e.jsx(O,{data:h,title:o!=null&&o.includes("credit")&&(i!=null&&i.label)?i.label:l("calculate_mortgage_main_source",a("calculate_mortgage_main_source")),placeholder:o!=null&&o.includes("credit")&&(i!=null&&i.placeholder)?i.placeholder:l("calculate_mortgage_main_source_ph",a("calculate_mortgage_main_source_ph")),value:t.mainSourceOfIncome||"",onChange:j,onBlur:()=>p("mainSourceOfIncome",!0,!0),error:u.mainSourceOfIncome&&s.mainSourceOfIncome,disabled:(o==null?void 0:o.includes("credit"))&&(i==null?void 0:i.loading)}),(o==null?void 0:o.includes("credit"))&&(i==null?void 0:i.error)&&e.jsx(y,{error:l("error_dropdown_load_failed","Failed to load main source options. Please refresh the page.")})]})},N=()=>{const{t:o,i18n:a}=g(),{values:n,setFieldValue:l,errors:t,setFieldTouched:r,touched:s}=f();return e.jsxs(_,{children:[e.jsx(E,{placeholder:o("calculate_mortgage_company"),value:n.companyName,title:o("calculate_mortgage_company"),name:"СompanyName",onChange:u=>l("companyName",u),onBlur:()=>r("companyName"),error:s.companyName&&t.companyName}),s.companyName&&t.companyName&&e.jsx(y,{error:t.companyName})]})},M=({screenLocation:o})=>{const a=H(),n=o||(a.pathname.includes("calculate-mortgage")?"mortgage_step3":a.pathname.includes("refinance-mortgage")?"refinance_mortgage_3":"calculate_credit_3"),{getContent:l}=I(n),{values:t,setFieldValue:r,errors:s,setFieldTouched:u,touched:p}=f(),c=A(n,"activity","full");return c.loading&&console.log("🔄 Loading field of activity dropdown options..."),c.error&&console.warn("❌ Field of activity dropdown error:",c.error),e.jsxs(_,{children:[e.jsx(O,{data:c.options,title:c.label||l("calculate_mortgage_field_of_activity","Field of Activity"),placeholder:c.placeholder||l("calculate_mortgage_field_of_activity_ph","Select field of activity"),searchable:!0,searchPlaceholder:l("search","Search..."),value:t.fieldOfActivity,onChange:b=>{r("fieldOfActivity",b,!0),u("fieldOfActivity",!0,!1)},onBlur:()=>u("fieldOfActivity",!0,!0),error:p.fieldOfActivity&&s.fieldOfActivity,disabled:c.loading}),c.error&&e.jsx(y,{error:l("error_dropdown_load_failed","Failed to load field of activity options. Please refresh the page.")})]})},q="_hint_1enfl_1",G={hint:q},J=K.bind(G),Q=({text:o})=>e.jsx("div",{className:J("hint"),children:o}),F=()=>{const{t:o,i18n:a}=g(),{values:n,setFieldValue:l,errors:t,setFieldTouched:r,touched:s}=f();return e.jsxs(_,{children:[e.jsx(k,{title:o("calculate_mortgage_monthly_income"),placeholder:o("calculate_mortgage_monthly_income_ph"),value:n.monthlyIncome,handleChange:u=>l("monthlyIncome",u),onBlur:()=>r("monthlyIncome"),error:s.monthlyIncome&&t.monthlyIncome,size:"xs"}),e.jsx(Q,{text:o("calculate_mortgage_monthly_income_hint")}),s.monthlyIncome&&t.monthlyIncome&&e.jsx(y,{error:t.monthlyIncome})]})},P=()=>{const{t:o,i18n:a}=g(),{values:n,setFieldValue:l,errors:t}=f();return e.jsxs(_,{children:[e.jsx(S,{title:o("no_income"),value:n.noIncome,onChange:r=>l("noIncome",r),placeholder:o("date_ph"),error:t.noIncome}),t.noIncome&&e.jsx(y,{error:t.noIncome})]})},w=()=>{const{t:o,i18n:a}=g(),{values:n,setFieldValue:l,errors:t,setFieldTouched:r,touched:s}=f();return e.jsxs(_,{children:[e.jsx(E,{placeholder:o("calculate_mortgage_profession_ph"),value:n.profession,title:o("calculate_mortgage_profession"),name:"Profession",onChange:u=>l("profession",u),onBlur:()=>r("profession"),error:s.profession&&t.profession}),s.profession&&t.profession&&e.jsx(y,{error:t.profession})]})};function U(){const{t:o,i18n:a}=g();return e.jsx(T,{children:o("calculate_mortgage_step3_ctx")})}const D=()=>{const{t:o,i18n:a}=g(),{values:n,setFieldValue:l,errors:t}=f();return e.jsxs(_,{children:[e.jsx(S,{title:o("calculate_mortgage_start_date"),value:n.startDate,onChange:r=>l("startDate",r),placeholder:o("date_ph"),error:t.startDate}),e.jsx(U,{}),t.startDate&&e.jsx(y,{error:t.startDate})]})},_e={employee:[e.jsx(F,{},"MonthlyIncome1"),e.jsx(D,{},"StartDate1"),e.jsx(M,{},"FieldOfActivity1"),e.jsx(N,{},"CompanyName1"),e.jsx(w,{},"Profession1")],selfemployed:[e.jsx(F,{},"MonthlyIncome2"),e.jsx(D,{},"StartDate2"),e.jsx(M,{},"FieldOfActivity2"),e.jsx(N,{},"CompanyName2"),e.jsx(w,{},"Profession2")],pension:[e.jsx(F,{},"MonthlyIncome4"),e.jsx(_,{},"column")],unemployed:[e.jsx(P,{},"NoIncome5"),e.jsx(_,{},"column")],unpaid_leave:[e.jsx(P,{},"NoIncome6"),e.jsx(_,{},"column")],student:[e.jsx(F,{},"MonthlyIncome7"),e.jsx(_,{},"column")],other:[e.jsx(F,{},"MonthlyIncome8"),e.jsx(_,{},"column")]};export{se as A,ue as M,de as O,ce as a,me as b,_e as c,re as g};
