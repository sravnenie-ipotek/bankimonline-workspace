import{j as e}from"./ui-vendor-5a9cd79c.js";import{c as E}from"./index-b94574b0.js";import{f as L,u as A,r as g}from"./react-vendor-19e41fc0.js";import{F as T,b as $,a as I,c as C,j as D,u as P}from"./form-vendor-3025b96d.js";import{u as F,i as d}from"./i18n-vendor-5cfd36a0.js";import{b as B,E as b}from"./index-79a992ab.js";import"./state-vendor-2a767ce0.js";import"./utils-vendor-48989965.js";import"./components-vendor-e60b5450.js";const V=async c=>{const _=await fetch("/api/lawyers/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),x=await _.json();if(!_.ok)throw new Error(x.message||"Failed to submit lawyer application");return x},q="_rtl_1wyx5_7",O="_logo_1wyx5_43",U="_error_1wyx5_197",M="_checkbox_1wyx5_251",H={"lawyers-form":"_lawyers-form_1wyx5_2",rtl:q,"form-container":"_form-container_1wyx5_19","form-header":"_form-header_1wyx5_34",logo:O,"logo-text":"_logo-text_1wyx5_48","header-img":"_header-img_1wyx5_63","form-content":"_form-content_1wyx5_92","form-title":"_form-title_1wyx5_101","application-form":"_application-form_1wyx5_116","form-section":"_form-section_1wyx5_120","section-title":"_section-title_1wyx5_127","form-row":"_form-row_1wyx5_142","form-group":"_form-group_1wyx5_158","full-width":"_full-width_1wyx5_163","radio-group":"_radio-group_1wyx5_166","form-label":"_form-label_1wyx5_170","form-input":"_form-input_1wyx5_178",error:U,"form-select":"_form-select_1wyx5_201","form-textarea":"_form-textarea_1wyx5_226",checkbox:M,"phone-input":"_phone-input_1wyx5_262","country-code":"_country-code_1wyx5_267","radio-options":"_radio-options_1wyx5_284","radio-option":"_radio-option_1wyx5_284","checkbox-label":"_checkbox-label_1wyx5_308","checkbox-text":"_checkbox-text_1wyx5_323","terms-link":"_terms-link_1wyx5_329","form-actions":"_form-actions_1wyx5_337","form-button":"_form-button_1wyx5_352","form-button--primary":"_form-button--primary_1wyx5_369","form-button--secondary":"_form-button--secondary_1wyx5_384","btn-primary":"_btn-primary_1wyx5_396","btn-secondary":"_btn-secondary_1wyx5_397","loading-state":"_loading-state_1wyx5_481"},a=E.bind(H),W=()=>I().shape({contactName:C().min(2,d.t("name_min_length")).required(d.t("name_required")),phone:C().matches(/^0[5-9][0-9]{8}$|^[+]?972[5-9][0-9]{8}$/,d.t("phone_invalid")).required(d.t("phone_required")),email:C().email(d.t("invalid_email")).required(d.t("required_field")),termsAccepted:D().oneOf([!0],d.t("agreement_text_start")+" "+d.t("terms_title")).required(d.t("agreement_text_start")+" "+d.t("terms_title"))}),J={contactName:"",phone:"",email:"",city:"",desiredRegion:"",employmentType:"",monthlyIncome:"",workExperience:"",clientLitigation:"",debtLitigation:"",comments:"",termsAccepted:!1,source:""},z=({cities:c,regions:_,professions:x,onBack:w})=>{F();const{values:t,setFieldValue:N,errors:r,setFieldTouched:k,touched:i}=P(),l=(s,y)=>{N(s,y)},o=s=>{k(s,!0)},v=()=>{const s=t.contactName.trim().length>=2,S=/^0[5-9][0-9]{8}$|^[+]?972[5-9][0-9]{8}$/.test(t.phone.replace(/[-\s]/g,"")),j=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email.trim()),u=t.termsAccepted;return s&&S&&j&&u};return e.jsxs("div",{className:a("form-content"),children:[e.jsxs("div",{className:a("form-title"),children:[e.jsx("h1",{children:"טופס הרשמה לעורכי דין ויועצים משפטיים"}),e.jsx("p",{className:a("form-subtitle"),children:'הצטרפו לרשת המובילה של מתווכי נדל"ן ומשפטנים מקצועיים'})]}),e.jsxs("div",{className:a("lawyer-form"),children:[e.jsxs("div",{className:a("form-section"),children:[e.jsx("h2",{className:a("section-title"),children:"פרטים אישיים"}),e.jsxs("div",{className:a("form-row"),children:[e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"שם איש הקשר המוסמך"}),e.jsx("input",{type:"text",className:a("form-input",{error:i.contactName&&r.contactName}),placeholder:"הזינו שם מלא",value:t.contactName,onChange:s=>l("contactName",s.target.value),onBlur:()=>o("contactName")}),i.contactName&&r.contactName&&e.jsx(b,{error:r.contactName})]}),e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"טלפון"}),e.jsx("input",{type:"tel",className:a("form-input",{error:i.phone&&r.phone}),placeholder:"050-123-4567",value:t.phone,onChange:s=>l("phone",s.target.value),onBlur:()=>o("phone")}),i.phone&&r.phone&&e.jsx(b,{error:r.phone})]})]}),e.jsxs("div",{className:a("form-row"),children:[e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:'דוא"ל'}),e.jsx("input",{type:"email",className:a("form-input",{error:i.email&&r.email}),placeholder:"example@email.com",value:t.email,onChange:s=>l("email",s.target.value),onBlur:()=>o("email")}),i.email&&r.email&&e.jsx(b,{error:r.email})]}),e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"עיר מגורים"}),e.jsxs("select",{className:a("form-select"),value:t.city,onChange:s=>l("city",s.target.value),onBlur:()=>o("city"),children:[e.jsx("option",{value:"",children:"בחרו עיר"}),c.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})]}),e.jsx("div",{className:a("form-row"),children:e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"אזור פעילות מועדף לשירותים משפטיים"}),e.jsxs("select",{className:a("form-select"),value:t.desiredRegion,onChange:s=>l("desiredRegion",s.target.value),onBlur:()=>o("desiredRegion"),children:[e.jsx("option",{value:"",children:"בחרו אזור"}),_.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})})]}),e.jsxs("div",{className:a("form-section"),children:[e.jsx("h2",{className:a("section-title"),children:"פרטים מקצועיים"}),e.jsxs("div",{className:a("form-row"),children:[e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"סטטוס מקצועי"}),e.jsxs("select",{className:a("form-select"),value:t.employmentType,onChange:s=>l("employmentType",s.target.value),onBlur:()=>o("employmentType"),children:[e.jsx("option",{value:"",children:"בחרו סטטוס"}),x.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"הכנסה חודשית ממוצעת"}),e.jsx("input",{type:"text",className:a("form-input"),placeholder:"25,000 ₪",value:t.monthlyIncome,onChange:s=>l("monthlyIncome",s.target.value),onBlur:()=>o("monthlyIncome")})]})]}),e.jsx("div",{className:a("form-row"),children:e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"שנות ניסיון בתחום המשפטי"}),e.jsxs("select",{className:a("form-select"),value:t.workExperience,onChange:s=>l("workExperience",s.target.value),onBlur:()=>o("workExperience"),children:[e.jsx("option",{value:"",children:"בחרו מספר שנים"}),e.jsx("option",{value:"0-2",children:"0-2 שנים"}),e.jsx("option",{value:"3-5",children:"3-5 שנים"}),e.jsx("option",{value:"6-10",children:"6-10 שנים"}),e.jsx("option",{value:"11-15",children:"11-15 שנים"}),e.jsx("option",{value:"16+",children:"16+ שנים"})]})]})})]}),e.jsxs("div",{className:a("form-section"),children:[e.jsx("h2",{className:a("section-title"),children:"מידע נוסף"}),e.jsxs("div",{className:a("form-row"),children:[e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"האם יש לכם ניסיון בייצוג לקוחות בהליכים משפטיים?"}),e.jsxs("select",{className:a("form-select"),value:t.clientLitigation,onChange:s=>l("clientLitigation",s.target.value),onBlur:()=>o("clientLitigation"),children:[e.jsx("option",{value:"",children:"בחרו תשובה"}),e.jsx("option",{value:"yes",children:"כן, ניסיון רב"}),e.jsx("option",{value:"some",children:"כן, ניסיון מוגבל"}),e.jsx("option",{value:"no",children:"לא"})]})]}),e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"האם יש לכם ניסיון בהליכי גביית חובות?"}),e.jsxs("select",{className:a("form-select"),value:t.debtLitigation,onChange:s=>l("debtLitigation",s.target.value),onBlur:()=>o("debtLitigation"),children:[e.jsx("option",{value:"",children:"בחרו תשובה"}),e.jsx("option",{value:"yes",children:"כן, ניסיון רב"}),e.jsx("option",{value:"some",children:"כן, ניסיון מוגבל"}),e.jsx("option",{value:"no",children:"לא"})]})]})]}),e.jsxs("div",{className:a("form-group"),children:[e.jsx("label",{className:a("form-label"),children:"הערות נוספות"}),e.jsx("textarea",{className:a("form-textarea"),placeholder:"ספרו לנו עוד על הרקע המקצועי שלכם ועל התחומים המעניינים אתכם...",rows:4,value:t.comments,onChange:s=>l("comments",s.target.value),onBlur:()=>o("comments")})]})]}),e.jsxs("div",{className:a("form-section"),children:[e.jsxs("div",{className:a("terms-section"),children:[e.jsxs("label",{className:a("checkbox-label"),children:[e.jsx("input",{type:"checkbox",className:a("checkbox",{error:i.termsAccepted&&r.termsAccepted}),checked:t.termsAccepted,onChange:s=>l("termsAccepted",s.target.checked),onBlur:()=>o("termsAccepted")}),e.jsx("span",{className:a("checkbox-text"),children:"אני מסכים/ה לתנאי השימוש ולמדיניות הפרטיות ומאשר/ת קבלת עדכונים מטעם TechRealt"})]}),i.termsAccepted&&r.termsAccepted&&e.jsx(b,{error:r.termsAccepted})]}),e.jsxs("div",{className:a("form-actions"),children:[e.jsx("button",{type:"button",className:a("form-button","form-button--secondary"),onClick:w,children:"חזרה"}),e.jsx("button",{type:"submit",className:a("form-button","form-button--primary"),disabled:!v(),children:"שליחת הטופס"})]})]})]})]})},te=()=>{const{i18n:c}=F(),_=L(),x=A(),[w,t]=g.useState([]),[N,r]=g.useState([]),[k,i]=g.useState([]),[l,o]=g.useState(!0),[v,s]=g.useState("");g.useEffect(()=>{(()=>{const p=new URLSearchParams(x.search).get("source");if(p){s(p);return}const h=x.state;if(h!=null&&h.source){s(h.source);return}const m=document.referrer;if(m)try{const n=new URL(m);n.pathname.includes("/tenders-for-lawyers")?s("tenders-for-lawyers-page"):n.pathname.includes("/temporary-franchise")?s("temporary-franchise-page"):s("external-referrer");return}catch{}const f=sessionStorage.getItem("lawyerFormSource");if(f){s(f);return}s("direct-navigation")})()},[x]),g.useEffect(()=>{v&&sessionStorage.setItem("lawyerFormSource",v)},[v]),g.useEffect(()=>{(async()=>{try{o(!0);const u=await fetch(`/api/get-cities?lang=${c.language}`);if(u.ok){const m=await u.json();if(m.status==="success"){const f=m.data.map(n=>({value:n.value||n.key,label:n.name}));t(f)}}const p=await fetch(`/api/get-regions?lang=${c.language}`);if(p.ok){const m=await p.json();if(m.status==="success"){const f=m.data.map(n=>({value:n.key,label:n.name}));r(f)}}const h=await fetch(`/api/get-professions?lang=${c.language}`);if(h.ok){const m=await h.json();if(m.status==="success"){const f=m.data.map(n=>({value:n.key,label:n.name}));i(f)}}}catch(u){console.error("Error fetching dropdown data:",u),t([{value:"tel_aviv",label:"תל אביב"},{value:"jerusalem",label:"ירושלים"},{value:"haifa",label:"חיפה"}]),r([{value:"center",label:"מחוז המרכז"},{value:"tel_aviv",label:"מחוז תל אביב"},{value:"jerusalem",label:"מחוז ירושלים"}]),i([{value:"lawyer",label:"עורך דין"},{value:"legal_advisor",label:"יועץ משפטי"},{value:"notary",label:"נוטריון"}])}finally{o(!1)}})()},[c.language]);const y=async(j,{setSubmitting:u})=>{const p={...j,source:v,submittedAt:new Date().toISOString(),referrer:document.referrer||"none"};,try{await V(p),_("/lawyer-success"),}catch(h){console.error("❌ Form submission error:",h)}finally{u(!1)}},S=()=>{_(-1)};if(l)return e.jsx("div",{className:a("lawyers-form",{rtl:c.language==="he"}),lang:c.language,children:e.jsx(B,{children:e.jsxs("div",{className:a("form-container"),children:[e.jsx("div",{className:a("form-header"),children:e.jsx("div",{className:a("logo"),children:e.jsx("img",{src:"/static/menu/header.png",alt:"Header",className:a("header-img")})})}),e.jsx("div",{className:a("form-content"),children:e.jsx("div",{className:a("loading-state"),children:"טוען נתונים..."})})]})})});const R={...J,source:v};return e.jsx("div",{className:a("lawyers-form",{rtl:c.language==="he"}),lang:c.language,children:e.jsx(B,{children:e.jsxs("div",{className:a("form-container"),children:[e.jsx("div",{className:a("form-header"),children:e.jsx("div",{className:a("logo"),children:e.jsx("img",{src:"/static/menu/header.png",alt:"Header",className:a("header-img")})})}),e.jsx(T,{initialValues:R,validationSchema:W(),validateOnMount:!1,onSubmit:y,children:e.jsx($,{children:e.jsx(z,{cities:w,regions:N,professions:k,onBack:S})})})]})})})};export{te as default};
