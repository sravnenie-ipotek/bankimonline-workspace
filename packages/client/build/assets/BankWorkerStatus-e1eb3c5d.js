import{j as e}from"./ui-vendor-5a9cd79c.js";import{k as w,f as C,r as d}from"./react-vendor-19e41fc0.js";import{c as k}from"./index-b94574b0.js";import{L as b,b as v,T as N,E as S,B as c}from"./index-79a992ab.js";import{b as y}from"./bankWorkerApi-9bbb88ad.js";import{u as I}from"./i18n-vendor-5cfd36a0.js";import"./state-vendor-2a767ce0.js";import"./utils-vendor-48989965.js";import"./form-vendor-3025b96d.js";import"./components-vendor-e60b5450.js";const T="_statusContainer_1fflh_7",R="_header_1fflh_18",A="_refreshButton_1fflh_24",E="_statusOverview_1fflh_39",L="_statusHeader_1fflh_46",H="_workerName_1fflh_52",M="_mainStatus_1fflh_58",O="_statusDetails_1fflh_72",W="_detailRow_1fflh_76",P="_label_1fflh_86",G="_value_1fflh_91",$="_statusBadge_1fflh_114",q="_timeline_1fflh_144",z="_timelineTitle_1fflh_147",F="_timelineItems_1fflh_153",J="_timelineItem_1fflh_153",K="_timelineIcon_1fflh_173",Q="_timelineContent_1fflh_183",U="_timelineItemTitle_1fflh_183",V="_timelineItemDate_1fflh_189",X="_timelineItemDescription_1fflh_194",Y="_rejectionReason_1fflh_199",Z="_adminComments_1fflh_200",ee="_nextSteps_1fflh_242",te="_nextStepsTitle_1fflh_249",se="_nextStepsDescription_1fflh_255",ne="_nextStepsActions_1fflh_261",ae="_actionButton_1fflh_266",ie="_footerActions_1fflh_282",re="_backButton_1fflh_287",oe="_accessButton_1fflh_288",le="_errorContainer_1fflh_302",ce="_errorActions_1fflh_306",me="_retryButton_1fflh_313",de="_errorMessage_1fflh_327",ue="_demoNotice_1fflh_449",fe={statusContainer:T,header:R,refreshButton:A,statusOverview:E,statusHeader:L,workerName:H,mainStatus:M,statusDetails:O,detailRow:W,label:P,value:G,statusBadge:$,"statusBadge--success":"_statusBadge--success_1fflh_123","statusBadge--warning":"_statusBadge--warning_1fflh_128","statusBadge--error":"_statusBadge--error_1fflh_133","statusBadge--neutral":"_statusBadge--neutral_1fflh_138",timeline:q,timelineTitle:z,timelineItems:F,timelineItem:J,timelineIcon:K,timelineContent:Q,timelineItemTitle:U,timelineItemDate:V,timelineItemDescription:X,rejectionReason:Y,adminComments:Z,"timelineItem--completed":"_timelineItem--completed_1fflh_216","timelineItem--pending":"_timelineItem--pending_1fflh_220","timelineItem--error":"_timelineItem--error_1fflh_224",nextSteps:ee,nextStepsTitle:te,nextStepsDescription:se,nextStepsActions:ne,actionButton:ae,footerActions:ie,backButton:re,accessButton:oe,errorContainer:le,errorActions:ce,retryButton:me,errorMessage:de,demoNotice:ue},t=k.bind(fe),he=({status:m,className:i})=>{const{t:s}=I(),f=(r=>{switch(r.toLowerCase()){case"pending":return{color:"warning",text:s("status.pending")};case"approved":return{color:"success",text:s("status.approved")};case"rejected":return{color:"error",text:s("status.rejected")};case"active":return{color:"success",text:s("status.active")};case"inactive":return{color:"neutral",text:s("status.inactive")};default:return{color:"neutral",text:r}}})(m);return e.jsx("span",{className:t("statusBadge",`statusBadge--${f.color}`,i),children:f.text})},De=()=>{const{id:m}=w(),i=C(),{t:s,i18n:u}=I(),[f,r]=d.useState(!0),[n,B]=d.useState(null),[h,p]=d.useState(null),[_,x]=d.useState(!1),j=async(l=!1)=>{if(!m){p(s("errors.invalidWorkerId")),r(!1);return}try{l?x(!0):r(!0);const a=await y.getWorkerStatus(m);a.status==="success"&&a.data?(B(a.data),p(null)):p(a.message||s("errors.failedToLoadStatus"))}catch(a){console.error("Error loading worker status:",a),p(a.message||s("errors.networkError"))}finally{r(!1),x(!1)}};d.useEffect(()=>{j()},[m,s]);const g=()=>{j(!0)},D=l=>{switch(l.status.toLowerCase()){case"pending":return{title:s("nextSteps.pending.title"),description:s("nextSteps.pending.description"),actions:[{text:s("nextSteps.pending.contactAdmin"),action:()=>window.location.href="mailto:admin@bankimonline.com"}]};case"approved":return{title:s("nextSteps.approved.title"),description:s("nextSteps.approved.description"),actions:[{text:s("nextSteps.approved.accessSystem"),action:()=>i("/personal-cabinet")}]};case"rejected":return{title:s("nextSteps.rejected.title"),description:s("nextSteps.rejected.description"),actions:[{text:s("nextSteps.rejected.contactSupport"),action:()=>window.location.href="mailto:support@bankimonline.com"}]};default:return null}};if(f)return e.jsx(b,{});if(h&&!n)return e.jsx(v,{children:e.jsxs("div",{className:t("errorContainer"),children:[e.jsx(N,{title:s("status.error.title")}),e.jsx(S,{message:h}),e.jsxs("div",{className:t("errorActions"),children:[e.jsx(c,{variant:"primary",onClick:()=>i("/"),className:t("backButton"),children:s("common.backToHome")}),e.jsx(c,{variant:"secondary",onClick:g,className:t("retryButton"),children:s("common.retry")})]})]})});if(!n)return null;const o=D(n);return e.jsx(v,{children:e.jsxs("div",{className:t("statusContainer"),children:[e.jsxs("div",{className:t("header"),children:[e.jsx(N,{title:s("status.title"),tooltip:s("status.tooltip")}),e.jsx(c,{variant:"secondary",onClick:g,disabled:_,className:t("refreshButton"),children:s(_?"common.refreshing":"common.refresh")})]}),e.jsxs("div",{className:t("statusOverview"),children:[e.jsxs("div",{className:t("statusHeader"),children:[e.jsx("h2",{className:t("workerName"),children:n.fullName}),e.jsx(he,{status:n.status,className:t("mainStatus")})]}),e.jsxs("div",{className:t("statusDetails"),children:[e.jsxs("div",{className:t("detailRow"),children:[e.jsxs("span",{className:t("label"),children:[s("status.fields.position"),":"]}),e.jsx("span",{className:t("value"),children:n.position})]}),e.jsxs("div",{className:t("detailRow"),children:[e.jsxs("span",{className:t("label"),children:[s("status.fields.bank"),":"]}),e.jsx("span",{className:t("value"),children:n.bankName})]}),e.jsxs("div",{className:t("detailRow"),children:[e.jsxs("span",{className:t("label"),children:[s("status.fields.branch"),":"]}),e.jsx("span",{className:t("value"),children:n.branchName})]}),e.jsxs("div",{className:t("detailRow"),children:[e.jsxs("span",{className:t("label"),children:[s("status.fields.registrationDate"),":"]}),e.jsx("span",{className:t("value"),children:new Date(n.registrationDate).toLocaleDateString(u.language,{year:"numeric",month:"long",day:"numeric"})})]})]})]}),e.jsxs("div",{className:t("timeline"),children:[e.jsx("h3",{className:t("timelineTitle"),children:s("status.timeline.title")}),e.jsxs("div",{className:t("timelineItems"),children:[e.jsxs("div",{className:t("timelineItem","timelineItem--completed"),children:[e.jsx("div",{className:t("timelineIcon")}),e.jsxs("div",{className:t("timelineContent"),children:[e.jsx("h4",{className:t("timelineItemTitle"),children:s("status.timeline.registration")}),e.jsx("p",{className:t("timelineItemDate"),children:new Date(n.registrationDate).toLocaleDateString(u.language,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:t("timelineItem",{"timelineItem--completed":n.approvalDate||n.rejectionDate,"timelineItem--pending":!n.approvalDate&&!n.rejectionDate,"timelineItem--error":n.rejectionDate}),children:[e.jsx("div",{className:t("timelineIcon")}),e.jsxs("div",{className:t("timelineContent"),children:[e.jsx("h4",{className:t("timelineItemTitle"),children:n.approvalDate?s("status.timeline.approved"):n.rejectionDate?s("status.timeline.rejected"):s("status.timeline.pendingApproval")}),(n.approvalDate||n.rejectionDate)&&e.jsx("p",{className:t("timelineItemDate"),children:new Date(n.approvalDate||n.rejectionDate).toLocaleDateString(u.language,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),n.rejectionReason&&e.jsxs("p",{className:t("rejectionReason"),children:[e.jsxs("strong",{children:[s("status.rejectionReason"),":"]})," ",n.rejectionReason]}),n.adminComments&&e.jsxs("p",{className:t("adminComments"),children:[e.jsxs("strong",{children:[s("status.adminComments"),":"]})," ",n.adminComments]})]})]}),n.approvalDate&&e.jsxs("div",{className:t("timelineItem",{"timelineItem--completed":n.status==="active","timelineItem--pending":n.status!=="active"}),children:[e.jsx("div",{className:t("timelineIcon")}),e.jsxs("div",{className:t("timelineContent"),children:[e.jsx("h4",{className:t("timelineItemTitle"),children:s("status.timeline.systemAccess")}),e.jsx("p",{className:t("timelineItemDescription"),children:n.status==="active"?s("status.timeline.accessGranted"):s("status.timeline.accessPending")})]})]})]})]}),o&&e.jsxs("div",{className:t("nextSteps"),children:[e.jsx("h3",{className:t("nextStepsTitle"),children:o.title}),e.jsx("p",{className:t("nextStepsDescription"),children:o.description}),o.actions&&o.actions.length>0&&e.jsx("div",{className:t("nextStepsActions"),children:o.actions.map((l,a)=>e.jsx(c,{variant:"primary",onClick:l.action,className:t("actionButton"),children:l.text},a))})]}),h&&e.jsx("div",{className:t("errorMessage"),children:e.jsx(S,{message:h})}),e.jsxs("div",{className:t("footerActions"),children:[e.jsx(c,{variant:"secondary",onClick:()=>i("/"),className:t("backButton"),children:s("common.backToHome")}),n.status==="approved"&&e.jsx(c,{variant:"primary",onClick:()=>i("/personal-cabinet"),className:t("accessButton"),children:s("status.accessSystem")})]})]})})};export{De as BankWorkerStatus,De as default};
