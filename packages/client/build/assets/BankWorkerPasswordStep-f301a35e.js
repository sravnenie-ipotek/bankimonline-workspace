import{j as e}from"./ui-vendor-5a9cd79c.js";import{f as B,r as c}from"./react-vendor-19e41fc0.js";import{a as I,c as _,e as y,i as M,F as W,b as F,k as l,E as d}from"./form-vendor-429348f6.js";import{Q as h}from"./components-vendor-e60b5450.js";import{c as L}from"./index-82c03faf.js";import{u as R}from"./i18n-vendor-5cfd36a0.js";import"./utils-vendor-48989965.js";import"./state-vendor-2a767ce0.js";const q="_container_zwxzw_14",V="_header_zwxzw_27",P="_logo_zwxzw_41",Z="_languageSelector_zwxzw_48",D="_languageText_zwxzw_61",E="_chevronDown_zwxzw_67",$="_pageBackground_zwxzw_72",A="_signUpForm_zwxzw_85",H="_titleSection_zwxzw_101",O="_mainTitle_zwxzw_106",U="_subtitle_zwxzw_115",J="_stepperNavigation_zwxzw_122",Q="_navigation_zwxzw_126",G="_navItemStepper_zwxzw_133",K="_completed_zwxzw_138",X="_shape_zwxzw_138",Y="_stepText_zwxzw_143",ee="_active_zwxzw_146",se="_stepNumber_zwxzw_174",te="_checkIcon_zwxzw_185",ne="_chevronRight_zwxzw_190",ae="_containerWithForms_zwxzw_194",oe="_firstRow_zwxzw_198",re="_thirdRow_zwxzw_199",ie="_inputField_zwxzw_212",ce="_label_zwxzw_219",le="_input_zwxzw_212",de="_content_zwxzw_232",_e="_inputText_zwxzw_249",he="_selectInput_zwxzw_250",pe="_lockIcon_zwxzw_287",xe="_chevronDownIcon_zwxzw_288",me="_eyeButton_zwxzw_299",we="_line_zwxzw_318",ue="_checkboxContainer_zwxzw_324",ke="_checkboxRow_zwxzw_330",ge="_checkbox_zwxzw_324",ve="_labelAndHelperText_zwxzw_360",be="_checkboxLabel_zwxzw_365",je="_termsLink_zwxzw_375",Ne="_submitButton_zwxzw_384",ze="_disabled_zwxzw_408",fe="_buttonText_zwxzw_419",Ce="_loginLink_zwxzw_424",Se="_loginButton_zwxzw_430",Te="_errorMessage_zwxzw_449",Be="_supportWidget_zwxzw_458",Ie="_supportButton_zwxzw_471",ye="_demoNotice_zwxzw_498",Me="_loadingInput_zwxzw_591",We={container:q,header:V,logo:P,languageSelector:Z,languageText:D,chevronDown:E,pageBackground:$,signUpForm:A,titleSection:H,mainTitle:O,subtitle:U,stepperNavigation:J,navigation:Q,navItemStepper:G,completed:K,shape:X,stepText:Y,active:ee,stepNumber:se,checkIcon:te,chevronRight:ne,containerWithForms:ae,firstRow:oe,thirdRow:re,inputField:ie,label:ce,input:le,content:de,inputText:_e,selectInput:he,lockIcon:pe,chevronDownIcon:xe,eyeButton:me,line:we,checkboxContainer:ue,checkboxRow:ke,checkbox:ge,labelAndHelperText:ve,checkboxLabel:be,termsLink:je,submitButton:Ne,disabled:ze,buttonText:fe,loginLink:Ce,loginButton:Se,errorMessage:Te,supportWidget:Be,supportButton:Ie,demoNotice:ye,loadingInput:Me},s=L.bind(We),Ee=()=>{const{t,i18n:p}=R(),g=B(),[b,j]=c.useState([]),[N,v]=c.useState(!0),[x,m]=c.useState(!1),[w,z]=c.useState(!1),[u,f]=c.useState(!1);c.useEffect(()=>{(async()=>{try{v(!0);const o=await(await fetch("/api/banks/list")).json();if(o.status==="success"&&o.data){const i=o.data.map(n=>({id:n.id.toString(),name:n.name_en||n.name_he||n.name_ru||`Bank ${n.id}`}));j(i)}else console.error("Failed to load banks:",o.message),h.error(t("errors.loading_banks"))}catch(r){console.error("Error loading banks:",r),h.error(t("errors.loading_banks"))}finally{v(!1)}})()},[t]);const C=I({fullName:_().min(2,t("bank_worker_validation_name_min")).max(100,t("bank_worker_validation_name_max")).required(t("bank_worker_validation_name_required")),position:_().min(2,t("bank_worker_validation_position_min")).max(100,t("bank_worker_validation_position_max")).required(t("bank_worker_validation_position_required")),selectedService:_().required(t("bank_worker_validation_bank_required")),password:_().min(8,t("bank_worker_validation_password_min")).matches(/[A-Z]/,t("bank_worker_validation_password_uppercase")).matches(/[a-z]/,t("bank_worker_validation_password_lowercase")).matches(/[0-9]/,t("bank_worker_validation_password_number")).matches(/[!@#$%^&*(),.?":{}|<>]/,t("bank_worker_validation_password_special")).required(t("bank_worker_validation_password_required")),confirmPassword:_().oneOf([y("password")],t("bank_worker_validation_password_match")).required(t("bank_worker_validation_password_repeat_required")),acceptTerms:M().oneOf([!0],t("bank_worker_validation_terms_required")).required(t("bank_worker_validation_terms_required"))}),S=async a=>{try{m(!0);const r={fullName:a.fullName.trim(),position:a.position.trim(),corporateEmail:`${a.fullName.toLowerCase().replace(/\s+/g,".")}@bank.com`,bankId:parseInt(a.selectedService),branchId:1,bankNumber:Math.floor(Math.random()*1e6).toString(),termsAccepted:a.acceptTerms,password:a.password,selectedServices:[]},o=await fetch("/api/bank-employee/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await o.json();if(o.ok&&i.status==="success")h.success(t("bank_partner_registration_success")),g(`/bank-partner/status/${i.data.id}`);else{const n=i.message||t("errors.registration_failed");h.error(n),m(!1)}}catch(r){console.error("Registration error:",r),h.error(t("errors.registration_failed")),m(!1)}},T=()=>{g("/auth")};return e.jsxs("div",{className:s("container"),children:[e.jsxs("div",{className:s("header"),children:[e.jsx("div",{className:s("logo"),children:e.jsx("span",{children:"BankIM"})}),e.jsxs("div",{className:s("languageSelector"),children:[e.jsx("span",{className:s("languageText"),children:p.language==="ru"?"Русский":p.language==="he"?"עברית":"English"}),e.jsx("svg",{className:s("chevronDown"),width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"1.33"})})]})]}),e.jsx("div",{className:s("pageBackground"),children:e.jsxs("div",{className:s("signUpForm"),children:[e.jsxs("div",{className:s("titleSection"),children:[e.jsx("h1",{className:s("mainTitle"),children:t("bank_partner_registration")}),e.jsx("p",{className:s("subtitle"),children:t("bank_partner_welcome")})]}),e.jsx("div",{className:s("stepperNavigation"),children:e.jsxs("div",{className:s("navigation"),children:[e.jsxs("div",{className:s("navItemStepper","completed"),children:[e.jsx("div",{className:s("shape","completed"),children:e.jsx("svg",{className:s("checkIcon"),width:"12",height:"12",viewBox:"0 0 12 12",children:e.jsx("path",{d:"M2 6L5 9L10 3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),e.jsx("span",{className:s("stepText"),children:t("bank_worker_basic_info")})]}),e.jsx("div",{className:s("chevronRight"),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M6 4L10 8L6 12",stroke:"currentColor",strokeWidth:"1.33"})})}),e.jsxs("div",{className:s("navItemStepper","active"),children:[e.jsx("div",{className:s("shape","active"),children:e.jsx("span",{className:s("stepNumber"),children:"2"})}),e.jsx("span",{className:s("stepText"),children:t("bank_worker_service_selection")})]})]})}),e.jsx("div",{className:s("containerWithForms"),children:e.jsx(W,{initialValues:{fullName:"",position:"",selectedService:"",password:"",confirmPassword:"",acceptTerms:!1},validationSchema:C,onSubmit:S,children:({values:a,setFieldValue:r,errors:o,touched:i,isValid:n})=>e.jsxs(F,{children:[e.jsx("div",{className:s("firstRow"),children:e.jsxs("div",{className:s("inputField"),children:[e.jsx("label",{className:s("label"),children:t("bank_partner_full_name")}),e.jsx("div",{className:s("input"),children:e.jsxs("div",{className:s("content"),children:[e.jsxs("svg",{className:s("userIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M8 8C10.21 8 12 6.21 12 4C12 1.79 10.21 0 8 0C5.79 0 4 1.79 4 4C4 6.21 5.79 8 8 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("path",{d:"M8 10C4.69 10 2 12.69 2 16H14C14 12.69 11.31 10 8 10Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(l,{type:"text",name:"fullName",placeholder:t("bank_partner_full_name_placeholder"),className:s("inputText")})]})}),e.jsx(d,{name:"fullName",component:"div",className:s("errorMessage")})]})}),e.jsx("div",{className:s("secondRow"),children:e.jsxs("div",{className:s("inputField"),children:[e.jsx("label",{className:s("label"),children:t("bank_partner_position")}),e.jsx("div",{className:s("input"),children:e.jsxs("div",{className:s("content"),children:[e.jsxs("svg",{className:s("briefcaseIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("rect",{x:"2",y:"4",width:"12",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("path",{d:"M6 4V2C6 1.45 6.45 1 7 1H9C9.55 1 10 1.45 10 2V4",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(l,{type:"text",name:"position",placeholder:t("bank_partner_position_placeholder"),className:s("inputText")})]})}),e.jsx(d,{name:"position",component:"div",className:s("errorMessage")})]})}),e.jsx("div",{className:s("thirdRow"),children:e.jsxs("div",{className:s("inputField"),children:[e.jsx("label",{className:s("label"),children:t("bank_partner_service_selection")}),e.jsx("div",{className:s("input"),children:e.jsxs("div",{className:s("content"),children:[e.jsxs(l,{as:"select",name:"selectedService",className:s("selectInput"),disabled:N,children:[e.jsx("option",{value:"",children:t("bank_partner_service_selection_placeholder")}),b.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]}),e.jsx("svg",{className:s("chevronDownIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"1.33"})})]})}),e.jsx(d,{name:"selectedService",component:"div",className:s("errorMessage")})]})}),e.jsx("div",{className:s("line")}),e.jsxs("div",{className:s("fourthRow"),children:[e.jsxs("div",{className:s("inputField"),children:[e.jsx("label",{className:s("label"),children:t("bank_partner_password")}),e.jsx("div",{className:s("input"),children:e.jsxs("div",{className:s("content"),children:[e.jsxs("svg",{className:s("lockIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M4 7V5C4 2.79 5.79 1 8 1C10.21 1 12 2.79 12 5V7",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("rect",{x:"3",y:"7",width:"10",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(l,{type:w?"text":"password",name:"password",placeholder:t("bank_partner_password_placeholder"),className:s("inputText")}),e.jsx("button",{type:"button",className:s("eyeButton"),onClick:()=>z(!w),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:[w?e.jsx("path",{d:"M1.33 8S3.33 4 8 4S14.67 8 14.67 8S12.67 12 8 12S1.33 8 1.33 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}):e.jsx("path",{d:"M1.33 8S3.33 4 8 4S14.67 8 14.67 8S12.67 12 8 12S1.33 8 1.33 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("circle",{cx:"8",cy:"8",r:"2",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]})})]})}),e.jsx(d,{name:"password",component:"div",className:s("errorMessage")})]}),e.jsxs("div",{className:s("inputField"),children:[e.jsx("label",{className:s("label"),children:t("bank_partner_confirm_password")}),e.jsx("div",{className:s("input"),children:e.jsxs("div",{className:s("content"),children:[e.jsxs("svg",{className:s("lockIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M4 7V5C4 2.79 5.79 1 8 1C10.21 1 12 2.79 12 5V7",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("rect",{x:"3",y:"7",width:"10",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(l,{type:u?"text":"password",name:"confirmPassword",placeholder:t("bank_partner_confirm_password_placeholder"),className:s("inputText")}),e.jsx("button",{type:"button",className:s("eyeButton"),onClick:()=>f(!u),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:[u?e.jsx("path",{d:"M1.33 8S3.33 4 8 4S14.67 8 14.67 8S12.67 12 8 12S1.33 8 1.33 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}):e.jsx("path",{d:"M1.33 8S3.33 4 8 4S14.67 8 14.67 8S12.67 12 8 12S1.33 8 1.33 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("circle",{cx:"8",cy:"8",r:"2",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]})})]})}),e.jsx(d,{name:"confirmPassword",component:"div",className:s("errorMessage")})]})]}),e.jsxs("div",{className:s("checkboxContainer"),children:[e.jsxs("div",{className:s("checkboxRow"),children:[e.jsx(l,{type:"checkbox",id:"acceptTerms",name:"acceptTerms",className:s("checkbox")}),e.jsx("div",{className:s("labelAndHelperText"),children:e.jsx("label",{htmlFor:"acceptTerms",className:s("checkboxLabel"),children:p.language==="he"?e.jsxs(e.Fragment,{children:["אני מסכים ",e.jsx("span",{className:s("termsLink"),children:"לכללי הפלטפורמה"})]}):t("bank_partner_accept_terms")})})]}),e.jsx(d,{name:"acceptTerms",component:"div",className:s("errorMessage")})]}),e.jsx("button",{type:"submit",className:s("submitButton",{disabled:!n||x}),disabled:!n||x,children:e.jsx("span",{className:s("buttonText"),children:t(x?"loading":"bank_partner_complete_registration")})}),e.jsx("div",{className:s("line")}),e.jsx("div",{className:s("loginLink"),children:e.jsx("button",{type:"button",onClick:T,className:s("loginButton"),children:t("bank_partner_already_registered")})})]})})})]})}),e.jsx("div",{className:s("supportWidget"),children:e.jsx("button",{className:s("supportButton"),title:t("common.support"),children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M12 2C13.1046 2 14 2.89543 14 4V8C14 9.10457 13.1046 10 12 10C10.8954 10 10 9.10457 10 8V4C10 2.89543 10.8954 2 12 2Z",fill:"currentColor"}),e.jsx("path",{d:"M4 12C4 7.58172 7.58172 4 12 4V6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18V20C7.58172 20 4 16.4183 4 12Z",fill:"currentColor"}),e.jsx("path",{d:"M20 12C20 16.4183 16.4183 20 12 20V18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6V4C16.4183 4 20 7.58172 20 12Z",fill:"currentColor"})]})})}),e.jsxs("div",{className:s("demoNotice"),children:[e.jsx("h3",{children:t("bank_worker_demo_notice")}),e.jsx("p",{children:t("bank_worker_demo_description")})]})]})};export{Ee as BankWorkerPasswordStep,Ee as default};
