import{j as e}from"./ui-vendor-5a9cd79c.js";import{r as y,f as q,b as ne,j as re,k as ge}from"./react-vendor-19e41fc0.js";import{a as R,E as L,D as v,T as oe,b as V,A as xe,L as fe}from"./index-edeff406.js";import{P as je}from"./ProgressBar-fde3ea89.js";import{u as w,a as C,k as Z,D as M,m as we,d as me,n as i,o as ye,p as be,q as Pe,r as Me,t as ve,v as Oe,w as Se,x as Ie,y as qe,z as Ce,A as ie,B as Ae,N as De}from"./index-bc53121f.js";import{u as te,F as $,b as z,a as F,c as d,f as b,g as se}from"./form-vendor-429348f6.js";import{V as Fe}from"./VideoPoster-aa40ed31.js";import{S as le,a as Ne,M as Be,U as Ee,A as Le,F as ke,B as Te,b as Ye,c as Re,O as Ve}from"./SourceOfIncomeModal-19002273.js";import{C as u}from"./Column-b52dd59a.js";import{D as k}from"./DropdownMenu-c93145d6.js";import{F as W}from"./FormContainer-9a7a5b29.js";import{F as ce}from"./FormattedInput-d86805f8.js";import{R as j}from"./Row-69bcb767.js";import{I as $e,c as T}from"./IncreasePayment-c8ed01ee.js";import{F as U}from"./FormCaption-6b61470d.js";import{Y as ze,N as We,B as Ue,E as He,A as Ge,T as Je,C as Ke,M as Qe,I as Xe,P as Ze}from"./Taxes-d786bc93.js";import{u as A}from"./i18n-vendor-5cfd36a0.js";import{D as ae}from"./DoubleButtons-3f20ba9f.js";import{U as I,A as Y}from"./AddButton-9bc99600.js";import{R as eo}from"./RowTwo-8e3b11d2.js";import{B as oo,P as to,A as ao}from"./PartnerPayMortgage-049556f7.js";import{C as no,a as ro,H as io}from"./HowMuchChildrens-9060e1e8.js";import{F as so}from"./FamilyStatus-4386c1d9.js";import{I as lo}from"./Info-173466ba.js";import{M as co,c as de,A as uo,a as _o,O as mo,b as ue,g as ee}from"./componentsByIncomeSource-e02feca6.js";import"./components-vendor-e60b5450.js";import"./utils-vendor-48989965.js";import"./state-vendor-2a767ce0.js";import"./MortgageParameters-601395ac.js";import"./PercentIcon-69cb9491.js";import"./useDropdownData-1abe74c0.js";import"./Control-ac74aeaf.js";import"./Calendar-2ac6e5e2.js";import"./ShieldCheckIcon-a0d68f8f.js";const po=()=>{const[o,_]=y.useState(51130),[t,l]=y.useState(2654),[s,p]=y.useState([]),{t:a,i18n:f}=A(),{getContent:r}=R("calculate_credit_1"),H=y.useMemo(()=>[{value:"option_1",label:r("calculate_credit_target_option_1",a("calculate_credit_target_option_1"))},{value:"option_2",label:r("calculate_credit_target_option_2",a("calculate_credit_target_option_2"))},{value:"option_3",label:r("calculate_credit_target_option_3",a("calculate_credit_target_option_3"))},{value:"option_4",label:r("calculate_credit_target_option_4",a("calculate_credit_target_option_4"))},{value:"option_5",label:r("calculate_credit_target_option_5",a("calculate_credit_target_option_5"))},{value:"option_6",label:r("calculate_credit_target_option_6",a("calculate_credit_target_option_6"))}],[r,a]),G=y.useMemo(()=>[{value:"option_1",label:r("calculate_mortgage_when_options_1",a("calculate_mortgage_when_options_1"))},{value:"option_2",label:r("calculate_mortgage_when_options_2",a("calculate_mortgage_when_options_2"))},{value:"option_3",label:r("calculate_mortgage_when_options_3",a("calculate_mortgage_when_options_3"))},{value:"option_4",label:r("calculate_mortgage_when_options_4",a("calculate_mortgage_when_options_4"))}],[r,a]),J=y.useMemo(()=>[{value:"option_1",label:r("calculate_credit_prolong_option_1",a("calculate_credit_prolong_option_1"))},{value:"option_2",label:r("calculate_credit_prolong_option_2",a("calculate_credit_prolong_option_2"))},{value:"option_3",label:r("calculate_credit_prolong_option_3",a("calculate_credit_prolong_option_3"))},{value:"option_4",label:r("calculate_credit_prolong_option_4",a("calculate_credit_prolong_option_4"))},{value:"option_5",label:r("calculate_credit_prolong_option_5",a("calculate_credit_prolong_option_5"))},{value:"option_6",label:r("calculate_credit_prolong_option_6",a("calculate_credit_prolong_option_6"))},{value:"option_7",label:r("calculate_credit_prolong_option_7",a("calculate_credit_prolong_option_7"))}],[r,a]),{setFieldValue:h,values:c,errors:g,touched:O,setFieldTouched:S}=te(),N=w(m=>m.activeField),D=C();y.useEffect(()=>{(async()=>{try{const P=await(await fetch(`/api/get-cities?lang=${f.language}`)).json();if(P.status==="success"){const X=P.data.map(B=>({value:B.value,label:B.name}));p(X)}else console.error("Failed to fetch cities:",P.message)}catch(x){console.error("Error fetching cities:",x)}})()},[f.language]);const K=m=>{D(Z("period")),h("period",m)},Q=m=>{D(Z("monthlyPayment")),h("monthlyPayment",m)};return y.useEffect(()=>{(async()=>{try{if(N==="period"){const x=await T.calculateCreditPayment(c.loanAmount,c.period);Number.isNaN(x)||h("monthlyPayment",x)}else{const x=await T.calculateLoanPeriod(c.loanAmount,0,c.monthlyPayment);Number.isNaN(x)||h("period",x)}}catch(x){console.error("❌ Error calculating credit values:",x)}})()},[N,h,c.loanAmount,c.monthlyPayment,c.period]),y.useLayoutEffect(()=>{(async()=>{try{const x=await T.calculateCreditPayment(c.loanAmount,1),P=await T.calculateCreditPayment(c.loanAmount,30);Number.isNaN(x)||_(x),x===0&&_(1),Number.isNaN(P)||l(P)}catch(x){console.error("❌ Error calculating payment limits:",x),_(51130),l(2654)}})()},[c.loanAmount]),e.jsx(e.Fragment,{children:e.jsxs(W,{children:[e.jsx(U,{title:a("sidebar_sub_calculate_credit")}),e.jsxs(j,{children:[e.jsx(u,{children:e.jsx(k,{title:r("calculate_why",a("calculate_why")),data:H,placeholder:r("calculate_credit_target_ph",a("calculate_credit_target_ph")),value:c.purposeOfLoan,onChange:m=>h("purposeOfLoan",m),onBlur:()=>S("purposeOfLoan",!0),error:O.purposeOfLoan&&g.purposeOfLoan})}),e.jsxs(u,{children:[e.jsx(ce,{handleChange:m=>{D(Z("period")),h("loanAmount",m)},name:"loanAmount",title:r("calculate_amount",a("calculate_amount")),value:c.loanAmount,placeholder:"1,000,000",error:g.loanAmount}),g.loanAmount&&e.jsx(L,{error:g.loanAmount})]}),e.jsx(u,{children:e.jsx(k,{title:r("calculate_when",a("calculate_when")),data:G,placeholder:r("calculate_mortgage_when_options_Time",a("calculate_mortgage_when_options_Time")),value:c.whenDoYouNeedMoney,onChange:m=>h("whenDoYouNeedMoney",m),onBlur:()=>S("whenDoYouNeedMoney",!0),error:O.whenDoYouNeedMoney&&g.whenDoYouNeedMoney})})]}),e.jsx(j,{children:e.jsx(u,{children:e.jsx(k,{title:r("calculate_prolong",a("calculate_prolong")),data:J,placeholder:r("calculate_credit_prolong_ph",a("calculate_credit_prolong_ph")),value:c.loanDeferral,onChange:m=>h("loanDeferral",m),onBlur:()=>S("loanDeferral",!0),error:O.loanDeferral&&g.loanDeferral})})}),c.purposeOfLoan&&c.purposeOfLoan==="option_2"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(ce,{handleChange:m=>{h("priceOfEstate",m)},name:"PriceOfEstate",title:a("calculate_mortgage_price"),value:c.priceOfEstate,placeholder:"1,000,000",error:g.priceOfEstate}),g.priceOfEstate&&e.jsx(L,{error:g.priceOfEstate})]}),e.jsx(u,{children:e.jsx(k,{title:a("calculate_mortgage_city"),data:s,placeholder:a("city"),value:c.cityWhereYouBuy,onChange:m=>h("cityWhereYouBuy",m),onBlur:()=>S("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:a("search"),nothingFoundText:a("nothing_found"),error:O.cityWhereYouBuy&&g.cityWhereYouBuy})}),e.jsxs(u,{children:[e.jsx(oe,{title:a("have_mortgage_title")}),e.jsx(ze,{value:c.haveMortgage,onChange:m=>h("haveMortgage",m),error:O.haveMortgage&&g.haveMortgage})]})]})]}),e.jsx(v,{}),e.jsxs(j,{children:[e.jsxs(u,{children:[e.jsx(le,{disableCurrency:!0,unitsMax:a("calculate_mortgage_period_units_max"),unitsMin:a("calculate_mortgage_period_units_min"),value:c.period,name:"Period",min:1,max:30,error:g.period,title:a("calculate_mortgage_period"),handleChange:K}),g.period&&e.jsx(L,{error:g.period})]}),e.jsxs(u,{children:[e.jsx(le,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:t,max:o,error:g.monthlyPayment,title:a("calculate_mortgage_initial_payment"),handleChange:Q,value:c.monthlyPayment}),e.jsx($e,{}),g.monthlyPayment&&e.jsx(L,{error:g.monthlyPayment})]}),e.jsx(u,{})]})]})})},ho=()=>F().shape({purposeOfLoan:d().required(i("error_select_answer","Please select an answer")),loanAmount:b().when("purposeOfLoan",{is:"option_6",then:o=>o.max(1e6,i("error_loan_of_amount_credit_max_1000000","Maximum loan amount is 1,000,000 NIS")),otherwise:o=>o.max(2e5,i("error_loan_of_amount_credit_max_200000","Maximum loan amount is 200,000 NIS"))}).required(i("error_required_to_fill_out","This field is required")),whenDoYouNeedMoney:d().required(i("error_select_answer","Please select an answer")),loanDeferral:d().required(i("error_select_answer","Please select an answer")),priceOfEstate:b().when("purposeOfLoan",{is:"option_2",then:o=>o.required(i("error_required_to_fill_out","This field is required")),otherwise:o=>o.notRequired()}),cityWhereYouBuy:d().when("purposeOfLoan",{is:"option_2",then:o=>o.required(i("error_select_answer","Please select an answer")),otherwise:o=>o.notRequired()}),haveMortgage:d().when("purposeOfLoan",{is:"option_2",then:o=>o.required(i("error_select_answer","Please select an answer")),otherwise:o=>o.notRequired()}),period:b().min(1,i("error_min_credit_period","Minimum period is 1 year")).max(30,i("error_max_credit_period","Maximum period is 30 years")).required(i("error_required_to_fill_out","This field is required")),monthlyPayment:b().required(i("error_required_to_fill_out","This field is required"))}),go=()=>{const{t:o,i18n:_}=A(),t=C(),l=q(),s=w(f=>f.credit),p=w(f=>f.login.isLogin),a={purposeOfLoan:s.purposeOfLoan||"",loanAmount:s.loanAmount||2e5,whenDoYouNeedMoney:s.whenDoYouNeedMoney||"",loanDeferral:s.loanDeferral||"",priceOfEstate:s.priceOfEstate||null,cityWhereYouBuy:s.cityWhereYouBuy||"",haveMortgage:s.haveMortgage||null,period:s.period||30,monthlyPayment:s.monthlyPayment||5368};return e.jsxs(e.Fragment,{children:[e.jsx($,{initialValues:a,validationSchema:ho(),validateOnMount:!0,onSubmit:f=>{t(M(f)),p?f.purposeOfLoan==="option_2"&&f.haveMortgage==="yes"?l("/services/refinance-mortgage/1"):l("/services/calculate-credit/2"):(t(we()),t(me("phoneVerification")))},children:e.jsxs(z,{children:[e.jsxs(V,{children:[e.jsx(Fe,{title:o("sidebar_sub_calculate_credit"),text:o("calculate_mortgage_banner_subtext"),size:"small"}),e.jsx(po,{})]}),e.jsx(Ne,{})]})}),e.jsx(Be,{}),e.jsx(xe,{})]})},xo=()=>{const{t:o,i18n:_}=A(),{getContent:t}=R("mortgage_step4"),l=w(p=>p.login.loginData),s=w(p=>p.credit);return e.jsxs(W,{children:[e.jsx(U,{title:t("calculate_credit_final",o("calculate_credit_final"))}),e.jsx(Ee,{credit:s.loanAmount,nameSurname:l==null?void 0:l.nameSurname,phoneNumber:l==null?void 0:l.phoneNumber}),e.jsx(Le,{text:t("calculate_credit_warning",o("calculate_credit_warning"))}),e.jsx(j,{children:e.jsx(ke,{})}),e.jsx(Te,{})]})},fo={selectedBank:"",selectedOffer:null},jo=F().shape({selectedBank:d(),selectedOffer:F().nullable()}),wo=()=>{const o=C(),_=q(),t=w(s=>s.login.loginData),l=w(s=>s.login.isLogin);return e.jsx($,{initialValues:fo,validationSchema:jo,validateOnMount:!0,onSubmit:s=>{console.log("Saving credit data and proceeding...",s),o(M(s)),!l||!(t!=null&&t.phoneNumber)?(console.log("User not authenticated, opening auth modal"),o(ye()),o(me("signUp"))):(console.log("User authenticated, proceeding to application"),_("/services/application-submitted"))},children:e.jsxs(z,{children:[e.jsx(V,{children:e.jsx(xo,{})}),e.jsx(ae,{})]})})},yo=()=>{const{t:o,i18n:_}=A(),{getContent:t}=R("calculate_credit_2"),{values:l}=te(),s=w(p=>p.login.loginData);return e.jsxs(W,{children:[e.jsx(U,{title:t("calculate_credit_step2_title",o("calculate_mortgage_step2_title"))}),e.jsxs(eo,{children:[e.jsx(lo,{}),e.jsx(I,{name:s==null?void 0:s.nameSurname,phone:s==null?void 0:s.phoneNumber})]}),e.jsxs(j,{children:[e.jsx(We,{}),e.jsx(Ue,{}),e.jsx(He,{})]}),e.jsxs(j,{children:[e.jsxs(u,{style:{gap:"2rem"},children:[e.jsx(Ge,{}),l.additionalCitizenships==="yes"&&e.jsx(no,{})]}),e.jsxs(u,{style:{gap:"2rem"},children:[e.jsx(Je,{}),l.taxes==="yes"&&e.jsx(ro,{})]}),e.jsxs(u,{style:{gap:"2rem"},children:[e.jsx(Ke,{}),l.childrens==="yes"&&e.jsx(io,{})]})]}),e.jsx(v,{}),e.jsxs(j,{children:[e.jsx(Qe,{}),e.jsx(Xe,{}),e.jsx(Ze,{})]}),e.jsx(v,{}),e.jsxs(j,{children:[e.jsx(oo,{}),e.jsx(u,{}),e.jsx(u,{})]}),e.jsx(v,{}),e.jsxs(j,{children:[e.jsx(so,{}),e.jsx(u,{children:l.familyStatus==="option_2"&&e.jsx(to,{})}),e.jsx(u,{children:l.partnerPayMortgage==="yes"&&l.familyStatus==="option_2"&&e.jsx(ao,{})})]})]})},bo=F().shape({nameSurname:d().required(i("error_name_surname","Please enter your name and surname")),birthday:d().required(i("error_date","Please enter a valid date")),education:d().required(i("error_select_answer","Please select an answer")),additionalCitizenships:d().required(i("error_select_answer","Please select an answer")),citizenshipsDropdown:se().when("additionalCitizenships",{is:"yes",then:o=>o.min(1,i("error_select_answer","Please select an answer")),otherwise:o=>o.min(0)}),taxes:d().required(i("error_select_answer","Please select an answer")),countriesPayTaxes:se().when("taxes",{is:"yes",then:o=>o.min(1,i("error_select_answer","Please select an answer")),otherwise:o=>o.min(0)}),childrens:d().required(i("error_select_answer","Please select an answer")),howMuchChildrens:b().required(i("error_fill_field","Please fill this field")),medicalInsurance:d().required(i("error_select_answer","Please select an answer")),isForeigner:d().required(i("error_select_answer","Please select an answer")),publicPerson:d().required(i("error_select_answer","Please select an answer")),borrowers:b().min(1,i("error_quantity_borrowers","At least one borrower is required")).required(i("error_quantity_borrowers","Number of borrowers is required")),familyStatus:d().required(i("error_select_answer","Please select an answer")),partnerPayMortgage:d().when("familyStatus",{is:"Married",then:o=>o.required(i("error_select_answer","Please select an answer")),otherwise:o=>o.notRequired()})}),Po=()=>{const o=C(),_=q(),t=w(p=>p.credit),s={nameSurname:w(p=>p.login.loginData).nameSurname||t.nameSurname||"",birthday:t.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:t.education||"",additionalCitizenships:t.additionalCitizenships||null,citizenshipsDropdown:t.citizenshipsDropdown||[],taxes:t.taxes||null,countriesPayTaxes:t.countriesPayTaxes||[],childrens:t.childrens||null,howMuchChildrens:t.howMuchChildrens||1,medicalInsurance:t.medicalInsurance||null,isForeigner:t.isForeigner||null,publicPerson:t.publicPerson||null,borrowers:t.borrowers||null,familyStatus:t.familyStatus||"",partnerPayMortgage:t.partnerPayMortgage||null,addPartner:t.addPartner||""};return e.jsx($,{initialValues:s,validationSchema:bo,validateOnMount:!0,onSubmit:p=>{o(M(p)),_("/services/calculate-credit/3")},children:e.jsxs(z,{children:[e.jsx(V,{children:e.jsx(yo,{})}),e.jsx(ae,{})]})})},_e=o=>{if(!o)return!1;const _=o.toLowerCase();return _==="option_1"||_==="1"||_.includes("no_additional")||_.includes("no additional")||_.includes("none")},Mo=()=>{const{t:o,i18n:_}=A(),{getContent:t}=R("calculate_credit_3"),l=q(),{values:s}=te(),{mainSourceOfIncome:p,additionalIncome:a,obligation:f}=s,r=C(),H=w(n=>n.borrowers.sourceOfIncomeModal),G=w(n=>n.borrowers.additionalIncomeModal),J=w(n=>n.borrowers.obligationModal),h=w(n=>n.otherBorrowers.otherBorrowers),c=w(n=>n.login.loginData),g=()=>{r(M(s)),r(be())},O=()=>{r(M(s)),r(Pe())},S=()=>{r(M(s)),r(Me())},N=n=>{r(ve({id:n}))},D=n=>{r(Oe({id:n}))},K=n=>{r(Se({id:n}))},Q=n=>{r(Ie(n))},m=n=>{r(qe(n))},x=n=>{r(Ce(n))},P=n=>{r(ie(n));const pe=!h.some(he=>he.id===n)?ee(h):n;l({pathname:"/services/other-borrowers/1/",search:re({pageId:String(pe)}).toString()})},X=()=>{r(ie(ee(h))),r(M(s)),l({pathname:"/services/other-borrowers/1/",search:re({pageId:ee(h).toString()}).toString()})},B=n=>{r(Ae(n))};return e.jsxs(W,{children:[e.jsx(U,{title:t("calculate_credit_step3_title",o("credit_step3_title"))}),e.jsx(I,{name:c==null?void 0:c.nameSurname,phone:c==null?void 0:c.phoneNumber}),e.jsxs(j,{children:[e.jsx(co,{screenLocation:"calculate_credit_3"}),de[p]&&de[p].map((n,E)=>e.jsx(ne.Fragment,{children:n},E)),e.jsx(u,{})]}),e.jsx(j,{children:p&&e.jsxs(u,{children:[H.map(n=>e.jsx(I,{onEdit:()=>Q(n.id),onDelete:()=>N(n.id),enableEdit:!0,name:`${t("calculate_credit_source_of_income",o("main_income_source"))}${n.id+1}`},n.id)),e.jsx(Y,{onClick:g,color:"#FBE54D",value:t("calculate_credit_add_place_to_work",o("add_place_to_work")),variant:"none"})]})}),e.jsx(v,{}),e.jsxs(j,{children:[e.jsx(uo,{screenLocation:"calculate_credit_3"}),a&&!_e(a)&&e.jsx(_o,{}),e.jsx(u,{})]}),a&&!_e(a)&&e.jsx(j,{children:e.jsxs(u,{children:[G.map(n=>e.jsx(I,{onEdit:()=>m(n.id),onDelete:()=>D(n.id),enableEdit:!0,name:`${t("calculate_credit_additional_income",o("additional_source_of_income"))}${n.id+1}`},n.id)),e.jsx(Y,{onClick:O,color:"#FBE54D",value:t("calculate_credit_add_additional_income",o("add_additional_source_of_income")),variant:"none"})]})}),e.jsx(v,{}),e.jsxs(j,{children:[e.jsx(mo,{screenLocation:"calculate_credit_3"}),ue[f]&&ue[f].map((n,E)=>e.jsx(ne.Fragment,{children:n},E)),e.jsx(u,{})]}),f&&f!=="option_1"&&e.jsx(j,{children:e.jsxs(u,{children:[J.map(n=>e.jsx(I,{onEdit:()=>x(n.id),onDelete:()=>K(n.id),enableEdit:!0,name:`${t("calculate_credit_obligation",o("obligation"))}${n.id+1}`},n.id)),e.jsx(Y,{onClick:S,color:"#FBE54D",value:t("calculate_credit_add_obligation",o("add_obligation")),variant:"none"})]})}),e.jsx(v,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[h&&e.jsx(oe,{title:t("calculate_credit_borrower",o("borrower"))}),e.jsxs(j,{style:{columnGap:"2rem"},children:[h.map(n=>e.jsx(u,{children:e.jsx(I,{onEdit:()=>P(n.id),onDelete:()=>B(n.id),enableEdit:!0,name:n.nameSurname},n.id)},n.id)),!h&&e.jsx(oe,{title:t("calculate_credit_borrower",o("borrower"))}),e.jsx(u,{children:e.jsx(Y,{value:t("calculate_credit_add_borrower",o("add_borrower")),onClick:X,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(u,{})]})]})]})},vo=()=>F().shape({mainSourceOfIncome:d().required(i("error_select_answer","Please select an answer")).test("not-empty",i("error_select_answer","Please select an answer"),o=>o!=null&&o!==""),monthlyIncome:b().when("mainSourceOfIncome",{is:o=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(o),then:o=>o.required(i("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),startDate:d().when("mainSourceOfIncome",{is:o=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(o),then:o=>o.required(i("error_date","Please enter a valid date")),otherwise:o=>o.notRequired()}),fieldOfActivity:d().when("mainSourceOfIncome",{is:o=>o!=null&&o!==""&&!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(o),then:o=>o.required(i("error_select_field_of_activity","Please select field of activity")),otherwise:o=>o.notRequired()}),profession:d().when("mainSourceOfIncome",{is:o=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(o),then:o=>o.required(i("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),companyName:d().when("mainSourceOfIncome",{is:o=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(o),then:o=>o.required(i("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),additionalIncome:d().required(i("error_select_one_of_the_options","Please select one of the options")).test("not-empty",i("error_select_one_of_the_options","Please select one of the options"),o=>o!=null&&o!==""),additionalIncomeAmount:b().when("additionalIncome",{is:o=>o!=null&&o!==""&&o!=="option_1",then:o=>o.required(i("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),obligation:d().required(i("error_select_one_of_the_options","Please select one of the options")),bank:d().when("obligation",{is:o=>o!=null&&o!==""&&o!=="option_1",then:o=>o.required(i("error_select_bank","Please select a bank")),otherwise:o=>o.notRequired()}),monthlyPaymentForAnotherBank:b().when("obligation",{is:o=>o!=null&&o!==""&&o!=="option_1",then:o=>o.required(i("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),endDate:d().when("obligation",{is:o=>o!=null&&o!==""&&o!=="option_1",then:o=>o.required(i("error_date","Please enter a valid date")),otherwise:o=>o.notRequired()})}),Oo=vo(),So=()=>{const o=C(),_=q(),t=w(s=>s.credit),l={mainSourceOfIncome:t.mainSourceOfIncome||"",monthlyIncome:t.monthlyIncome||null,startDate:t.startDate||new Date().getTime(),fieldOfActivity:t.fieldOfActivity||"",profession:t.profession||"",companyName:t.companyName||"",additionalIncome:t.additionalIncome||"",additionalIncomeAmount:t.additionalIncomeAmount||null,obligation:t.obligation||"option_1",bank:t.bank||"",monthlyPaymentForAnotherBank:t.monthlyPaymentForAnotherBank||null,endDate:t.endDate||new Date().getTime(),amountIncomeCurrentYear:(t==null?void 0:t.amountIncomeCurrentYear)||null,noIncome:t.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx($,{initialValues:l,validationSchema:Oo,validateOnMount:!0,onSubmit:s=>{o(M(s)),_("/services/calculate-credit/4")},children:e.jsxs(z,{children:[e.jsx(V,{children:e.jsx(Mo,{})}),e.jsx(ae,{})]})}),e.jsx(Ye,{}),e.jsx(Re,{}),e.jsx(Ve,{})]})},lt=()=>{const{stepNumber:o}=ge(),{t:_,i18n:t}=A(),l=q();if(!w(f=>f.login.isLogin)&&o!=="1"){l("/services/calculate-credit/1");return}const p=[_("mobile_step_1"),_("mobile_step_2"),_("mobile_step_3"),_("mobile_step_4")];let a;switch(o){case"1":a=e.jsx(go,{});break;case"2":a=e.jsx(Po,{});break;case"3":a=e.jsx(So,{});break;case"4":a=e.jsx(wo,{});break;default:a=e.jsx(De,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[e.jsx(je,{progress:o,data:p}),e.jsx(y.Suspense,{fallback:e.jsx(fe,{}),children:a})]})};export{lt as default};
