import{j as o}from"./ui-vendor-5a9cd79c.js";import{u as f}from"./form-vendor-429348f6.js";import{a as I,E as y,S as E}from"./index-93cfc651.js";import{C as u}from"./Column-6db41f6f.js";import{M as T}from"./AddButton-30a50de4.js";import{u as g}from"./i18n-vendor-5cfd36a0.js";import{D as O}from"./DropdownMenu-40d6d6cb.js";import{F as k}from"./FormattedInput-87577656.js";import{a as A}from"./useDropdownData-26d062c8.js";import{C as V}from"./Calendar-bbec0934.js";import{c as H}from"./index-3c2b4d19.js";const lo=e=>Math.max(0,...e.map(a=>a.id))+1,K=()=>{const{t:e,i18n:t}=g();return o.jsx(T,{children:e("add_inc")})},io=({screenLocation:e="mortgage_step3",excludeNoIncome:t=!1})=>{const{t:a,i18n:l}=g(),{getContent:n}=I(e),{values:r,setFieldValue:c,errors:s,setFieldTouched:p,touched:h,setFieldError:x,validateField:i}=f(),_=m=>{if(!m)return!1;const b=m.toLowerCase();return b==="option_1"||b==="1"||b.includes("no_additional")||b.includes("no additional")||b.includes("none")},j=[{value:"option_1",label:n("calculate_mortgage_has_additional_option_1",a("calculate_mortgage_has_additional_option_1"))},{value:"option_2",label:n("calculate_mortgage_has_additional_option_2",a("calculate_mortgage_has_additional_option_2"))},{value:"option_3",label:n("calculate_mortgage_has_additional_option_3",a("calculate_mortgage_has_additional_option_3"))},{value:"option_4",label:n("calculate_mortgage_has_additional_option_4",a("calculate_mortgage_has_additional_option_4"))},{value:"option_5",label:n("calculate_mortgage_has_additional_option_5",a("calculate_mortgage_has_additional_option_5"))},{value:"option_6",label:n("calculate_mortgage_has_additional_option_6",a("calculate_mortgage_has_additional_option_6"))},{value:"option_7",label:n("calculate_mortgage_has_additional_option_7",a("calculate_mortgage_has_additional_option_7"))}],F=t?j.filter(m=>!_(m.value)&&m.value!=="no_additional_income"):j;console.log("🔍 AdditionalIncome debug:",{currentValue:r.additionalIncome,originalOptions:j,filteredOptions:F,excludeNoIncome:t,isNoAdditionalIncomeValue:_(r.additionalIncome),errors:s.additionalIncome,touched:h.additionalIncome});const d=m=>{console.log("🔍 AdditionalIncome onChange:",{value:m,currentValue:r.additionalIncome,isNoAdditionalIncomeValue:_(m),willShowAmountField:!_(m)}),c("additionalIncome",m),p("additionalIncome",!0)};return o.jsxs(u,{children:[o.jsx(O,{title:n("calculate_mortgage_has_additional",a("calculate_mortgage_has_additional")),placeholder:n("calculate_mortgage_has_additional_ph",a("calculate_mortgage_has_additional_ph")),data:F,value:r.additionalIncome,onChange:d,onBlur:()=>p("additionalIncome",!0),error:h.additionalIncome&&s.additionalIncome}),o.jsx(K,{})]})},ro=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:c}=f();return o.jsxs(u,{children:[o.jsx(k,{title:e("calculate_mortgage_monthly_income"),placeholder:e("calculate_mortgage_monthly_income_ph"),value:a.additionalIncomeAmount,handleChange:s=>l("additionalIncomeAmount",s),onBlur:()=>r("additionalIncomeAmount"),error:c.additionalIncomeAmount&&n.additionalIncomeAmount,size:"xs"}),c.additionalIncomeAmount&&n.additionalIncomeAmount&&o.jsx(y,{error:n.additionalIncomeAmount})]})},so=({screenLocation:e="mortgage_step3"})=>{g();const{getContent:t}=I(e),{values:a,setFieldValue:l,touched:n,errors:r,setFieldTouched:c,setFieldError:s}=f(),p=i=>{if(!i)return!1;const _=i.toLowerCase();return _==="option_1"||_==="no_obligations"||_.includes("no_obligation")||_.includes("no obligation")||_.includes("none")},h=A(e,"types","full");h.loading&&console.log("🔄 Loading obligations dropdown options..."),h.error&&console.warn("❌ Obligations dropdown error:",h.error),console.log("🔍 Obligation debug:",{currentValue:a.obligation,options:h.options,isNoObligationValue:p(a.obligation),errors:r.obligation,touched:n.obligation});const x=i=>{console.log("🔍 Obligation onChange:",{value:i,currentValue:a.obligation,isNoObligationValue:p(i),willShowBankFields:!p(i)}),l("obligation",i),c("obligation",!0)};return o.jsxs(u,{children:[o.jsx(O,{title:h.label||t("calculate_mortgage_obligations","Obligations"),data:h.options,placeholder:h.placeholder||t("calculate_mortgage_obligations_ph","Select obligation type"),value:a.obligation,onChange:x,onBlur:()=>c("obligation"),error:n.obligation&&r.obligation,disabled:h.loading}),h.error&&o.jsx(y,{error:t("error_dropdown_load_failed","Failed to load obligations options. Please refresh the page.")})]})},S=({screenLocation:e="calculate_credit_3"})=>{g();const{getContent:t}=I("common"),{values:a,setFieldValue:l,errors:n,touched:r,setFieldTouched:c}=f(),s=e==="calculate_credit_3"&&a.obligation,p=s?t("obligation_bank_title","Bank Lender"):t("bank_title","Bank"),h=t(s?"obligation_bank_placeholder":"bank_placeholder","Select bank"),x=[{value:"1",label:t("bank_option_1","Bank Hapoalim")},{value:"2",label:t("bank_option_2","Bank Leumi")},{value:"3",label:t("bank_option_3","Bank Discount")},{value:"4",label:t("bank_option_4","Bank Mizrahi")},{value:"5",label:t("bank_option_5","Other Bank")}];return o.jsx(u,{children:o.jsx(O,{title:p,placeholder:h,data:x,value:a.bank,onChange:i=>l("bank",i),onBlur:()=>c("bank"),error:r.bank&&n.bank,disabled:!1})})},B=()=>{g();const{getContent:e}=I("common"),{values:t,setFieldValue:a,errors:l}=f();return o.jsxs(u,{children:[o.jsx(V,{title:e("obligation_end_date_title","Obligation End Date"),value:t.endDate,onChange:n=>a("endDate",n),placeholder:"ДД / ММ / ГГ",error:l.endDate}),l.endDate&&o.jsx(y,{error:l.endDate})]})},C=()=>{g();const{getContent:e}=I("common"),{values:t,setFieldValue:a,errors:l,setFieldTouched:n,touched:r}=f();return o.jsxs(u,{children:[o.jsx(k,{value:t.monthlyPaymentForAnotherBank,title:e("obligation_monthly_payment_title","Monthly Payment"),placeholder:e("obligation_monthly_payment_placeholder","Enter monthly payment amount"),name:"MonthlyPayment",handleChange:c=>a("monthlyPaymentForAnotherBank",c),onBlur:()=>n("monthlyPayment"),error:r.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank,size:"xs"}),r.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank&&o.jsx(y,{error:l.monthlyPaymentForAnotherBank})]})},co={bank_loan:[o.jsx(S,{},"Bank"),o.jsx(C,{},"MonthlyPayment"),o.jsx(B,{},"EndDate")],consumer_credit:[o.jsx(S,{},"Bank"),o.jsx(C,{},"MonthlyPayment"),o.jsx(B,{},"EndDate")],credit_card:[o.jsx(C,{},"MonthlyPayment")],other:[o.jsx(C,{},"MonthlyPayment")]},mo=({screenLocation:e="mortgage_step3"})=>{var F;const{t,i18n:a}=g(),{getContent:l}=I(e),{values:n,setFieldValue:r,errors:c,touched:s,setFieldTouched:p,setFieldError:h}=f(),x=d=>{if(!d)return!1;const m=d.toLowerCase();return m.includes("unemployed")||m.includes("no_income")||m.includes("no income")||m.includes("option_5")||m.includes("option_6")||m.includes("main_source_income_option_5")||m.includes("main_source_income_option_6")},i=A(e,"source","full"),_=e!=null&&e.includes("credit")&&((F=i==null?void 0:i.options)==null?void 0:F.length)>0?i.options:Array.from({length:7},(d,m)=>{const b=m+1,z=`calculate_mortgage_main_source_option_${b}`,$=`calculate_mortgage_main_source_option_${b}`;return{value:`option_${b}`,label:l(z,t($))}}).filter(d=>d.label&&d.label!==d.value);console.log("🔍 MainSourceOfIncome options:",{options:_,currentValue:n.mainSourceOfIncome,selectedItem:_.find(d=>d.value===n.mainSourceOfIncome),errors:c.mainSourceOfIncome,touched:s.mainSourceOfIncome,errorShowing:s.mainSourceOfIncome&&c.mainSourceOfIncome});const j=d=>{console.log("🔍 MainSourceOfIncome onChange:",{value:d,currentValue:n.mainSourceOfIncome,dropdownOptions:_,selectedOption:_.find(m=>m.value===d)}),console.log("🔍 MainSourceOfIncome validation debug:",{value:d,isEmpty:!d||d===""||d===null||d===void 0,isNoIncomeValue:x(d),willRequireFields:!x(d)}),r("mainSourceOfIncome",d),p("mainSourceOfIncome",!0)};return o.jsxs(u,{children:[o.jsx(O,{data:_,title:e!=null&&e.includes("credit")&&(i!=null&&i.label)?i.label:l("calculate_mortgage_main_source",t("calculate_mortgage_main_source")),placeholder:e!=null&&e.includes("credit")&&(i!=null&&i.placeholder)?i.placeholder:l("calculate_mortgage_main_source_ph",t("calculate_mortgage_main_source_ph")),value:n.mainSourceOfIncome||"",onChange:j,onBlur:()=>p("mainSourceOfIncome",!0),error:s.mainSourceOfIncome&&c.mainSourceOfIncome,disabled:(e==null?void 0:e.includes("credit"))&&(i==null?void 0:i.loading)}),(e==null?void 0:e.includes("credit"))&&(i==null?void 0:i.error)&&o.jsx(y,{error:l("error_dropdown_load_failed","Failed to load main source options. Please refresh the page.")})]})},N=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:c}=f();return o.jsxs(u,{children:[o.jsx(E,{placeholder:e("calculate_mortgage_company"),value:a.companyName,title:e("calculate_mortgage_company"),name:"СompanyName",onChange:s=>l("companyName",s),onBlur:()=>r("companyName"),error:c.companyName&&n.companyName}),c.companyName&&n.companyName&&o.jsx(y,{error:n.companyName})]})},M=({screenLocation:e="calculate_credit_3"})=>{const{getContent:t}=I(e),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:c}=f(),s=A(e,"activity","full");return s.loading&&console.log("🔄 Loading field of activity dropdown options..."),s.error&&console.warn("❌ Field of activity dropdown error:",s.error),o.jsxs(u,{children:[o.jsx(O,{data:s.options,title:s.label||t("calculate_mortgage_field_of_activity","Field of Activity"),placeholder:s.placeholder||t("calculate_mortgage_field_of_activity_ph","Select field of activity"),searchable:!0,searchPlaceholder:t("search","Search..."),value:a.fieldOfActivity,onChange:p=>l("fieldOfActivity",p),onBlur:()=>r("fieldOfActivity"),error:c.fieldOfActivity&&n.fieldOfActivity,disabled:s.loading}),s.error&&o.jsx(y,{error:t("error_dropdown_load_failed","Failed to load field of activity options. Please refresh the page.")})]})},R="_hint_1enfl_1",q={hint:R},G=H.bind(q),J=({text:e})=>o.jsx("div",{className:G("hint"),children:e}),v=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:c}=f();return o.jsxs(u,{children:[o.jsx(k,{title:e("calculate_mortgage_monthly_income"),placeholder:e("calculate_mortgage_monthly_income_ph"),value:a.monthlyIncome,handleChange:s=>l("monthlyIncome",s),onBlur:()=>r("monthlyIncome"),error:c.monthlyIncome&&n.monthlyIncome,size:"xs"}),o.jsx(J,{text:e("calculate_mortgage_monthly_income_hint")}),c.monthlyIncome&&n.monthlyIncome&&o.jsx(y,{error:n.monthlyIncome})]})},P=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n}=f();return o.jsxs(u,{children:[o.jsx(V,{title:e("no_income"),value:a.noIncome,onChange:r=>l("noIncome",r),placeholder:e("date_ph"),error:n.noIncome}),n.noIncome&&o.jsx(y,{error:n.noIncome})]})},w=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:c}=f();return o.jsxs(u,{children:[o.jsx(E,{placeholder:e("calculate_mortgage_profession_ph"),value:a.profession,title:e("calculate_mortgage_profession"),name:"Profession",onChange:s=>l("profession",s),onBlur:()=>r("profession"),error:c.profession&&n.profession}),c.profession&&n.profession&&o.jsx(y,{error:n.profession})]})};function Q(){const{t:e,i18n:t}=g();return o.jsx(T,{children:e("calculate_mortgage_step3_ctx")})}const D=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n}=f();return o.jsxs(u,{children:[o.jsx(V,{title:e("calculate_mortgage_start_date"),value:a.startDate,onChange:r=>l("startDate",r),placeholder:e("date_ph"),error:n.startDate}),o.jsx(Q,{}),n.startDate&&o.jsx(y,{error:n.startDate})]})},uo={employee:[o.jsx(v,{},"MonthlyIncome1"),o.jsx(D,{},"StartDate1"),o.jsx(M,{},"FieldOfActivity1"),o.jsx(N,{},"CompanyName1"),o.jsx(w,{},"Profession1")],selfemployed:[o.jsx(v,{},"MonthlyIncome2"),o.jsx(D,{},"StartDate2"),o.jsx(M,{},"FieldOfActivity2"),o.jsx(N,{},"CompanyName2"),o.jsx(w,{},"Profession2")],pension:[o.jsx(v,{},"MonthlyIncome4"),o.jsx(u,{},"column")],unemployed:[o.jsx(P,{},"NoIncome5"),o.jsx(u,{},"column")],unpaid_leave:[o.jsx(P,{},"NoIncome6"),o.jsx(u,{},"column")],student:[o.jsx(v,{},"MonthlyIncome7"),o.jsx(u,{},"column")],other:[o.jsx(v,{},"MonthlyIncome8"),o.jsx(u,{},"column")]};export{io as A,mo as M,so as O,ro as a,co as b,uo as c,lo as g};
