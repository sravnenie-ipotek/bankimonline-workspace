import{j as e}from"./ui-vendor-5a9cd79c.js";import{k as z,f as y,r as o}from"./react-vendor-19e41fc0.js";import{c as F}from"./index-bc53121f.js";import{u as S}from"./i18n-vendor-5cfd36a0.js";import"./state-vendor-2a767ce0.js";import"./utils-vendor-48989965.js";import"./form-vendor-429348f6.js";const U="_container_rr2eb_11",B="_header_rr2eb_21",C="_title_rr2eb_26",L="_content_rr2eb_35",P={"mobile-upload-page":"_mobile-upload-page_rr2eb_1",container:U,header:B,title:C,content:L,"upload-section":"_upload-section_rr2eb_42","upload-area":"_upload-area_rr2eb_46","upload-icon":"_upload-icon_rr2eb_69","upload-text":"_upload-text_rr2eb_80","preview-section":"_preview-section_rr2eb_89","preview-container":"_preview-container_rr2eb_100","preview-image":"_preview-image_rr2eb_112","file-icon":"_file-icon_rr2eb_118","file-info":"_file-info_rr2eb_125","file-name":"_file-name_rr2eb_130","file-size":"_file-size_rr2eb_138","upload-button":"_upload-button_rr2eb_144","error-message":"_error-message_rr2eb_170","uploaded-files":"_uploaded-files_rr2eb_180","uploaded-files-title":"_uploaded-files-title_rr2eb_187","uploaded-file-item":"_uploaded-file-item_rr2eb_195","file-details":"_file-details_rr2eb_206","file-status":"_file-status_rr2eb_211"},i=F.bind(P),H=()=>{const{t}=S();z(),y();const[a,c]=o.useState(null),[p,d]=o.useState(""),[u,m]=o.useState(!1),[_,j]=o.useState([]),[h,n]=o.useState(""),f=o.useRef(null),g=s=>["application/pdf","image/jpeg","image/jpg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(s.type)?s.size>10485760?t("document_size_error","Размер файла не должен превышать 10 МБ"):"":t("document_type_error","Поддерживаются только PDF, изображения и документы Word"),b=s=>{const r=g(s);if(r){n(r);return}if(n(""),c(s),s.type.startsWith("image/")){const l=URL.createObjectURL(s);d(l)}else d("")},w=s=>{var l;const r=(l=s.target.files)==null?void 0:l[0];r&&b(r)},N=()=>{var s;(s=f.current)==null||s.click()},k=async()=>{if(a){m(!0),n("");try{await new Promise(r=>setTimeout(r,2e3));const s={id:Date.now().toString(),name:a.name,type:a.type,size:a.size,url:URL.createObjectURL(a)};j(r=>[...r,s]),c(null),d(""),alert(t("upload_success","Документ успешно загружен!"))}catch{n(t("upload_error","Ошибка при загрузке документа"))}finally{m(!1)}}},x=s=>{if(s===0)return"0 Bytes";const r=1024,l=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(s)/Math.log(r));return parseFloat((s/Math.pow(r,v)).toFixed(2))+" "+l[v]},M=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e.jsx("div",{className:i("mobile-upload-page"),children:e.jsxs("div",{className:i("container"),children:[e.jsx("div",{className:i("header"),children:e.jsx("h1",{className:i("title"),children:t("upload_document_mobile","Загрузите документ")})}),e.jsxs("div",{className:i("content"),children:[e.jsx("div",{className:i("upload-section"),children:e.jsxs("div",{className:i("upload-area"),onClick:N,children:[e.jsx("div",{className:i("upload-icon"),children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("p",{className:i("upload-text"),children:t("upload_from_phone","Загрузить из телефона")})]})}),a&&e.jsxs("div",{className:i("preview-section"),children:[e.jsx("div",{className:i("preview-container"),children:p?e.jsx("img",{src:p,alt:"Preview",className:i("preview-image")}):e.jsx("div",{className:i("file-icon"),children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M14 2v6h6",stroke:"currentColor",strokeWidth:"2"})]})})}),e.jsxs("div",{className:i("file-info"),children:[e.jsx("p",{className:i("file-name"),children:a.name}),e.jsx("p",{className:i("file-size"),children:x(a.size)})]}),e.jsx("button",{className:i("upload-button"),onClick:k,disabled:u,children:u?t("uploading","Загружается..."):t("upload","Загрузить")})]}),h&&e.jsx("div",{className:i("error-message"),children:h}),_.length>0&&e.jsxs("div",{className:i("uploaded-files"),children:[e.jsx("h3",{className:i("uploaded-files-title"),children:t("uploaded_files","Загруженные файлы")}),_.map(s=>e.jsxs("div",{className:i("uploaded-file-item"),children:[e.jsx("div",{className:i("file-icon"),children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M14 2v6h6",stroke:"currentColor",strokeWidth:"2"})]})}),e.jsxs("div",{className:i("file-details"),children:[e.jsx("p",{className:i("file-name"),children:s.name}),e.jsx("p",{className:i("file-size"),children:x(s.size)})]}),e.jsx("div",{className:i("file-status"),children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},s.id))]})]}),e.jsx("input",{ref:f,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",capture:M?"environment":void 0,onChange:w,style:{display:"none"}})]})})};export{H as MobileDocumentUploadPage};
