import{a9 as p}from"./utils-vendor-48989965.js";const c={}.REACT_APP_API_URL||(window.location.hostname==="localhost"?"/api":"https://bankimonline.com/api"),o=p.create({baseURL:c,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(s=>{var e;const a=localStorage.getItem("adminToken");return a&&((e=s.url)!=null&&e.includes("/admin/"))&&(s.headers.Authorization=`Bearer ${a}`),s},s=>(console.error("API Request Error:",s),Promise.reject(s)));o.interceptors.response.use(s=>s,s=>{var a,e;return console.error("API Response Error:",((a=s.response)==null?void 0:a.data)||s.message),((e=s.response)==null?void 0:e.status)===401&&(localStorage.removeItem("adminToken"),window.location.pathname.includes("/admin/")&&(window.location.href="/admin")),Promise.reject(s)});class d{async getRegistrationForm(a){var e,r;try{return(await o.get(`/api/bank-worker/register/${a}`)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to load registration form")}}async completeRegistration(a){var e,r;try{return(await o.post("/api/bank-worker/register",a)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Registration failed")}}async getWorkerStatus(a){var e,r;try{return(await o.get(`/api/bank-worker/status/${a}`)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get worker status")}}async sendInvitation(a){var e,r;try{return(await o.post("/api/bank-worker/invite",a)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to send invitation")}}async getInvitations(a){var e,r;try{return(await o.get("/api/admin/invitations",{params:a})).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get invitations")}}async getApprovalQueue(a){var e,r;try{return(await o.get("/api/admin/approval-queue",{params:a})).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get approval queue")}}async approveWorker(a,e){var r,t;try{return(await o.post(`/api/admin/approve/${a}`,{comments:e})).data}catch(n){throw new Error(((t=(r=n.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to approve worker")}}async rejectWorker(a,e,r){var t,n;try{return(await o.post(`/api/admin/reject/${a}`,{reason:e,comments:r})).data}catch(i){throw new Error(((n=(t=i.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to reject worker")}}async getBanks(){var a,e;try{return(await o.get("/api/admin/banks")).data}catch(r){throw new Error(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to get banks")}}}const m=new d;export{m as b};
