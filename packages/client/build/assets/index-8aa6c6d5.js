import{j as e}from"./ui-vendor-5a9cd79c.js";import{r as I,f as B,b as ie,j as oe,k as xe}from"./react-vendor-19e41fc0.js";import{c as fe,u as je,a as ue,D as P,E as ye,b as W,A as be,T as se,L as de}from"./index-79a992ab.js";import{P as we}from"./ProgressBar-cdf00f46.js";import{c as De,a as T,u as y,F as M,G as ve,m as Ce,d as he,n,l as Pe,o as Se,p as Ie,q as qe,r as ke,t as Fe,v as Me,w as Oe,x as Be,y as Ae,z as Ne,A as le,B as Re,N as Te}from"./index-b94574b0.js";import{u as H,F as G,b as J,a as O,c as x,f as C,g as te}from"./form-vendor-3025b96d.js";import{V as Ee}from"./VideoPoster-5b3015ab.js";import{S as Ve,a as $e,M as ze,U as Ye,A as Le,F as Ue,B as We,b as He,c as Ge,O as Je}from"./SourceOfIncomeModal-d513574b.js";import{C as m}from"./Column-dbe9e532.js";import{D as ae}from"./DropdownMenu-7fc78a92.js";import{F as K}from"./FormContainer-1e1ce440.js";import{F as S}from"./FormattedInput-eaa8803d.js";import{R as f}from"./Row-5f51608f.js";import{F as Q}from"./FormCaption-0679f06d.js";import{D as ce}from"./DeleteIcon-b228fd68.js";import{A as F,U as k}from"./AddButton-c667a975.js";import{C as L}from"./Calendar-2fe91664.js";import{E as Ke}from"./ExitModule-2ddb570e.js";import{g as U,M as Qe,A as Xe,a as Ze,O as et,b as me,d as tt}from"./componentsByIncomeSource-932eb4c7.js";import{u as q}from"./i18n-vendor-5cfd36a0.js";import{D as re}from"./DoubleButtons-6b72a4fb.js";import{R as at}from"./RowTwo-ac499c1a.js";import{B as rt,P as nt,A as it}from"./PartnerPayMortgage-fc7807d2.js";import{N as ot,B as st,E as dt,A as lt,T as ct,C as mt,M as _t,I as ut,P as ht}from"./Taxes-fa5418b8.js";import{C as pt,a as gt,H as xt}from"./HowMuchChildrens-60335f65.js";import{F as ft}from"./FamilyStatus-23eff92e.js";import{I as jt}from"./Info-b4d3814a.js";import"./components-vendor-e60b5450.js";import"./utils-vendor-48989965.js";import"./state-vendor-2a767ce0.js";import"./MortgageParameters-38162adf.js";import"./PercentIcon-69cb9491.js";import"./useDropdownData-1abe74c0.js";import"./Control-ef834aa1.js";import"./ShieldCheckIcon-a0d68f8f.js";const yt={"mortgage-data":"_mortgage-data_1kje2_1","mortgage-data-title":"_mortgage-data-title_1kje2_6","mortgage-data-title__text":"_mortgage-data-title__text_1kje2_12","mortgage-data-title__button":"_mortgage-data-title__button_1kje2_18","mortgage-data-form":"_mortgage-data-form_1kje2_28","mortgage-data-form__items":"_mortgage-data-form__items_1kje2_36","mortgage-data-form__item-delete-wrapper":"_mortgage-data-form__item-delete-wrapper_1kje2_42","mortgage-data-form__item-delete-button":"_mortgage-data-form__item-delete-button_1kje2_48","mortgage-data-form__add":"_mortgage-data-form__add_1kje2_70","button-left__icon":"_button-left__icon_1kje2_84"},D=De.bind(yt),bt=()=>{const[t,i]=I.useState([]),[r,h]=I.useState(null),{values:o,setFieldValue:l,errors:c,touched:s,setFieldTouched:j}=H(),[w,{open:A,close:v}]=fe(!1),{isDesktop:b,isTablet:E,isMobile:X}=je(),{t:_,i18n:ne}=q(),{getContent:u}=ue("refinance_credit_1"),N=o.refinancingCredit==="option_2";I.useEffect(()=>{i(o.creditData)},[o.creditData]);const V=()=>{const p={id:U(t),bank:"",amount:null,monthlyPayment:null,startDate:"",endDate:"",earlyRepayment:null};l("creditData",[...t,p])},$=d=>{h(d),A()},Z=()=>{if(r!==null){const d=t.filter(p=>p.id!==r);l("creditData",d)}v()},z=[{value:"hapoalim",label:u("bank_hapoalim",_("bank_hapoalim"))},{value:"leumi",label:u("bank_leumi",_("bank_leumi"))},{value:"discount",label:u("bank_discount",_("bank_discount"))},{value:"massad",label:u("bank_massad",_("bank_massad"))},{value:"israel",label:u("bank_israel",_("bank_israel"))}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D("mortgage-data"),children:[e.jsx("div",{className:D("mortgage-data-title"),children:e.jsx("h4",{className:D("mortgage-data-title__text"),children:u("list_credits_title",_("list_credits_title"))})}),b&&e.jsxs("div",{className:D("mortgage-data-form"),children:[e.jsx("div",{className:D("mortgage-data-form__items"),children:t.map(d=>e.jsxs(I.Fragment,{children:[e.jsxs(f,{children:[e.jsx(m,{children:e.jsx(ae,{data:z,title:u("bank_apply_credit",_("bank_apply_credit")),placeholder:u("calculate_mortgage_first_ph",_("calculate_mortgage_first_ph")),value:d.bank,onChange:p=>{const g=t.map(a=>a.id===d.id?{...a,bank:p}:a);l("creditData",g)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("amount_credit_title",_("amount_credit_title")),handleChange:p=>{const g=t.map(a=>a.id===d.id?{...a,amount:p}:a);l("creditData",g)},value:d.amount,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("calculate_mortgage_initial_payment",_("calculate_mortgage_initial_payment")),handleChange:p=>{const g=t.map(a=>a.id===d.id?{...a,monthlyPayment:p}:a);l("creditData",g)},value:d.monthlyPayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})})]}),e.jsxs(f,{children:[e.jsx(m,{children:e.jsx(L,{title:u("refinance_credit_start_date",_("refinance_credit_start_date")),placeholder:u("date_ph",_("date_ph")),value:d.startDate,onChange:p=>{const g=t.map(a=>a.id===d.id?{...a,startDate:p}:a);l("creditData",g)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(L,{title:u("refinance_credit_end_date",_("refinance_credit_end_date")),placeholder:u("date_ph",_("date_ph")),value:d.endDate,onChange:p=>{const g=t.map(a=>a.id===d.id?{...a,endDate:p}:a);l("creditData",g)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),N&&e.jsx(m,{children:e.jsx(S,{title:u("early_repayment",_("early_repayment")),handleChange:p=>{const g=t.map(a=>a.id===d.id?{...a,earlyRepayment:p}:a);l("creditData",g)},value:d.earlyRepayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),!N&&e.jsx(m,{})]}),e.jsx("div",{className:D("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:D("mortgage-data-form__item-delete-button"),onClick:()=>$(d.id),children:e.jsx(ce,{})})}),e.jsx(P,{})]},d.id))}),e.jsx("div",{className:D("mortgage-data-form__add"),children:e.jsx(F,{value:u("add_credit",_("add_credit")),onClick:V})})]}),(E||X)&&e.jsxs("div",{className:D("mortgage-data-form"),children:[e.jsx("div",{className:D("mortgage-data-form__items"),children:t.map(d=>e.jsxs(I.Fragment,{children:[e.jsxs(f,{children:[e.jsx(m,{children:e.jsx(ae,{data:z,title:u("bank_apply_credit",_("bank_apply_credit")),placeholder:u("calculate_mortgage_first_ph",_("calculate_mortgage_first_ph")),value:d.bank,onChange:p=>{const g=t.map(a=>a.id===d.id?{...a,bank:p}:a);l("creditData",g)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("amount_credit_title",_("amount_credit_title")),handleChange:p=>{const g=t.map(a=>a.id===d.id?{...a,amount:p}:a);l("creditData",g)},value:d.amount,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("calculate_mortgage_initial_payment",_("calculate_mortgage_initial_payment")),handleChange:p=>{const g=t.map(a=>a.id===d.id?{...a,monthlyPayment:p}:a);l("creditData",g)},value:d.monthlyPayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(L,{title:u("refinance_credit_start_date",_("refinance_credit_start_date")),placeholder:u("date_ph",_("date_ph")),value:d.startDate,onChange:p=>{const g=t.map(a=>a.id===d.id?{...a,startDate:p}:a);l("creditData",g)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(L,{title:u("refinance_credit_end_date",_("refinance_credit_end_date")),placeholder:u("date_ph",_("date_ph")),value:d.endDate,onChange:p=>{const g=t.map(a=>a.id===d.id?{...a,endDate:p}:a);l("creditData",g)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),N&&e.jsx(m,{children:e.jsx(S,{title:u("early_repayment",_("early_repayment")),handleChange:p=>{const g=t.map(a=>a.id===d.id?{...a,earlyRepayment:p}:a);l("creditData",g)},value:d.earlyRepayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})})]}),e.jsx("div",{className:D("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:D("mortgage-data-form__item-delete-button"),onClick:()=>$(d.id),children:e.jsx(ce,{})})}),e.jsx(P,{})]},d.id))}),e.jsx("div",{className:D("mortgage-data-form__add"),children:e.jsx(F,{value:u("add_credit",_("add_credit")),onClick:V})})]})]}),e.jsx(Ke,{opened:w,onClose:v,title:u("remove_credit",_("remove_credit")),subtitle:u("remove_credit_subtitle",_("remove_credit_subtitle")),onConfirm:Z,confirmText:u("delete",_("delete"))})]})},wt=()=>{const{t,i18n:i}=q(),{getContent:r}=ue("refinance_credit_1"),h=[{value:"option_1",label:r("calculate_credit_why_option_1",t("calculate_credit_why_option_1"))},{value:"option_2",label:r("calculate_credit_why_option_2",t("calculate_credit_why_option_2"))},{value:"option_3",label:r("calculate_credit_why_option_3",t("calculate_credit_why_option_3"))},{value:"option_4",label:r("calculate_credit_why_option_4",t("calculate_credit_why_option_4"))}],{setFieldValue:o,values:l,errors:c,touched:s,setFieldTouched:j}=H();return e.jsxs(K,{children:[e.jsx(Q,{title:r("credit_refinance_title",t("credit_refinance_title"))}),e.jsx(f,{children:e.jsx(m,{children:e.jsx(ae,{data:h,title:r("mortgage_credit_why",t("mortgage_credit_why")),placeholder:r("credit_refinance_why_ph",t("credit_refinance_why_ph")),value:l.refinancingCredit,onChange:w=>o("refinancingCredit",w),onBlur:()=>j("refinancingCredit"),error:s.refinancingCredit&&c.refinancingCredit})})}),e.jsx(P,{}),e.jsx(f,{children:e.jsx(bt,{})}),l.refinancingCredit==="option_3"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(f,{children:e.jsx(m,{children:e.jsx(S,{name:"desiredMonthlyPayment",title:r("desired_monthly_payment",t("desired_monthly_payment")),handleChange:w=>o("desiredMonthlyPayment",w),value:l.desiredMonthlyPayment,onBlur:()=>j("desiredMonthlyPayment"),error:s.desiredMonthlyPayment&&c.desiredMonthlyPayment})})})]}),l.refinancingCredit==="option_4"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(f,{children:e.jsxs(m,{children:[e.jsx(Ve,{disableCurrency:!0,unitsMax:r("calculate_mortgage_period_units_max",t("calculate_mortgage_period_units_max")),unitsMin:r("calculate_mortgage_period_units_min",t("calculate_mortgage_period_units_min")),value:l.desiredTerm,name:"desiredTerm",min:4,max:30,error:c.desiredTerm,title:r("credit_loan_period",t("credit_loan_period")),handleChange:w=>o("desiredTerm",w)}),c.desiredTerm&&e.jsx(ye,{error:c.desiredTerm})]})})]})]})},Dt=()=>O().shape({refinancingCredit:x().required(n("error_select_answer","Please select an answer")),desiredMonthlyPayment:C().positive(n("error_credit_payment_positive","Payment must be positive")).when("refinancingCredit",{is:"option_3",then:t=>t.required(n("error_required_to_fill_out","This field is required")),otherwise:t=>t.notRequired()}),desiredTerm:C().min(4,n("error_min_period","Minimum period is 4 years")).max(30,n("error_max_period","Maximum period is 30 years")).when("refinancingCredit",{is:"option_4",then:t=>t.required(n("error_required_to_fill_out","This field is required")),otherwise:t=>t.notRequired()}),period:C().min(4,n("error_min_period","Minimum period is 4 years")).max(30,n("error_max_period","Maximum period is 30 years")).notRequired(),monthlyPayment:C().notRequired(),creditData:te().of(O().shape({bank:x().required(n("error_credit_bank_required","Bank selection is required")),amount:C().positive(n("error_credit_amount_positive","Amount must be positive")).required(n("error_credit_amount_required","Credit amount is required")),monthlyPayment:C().positive(n("error_credit_payment_positive","Payment must be positive")).required(n("error_credit_payment_required","Monthly payment is required")),startDate:x().required(n("error_credit_start_date_required","Start date is required")),endDate:x().required(n("error_credit_end_date_required","End date is required")).test("end-date-after-start",n("error_credit_end_date_validation","End date must be after start date"),function(t){const{startDate:i}=this.parent;return!t||!i?!0:new Date(t)>new Date(i)}),earlyRepayment:C().positive(n("error_credit_early_payment_positive","Early payment must be positive")).nullable().notRequired()})).min(1,n("error_credit_data_required","At least one credit entry is required"))}),vt=()=>{const{t,i18n:i}=q(),r=T(),h=B(),o=y(b=>b.refinanceCredit),l=y(b=>b.login.isLogin),c=new Date;c.setDate(c.getDate()+1),c.toISOString().split("T")[0];const s=new Date;s.setFullYear(s.getFullYear()-5);const j=s.toISOString().split("T")[0],w=new Date;w.setFullYear(w.getFullYear()+10);const A=w.toISOString().split("T")[0],v={refinancingCredit:o.refinancingCredit||"",period:o.period||30,monthlyPayment:o.monthlyPayment||1e6,desiredMonthlyPayment:o.desiredMonthlyPayment||null,desiredTerm:o.desiredTerm||null,creditData:o.creditData||[{id:1,bank:"hapoalim",amount:null,monthlyPayment:null,startDate:j,endDate:A,earlyRepayment:null}]};return e.jsxs(e.Fragment,{children:[e.jsx(G,{initialValues:v,validationSchema:Dt(),validateOnMount:!0,onSubmit:b=>{r(M(b)),r(ve({data:b})),l?h("/services/refinance-credit/2"):(r(Ce()),r(he("phoneVerification")))},children:e.jsxs(J,{children:[e.jsxs(W,{children:[e.jsx(Ee,{title:t("credit_refinance_title"),text:t("credit_refinance_banner_subtext"),size:"small"}),e.jsx(wt,{})]}),e.jsx($e,{showValidationHints:!0})]})}),e.jsx(ze,{}),e.jsx(be,{})]})},Ct=()=>{const{t,i18n:i}=q(),r=y(o=>o.login.loginData),h=y(o=>o.refinanceCredit);return e.jsxs(K,{children:[e.jsx(Q,{title:t("refinance_credit_final")}),e.jsx(Ye,{credit:h!=null&&h.period?h.period*1e3:void 0,nameSurname:r==null?void 0:r.nameSurname,phoneNumber:r==null?void 0:r.phoneNumber}),e.jsx(Le,{text:t("refinance_credit_warning")}),e.jsx(f,{children:e.jsx(Ue,{})}),e.jsx(We,{})]})},Pt={selectedBank:"",selectedOffer:null},St=O().shape({selectedBank:x(),selectedOffer:O().nullable()}),It=()=>{const t=T(),i=B(),r=y(o=>o.login.loginData),h=y(o=>o.login.isLogin);return e.jsx(G,{initialValues:Pt,validationSchema:St,validateOnMount:!0,onSubmit:o=>{console.log("Saving refinance credit data and proceeding...",o),t(Pe(o)),!h||!(r!=null&&r.phoneNumber)?(console.log("User not authenticated, opening auth modal"),t(Se()),t(he("signUp"))):(console.log("User authenticated, proceeding to application"),i("/services/application-submitted"))},children:e.jsxs(J,{children:[e.jsx(W,{children:e.jsx(Ct,{})}),e.jsx(re,{})]})})},qt=()=>{const{t,i18n:i}=q(),{values:r}=H(),h=y(o=>o.login.loginData);return e.jsxs(K,{children:[e.jsx(Q,{title:t("calculate_mortgage_step2_title")}),e.jsxs(at,{children:[e.jsx(jt,{}),e.jsx(k,{name:h==null?void 0:h.nameSurname,phone:h==null?void 0:h.phoneNumber})]}),e.jsxs(f,{children:[e.jsx(ot,{}),e.jsx(st,{}),e.jsx(dt,{})]}),e.jsxs(f,{children:[e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(lt,{}),r.additionalCitizenships==="yes"&&e.jsx(pt,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(ct,{}),r.taxes==="yes"&&e.jsx(gt,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(mt,{}),r.childrens==="yes"&&e.jsx(xt,{})]})]}),e.jsx(P,{}),e.jsxs(f,{children:[e.jsx(_t,{}),e.jsx(ut,{}),e.jsx(ht,{})]}),e.jsx(P,{}),e.jsxs(f,{children:[e.jsx(rt,{}),e.jsx(m,{}),e.jsx(m,{})]}),e.jsx(P,{}),e.jsxs(f,{children:[e.jsx(ft,{}),e.jsx(m,{children:r.familyStatus==="option_2"&&e.jsx(nt,{})}),e.jsx(m,{children:r.partnerPayMortgage==="yes"&&r.familyStatus==="option_2"&&e.jsx(it,{})})]})]})},kt=()=>O().shape({nameSurname:x().required(n("error_name_surname","Please enter your name and surname")),birthday:x().required(n("error_date","Please enter a valid date")),education:x().required(n("error_select_answer","Please select an answer")),additionalCitizenships:x().required(n("error_select_answer","Please select an answer")),citizenshipsDropdown:te().when("additionalCitizenships",{is:"yes",then:t=>t.min(1,n("error_select_answer","Please select an answer")),otherwise:t=>t.min(0)}),taxes:x().required(n("error_select_answer","Please select an answer")),countriesPayTaxes:te().when("taxes",{is:"yes",then:t=>t.min(1,n("error_select_answer","Please select an answer")),otherwise:t=>t.min(0)}),childrens:x().required(n("error_select_answer","Please select an answer")),howMuchChildrens:C().required(n("error_fill_field","Please fill this field")),medicalInsurance:x().required(n("error_select_answer","Please select an answer")),isForeigner:x().required(n("error_select_answer","Please select an answer")),publicPerson:x().required(n("error_select_answer","Please select an answer")),borrowers:C().min(1,n("error_quantity_borrowers","Please specify number of borrowers")).required(n("error_quantity_borrowers","Please specify number of borrowers")),familyStatus:x().required(n("error_select_answer","Please select an answer")),partnerPayMortgage:x().when("familyStatus",{is:"option_2",then:t=>t.required(n("error_select_answer","Please select an answer")),otherwise:t=>t.notRequired()})}),Ft=kt(),Mt=()=>{const t=T(),i=B(),r=y(l=>l.refinanceCredit),o={nameSurname:y(l=>l.login.loginData).nameSurname||r.nameSurname||"",birthday:r.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:r.education||"",additionalCitizenships:r.additionalCitizenships||null,citizenshipsDropdown:r.citizenshipsDropdown||[],taxes:r.taxes||null,countriesPayTaxes:r.countriesPayTaxes||[],childrens:r.childrens||null,howMuchChildrens:r.howMuchChildrens||1,medicalInsurance:r.medicalInsurance||null,isForeigner:r.isForeigner||null,publicPerson:r.publicPerson||null,borrowers:r.borrowers||null,familyStatus:r.familyStatus||"",partnerPayMortgage:r.partnerPayMortgage||null,addPartner:r.addPartner||""};return e.jsx(G,{initialValues:o,validationSchema:Ft,validateOnMount:!0,onSubmit:l=>{t(M(l)),i("/services/refinance-credit/3")},children:e.jsxs(J,{children:[e.jsx(W,{children:e.jsx(qt,{})}),e.jsx(re,{})]})})},_e=t=>{if(!t)return!1;const i=t.toLowerCase();return i==="option_1"||i==="1"||i==="no_additional_income"||i.includes("no_additional")||i.includes("no additional")||i.includes("none")},Ot=()=>{const{t,i18n:i}=q(),r=B(),{values:h}=H(),{mainSourceOfIncome:o,additionalIncome:l,obligation:c}=h,s=T(),j=y(a=>a.borrowers.sourceOfIncomeModal),w=y(a=>a.borrowers.additionalIncomeModal),A=y(a=>a.borrowers.obligationModal),v=y(a=>a.otherBorrowers.otherBorrowers),b=y(a=>a.login.loginData),E=tt("refinance_step3"),X=()=>{s(M(h)),s(Ie())},_=()=>{s(M(h)),s(qe())},ne=()=>{s(M(h)),s(ke())},u=a=>{s(Fe({id:a}))},N=a=>{s(Me({id:a}))},V=a=>{s(Oe({id:a}))},$=a=>{s(Be(a))},Z=a=>{s(Ae(a))},z=a=>{s(Ne(a))},d=a=>{s(le(a));const pe=!v.some(ge=>ge.id===a)?U(v):a;r({pathname:"/services/other-borrowers/1/",search:oe({pageId:String(pe)}).toString()})},p=()=>{s(le(U(v))),r({pathname:"/services/other-borrowers/1/",search:oe({pageId:U(v).toString()}).toString()})},g=a=>{s(Re(a))};return e.jsxs(K,{children:[e.jsx(Q,{title:t("calculate_mortgage_step3_title")}),e.jsx(k,{name:b==null?void 0:b.nameSurname,phone:b==null?void 0:b.phoneNumber}),e.jsxs(f,{children:[e.jsx(Qe,{}),E[o]&&E[o].map((a,Y)=>e.jsx(ie.Fragment,{children:a},Y)),e.jsx(m,{})]}),e.jsx(f,{children:o&&e.jsxs(m,{children:[j.map(a=>e.jsx(k,{onEdit:()=>$(a.id),onDelete:()=>u(a.id),enableEdit:!0,name:`${t("source_of_income")}${a.id+1}`},a.id)),e.jsx(F,{onClick:X,color:"#FBE54D",value:t("add_place_to_work"),variant:"none"})]})}),e.jsx(P,{}),e.jsxs(f,{children:[e.jsx(Xe,{}),l&&!_e(l)&&e.jsx(Ze,{}),e.jsx(m,{})]}),l&&!_e(l)&&e.jsx(f,{children:e.jsxs(m,{children:[w.map(a=>e.jsx(k,{onEdit:()=>Z(a.id),onDelete:()=>N(a.id),enableEdit:!0,name:`${t("additional_source_of_income")}${a.id+1}`},a.id)),e.jsx(F,{onClick:_,color:"#FBE54D",value:t("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(P,{}),e.jsxs(f,{children:[e.jsx(et,{}),me[c]&&me[c].map((a,Y)=>e.jsx(ie.Fragment,{children:a},Y)),e.jsx(m,{})]}),c&&c!=="option_1"&&e.jsx(f,{children:e.jsxs(m,{children:[A.map(a=>e.jsx(k,{onEdit:()=>z(a.id),onDelete:()=>V(a.id),enableEdit:!0,name:`${t("obligation")}${a.id+1}`},a.id)),e.jsx(F,{onClick:ne,color:"#FBE54D",value:t("add_obligation"),variant:"none"})]})}),e.jsx(P,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v&&e.jsx(se,{title:t("borrower")}),e.jsxs(f,{style:{columnGap:"2rem"},children:[v.map(a=>e.jsx(m,{children:e.jsx(k,{onEdit:()=>d(a.id),onDelete:()=>g(a.id),enableEdit:!0,name:a.nameSurname},a.id)},a.id)),!v&&e.jsx(se,{title:t("borrower")}),e.jsx(m,{children:e.jsx(F,{value:t("add_borrower"),onClick:p,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(m,{})]})]})]})},Bt=t=>{if(!t)return!1;const i=t.toLowerCase();return i==="option_1"||i==="1"||i==="no_additional_income"||i.includes("no_additional")||i.includes("no additional")||i.includes("none")},ee=t=>{if(!t)return!1;const i=t.toLowerCase();return i==="option_1"||i==="1"||i==="no_obligations"||i.includes("no_obligation")||i.includes("no obligation")||i.includes("none")},R=t=>{if(!t)return!1;const i=t.toLowerCase();return!["unemployed","student","unpaid_leave","other"].includes(i)},At=()=>O().shape({mainSourceOfIncome:x().required(n("error_select_answer","Please select an answer")).test("not-empty",n("error_select_answer","Please select an answer"),t=>t!=null&&t!==""),monthlyIncome:C().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(n("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),startDate:x().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(n("error_date","Please enter a valid date")),otherwise:t=>t.notRequired()}),fieldOfActivity:x().when("mainSourceOfIncome",{is:t=>t!=null&&t!==""&&R(t),then:t=>t.required(n("error_select_field_of_activity","Please select field of activity")),otherwise:t=>t.notRequired()}),profession:x().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(n("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),companyName:x().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(n("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),additionalIncome:x().required(n("error_select_one_of_the_options","Please select one of the options")).test("not-empty",n("error_select_one_of_the_options","Please select one of the options"),t=>t!=null&&t!==""),additionalIncomeAmount:C().when("additionalIncome",{is:t=>t!=null&&t!==""&&!Bt(t),then:t=>t.required(n("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),obligation:x().required(n("error_select_one_of_the_options","Please select one of the options")),bank:x().when("obligation",{is:t=>t!=null&&t!==""&&!ee(t),then:t=>t.required(n("error_select_bank","Please select a bank")),otherwise:t=>t.notRequired()}),monthlyPaymentForAnotherBank:C().when("obligation",{is:t=>t!=null&&t!==""&&!ee(t),then:t=>t.required(n("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),endDate:x().when("obligation",{is:t=>t!=null&&t!==""&&!ee(t),then:t=>t.required(n("error_date","Please enter a valid date")),otherwise:t=>t.notRequired()})}),Nt=At(),Rt=()=>{const t=T(),i=B(),r=y(o=>o.refinanceCredit),h={mainSourceOfIncome:r.mainSourceOfIncome||"",monthlyIncome:r.monthlyIncome||null,startDate:r.startDate||new Date().getTime(),fieldOfActivity:r.fieldOfActivity||"",profession:r.profession||"",companyName:r.companyName||"",additionalIncome:r.additionalIncome||"",additionalIncomeAmount:r.additionalIncomeAmount||null,obligation:r.obligation||"option_1",bank:r.bank||"",monthlyPaymentForAnotherBank:r.monthlyPaymentForAnotherBank||null,endDate:r.endDate||new Date().getTime(),amountIncomeCurrentYear:r.amountIncomeCurrentYear||null,noIncome:r.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(G,{initialValues:h,validationSchema:Nt,validateOnMount:!0,onSubmit:o=>{t(M(o)),i("/services/refinance-credit/4")},children:e.jsxs(J,{children:[e.jsx(W,{children:e.jsx(Ot,{})}),e.jsx(re,{})]})}),e.jsx(He,{}),e.jsx(Ge,{}),e.jsx(Je,{})]})},Tt=()=>{const{stepNumber:t}=xe(),{t:i,i18n:r}=q(),h=B(),o=y(s=>s.login.isLogin);if(I.useEffect(()=>{!o&&t!=="1"&&h("/services/refinance-credit/1")},[o,t,h]),!o&&t!=="1")return e.jsx(de,{});const l=[i("mobile_step_1"),i("mobile_step_2"),i("mobile_step_3"),i("mobile_step_4")];let c;switch(t){case"1":c=e.jsx(vt,{});break;case"2":c=e.jsx(Mt,{});break;case"3":c=e.jsx(Rt,{});break;case"4":c=e.jsx(It,{});break;default:c=e.jsx(Te,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[e.jsx(we,{progress:t,data:l}),e.jsx(I.Suspense,{fallback:e.jsx(de,{}),children:c})]})},ya=Tt;export{ya as RefinanceCredit};
