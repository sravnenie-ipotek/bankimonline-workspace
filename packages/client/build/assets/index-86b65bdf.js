import{j as e}from"./ui-vendor-5a9cd79c.js";import{r as I,f as B,b as ae,j as re,k as pe}from"./react-vendor-19e41fc0.js";import{c as he,u as ge,a as ce,D as C,E as xe,b as Y,A as fe,T as ne,L as ie}from"./index-44d8657f.js";import{P as je}from"./ProgressBar-0e5e5205.js";import{c as ye,a as R,u as y,F as be,G as we,m as De,d as me,n as i,l as F,o as ve,p as Pe,q as Ce,r as Se,t as Ie,v as qe,w as ke,x as Me,y as Fe,z as Oe,A as oe,B as Be,N as Ae}from"./index-82c03faf.js";import{u as L,F as U,b as W,a as O,c as g,f as P,g as X}from"./form-vendor-429348f6.js";import{V as Te}from"./VideoPoster-8c6471f6.js";import{S as Re,a as Ne,M as Ee,U as Ve,A as $e,F as ze,B as Ye,b as Le,c as Ue,O as We}from"./SourceOfIncomeModal-05ce8fd6.js";import{C as m}from"./Column-966fba25.js";import{D as Z}from"./DropdownMenu-b6e6fbb5.js";import{F as H}from"./FormContainer-132d032d.js";import{F as S}from"./FormattedInput-71317abc.js";import{R as f}from"./Row-a8c2e855.js";import{F as G}from"./FormCaption-ef258fee.js";import{D as se}from"./DeleteIcon-b228fd68.js";import{A as M,U as k}from"./AddButton-c0ca1d4a.js";import{C as $}from"./Calendar-e939955e.js";import{E as He}from"./ExitModule-19a1d4cc.js";import{g as z,M as Ge,c as de,A as Je,a as Ke,O as Qe,b as le}from"./componentsByIncomeSource-d64036c5.js";import{u as q}from"./i18n-vendor-5cfd36a0.js";import{D as ee}from"./DoubleButtons-f26261f6.js";import{R as Xe}from"./RowTwo-c68ad8e7.js";import{B as Ze,P as et,A as tt}from"./PartnerPayMortgage-5b32c381.js";import{N as at,B as rt,E as nt,A as it,T as ot,C as st,M as dt,I as lt,P as ct}from"./Taxes-e4942736.js";import{C as mt,a as _t,H as ut}from"./HowMuchChildrens-8ce3e3fc.js";import{F as pt}from"./FamilyStatus-c9b56afd.js";import{I as ht}from"./Info-d162f33d.js";import"./components-vendor-e60b5450.js";import"./utils-vendor-48989965.js";import"./state-vendor-2a767ce0.js";import"./MortgageParameters-895e19dd.js";import"./PercentIcon-69cb9491.js";import"./useDropdownData-26d062c8.js";import"./Control-6a316830.js";import"./ShieldCheckIcon-a0d68f8f.js";const gt={"mortgage-data":"_mortgage-data_1kje2_1","mortgage-data-title":"_mortgage-data-title_1kje2_6","mortgage-data-title__text":"_mortgage-data-title__text_1kje2_12","mortgage-data-title__button":"_mortgage-data-title__button_1kje2_18","mortgage-data-form":"_mortgage-data-form_1kje2_28","mortgage-data-form__items":"_mortgage-data-form__items_1kje2_36","mortgage-data-form__item-delete-wrapper":"_mortgage-data-form__item-delete-wrapper_1kje2_42","mortgage-data-form__item-delete-button":"_mortgage-data-form__item-delete-button_1kje2_48","mortgage-data-form__add":"_mortgage-data-form__add_1kje2_70","button-left__icon":"_button-left__icon_1kje2_84"},D=ye.bind(gt),xt=()=>{const[t,x]=I.useState([]),[r,p]=I.useState(null),{values:o,setFieldValue:l,errors:c,touched:s,setFieldTouched:j}=L(),[w,{open:A,close:v}]=he(!1),{isDesktop:b,isTablet:J,isMobile:K}=ge(),{t:_,i18n:te}=q(),{getContent:u}=ce("refinance_credit_1"),T=o.refinancingCredit==="option_2";I.useEffect(()=>{x(o.creditData)},[o.creditData]);const N=()=>{const h={id:z(t),bank:"",amount:null,monthlyPayment:null,startDate:"",endDate:"",earlyRepayment:null};l("creditData",[...t,h])},E=d=>{p(d),A()},Q=()=>{if(r!==null){const d=t.filter(h=>h.id!==r);l("creditData",d)}v()},V=[{value:"hapoalim",label:u("bank_hapoalim",_("bank_hapoalim"))},{value:"leumi",label:u("bank_leumi",_("bank_leumi"))},{value:"discount",label:u("bank_discount",_("bank_discount"))},{value:"massad",label:u("bank_massad",_("bank_massad"))},{value:"israel",label:u("bank_israel",_("bank_israel"))}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D("mortgage-data"),children:[e.jsx("div",{className:D("mortgage-data-title"),children:e.jsx("h4",{className:D("mortgage-data-title__text"),children:u("list_credits_title",_("list_credits_title"))})}),b&&e.jsxs("div",{className:D("mortgage-data-form"),children:[e.jsx("div",{className:D("mortgage-data-form__items"),children:t.map(d=>e.jsxs(I.Fragment,{children:[e.jsxs(f,{children:[e.jsx(m,{children:e.jsx(Z,{data:V,title:u("bank_apply_credit",_("bank_apply_credit")),placeholder:u("calculate_mortgage_first_ph",_("calculate_mortgage_first_ph")),value:d.bank,onChange:h=>{const a=t.map(n=>n.id===d.id?{...n,bank:h}:n);l("creditData",a)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("amount_credit_title",_("amount_credit_title")),handleChange:h=>{const a=t.map(n=>n.id===d.id?{...n,amount:h}:n);l("creditData",a)},value:d.amount,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("calculate_mortgage_initial_payment",_("calculate_mortgage_initial_payment")),handleChange:h=>{const a=t.map(n=>n.id===d.id?{...n,monthlyPayment:h}:n);l("creditData",a)},value:d.monthlyPayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})})]}),e.jsxs(f,{children:[e.jsx(m,{children:e.jsx($,{title:u("refinance_credit_start_date",_("refinance_credit_start_date")),placeholder:u("date_ph",_("date_ph")),value:d.startDate,onChange:h=>{const a=t.map(n=>n.id===d.id?{...n,startDate:h}:n);l("creditData",a)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx($,{title:u("refinance_credit_end_date",_("refinance_credit_end_date")),placeholder:u("date_ph",_("date_ph")),value:d.endDate,onChange:h=>{const a=t.map(n=>n.id===d.id?{...n,endDate:h}:n);l("creditData",a)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),T&&e.jsx(m,{children:e.jsx(S,{title:u("early_repayment",_("early_repayment")),handleChange:h=>{const a=t.map(n=>n.id===d.id?{...n,earlyRepayment:h}:n);l("creditData",a)},value:d.earlyRepayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),!T&&e.jsx(m,{})]}),e.jsx("div",{className:D("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:D("mortgage-data-form__item-delete-button"),onClick:()=>E(d.id),children:e.jsx(se,{})})}),e.jsx(C,{})]},d.id))}),e.jsx("div",{className:D("mortgage-data-form__add"),children:e.jsx(M,{value:u("add_credit",_("add_credit")),onClick:N})})]}),(J||K)&&e.jsxs("div",{className:D("mortgage-data-form"),children:[e.jsx("div",{className:D("mortgage-data-form__items"),children:t.map(d=>e.jsxs(I.Fragment,{children:[e.jsxs(f,{children:[e.jsx(m,{children:e.jsx(Z,{data:V,title:u("bank_apply_credit",_("bank_apply_credit")),placeholder:u("calculate_mortgage_first_ph",_("calculate_mortgage_first_ph")),value:d.bank,onChange:h=>{const a=t.map(n=>n.id===d.id?{...n,bank:h}:n);l("creditData",a)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("amount_credit_title",_("amount_credit_title")),handleChange:h=>{const a=t.map(n=>n.id===d.id?{...n,amount:h}:n);l("creditData",a)},value:d.amount,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx(S,{title:u("calculate_mortgage_initial_payment",_("calculate_mortgage_initial_payment")),handleChange:h=>{const a=t.map(n=>n.id===d.id?{...n,monthlyPayment:h}:n);l("creditData",a)},value:d.monthlyPayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx($,{title:u("refinance_credit_start_date",_("refinance_credit_start_date")),placeholder:u("date_ph",_("date_ph")),value:d.startDate,onChange:h=>{const a=t.map(n=>n.id===d.id?{...n,startDate:h}:n);l("creditData",a)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),e.jsx(m,{children:e.jsx($,{title:u("refinance_credit_end_date",_("refinance_credit_end_date")),placeholder:u("date_ph",_("date_ph")),value:d.endDate,onChange:h=>{const a=t.map(n=>n.id===d.id?{...n,endDate:h}:n);l("creditData",a)},onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})}),T&&e.jsx(m,{children:e.jsx(S,{title:u("early_repayment",_("early_repayment")),handleChange:h=>{const a=t.map(n=>n.id===d.id?{...n,earlyRepayment:h}:n);l("creditData",a)},value:d.earlyRepayment,onBlur:()=>j("creditData"),error:s.creditData&&c.creditData})})]}),e.jsx("div",{className:D("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:D("mortgage-data-form__item-delete-button"),onClick:()=>E(d.id),children:e.jsx(se,{})})}),e.jsx(C,{})]},d.id))}),e.jsx("div",{className:D("mortgage-data-form__add"),children:e.jsx(M,{value:u("add_credit",_("add_credit")),onClick:N})})]})]}),e.jsx(He,{opened:w,onClose:v,title:u("remove_credit",_("remove_credit")),subtitle:u("remove_credit_subtitle",_("remove_credit_subtitle")),onConfirm:Q,confirmText:u("delete",_("delete"))})]})},ft=()=>{const{t,i18n:x}=q(),{getContent:r}=ce("refinance_credit_1"),p=[{value:"option_1",label:r("calculate_credit_why_option_1",t("calculate_credit_why_option_1"))},{value:"option_2",label:r("calculate_credit_why_option_2",t("calculate_credit_why_option_2"))},{value:"option_3",label:r("calculate_credit_why_option_3",t("calculate_credit_why_option_3"))},{value:"option_4",label:r("calculate_credit_why_option_4",t("calculate_credit_why_option_4"))}],{setFieldValue:o,values:l,errors:c,touched:s,setFieldTouched:j}=L();return e.jsxs(H,{children:[e.jsx(G,{title:r("credit_refinance_title",t("credit_refinance_title"))}),e.jsx(f,{children:e.jsx(m,{children:e.jsx(Z,{data:p,title:r("mortgage_credit_why",t("mortgage_credit_why")),placeholder:r("credit_refinance_why_ph",t("credit_refinance_why_ph")),value:l.refinancingCredit,onChange:w=>o("refinancingCredit",w),onBlur:()=>j("refinancingCredit"),error:s.refinancingCredit&&c.refinancingCredit})})}),e.jsx(C,{}),e.jsx(f,{children:e.jsx(xt,{})}),l.refinancingCredit==="option_3"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx(f,{children:e.jsx(m,{children:e.jsx(S,{name:"desiredMonthlyPayment",title:r("desired_monthly_payment",t("desired_monthly_payment")),handleChange:w=>o("desiredMonthlyPayment",w),value:l.desiredMonthlyPayment,onBlur:()=>j("desiredMonthlyPayment"),error:s.desiredMonthlyPayment&&c.desiredMonthlyPayment})})})]}),l.refinancingCredit==="option_4"&&e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx(f,{children:e.jsxs(m,{children:[e.jsx(Re,{disableCurrency:!0,unitsMax:r("calculate_mortgage_period_units_max",t("calculate_mortgage_period_units_max")),unitsMin:r("calculate_mortgage_period_units_min",t("calculate_mortgage_period_units_min")),value:l.desiredTerm,name:"desiredTerm",min:4,max:30,error:c.desiredTerm,title:r("credit_loan_period",t("credit_loan_period")),handleChange:w=>o("desiredTerm",w)}),c.desiredTerm&&e.jsx(xe,{error:c.desiredTerm})]})})]})]})},jt=()=>O().shape({refinancingCredit:g().required(i("error_select_answer","Please select an answer")),desiredMonthlyPayment:P().positive(i("error_credit_payment_positive","Payment must be positive")).when("refinancingCredit",{is:"option_3",then:t=>t.required(i("error_required_to_fill_out","This field is required")),otherwise:t=>t.notRequired()}),desiredTerm:P().min(4,i("error_min_period","Minimum period is 4 years")).max(30,i("error_max_period","Maximum period is 30 years")).when("refinancingCredit",{is:"option_4",then:t=>t.required(i("error_required_to_fill_out","This field is required")),otherwise:t=>t.notRequired()}),period:P().min(4,i("error_min_period","Minimum period is 4 years")).max(30,i("error_max_period","Maximum period is 30 years")).notRequired(),monthlyPayment:P().notRequired(),creditData:X().of(O().shape({bank:g().required(i("error_credit_bank_required","Bank selection is required")),amount:P().positive(i("error_credit_amount_positive","Amount must be positive")).required(i("error_credit_amount_required","Credit amount is required")),monthlyPayment:P().positive(i("error_credit_payment_positive","Payment must be positive")).required(i("error_credit_payment_required","Monthly payment is required")),startDate:g().required(i("error_credit_start_date_required","Start date is required")),endDate:g().required(i("error_credit_end_date_required","End date is required")).test("end-date-after-start",i("error_credit_end_date_validation","End date must be after start date"),function(t){const{startDate:x}=this.parent;return!t||!x?!0:new Date(t)>new Date(x)}),earlyRepayment:P().positive(i("error_credit_early_payment_positive","Early payment must be positive")).nullable().notRequired()})).min(1,i("error_credit_data_required","At least one credit entry is required"))}),yt=()=>{const{t,i18n:x}=q(),r=R(),p=B(),o=y(b=>b.refinanceCredit),l=y(b=>b.login.isLogin),c=new Date;c.setDate(c.getDate()+1),c.toISOString().split("T")[0];const s=new Date;s.setFullYear(s.getFullYear()-5);const j=s.toISOString().split("T")[0],w=new Date;w.setFullYear(w.getFullYear()+10);const A=w.toISOString().split("T")[0],v={refinancingCredit:o.refinancingCredit||"",period:o.period||30,monthlyPayment:o.monthlyPayment||1e6,desiredMonthlyPayment:o.desiredMonthlyPayment||null,desiredTerm:o.desiredTerm||null,creditData:o.creditData||[{id:1,bank:"hapoalim",amount:null,monthlyPayment:null,startDate:j,endDate:A,earlyRepayment:null}]};return e.jsxs(e.Fragment,{children:[e.jsx(U,{initialValues:v,validationSchema:jt(),validateOnMount:!0,onSubmit:b=>{r(be(b)),r(we({data:b})),l?p("/services/refinance-credit/2"):(r(De()),r(me("phoneVerification")))},children:e.jsxs(W,{children:[e.jsxs(Y,{children:[e.jsx(Te,{title:t("credit_refinance_title"),text:t("credit_refinance_banner_subtext"),size:"small"}),e.jsx(ft,{})]}),e.jsx(Ne,{showValidationHints:!0})]})}),e.jsx(Ee,{}),e.jsx(fe,{})]})},bt=()=>{const{t,i18n:x}=q(),r=y(o=>o.login.loginData),p=y(o=>o.refinanceCredit);return e.jsxs(H,{children:[e.jsx(G,{title:t("refinance_credit_final")}),e.jsx(Ve,{credit:p!=null&&p.period?p.period*1e3:void 0,nameSurname:r==null?void 0:r.nameSurname,phoneNumber:r==null?void 0:r.phoneNumber}),e.jsx($e,{text:t("refinance_credit_warning")}),e.jsx(f,{children:e.jsx(ze,{})}),e.jsx(Ye,{})]})},wt={selectedBank:"",selectedOffer:null},Dt=O().shape({selectedBank:g(),selectedOffer:O().nullable()}),vt=()=>{const t=R(),x=B(),r=y(o=>o.login.loginData),p=y(o=>o.login.isLogin);return e.jsx(U,{initialValues:wt,validationSchema:Dt,validateOnMount:!0,onSubmit:o=>{console.log("Saving refinance credit data and proceeding...",o),t(F(o)),!p||!(r!=null&&r.phoneNumber)?(console.log("User not authenticated, opening auth modal"),t(ve()),t(me("signUp"))):(console.log("User authenticated, proceeding to application"),x("/services/application-submitted"))},children:e.jsxs(W,{children:[e.jsx(Y,{children:e.jsx(bt,{})}),e.jsx(ee,{})]})})},Pt=()=>{const{t,i18n:x}=q(),{values:r}=L(),p=y(o=>o.login.loginData);return e.jsxs(H,{children:[e.jsx(G,{title:t("calculate_mortgage_step2_title")}),e.jsxs(Xe,{children:[e.jsx(ht,{}),e.jsx(k,{name:p==null?void 0:p.nameSurname,phone:p==null?void 0:p.phoneNumber})]}),e.jsxs(f,{children:[e.jsx(at,{}),e.jsx(rt,{}),e.jsx(nt,{})]}),e.jsxs(f,{children:[e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(it,{}),r.additionalCitizenships==="yes"&&e.jsx(mt,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(ot,{}),r.taxes==="yes"&&e.jsx(_t,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(st,{}),r.childrens==="yes"&&e.jsx(ut,{})]})]}),e.jsx(C,{}),e.jsxs(f,{children:[e.jsx(dt,{}),e.jsx(lt,{}),e.jsx(ct,{})]}),e.jsx(C,{}),e.jsxs(f,{children:[e.jsx(Ze,{}),e.jsx(m,{}),e.jsx(m,{})]}),e.jsx(C,{}),e.jsxs(f,{children:[e.jsx(pt,{}),e.jsx(m,{children:r.familyStatus==="option_2"&&e.jsx(et,{})}),e.jsx(m,{children:r.partnerPayMortgage==="yes"&&r.familyStatus==="option_2"&&e.jsx(tt,{})})]})]})},Ct=()=>O().shape({nameSurname:g().required(i("error_name_surname","Please enter your name and surname")),birthday:g().required(i("error_date","Please enter a valid date")),education:g().required(i("error_select_answer","Please select an answer")),additionalCitizenships:g().required(i("error_select_answer","Please select an answer")),citizenshipsDropdown:X().when("additionalCitizenships",{is:"yes",then:t=>t.min(1,i("error_select_answer","Please select an answer")),otherwise:t=>t.min(0)}),taxes:g().required(i("error_select_answer","Please select an answer")),countriesPayTaxes:X().when("taxes",{is:"yes",then:t=>t.min(1,i("error_select_answer","Please select an answer")),otherwise:t=>t.min(0)}),childrens:g().required(i("error_select_answer","Please select an answer")),howMuchChildrens:P().required(i("error_fill_field","Please fill this field")),medicalInsurance:g().required(i("error_select_answer","Please select an answer")),isForeigner:g().required(i("error_select_answer","Please select an answer")),publicPerson:g().required(i("error_select_answer","Please select an answer")),borrowers:P().min(1,i("error_quantity_borrowers","Please specify number of borrowers")).required(i("error_quantity_borrowers","Please specify number of borrowers")),familyStatus:g().required(i("error_select_answer","Please select an answer")),partnerPayMortgage:g().when("familyStatus",{is:"option_2",then:t=>t.required(i("error_select_answer","Please select an answer")),otherwise:t=>t.notRequired()})}),St=Ct(),It=()=>{const t=R(),x=B(),r=y(l=>l.mortgage),o={nameSurname:y(l=>l.login.loginData).nameSurname||r.nameSurname||"",birthday:r.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:r.education||"",additionalCitizenships:r.additionalCitizenships||null,citizenshipsDropdown:r.citizenshipsDropdown||[],taxes:r.taxes||null,countriesPayTaxes:r.countriesPayTaxes||[],childrens:r.childrens||null,howMuchChildrens:r.howMuchChildrens||1,medicalInsurance:r.medicalInsurance||null,isForeigner:r.isForeigner||null,publicPerson:r.publicPerson||null,borrowers:r.borrowers||null,familyStatus:r.familyStatus||"",partnerPayMortgage:r.partnerPayMortgage||null,addPartner:r.addPartner||""};return e.jsx(U,{initialValues:o,validationSchema:St,validateOnMount:!0,onSubmit:l=>{t(F(l)),x("/services/calculate-mortgage/3")},children:e.jsxs(W,{children:[e.jsx(Y,{children:e.jsx(Pt,{})}),e.jsx(ee,{})]})})},qt=()=>{const{t,i18n:x}=q(),r=B(),{values:p}=L(),{mainSourceOfIncome:o,additionalIncome:l,obligation:c}=p,s=R(),j=y(a=>a.borrowers.sourceOfIncomeModal),w=y(a=>a.borrowers.additionalIncomeModal),A=y(a=>a.borrowers.obligationModal),v=y(a=>a.otherBorrowers.otherBorrowers),b=y(a=>a.login.loginData),J=()=>{s(F(p)),s(Pe())},K=()=>{s(F(p)),s(Ce())},_=()=>{s(F(p)),s(Se())},te=a=>{s(Ie({id:a}))},u=a=>{s(qe({id:a}))},T=a=>{s(ke({id:a}))},N=a=>{s(Me(a))},E=a=>{s(Fe(a))},Q=a=>{s(Oe(a))},V=a=>{s(oe(a));const _e=!v.some(ue=>ue.id===a)?z(v):a;r({pathname:"/services/other-borrowers/1/",search:re({pageId:String(_e)}).toString()})},d=()=>{s(oe(z(v))),r({pathname:"/services/other-borrowers/1/",search:re({pageId:z(v).toString()}).toString()})},h=a=>{s(Be(a))};return e.jsxs(H,{children:[e.jsx(G,{title:t("calculate_mortgage_step3_title")}),e.jsx(k,{name:b==null?void 0:b.nameSurname,phone:b==null?void 0:b.phoneNumber}),e.jsxs(f,{children:[e.jsx(Ge,{}),de[o]&&de[o].map((a,n)=>e.jsx(ae.Fragment,{children:a},n)),e.jsx(m,{})]}),e.jsx(f,{children:o&&e.jsxs(m,{children:[j.map(a=>e.jsx(k,{onEdit:()=>N(a.id),onDelete:()=>te(a.id),enableEdit:!0,name:`${t("source_of_income")}${a.id+1}`},a.id)),e.jsx(M,{onClick:J,color:"#FBE54D",value:t("add_place_to_work"),variant:"none"})]})}),e.jsx(C,{}),e.jsxs(f,{children:[e.jsx(Je,{}),l&&l!=="option_1"&&e.jsx(Ke,{}),e.jsx(m,{})]}),l&&l!=="option_1"&&e.jsx(f,{children:e.jsxs(m,{children:[w.map(a=>e.jsx(k,{onEdit:()=>E(a.id),onDelete:()=>u(a.id),enableEdit:!0,name:`${t("additional_source_of_income")}${a.id+1}`},a.id)),e.jsx(M,{onClick:K,color:"#FBE54D",value:t("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(C,{}),e.jsxs(f,{children:[e.jsx(Qe,{}),le[c]&&le[c].map((a,n)=>e.jsx(ae.Fragment,{children:a},n)),e.jsx(m,{})]}),c&&c!=="option_1"&&e.jsx(f,{children:e.jsxs(m,{children:[A.map(a=>e.jsx(k,{onEdit:()=>Q(a.id),onDelete:()=>T(a.id),enableEdit:!0,name:`${t("obligation")}${a.id+1}`},a.id)),e.jsx(M,{onClick:_,color:"#FBE54D",value:t("add_obligation"),variant:"none"})]})}),e.jsx(C,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[v&&e.jsx(ne,{title:t("borrower")}),e.jsxs(f,{style:{columnGap:"2rem"},children:[v.map(a=>e.jsx(m,{children:e.jsx(k,{onEdit:()=>V(a.id),onDelete:()=>h(a.id),enableEdit:!0,name:a.nameSurname},a.id)},a.id)),!v&&e.jsx(ne,{title:t("borrower")}),e.jsx(m,{children:e.jsx(M,{value:t("add_borrower"),onClick:d,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(m,{})]})]})]})},kt=()=>O().shape({mainSourceOfIncome:g().required(i("error_select_answer","Please select an answer")).test("not-empty",i("error_select_answer","Please select an answer"),t=>t!=null&&t!==""),monthlyIncome:P().when("mainSourceOfIncome",{is:t=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),startDate:g().when("mainSourceOfIncome",{is:t=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(t),then:t=>t.required(i("error_date","Please enter a valid date")),otherwise:t=>t.notRequired()}),fieldOfActivity:g().when("mainSourceOfIncome",{is:t=>t!=null&&t!==""&&!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(t),then:t=>t.required(i("error_select_field_of_activity","Please select field of activity")),otherwise:t=>t.notRequired()}),profession:g().when("mainSourceOfIncome",{is:t=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),companyName:g().when("mainSourceOfIncome",{is:t=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),additionalIncome:g().required(i("error_select_one_of_the_options","Please select one of the options")).test("not-empty",i("error_select_one_of_the_options","Please select one of the options"),t=>t!=null&&t!==""),additionalIncomeAmount:P().when("additionalIncome",{is:t=>t!=null&&t!==""&&t!=="option_1",then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),obligation:g().required(i("error_select_one_of_the_options","Please select one of the options")),bank:g().when("obligation",{is:t=>t!=null&&t!==""&&t!=="option_1",then:t=>t.required(i("error_select_bank","Please select a bank")),otherwise:t=>t.notRequired()}),monthlyPaymentForAnotherBank:P().when("obligation",{is:t=>t!=null&&t!==""&&t!=="option_1",then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),endDate:g().when("obligation",{is:t=>t!=null&&t!==""&&t!=="option_1",then:t=>t.required(i("error_date","Please enter a valid date")),otherwise:t=>t.notRequired()})}),Mt=kt(),Ft=()=>{const t=R(),x=B(),r=y(o=>o.mortgage),p={mainSourceOfIncome:r.mainSourceOfIncome||"",monthlyIncome:r.monthlyIncome||null,startDate:r.startDate||new Date().getTime(),fieldOfActivity:r.fieldOfActivity||"",profession:r.profession||"",companyName:r.companyName||"",additionalIncome:r.additionalIncome||"",additionalIncomeAmount:r.additionalIncomeAmount||null,obligation:r.obligation||"option_1",bank:r.bank||"",monthlyPaymentForAnotherBank:r.monthlyPaymentForAnotherBank||null,endDate:r.endDate||new Date().getTime(),amountIncomeCurrentYear:r.amountIncomeCurrentYear||null,noIncome:r.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(U,{initialValues:p,validationSchema:Mt,validateOnMount:!0,onSubmit:o=>{t(F(o)),x("/services/calculate-mortgage/4")},children:e.jsxs(W,{children:[e.jsx(Y,{children:e.jsx(qt,{})}),e.jsx(ee,{})]})}),e.jsx(Le,{}),e.jsx(Ue,{}),e.jsx(We,{})]})},Ot=()=>{const{stepNumber:t}=pe(),{t:x,i18n:r}=q(),p=B(),o=y(s=>s.login.isLogin);if(I.useEffect(()=>{!o&&t!=="1"&&p("/services/refinance-credit/1")},[o,t,p]),!o&&t!=="1")return e.jsx(ie,{});const l=[x("mobile_step_1"),x("mobile_step_2"),x("mobile_step_3"),x("mobile_step_4")];let c;switch(t){case"1":c=e.jsx(yt,{});break;case"2":c=e.jsx(It,{});break;case"3":c=e.jsx(Ft,{});break;case"4":c=e.jsx(vt,{});break;default:c=e.jsx(Ae,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[e.jsx(je,{progress:t,data:l}),e.jsx(I.Suspense,{fallback:e.jsx(ie,{}),children:c})]})},ha=Ot;export{ha as RefinanceCredit};
