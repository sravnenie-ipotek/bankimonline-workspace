import{j as a}from"./ui-vendor-5a9cd79c.js";import{k as U,f as J,r as p,L as f}from"./react-vendor-19e41fc0.js";import{b as j}from"./index-79a992ab.js";import{M as K,C as Q}from"./ClockIcon-9f189fdb.js";import{u as W}from"./i18n-vendor-5cfd36a0.js";import"./index-b94574b0.js";import"./state-vendor-2a767ce0.js";import"./utils-vendor-48989965.js";import"./form-vendor-3025b96d.js";import"./components-vendor-e60b5450.js";const X="_vacancyDetailPage_1igo5_1",Y="_content_1igo5_7",Z="_breadcrumbs_1igo5_12",aa="_breadcrumbLink_1igo5_20",ea="_breadcrumbSeparator_1igo5_28",na="_breadcrumbCurrent_1igo5_31",ta="_vacancyLayout_1igo5_35",ca="_vacancyDetails_1igo5_54",ia="_backButtonTop_1igo5_54",sa="_vacancyHeader_1igo5_70",oa="_title_1igo5_73",la="_vacancyMeta_1igo5_85",ra="_categoryChip_1igo5_90",pa="_categoryDot_1igo5_102",da="_metaInfo_1igo5_108",ma="_metaItem_1igo5_113",_a="_currency_1igo5_125",ua="_section_1igo5_129",ya="_sectionContent_1igo5_138",va="_applicationForm_1igo5_155",ha="_formContainer_1igo5_167",ga="_successMessage_1igo5_195",xa="_successIcon_1igo5_202",fa="_goHomeButton_1igo5_227",ja="_formGroup_1igo5_260",Na="_error_1igo5_288",ba="_errorText_1igo5_291",Da="_phoneInputContainer_1igo5_301",Fa="_countryFlag_1igo5_319",Ca="_flagIcon_1igo5_329",Ia="_dropdownArrow_1igo5_335",La="_salaryInputContainer_1igo5_353",Ta="_currencySymbol_1igo5_388",wa="_fileUpload_1igo5_400",Sa="_dragActive_1igo5_419",Ma="_fileUploadLabel_1igo5_426",ka="_uploadContent_1igo5_434",Ba="_uploadIcon_1igo5_440",Pa="_fileName_1igo5_451",Aa="_fileHelp_1igo5_457",$a="_submitButton_1igo5_464",Ea="_loading_1igo5_485",Ha="_spinner_1igo5_493",Ga="_spin_1igo5_493",Va="_backButton_1igo5_54",qa="_centeredMessageContainer_1igo5_579",za="_successMessageCentered_1igo5_586",Oa="_alreadyAppliedMessageCentered_1igo5_587",Ra="_infoIcon_1igo5_597",Ua="_buttonGroup_1igo5_634",Ja="_viewOtherPositionsButton_1igo5_642",e={vacancyDetailPage:X,content:Y,breadcrumbs:Z,breadcrumbLink:aa,breadcrumbSeparator:ea,breadcrumbCurrent:na,vacancyLayout:ta,vacancyDetails:ca,backButtonTop:ia,vacancyHeader:sa,title:oa,vacancyMeta:la,categoryChip:ra,categoryDot:pa,metaInfo:da,metaItem:ma,currency:_a,section:ua,sectionContent:ya,applicationForm:va,formContainer:ha,successMessage:ga,successIcon:xa,goHomeButton:fa,formGroup:ja,error:Na,errorText:ba,phoneInputContainer:Da,countryFlag:Fa,flagIcon:Ca,dropdownArrow:Ia,salaryInputContainer:La,currencySymbol:Ta,fileUpload:wa,dragActive:Sa,fileUploadLabel:Ma,uploadContent:ka,uploadIcon:Ba,fileName:Pa,fileHelp:Aa,submitButton:$a,loading:Ea,spinner:Ha,spin:Ga,backButton:Va,centeredMessageContainer:qa,successMessageCentered:za,alreadyAppliedMessageCentered:Oa,infoIcon:Ra,buttonGroup:Ua,viewOtherPositionsButton:Ja},Ka=()=>{const{id:u}=U(),y=J(),{t,i18n:N}=W(),[r,M]=p.useState(null),[k,b]=p.useState(!0),[D,v]=p.useState(null),[F,C]=p.useState(!1),[I,L]=p.useState(!1),[B,T]=p.useState(!1),[i,h]=p.useState({applicant_name:"",applicant_phone:"",applicant_email:"",applicant_city:"",expected_salary:"",portfolio_url:"",cover_letter:"",resume:null}),[s,m]=p.useState({}),[P,g]=p.useState(!1);p.useEffect(()=>{(async()=>{if(u)try{b(!0),v(null);const c=await fetch(`/api/vacancies/${u}?lang=${N.language}`);if(!c.ok){if(c.status===404){v("Vacancy not found");return}throw new Error(`HTTP error! status: ${c.status}`)}const l=await c.json();if(l.status==="success")M(l.data);else throw new Error(l.message||"Failed to fetch vacancy")}catch(c){console.error("Error fetching vacancy:",c),v(c instanceof Error?c.message:"Failed to load vacancy")}finally{b(!1)}})()},[u,N.language]);const A=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),$=n=>/^(\+?972|0)?[5-9]\d{8}$/.test(n.replace(/[-\s]/g,"")),E=()=>{const n={};if(i.applicant_name.trim()?i.applicant_name.length<2?n.applicant_name=t("vacancyDetail.applicationForm.validation.nameMinLength"):i.applicant_name.length>100&&(n.applicant_name=t("vacancyDetail.applicationForm.validation.nameMaxLength")):n.applicant_name=t("vacancyDetail.applicationForm.validation.required"),i.applicant_phone.trim()?$(i.applicant_phone)||(n.applicant_phone=t("vacancyDetail.applicationForm.validation.phoneFormat")):n.applicant_phone=t("vacancyDetail.applicationForm.validation.required"),i.applicant_email.trim()?A(i.applicant_email)||(n.applicant_email=t("vacancyDetail.applicationForm.validation.invalidEmail")):n.applicant_email=t("vacancyDetail.applicationForm.validation.required"),i.applicant_city.trim()?i.applicant_city.length<2&&(n.applicant_city=t("vacancyDetail.applicationForm.validation.cityMinLength")):n.applicant_city=t("vacancyDetail.applicationForm.validation.required"),i.expected_salary.trim()){const c=parseInt(i.expected_salary);isNaN(c)||c<=0?n.expected_salary=t("vacancyDetail.applicationForm.validation.salaryMinValue"):c>1e5&&(n.expected_salary=t("vacancyDetail.applicationForm.validation.salaryMaxValue"))}return i.cover_letter.length>2e3&&(n.cover_letter=t("vacancyDetail.applicationForm.validation.coverLetterMaxLength")),i.resume?(i.resume.size>5242880&&(n.resume=t("vacancyDetail.applicationForm.validation.fileSize")),["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(i.resume.type)||(n.resume=t("vacancyDetail.applicationForm.validation.fileType"))):n.resume=t("vacancyDetail.applicationForm.validation.fileRequired"),m(n),Object.keys(n).length===0},d=n=>{const{name:c,value:l}=n.target;h(o=>({...o,[c]:l})),s[c]&&m(o=>({...o,[c]:""}))},w=n=>{if(h(c=>({...c,resume:n})),n){const l=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];n.size>5242880?m(o=>({...o,resume:t("vacancyDetail.applicationForm.validation.fileSize")})):l.includes(n.type)?m(o=>({...o,resume:""})):m(o=>({...o,resume:t("vacancyDetail.applicationForm.validation.fileType")}))}else m(c=>({...c,resume:""}))},x=n=>{n.preventDefault(),n.stopPropagation(),n.type==="dragenter"||n.type==="dragover"?g(!0):n.type==="dragleave"&&g(!1)},H=n=>{if(n.preventDefault(),n.stopPropagation(),g(!1),n.dataTransfer.files&&n.dataTransfer.files[0]){const c=n.dataTransfer.files[0];w(c)}},G=n=>{n.target.files&&n.target.files[0]&&w(n.target.files[0])},V=async n=>{if(n.preventDefault(),!!E()){C(!0),L(!1),T(!1);try{const c=new FormData;c.append("applicant_name",i.applicant_name),c.append("applicant_phone",i.applicant_phone),c.append("applicant_email",i.applicant_email),c.append("applicant_city",i.applicant_city),c.append("expected_salary",i.expected_salary),c.append("portfolio_url",i.portfolio_url),c.append("cover_letter",i.cover_letter),i.resume&&c.append("resume",i.resume);const l=await fetch(`/api/vacancies/${u}/apply`,{method:"POST",body:c}),o=await l.json();if(l.ok&&o.status==="success")L(!0),h({applicant_name:"",applicant_phone:"",applicant_email:"",applicant_city:"",expected_salary:"",portfolio_url:"",cover_letter:"",resume:null});else if(l.status===409)T(!0);else throw new Error(o.message||"Failed to submit application")}catch(c){console.error("Error submitting application:",c),alert(t("vacancyDetail.applicationForm.error"))}finally{C(!1)}}},_=n=>r&&r[n]||"",S=()=>r&&r.title||"",q=(n,c,l)=>{const o=R=>new Intl.NumberFormat().format(R);return n&&c&&n!==c?`${o(n)} - ${o(c)} ${l}`:n?`${t("vacancy_salary_from")} ${o(n)} ${l}`:""},z=n=>({full_time:t("vacancy_employment_fulltime"),part_time:t("vacancy_employment_parttime","Part Time"),contract:t("vacancy_employment_contract","Contract"),temporary:t("vacancy_employment_temporary","Temporary")})[n]||n,O=n=>({development:"#FBE54D",design:"#4DABF7",management:"#69DB7C",marketing:"#FFB366",finance:"#A78BFA",customer_service:"#FF8CC8"})[n]||"#FBE54D";return k?a.jsx("div",{className:e.vacancyDetailPage,children:a.jsx(j,{children:a.jsxs("div",{className:e.loading,children:[a.jsx("div",{className:e.spinner}),a.jsx("p",{children:t("loading","Loading...")})]})})}):D||!r?a.jsx("div",{className:e.vacancyDetailPage,children:a.jsx(j,{children:a.jsxs("div",{className:e.error,children:[a.jsx("h1",{children:t("vacancy_not_found","Vacancy Not Found")}),a.jsx("p",{children:D||t("vacancy_not_found_description","The vacancy you are looking for does not exist or has been removed.")}),a.jsx(f,{to:"/vacancies",className:e.backButton,children:t("back_to_vacancies","Back to Vacancies")})]})})}):a.jsx("div",{className:e.vacancyDetailPage,children:a.jsx(j,{children:a.jsxs("div",{className:e.content,children:[a.jsxs("div",{className:e.breadcrumbs,children:[a.jsx(f,{to:"/",className:e.breadcrumbLink,children:t("navigation.home")}),a.jsx("span",{className:e.breadcrumbSeparator,children:"›"}),a.jsx(f,{to:"/vacancies",className:e.breadcrumbLink,children:t("vacancies.title")}),a.jsx("span",{className:e.breadcrumbSeparator,children:"›"}),a.jsx("span",{className:e.breadcrumbCurrent,children:S()})]}),I||B?a.jsx("div",{className:e.centeredMessageContainer,children:I?a.jsxs("div",{className:e.successMessageCentered,children:[a.jsx("div",{className:e.successIcon,children:"✓"}),a.jsx("h2",{children:t("vacancyDetail.applicationForm.success")}),a.jsx("p",{children:t("vacancyDetail.applicationForm.successMessage")}),a.jsx("button",{onClick:()=>y("/"),className:e.goHomeButton,children:t("vacancyDetail.applicationForm.goHome")})]}):a.jsxs("div",{className:e.alreadyAppliedMessageCentered,children:[a.jsx("div",{className:e.infoIcon,children:"ℹ"}),a.jsx("h2",{children:t("vacancyDetail.applicationForm.alreadyApplied")}),a.jsx("p",{children:t("vacancyDetail.applicationForm.alreadyAppliedMessage")}),a.jsxs("div",{className:e.buttonGroup,children:[a.jsx("button",{onClick:()=>y("/vacancies"),className:e.viewOtherPositionsButton,children:t("vacancyDetail.applicationForm.viewOtherPositions")}),a.jsx("button",{onClick:()=>y("/"),className:e.goHomeButton,children:t("vacancyDetail.applicationForm.goHome")})]})]})}):a.jsxs("div",{className:e.vacancyLayout,children:[a.jsxs("div",{className:e.vacancyDetails,children:[a.jsxs("button",{onClick:()=>y("/vacancies"),className:e.backButtonTop,children:["‹ ",t("vacancies.backToVacancies")]}),a.jsxs("div",{className:e.vacancyHeader,children:[a.jsx("h1",{className:e.title,children:S()}),a.jsxs("div",{className:e.vacancyMeta,children:[a.jsxs("div",{className:e.categoryChip,style:{backgroundColor:O(r.category)},children:[a.jsx("div",{className:e.categoryDot}),a.jsx("span",{children:t(`vacancies.categories.${r.category.toLowerCase()}`,r.category)})]}),a.jsxs("div",{className:e.metaInfo,children:[a.jsxs("div",{className:e.metaItem,children:[a.jsx(K,{}),a.jsx("span",{children:r.location})]}),a.jsxs("div",{className:e.metaItem,children:[a.jsx(Q,{}),a.jsx("span",{children:z(r.employment_type)})]}),a.jsxs("div",{className:e.metaItem,children:[a.jsx("span",{className:e.currency,children:"₪"}),a.jsx("span",{children:q(r.salary_min,r.salary_max,r.salary_currency)})]})]})]})]}),a.jsxs("div",{className:e.section,children:[a.jsx("h2",{children:t("vacancyDetail.generalInfo")}),a.jsx("div",{className:e.sectionContent,children:_("description").split(`
`).map((n,c)=>a.jsx("p",{children:n},c))})]}),a.jsxs("div",{className:e.section,children:[a.jsx("h2",{children:t("vacancyDetail.responsibilities")}),a.jsx("div",{className:e.sectionContent,children:_("responsibilities").split(`
`).map((n,c)=>a.jsx("div",{className:e.textLine,children:n},c))})]}),a.jsxs("div",{className:e.section,children:[a.jsx("h2",{children:t("vacancyDetail.requirements")}),a.jsx("div",{className:e.sectionContent,children:_("requirements").split(`
`).map((n,c)=>a.jsx("div",{className:e.textLine,children:n},c))})]}),a.jsxs("div",{className:e.section,children:[a.jsx("h2",{children:t("vacancyDetail.niceToHave")}),a.jsx("div",{className:e.sectionContent,children:_("nice_to_have").split(`
`).map((n,c)=>a.jsx("div",{className:e.textLine,children:n},c))})]}),a.jsxs("div",{className:e.section,children:[a.jsx("h2",{children:t("vacancyDetail.benefits")}),a.jsx("div",{className:e.sectionContent,children:_("benefits").split(`
`).map((n,c)=>a.jsx("div",{className:e.textLine,children:n},c))})]})]}),a.jsx("div",{className:e.applicationForm,children:a.jsxs("div",{className:e.formContainer,children:[a.jsx("h3",{children:t("vacancyDetail.applicationForm.title")}),a.jsxs("form",{onSubmit:V,children:[a.jsxs("div",{className:e.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_name",children:[t("vacancyDetail.applicationForm.fullName")," *"]}),a.jsx("input",{type:"text",id:"applicant_name",name:"applicant_name",value:i.applicant_name,onChange:d,required:!0,placeholder:t("vacancyDetail.applicationForm.fullNamePlaceholder"),className:s.applicant_name?e.error:""}),s.applicant_name&&a.jsx("span",{className:e.errorText,children:s.applicant_name})]}),a.jsxs("div",{className:e.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_phone",children:[t("vacancyDetail.applicationForm.phone")," *"]}),a.jsxs("div",{className:`${e.phoneInputContainer} ${s.applicant_phone?e.error:""}`,children:[a.jsxs("div",{className:e.countryFlag,children:[a.jsx("img",{src:"/static/lang/he.svg",alt:"Israel",className:e.flagIcon}),a.jsx("span",{className:e.dropdownArrow,children:"▼"})]}),a.jsx("input",{type:"tel",id:"applicant_phone",name:"applicant_phone",value:i.applicant_phone,onChange:d,required:!0,placeholder:t("vacancyDetail.applicationForm.phonePlaceholder")})]}),s.applicant_phone&&a.jsx("span",{className:e.errorText,children:s.applicant_phone})]}),a.jsxs("div",{className:e.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_email",children:[t("vacancyDetail.applicationForm.email")," *"]}),a.jsx("input",{type:"email",id:"applicant_email",name:"applicant_email",value:i.applicant_email,onChange:d,required:!0,placeholder:t("vacancyDetail.applicationForm.emailPlaceholder"),className:s.applicant_email?e.error:""}),s.applicant_email&&a.jsx("span",{className:e.errorText,children:s.applicant_email})]}),a.jsxs("div",{className:e.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_city",children:[t("vacancyDetail.applicationForm.city")," *"]}),a.jsx("input",{type:"text",id:"applicant_city",name:"applicant_city",value:i.applicant_city,onChange:d,required:!0,placeholder:t("vacancyDetail.applicationForm.cityPlaceholder"),className:s.applicant_city?e.error:""}),s.applicant_city&&a.jsx("span",{className:e.errorText,children:s.applicant_city})]}),a.jsxs("div",{className:e.formGroup,children:[a.jsx("label",{htmlFor:"expected_salary",children:t("vacancyDetail.applicationForm.expectedSalary")}),a.jsxs("div",{className:`${e.salaryInputContainer} ${s.expected_salary?e.error:""}`,children:[a.jsx("input",{type:"text",id:"expected_salary",name:"expected_salary",value:i.expected_salary,onChange:d,placeholder:t("vacancyDetail.applicationForm.expectedSalaryPlaceholder")}),a.jsx("span",{className:e.currencySymbol,children:"₪"})]}),s.expected_salary&&a.jsx("span",{className:e.errorText,children:s.expected_salary})]}),a.jsxs("div",{className:e.formGroup,children:[a.jsx("label",{htmlFor:"portfolio_url",children:t("vacancyDetail.applicationForm.portfolioLink")}),a.jsx("input",{type:"url",id:"portfolio_url",name:"portfolio_url",value:i.portfolio_url,onChange:d,placeholder:t("vacancyDetail.applicationForm.portfolioLinkPlaceholder")})]}),a.jsxs("div",{className:e.formGroup,children:[a.jsxs("label",{htmlFor:"resume",children:[t("vacancyDetail.applicationForm.uploadResume")," *"]}),a.jsxs("div",{className:`${e.fileUpload} ${P?e.dragActive:""} ${s.resume?e.error:""}`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:H,children:[a.jsx("input",{type:"file",id:"resume",name:"resume",onChange:G,accept:".pdf,.doc,.docx",style:{display:"none"}}),a.jsx("label",{htmlFor:"resume",className:e.fileUploadLabel,children:i.resume?a.jsx("span",{className:e.fileName,children:i.resume.name}):a.jsxs("div",{className:e.uploadContent,children:[a.jsx("div",{className:e.uploadIcon,children:"⬆"}),a.jsx("p",{children:t("vacancyDetail.applicationForm.uploadResumeText")})]})})]}),a.jsx("small",{className:e.fileHelp,children:t("vacancyDetail.applicationForm.allowedFiles")}),s.resume&&a.jsx("span",{className:e.errorText,children:s.resume})]}),a.jsxs("div",{className:e.formGroup,children:[a.jsx("label",{htmlFor:"cover_letter",children:t("vacancyDetail.applicationForm.coverLetter")}),a.jsx("textarea",{id:"cover_letter",name:"cover_letter",value:i.cover_letter,onChange:d,rows:4,placeholder:t("vacancyDetail.applicationForm.coverLetterPlaceholder"),className:s.cover_letter?e.error:""}),s.cover_letter&&a.jsx("span",{className:e.errorText,children:s.cover_letter})]}),a.jsx("button",{type:"submit",className:e.submitButton,disabled:F,children:t(F?"vacancyDetail.applicationForm.submitting":"vacancyDetail.applicationForm.submit")})]})]})})]})]})})})},ie=Ka;export{ie as VacancyDetail};
