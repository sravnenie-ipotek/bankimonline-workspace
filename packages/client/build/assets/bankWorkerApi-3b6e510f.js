import{a9 as p}from"./utils-vendor-fc077e46.js";const c={}.REACT_APP_API_URL||(window.location.hostname==="localhost"?"/api":"https://bankdev2standalone-production.up.railway.app/api"),s=p.create({baseURL:c,timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(o=>{var e,r;const a=localStorage.getItem("adminToken");return a&&((e=o.url)!=null&&e.includes("/admin/"))&&(o.headers.Authorization=`Bearer ${a}`),console.log(`API Request: ${(r=o.method)==null?void 0:r.toUpperCase()} ${o.url}`,o.data),o},o=>(console.error("API Request Error:",o),Promise.reject(o)));s.interceptors.response.use(o=>{var a;return console.log(`API Response: ${(a=o.config.method)==null?void 0:a.toUpperCase()} ${o.config.url}`,o.data),o},o=>{var a,e;return console.error("API Response Error:",((a=o.response)==null?void 0:a.data)||o.message),((e=o.response)==null?void 0:e.status)===401&&(localStorage.removeItem("adminToken"),window.location.pathname.includes("/admin/")&&(window.location.href="/admin")),Promise.reject(o)});class d{async getRegistrationForm(a){var e,r;try{return(await s.get(`/api/bank-worker/register/${a}`)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to load registration form")}}async completeRegistration(a){var e,r;try{return(await s.post("/api/bank-worker/register",a)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Registration failed")}}async getWorkerStatus(a){var e,r;try{return(await s.get(`/api/bank-worker/status/${a}`)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get worker status")}}async sendInvitation(a){var e,r;try{return(await s.post("/api/bank-worker/invite",a)).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to send invitation")}}async getInvitations(a){var e,r;try{return(await s.get("/api/admin/invitations",{params:a})).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get invitations")}}async getApprovalQueue(a){var e,r;try{return(await s.get("/api/admin/approval-queue",{params:a})).data}catch(t){throw new Error(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get approval queue")}}async approveWorker(a,e){var r,t;try{return(await s.post(`/api/admin/approve/${a}`,{comments:e})).data}catch(n){throw new Error(((t=(r=n.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to approve worker")}}async rejectWorker(a,e,r){var t,n;try{return(await s.post(`/api/admin/reject/${a}`,{reason:e,comments:r})).data}catch(i){throw new Error(((n=(t=i.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to reject worker")}}async getBanks(){var a,e;try{return(await s.get("/api/admin/banks")).data}catch(r){throw new Error(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to get banks")}}}const l=new d;export{l as b};
