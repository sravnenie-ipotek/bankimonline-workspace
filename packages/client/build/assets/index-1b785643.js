import{j as r}from"./ui-vendor-5a9cd79c.js";import{f as Y,r as f}from"./react-vendor-19e41fc0.js";import{F as E,b as D,c as m,j as S,a as P}from"./form-vendor-3025b96d.js";import{c as R}from"./index-c0d564f3.js";import{T as u,E as c,i as M,B as N}from"./index-f0724ccb.js";import{D as b}from"./DropdownMenu-4b9ce17d.js";import{F as x}from"./FormattedInput-94d27b7f.js";import{u as $}from"./api-2fc47091.js";import{u as O}from"./i18n-vendor-5cfd36a0.js";import"./state-vendor-2a767ce0.js";import"./utils-vendor-48989965.js";import"./components-vendor-e60b5450.js";import"./Control-53acd8be.js";const Q="_header_1xxzw_11",G="_logo_1xxzw_34",A="_content_1xxzw_43",H="_title_1xxzw_52",J="_subtitle_1xxzw_60",K="_form_1xxzw_48",U="_section_1xxzw_69",W="_input_1xxzw_110",X="_textarea_1xxzw_111",Z="_error_1xxzw_132",T="_active_1xxzw_164",V="_checkbox_1xxzw_182",F={"broker-questionnaire":"_broker-questionnaire_1xxzw_1",header:Q,"back-button":"_back-button_1xxzw_18",logo:G,content:A,"form-container":"_form-container_1xxzw_48",title:H,subtitle:J,"form-link":"_form-link_1xxzw_61",form:K,section:U,"section-title":"_section-title_1xxzw_74","form-row":"_form-row_1xxzw_77","two-columns":"_two-columns_1xxzw_94","form-field":"_form-field_1xxzw_102","full-width":"_full-width_1xxzw_107",input:W,textarea:X,error:Z,"yes-no-buttons":"_yes-no-buttons_1xxzw_142","yes-no-button":"_yes-no-button_1xxzw_142",active:T,"business-fields":"_business-fields_1xxzw_171","agreement-section":"_agreement-section_1xxzw_177","checkbox-label":"_checkbox-label_1xxzw_182",checkbox:V,"checkbox-text":"_checkbox-text_1xxzw_198","submit-section":"_submit-section_1xxzw_205","character-count":"_character-count_1xxzw_218","success-message":"_success-message_1xxzw_224"},n=R.bind(F),ee=()=>{const{t:e}=O(),h=Y(),{data:d,isLoading:re}=$(),C=f.useRef(null),[p,k]=f.useState(!1),[ne,j]=f.useState(!1),q=((d==null?void 0:d.data)??[]).map(o=>{var i;return{value:o.value||((i=o.name)==null?void 0:i.toLowerCase().replace(/\s+/g,"-")),label:o.name}}),v=[{value:"employment",label:e("broker_questionnaire_employment_type_employment")},{value:"business",label:e("broker_questionnaire_employment_type_business")},{value:"investments",label:e("broker_questionnaire_employment_type_investments")},{value:"property",label:e("broker_questionnaire_employment_type_property")},{value:"no_income",label:e("broker_questionnaire_employment_type_no_income")}],w=[{value:"0-5000",label:e("broker_questionnaire_income_0_5000")},{value:"5000-10000",label:e("broker_questionnaire_income_5000_10000")},{value:"10000-20000",label:e("broker_questionnaire_income_10000_20000")},{value:"20000-50000",label:e("broker_questionnaire_income_20000_50000")},{value:"50000+",label:e("broker_questionnaire_income_50000_plus")}],z=[{value:"0-1",label:e("broker_questionnaire_experience_0_1")},{value:"1-3",label:e("broker_questionnaire_experience_1_3")},{value:"3-5",label:e("broker_questionnaire_experience_3_5")},{value:"5-10",label:e("broker_questionnaire_experience_5_10")},{value:"10+",label:e("broker_questionnaire_experience_10_plus")}],y=[{value:"yes",label:e("yes")},{value:"no",label:e("no")}],g=o=>o==="business"||o==="investments"||o==="property",I=(o="")=>{const i={fullName:m().required(e("broker_questionnaire_error_required")).min(2,e("broker_questionnaire_error_name_min")),phone:m().required(e("broker_questionnaire_error_required")).matches(/^\+?[1-9]\d{1,14}$/,e("broker_questionnaire_error_phone_format")),email:m().required(e("broker_questionnaire_error_required")).email(e("broker_questionnaire_error_email_format")),city:m().required(e("broker_questionnaire_error_required")),desiredRegion:m().required(e("broker_questionnaire_error_required")),employmentType:m().required(e("broker_questionnaire_error_required")),workExperience:m().required(e("broker_questionnaire_error_required")),hasClientCases:m().required(e("broker_questionnaire_error_required")),hasDebtCases:m().required(e("broker_questionnaire_error_required")),comments:m().max(1e3,e("broker_questionnaire_error_comments_max")),agreement:S().oneOf([!0],e("broker_questionnaire_error_agreement"))};return o!=="no_income"?i.monthlyIncome=m().required(e("broker_questionnaire_error_required")):i.monthlyIncome=m().required(e("broker_questionnaire_error_required")),g(o)&&(i.organizationNumber=m().required(e("broker_questionnaire_error_required")).matches(/^\d+$/,e("broker_questionnaire_error_number_format")),i.organizationName=m().required(e("broker_questionnaire_error_required")).min(2,e("broker_questionnaire_error_name_min")),i.averageClientsPerMonth=m().required(e("broker_questionnaire_error_required")).matches(/^\d+$/,e("broker_questionnaire_error_number_format")),i.mortgageClientsLastYear=m().matches(/^\d*$/,e("broker_questionnaire_error_number_format")),i.refinanceClientsLastYear=m().matches(/^\d*$/,e("broker_questionnaire_error_number_format"))),P().shape(i)},B={fullName:"",phone:"",email:"",city:"",desiredRegion:"",employmentType:"",monthlyIncome:"",workExperience:"",organizationNumber:"",organizationName:"",averageClientsPerMonth:"",mortgageClientsLastYear:"",refinanceClientsLastYear:"",hasClientCases:"",hasDebtCases:"",comments:"",agreement:!1},L=async o=>{k(!0),j(!0);try{await new Promise(i=>setTimeout(i,500)),h("/services/application-submitted")}catch(i){console.error("❌ Error submitting questionnaire:",i),alert(e("broker_questionnaire_error_submit")),k(!1)}};return r.jsxs("div",{className:n("broker-questionnaire"),children:[r.jsxs("div",{className:n("header"),children:[r.jsxs("button",{className:n("back-button"),onClick:()=>h("/tenders-for-brokers"),type:"button",children:["← ",e("broker_questionnaire_back")]}),r.jsx("div",{className:n("logo"),children:r.jsx("img",{src:"/static/logo.svg",alt:"Bankimonline"})})]}),r.jsx("div",{className:n("content"),children:r.jsxs("div",{className:n("form-container"),children:[r.jsx("h1",{className:n("title"),children:e("broker_questionnaire_title")}),r.jsx("p",{className:n("subtitle"),children:"Анкета для сотрудничества брокеров страница №20.1"}),r.jsx("a",{href:"#",className:n("form-link"),children:"[–] הרכב טופס לחשבון האישי שלך"}),r.jsx(E,{initialValues:B,onSubmit:L,enableReinitialize:!0,validate:o=>{var t;const i=I(o.employmentType);try{return i.validateSync(o,{abortEarly:!1}),{}}catch(s){const l={};return(t=s.inner)==null||t.forEach(_=>{if(_.path){if((_.path==="hasClientCases"||_.path==="hasDebtCases")&&(o[_.path]==="yes"||o[_.path]==="no"))return;l[_.path]=_.message}}),l}},children:({values:o,setFieldValue:i,errors:t,touched:s,setFieldTouched:l,isValid:_})=>r.jsxs(D,{className:n("form"),ref:C,children:[r.jsx("div",{className:n("section"),children:r.jsxs("div",{className:n("form-row","three-columns"),children:[r.jsxs("div",{className:n("form-field"),children:[r.jsx(u,{title:e("broker_questionnaire_full_name")}),r.jsx("input",{type:"text",name:"fullName",value:o.fullName,onChange:a=>i("fullName",a.target.value),onBlur:()=>l("fullName",!0),placeholder:e("broker_questionnaire_full_name_placeholder"),className:n("input",{error:s.fullName&&t.fullName})}),s.fullName&&t.fullName&&r.jsx(c,{error:t.fullName})]}),r.jsx("div",{className:n("form-field"),children:r.jsx(M,{title:e("broker_questionnaire_phone"),value:o.phone,handleChange:a=>i("phone",a),onBlur:()=>l("phone",!0),error:s.phone&&t.phone,onlyCountries:["il","us","ru"]})}),r.jsxs("div",{className:n("form-field"),children:[r.jsx(u,{title:e("broker_questionnaire_email")}),r.jsx("input",{type:"email",name:"email",value:o.email,onChange:a=>i("email",a.target.value),onBlur:()=>l("email",!0),placeholder:e("broker_questionnaire_email_placeholder"),className:n("input",{error:s.email&&t.email})}),s.email&&t.email&&r.jsx(c,{error:t.email})]})]})}),r.jsx("div",{className:n("section"),children:r.jsxs("div",{className:n("form-row","two-columns"),children:[r.jsx("div",{className:n("form-field"),children:r.jsx(b,{title:e("broker_questionnaire_city"),data:q,placeholder:e("broker_questionnaire_city_placeholder"),value:o.city,onChange:a=>i("city",a),onBlur:()=>l("city",!0),searchable:!0,searchPlaceholder:e("search"),nothingFoundText:e("nothing_found"),error:s.city&&t.city})}),r.jsx("div",{className:n("form-field"),children:r.jsx(b,{title:e("broker_questionnaire_desired_region"),data:q,placeholder:e("broker_questionnaire_desired_region_placeholder"),value:o.desiredRegion,onChange:a=>i("desiredRegion",a),onBlur:()=>l("desiredRegion",!0),searchable:!0,searchPlaceholder:e("search"),nothingFoundText:e("nothing_found"),error:s.desiredRegion&&t.desiredRegion})})]})}),r.jsxs("div",{className:n("section"),children:[r.jsxs("div",{className:n("form-row","three-columns"),children:[r.jsx("div",{className:n("form-field"),children:r.jsx(b,{title:e("broker_questionnaire_employment_type"),data:v,placeholder:e("broker_questionnaire_employment_type_placeholder"),value:o.employmentType,onChange:a=>{i("employmentType",a),g(a)||(i("organizationNumber",""),i("organizationName",""),i("averageClientsPerMonth",""),i("mortgageClientsLastYear",""),i("refinanceClientsLastYear",""))},onBlur:()=>l("employmentType",!0),error:s.employmentType&&t.employmentType})}),o.employmentType!=="no_income"&&r.jsx("div",{className:n("form-field"),children:r.jsx(b,{title:e("broker_questionnaire_monthly_income"),data:w,placeholder:e("broker_questionnaire_monthly_income_placeholder"),value:o.monthlyIncome,onChange:a=>i("monthlyIncome",a),onBlur:()=>l("monthlyIncome",!0),error:s.monthlyIncome&&t.monthlyIncome})}),o.employmentType==="no_income"&&r.jsxs("div",{className:n("form-field"),children:[r.jsx(u,{title:e("broker_questionnaire_no_income_since")}),r.jsx("input",{type:"date",name:"monthlyIncome",value:o.monthlyIncome,onChange:a=>i("monthlyIncome",a.target.value),onBlur:()=>l("monthlyIncome",!0),placeholder:e("broker_questionnaire_no_income_since_placeholder"),className:n("input",{error:s.monthlyIncome&&t.monthlyIncome})}),s.monthlyIncome&&t.monthlyIncome&&r.jsx(c,{error:t.monthlyIncome})]}),r.jsx("div",{className:n("form-field"),children:r.jsx(b,{title:e("broker_questionnaire_work_experience"),data:z,placeholder:e("broker_questionnaire_work_experience_placeholder"),value:o.workExperience,onChange:a=>i("workExperience",a),onBlur:()=>l("workExperience",!0),error:s.workExperience&&t.workExperience})})]}),g(o.employmentType)&&r.jsxs("div",{className:n("business-fields"),children:[r.jsxs("div",{className:n("form-row","three-columns"),children:[r.jsx("div",{className:n("form-field"),children:r.jsx(x,{title:e("broker_questionnaire_organization_number"),value:o.organizationNumber?parseInt(o.organizationNumber):null,handleChange:a=>i("organizationNumber",(a==null?void 0:a.toString())||""),onBlur:()=>l("organizationNumber",!0),placeholder:e("broker_questionnaire_organization_number_placeholder"),error:s.organizationNumber&&t.organizationNumber,disableCurrency:!0})}),r.jsxs("div",{className:n("form-field"),children:[r.jsx(u,{title:e("broker_questionnaire_organization_name")}),r.jsx("input",{type:"text",name:"organizationName",value:o.organizationName,onChange:a=>i("organizationName",a.target.value),onBlur:()=>l("organizationName",!0),placeholder:e("broker_questionnaire_organization_name_placeholder"),className:n("input",{error:s.organizationName&&t.organizationName})}),s.organizationName&&t.organizationName&&r.jsx(c,{error:t.organizationName})]}),r.jsx("div",{className:n("form-field"),children:r.jsx(x,{title:e("broker_questionnaire_average_clients_month"),value:o.averageClientsPerMonth?parseInt(o.averageClientsPerMonth):null,handleChange:a=>i("averageClientsPerMonth",(a==null?void 0:a.toString())||""),onBlur:()=>l("averageClientsPerMonth",!0),placeholder:e("broker_questionnaire_average_clients_month_placeholder"),error:s.averageClientsPerMonth&&t.averageClientsPerMonth,disableCurrency:!0})})]}),r.jsxs("div",{className:n("form-row"),children:[r.jsx("div",{className:n("form-field"),children:r.jsx(x,{title:e("broker_questionnaire_mortgage_clients_year"),value:o.mortgageClientsLastYear?parseInt(o.mortgageClientsLastYear):null,handleChange:a=>i("mortgageClientsLastYear",(a==null?void 0:a.toString())||""),onBlur:()=>l("mortgageClientsLastYear",!0),placeholder:e("broker_questionnaire_mortgage_clients_year_placeholder"),error:s.mortgageClientsLastYear&&t.mortgageClientsLastYear,disableCurrency:!0})}),r.jsx("div",{className:n("form-field"),children:r.jsx(x,{title:e("broker_questionnaire_refinance_clients_year"),value:o.refinanceClientsLastYear?parseInt(o.refinanceClientsLastYear):null,handleChange:a=>i("refinanceClientsLastYear",(a==null?void 0:a.toString())||""),onBlur:()=>l("refinanceClientsLastYear",!0),placeholder:e("broker_questionnaire_refinance_clients_year_placeholder"),error:s.refinanceClientsLastYear&&t.refinanceClientsLastYear,disableCurrency:!0})})]})]})]}),r.jsxs("div",{className:n("section"),children:[r.jsxs("div",{className:n("form-row","two-columns"),children:[r.jsxs("div",{className:n("form-field"),children:[r.jsx(u,{title:e("broker_questionnaire_has_client_cases")}),r.jsx("div",{className:n("yes-no-buttons"),children:y.map(a=>r.jsx("button",{type:"button",className:n("yes-no-button",{active:o.hasClientCases===a.value,error:s.hasClientCases&&t.hasClientCases}),onClick:()=>{i("hasClientCases",a.value),l("hasClientCases",!0)},children:a.label},a.value))}),s.hasClientCases&&t.hasClientCases&&r.jsx(c,{error:t.hasClientCases})]}),r.jsxs("div",{className:n("form-field"),children:[r.jsx(u,{title:e("broker_questionnaire_has_debt_cases")}),r.jsx("div",{className:n("yes-no-buttons"),children:y.map(a=>r.jsx("button",{type:"button",className:n("yes-no-button",{active:o.hasDebtCases===a.value,error:s.hasDebtCases&&t.hasDebtCases}),onClick:()=>{i("hasDebtCases",a.value),l("hasDebtCases",!0)},children:a.label},a.value))}),s.hasDebtCases&&t.hasDebtCases&&r.jsx(c,{error:t.hasDebtCases})]})]}),r.jsxs("div",{className:n("form-field","full-width"),children:[r.jsx(u,{title:e("broker_questionnaire_comments")}),r.jsx("textarea",{name:"comments",value:o.comments,onChange:a=>i("comments",a.target.value),onBlur:()=>l("comments",!0),placeholder:e("broker_questionnaire_comments_placeholder"),className:n("textarea",{error:s.comments&&t.comments}),rows:4,maxLength:1e3}),r.jsxs("div",{className:n("character-count"),children:[o.comments.length,"/1000"]}),s.comments&&t.comments&&r.jsx(c,{error:t.comments})]})]}),r.jsx("div",{className:n("section"),children:r.jsxs("div",{className:n("agreement-section","full-width"),children:[r.jsxs("label",{className:n("checkbox-label"),children:[r.jsx("input",{type:"checkbox",name:"agreement",checked:o.agreement,onChange:a=>i("agreement",a.target.checked),onBlur:()=>l("agreement",!0),className:n("checkbox")}),r.jsx("span",{className:n("checkbox-text"),children:e("broker_questionnaire_agreement")})]}),s.agreement&&t.agreement&&r.jsx(c,{error:t.agreement})]})}),r.jsxs("div",{className:n("submit-section"),children:[r.jsx(N,{type:"button",variant:"secondary",size:"full",onClick:()=>h("/tenders-for-brokers"),isDisabled:!1,children:e("broker_questionnaire_back")}),r.jsx(N,{type:"submit",variant:"primary",size:"full",disabled:!_||p,isDisabled:!_||p,children:e(p?"broker_questionnaire_submitting":"broker_questionnaire_submit")})]})]})})]})})]})},de=ee;export{de as BrokerQuestionnaire,de as default};
