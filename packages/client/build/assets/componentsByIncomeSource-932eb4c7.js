import{j as o}from"./ui-vendor-5a9cd79c.js";import{u as y}from"./form-vendor-3025b96d.js";import{a as j,E as x,S as T}from"./index-79a992ab.js";import{a as A}from"./useDropdownData-1abe74c0.js";import{C as u}from"./Column-dbe9e532.js";import{M as z}from"./AddButton-c667a975.js";import{u as g}from"./i18n-vendor-5cfd36a0.js";import{D as v}from"./DropdownMenu-7fc78a92.js";import{F as S}from"./FormattedInput-eaa8803d.js";import{C as V}from"./Calendar-2fe91664.js";import{u as H}from"./react-vendor-19e41fc0.js";import{c as K}from"./index-b94574b0.js";const se=e=>Math.max(0,...e.map(a=>a.id))+1,R=()=>{const{t:e,i18n:t}=g();return o.jsx(z,{children:e("add_inc")})},ce=({screenLocation:e="mortgage_step3",excludeNoIncome:t=!1})=>{const{t:a,i18n:l}=g(),{getContent:n}=j(e),{values:i,setFieldValue:s,errors:m,setFieldTouched:p,touched:c,setFieldError:I,validateField:r}=y(),h=_=>{if(!_)return!1;const b=_.toLowerCase();return b==="option_1"||b==="1"||b.includes("no_additional")||b.includes("no additional")||b.includes("none")};e==null||e.includes("credit"),e==null||e.includes("refinance");const O=A(e,"additional_income","full"),F=(O==null?void 0:O.options)||[],d=t?F.filter(_=>!h(_.value)&&_.value!=="no_additional_income"):F;console.log("🔍 AdditionalIncome debug:",{currentValue:i.additionalIncome,originalOptions:F,filteredOptions:d,excludeNoIncome:t,isNoAdditionalIncomeValue:h(i.additionalIncome),errors:m.additionalIncome,touched:c.additionalIncome});const f=_=>{console.log("🔍 AdditionalIncome onChange:",{value:_,currentValue:i.additionalIncome,isNoAdditionalIncomeValue:h(_),willShowAmountField:!h(_)}),s("additionalIncome",_,!0),p("additionalIncome",!0,!1)};return o.jsxs(u,{children:[o.jsx(v,{title:n("calculate_mortgage_has_additional",a("calculate_mortgage_has_additional")),placeholder:n("calculate_mortgage_has_additional_ph",a("calculate_mortgage_has_additional_ph")),data:d,value:i.additionalIncome,onChange:f,onBlur:()=>p("additionalIncome",!0,!0),error:c.additionalIncome&&m.additionalIncome}),o.jsx(R,{})]})},de=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:i,touched:s}=y();return o.jsxs(u,{children:[o.jsx(S,{title:e("calculate_mortgage_monthly_income"),placeholder:e("calculate_mortgage_monthly_income_ph"),value:a.additionalIncomeAmount,handleChange:m=>l("additionalIncomeAmount",m),onBlur:()=>i("additionalIncomeAmount"),error:s.additionalIncomeAmount&&n.additionalIncomeAmount,size:"xs"}),s.additionalIncomeAmount&&n.additionalIncomeAmount&&o.jsx(x,{error:n.additionalIncomeAmount})]})},me=({screenLocation:e="mortgage_step3"})=>{g();const{getContent:t}=j(e),{values:a,setFieldValue:l,touched:n,errors:i,setFieldTouched:s,setFieldError:m}=y(),p=r=>{if(!r)return!1;const h=r.toLowerCase();return h==="option_1"||h==="no_obligations"||h.includes("no_obligation")||h.includes("no obligation")||h.includes("none")},c=A(e,"types","full");c.loading&&console.log("🔄 Loading obligations dropdown options..."),c.error&&console.warn("❌ Obligations dropdown error:",c.error),console.log("🔍 Obligation debug:",{currentValue:a.obligation,options:c.options,isNoObligationValue:p(a.obligation),errors:i.obligation,touched:n.obligation});const I=r=>{console.log("🔍 Obligation onChange:",{value:r,currentValue:a.obligation,isNoObligationValue:p(r),willShowBankFields:!p(r)}),l("obligation",r),s("obligation",!0)};return o.jsxs(u,{children:[o.jsx(v,{title:c.label||t("calculate_mortgage_obligations","Obligations"),data:c.options,placeholder:c.placeholder||t("calculate_mortgage_obligations_ph","Select obligation type"),value:a.obligation,onChange:I,onBlur:()=>s("obligation"),error:n.obligation&&i.obligation,disabled:c.loading}),c.error&&o.jsx(x,{error:t("error_dropdown_load_failed","Failed to load obligations options. Please refresh the page.")})]})},B=({screenLocation:e="calculate_credit_3"})=>{g();const{getContent:t}=j("common"),{values:a,setFieldValue:l,errors:n,touched:i,setFieldTouched:s}=y(),m=e==="calculate_credit_3"&&a.obligation,p=m?t("obligation_bank_title","Bank Lender"):t("bank_title","Bank"),c=t(m?"obligation_bank_placeholder":"bank_placeholder","Select bank"),I=[{value:"1",label:t("bank_option_1","Bank Hapoalim")},{value:"2",label:t("bank_option_2","Bank Leumi")},{value:"3",label:t("bank_option_3","Bank Discount")},{value:"4",label:t("bank_option_4","Bank Mizrahi")},{value:"5",label:t("bank_option_5","Other Bank")}];return o.jsx(u,{children:o.jsx(v,{title:p,placeholder:c,data:I,value:a.bank,onChange:r=>l("bank",r),onBlur:()=>s("bank"),error:i.bank&&n.bank,disabled:!1})})},N=()=>{g();const{getContent:e}=j("common"),{values:t,setFieldValue:a,errors:l}=y();return o.jsxs(u,{children:[o.jsx(V,{title:e("obligation_end_date_title","Obligation End Date"),value:t.endDate,onChange:n=>a("endDate",n),placeholder:"ДД / ММ / ГГ",error:l.endDate}),l.endDate&&o.jsx(x,{error:l.endDate})]})},k=()=>{g();const{getContent:e}=j("common"),{values:t,setFieldValue:a,errors:l,setFieldTouched:n,touched:i}=y();return o.jsxs(u,{children:[o.jsx(S,{value:t.monthlyPaymentForAnotherBank,title:e("obligation_monthly_payment_title","Monthly Payment"),placeholder:e("obligation_monthly_payment_placeholder","Enter monthly payment amount"),name:"MonthlyPayment",handleChange:s=>a("monthlyPaymentForAnotherBank",s),onBlur:()=>n("monthlyPayment"),error:i.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank,size:"xs"}),i.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank&&o.jsx(x,{error:l.monthlyPaymentForAnotherBank})]})},ue={bank_loan:[o.jsx(B,{},"Bank"),o.jsx(k,{},"MonthlyPayment"),o.jsx(N,{},"EndDate")],consumer_credit:[o.jsx(B,{},"Bank"),o.jsx(k,{},"MonthlyPayment"),o.jsx(N,{},"EndDate")],credit_card:[o.jsx(k,{},"MonthlyPayment")],other:[o.jsx(k,{},"MonthlyPayment")]},he=({screenLocation:e="mortgage_step3"})=>{var F;const{t,i18n:a}=g(),{getContent:l}=j(e),{values:n,setFieldValue:i,errors:s,touched:m,setFieldTouched:p,setFieldError:c}=y(),I=d=>{if(!d)return!1;const f=d.toLowerCase();return f.includes("unemployed")||f.includes("no_income")||f.includes("no income")||f.includes("option_5")||f.includes("option_6")||f.includes("main_source_income_option_5")||f.includes("main_source_income_option_6")},r=A(e,"source","full"),h=e!=null&&e.includes("credit")&&((F=r==null?void 0:r.options)==null?void 0:F.length)>0?r.options:Array.from({length:7},(d,f)=>{const _=f+1,b=`calculate_mortgage_main_source_option_${_}`,$=`calculate_mortgage_main_source_option_${_}`;return{value:`option_${_}`,label:l(b,t($))}}).filter(d=>d.label&&d.label!==d.value);console.log("🔍 MainSourceOfIncome options:",{options:h,currentValue:n.mainSourceOfIncome,selectedItem:h.find(d=>d.value===n.mainSourceOfIncome),errors:s.mainSourceOfIncome,touched:m.mainSourceOfIncome,errorShowing:m.mainSourceOfIncome&&s.mainSourceOfIncome});const O=d=>{console.log("🔍 MainSourceOfIncome onChange:",{value:d,currentValue:n.mainSourceOfIncome,dropdownOptions:h,selectedOption:h.find(f=>f.value===d)}),console.log("🔍 MainSourceOfIncome validation debug:",{value:d,isEmpty:!d||d===""||d===null||d===void 0,isNoIncomeValue:I(d),willRequireFields:!I(d)}),i("mainSourceOfIncome",d,!0),p("mainSourceOfIncome",!0,!1)};return o.jsxs(u,{children:[o.jsx(v,{data:h,title:e!=null&&e.includes("credit")&&(r!=null&&r.label)?r.label:l("calculate_mortgage_main_source",t("calculate_mortgage_main_source")),placeholder:e!=null&&e.includes("credit")&&(r!=null&&r.placeholder)?r.placeholder:l("calculate_mortgage_main_source_ph",t("calculate_mortgage_main_source_ph")),value:n.mainSourceOfIncome||"",onChange:O,onBlur:()=>p("mainSourceOfIncome",!0,!0),error:m.mainSourceOfIncome&&s.mainSourceOfIncome,disabled:(e==null?void 0:e.includes("credit"))&&(r==null?void 0:r.loading)}),(e==null?void 0:e.includes("credit"))&&(r==null?void 0:r.error)&&o.jsx(x,{error:l("error_dropdown_load_failed","Failed to load main source options. Please refresh the page.")})]})},M=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:i,touched:s}=y();return o.jsxs(u,{children:[o.jsx(T,{placeholder:e("calculate_mortgage_company"),value:a.companyName,title:e("calculate_mortgage_company"),name:"СompanyName",onChange:m=>l("companyName",m),onBlur:()=>i("companyName"),error:s.companyName&&n.companyName}),s.companyName&&n.companyName&&o.jsx(x,{error:n.companyName})]})},P=({screenLocation:e})=>{const t=H(),a=e||(t.pathname.includes("calculate-mortgage")?"mortgage_step3":t.pathname.includes("refinance-mortgage")?"refinance_mortgage_3":"calculate_credit_3"),{getContent:l}=j(a),{values:n,setFieldValue:i,errors:s,setFieldTouched:m,touched:p}=y(),c=A(a,"activity","full");return c.loading&&console.log("🔄 Loading field of activity dropdown options..."),c.error&&console.warn("❌ Field of activity dropdown error:",c.error),o.jsxs(u,{children:[o.jsx(v,{data:c.options,title:c.label||l("calculate_mortgage_field_of_activity","Field of Activity"),placeholder:c.placeholder||l("calculate_mortgage_field_of_activity_ph","Select field of activity"),searchable:!0,searchPlaceholder:l("search","Search..."),value:n.fieldOfActivity,onChange:I=>{i("fieldOfActivity",I,!0),m("fieldOfActivity",!0,!1)},onBlur:()=>m("fieldOfActivity",!0,!0),error:p.fieldOfActivity&&s.fieldOfActivity,disabled:c.loading}),c.error&&o.jsx(x,{error:l("error_dropdown_load_failed","Failed to load field of activity options. Please refresh the page.")})]})},q="_hint_1enfl_1",G={hint:q},J=K.bind(G),Q=({text:e})=>o.jsx("div",{className:J("hint"),children:e}),C=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:i,touched:s}=y();return o.jsxs(u,{children:[o.jsx(S,{title:e("calculate_mortgage_monthly_income"),placeholder:e("calculate_mortgage_monthly_income_ph"),value:a.monthlyIncome,handleChange:m=>l("monthlyIncome",m),onBlur:()=>i("monthlyIncome"),error:s.monthlyIncome&&n.monthlyIncome,size:"xs"}),o.jsx(Q,{text:e("calculate_mortgage_monthly_income_hint")}),s.monthlyIncome&&n.monthlyIncome&&o.jsx(x,{error:n.monthlyIncome})]})},w=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n}=y();return o.jsxs(u,{children:[o.jsx(V,{title:e("no_income"),value:a.noIncome,onChange:i=>l("noIncome",i),placeholder:e("date_ph"),error:n.noIncome}),n.noIncome&&o.jsx(x,{error:n.noIncome})]})},D=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n,setFieldTouched:i,touched:s}=y();return o.jsxs(u,{children:[o.jsx(T,{placeholder:e("calculate_mortgage_profession_ph"),value:a.profession,title:e("calculate_mortgage_profession"),name:"Profession",onChange:m=>l("profession",m),onBlur:()=>i("profession"),error:s.profession&&n.profession}),s.profession&&n.profession&&o.jsx(x,{error:n.profession})]})};function U(){const{t:e,i18n:t}=g();return o.jsx(z,{children:e("calculate_mortgage_step3_ctx")})}const E=()=>{const{t:e,i18n:t}=g(),{values:a,setFieldValue:l,errors:n}=y();return o.jsxs(u,{children:[o.jsx(V,{title:e("calculate_mortgage_start_date"),value:a.startDate,onChange:i=>l("startDate",i),placeholder:e("date_ph"),error:n.startDate}),o.jsx(U,{}),n.startDate&&o.jsx(x,{error:n.startDate})]})},W=e=>({employee:[o.jsx(C,{screenLocation:e},"MonthlyIncome1"),o.jsx(E,{screenLocation:e},"StartDate1"),o.jsx(P,{screenLocation:e},"FieldOfActivity1"),o.jsx(M,{screenLocation:e},"CompanyName1"),o.jsx(D,{screenLocation:e},"Profession1")],selfemployed:[o.jsx(C,{screenLocation:e},"MonthlyIncome2"),o.jsx(E,{screenLocation:e},"StartDate2"),o.jsx(P,{screenLocation:e},"FieldOfActivity2"),o.jsx(M,{screenLocation:e},"CompanyName2"),o.jsx(D,{screenLocation:e},"Profession2")],pension:[o.jsx(C,{screenLocation:e},"MonthlyIncome4"),o.jsx(u,{},"column")],unemployed:[o.jsx(w,{screenLocation:e},"NoIncome5"),o.jsx(u,{},"column")],unpaid_leave:[o.jsx(w,{screenLocation:e},"NoIncome6"),o.jsx(u,{},"column")],student:[o.jsx(C,{screenLocation:e},"MonthlyIncome7"),o.jsx(u,{},"column")],other:[o.jsx(C,{screenLocation:e},"MonthlyIncome8"),o.jsx(u,{},"column")]}),_e=W("auto-detect");export{ce as A,he as M,me as O,de as a,ue as b,_e as c,W as d,se as g};
