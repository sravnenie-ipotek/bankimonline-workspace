import * as Yup from 'yup'
import i18n from './i18n/index'

// Configure Yup locale based on current language
export const configureYupLocale = () => {
  const currentLang = i18n.language || 'en'
  
  if (currentLang === 'he') {
    Yup.setLocale({
      mixed: {
        default: 'שדה זה אינו תקין',
        required: 'שדה זה הוא חובה',
        oneOf: 'שדה זה חייב להיות אחד מהערכים הבאים: ${values}',
        notOneOf: 'שדה זה לא יכול להיות אחד מהערכים הבאים: ${values}',
        defined: 'שדה זה חייב להיות מוגדר',
      },
      string: {
        length: 'שדה זה חייב להיות באורך של ${length} תווים',
        min: 'שדה זה חייב להכיל לפחות ${min} תווים',
        max: 'שדה זה יכול להכיל עד ${max} תווים',
        email: 'שדה זה חייב להיות כתובת אימייל תקינה',
        url: 'שדה זה חייב להיות URL תקין',
        trim: 'שדה זה לא יכול להכיל רווחים בהתחלה או בסוף',
        lowercase: 'שדה זה חייב להכיל אותיות קטנות בלבד',
        uppercase: 'שדה זה חייב להכיל אותיות גדולות בלבד',
      },
      number: {
        min: 'שדה זה חייב להיות גדול או שווה ל-${min}',
        max: 'שדה זה חייב להיות קטן או שווה ל-${max}',
        positive: 'שדה זה חייב להיות מספר חיובי',
        negative: 'שדה זה חייב להיות מספר שלילי',
        integer: 'שדה זה חייב להיות מספר שלם',
      },
      date: {
        min: 'שדה זה חייב להיות מאוחר מ-${min}',
        max: 'שדה זה חייב להיות מוקדם מ-${max}',
      },
      array: {
        min: 'שדה זה חייב להכיל לפחות ${min} פריטים',
        max: 'שדה זה יכול להכיל עד ${max} פריטים',
      },
    })
  } else if (currentLang === 'ru') {
    Yup.setLocale({
      mixed: {
        default: 'Это поле недействительно',
        required: 'Это поле обязательно',
        oneOf: 'Это поле должно быть одним из следующих значений: ${values}',
        notOneOf: 'Это поле не может быть одним из следующих значений: ${values}',
        defined: 'Это поле должно быть определено',
      },
      string: {
        length: 'Это поле должно быть длиной ${length} символов',
        min: 'Это поле должно содержать не менее ${min} символов',
        max: 'Это поле может содержать не более ${max} символов',
        email: 'Это поле должно быть действительным адресом электронной почты',
        url: 'Это поле должно быть действительным URL',
        trim: 'Это поле не может содержать пробелы в начале или конце',
        lowercase: 'Это поле должно содержать только строчные буквы',
        uppercase: 'Это поле должно содержать только заглавные буквы',
      },
      number: {
        min: 'Это поле должно быть больше или равно ${min}',
        max: 'Это поле должно быть меньше или равно ${max}',
        positive: 'Это поле должно быть положительным числом',
        negative: 'Это поле должно быть отрицательным числом',
        integer: 'Это поле должно быть целым числом',
      },
      date: {
        min: 'Это поле должно быть позже ${min}',
        max: 'Это поле должно быть раньше ${max}',
      },
      array: {
        min: 'Это поле должно содержать не менее ${min} элементов',
        max: 'Это поле может содержать не более ${max} элементов',
      },
    })
  }
}

// Listen for language changes
i18n.on('languageChanged', () => {
  configureYupLocale()
})

// Initial configuration
configureYupLocale()