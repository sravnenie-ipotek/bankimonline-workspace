// Script to comment out migrated translation keys in JSON files
// According to translation rules: "Comment out old translation keys in JSON files with `__MIGRATED_` prefix"

const fs = require('fs');
const path = require('path');

// List of all translation keys that were migrated to the database
const migratedKeys = [
  // Cooperation page
  'cooperation_title',
  'cooperation_subtitle',
  'register_partner_program',
  'marketplace_title',
  'marketplace_description',
  'feature_mortgage_calc',
  'feature_mortgage_refinance',
  'feature_credit_calc',
  'feature_credit_refinance',
  'one_click_mortgage',
  'referral_title',
  'referral_description',
  'cooperation_cta_title',
  'cooperation_about_title',
  'cooperation_about_description_1',
  'cooperation_about_description_2',
  'cooperation_about_description_3',
  'cooperation_earning_title',
  'cooperation_earning_commission_title',
  'cooperation_earning_commission_desc',
  'cooperation_earning_bonus_title',
  'cooperation_earning_bonus_desc',
  'cooperation_earning_targets_title',
  'cooperation_earning_targets_desc',
  'cooperation_steps_title',
  'cooperation_step1_title',
  'cooperation_step1_desc',
  'cooperation_step2_title',
  'cooperation_step2_desc',
  'cooperation_step3_title',
  'cooperation_step3_desc',
  'cooperation_step4_title',
  'cooperation_step4_desc',
  'cooperation_step5_title',
  'cooperation_step5_desc',
  'cooperation_partners_title',
  'cooperation_cta_description',
  'cooperation_email',
  'cooperation_phone',
  'cooperation_partner_login',
  'cooperation_register',
  
  // Tenders for Brokers page
  'tenders_hero_headline',
  'tenders_hero_b1',
  'tenders_hero_b2',
  'tenders_hero_b3',
  'tenders_hero_cta',
  'tenders_hero_title',
  'tenders_hero_subtitle',
  'tenders_marketplace_title',
  'tenders_marketplace_subtitle',
  'tenders_market_b1',
  'tenders_market_b2',
  'tenders_clients_title',
  'tenders_clients_subtitle',
  'tenders_clients_text',
  'tenders_earn_title',
  'tenders_license_title',
  'tenders_license_feature1_title',
  'tenders_license_feature1_p1',
  'tenders_license_feature1_p2',
  'tenders_license_feature1_p3',
  'tenders_license_feature2_title',
  'tenders_license_feature2_p1',
  'tenders_license_feature2_p2',
  'tenders_license_feature2_p3',
  'tenders_license_feature3_title',
  'tenders_license_feature3_p1',
  'tenders_license_feature3_p2',
  'tenders_license_feature3_p3',
  'tenders_consult_button',
  'tenders_tooltip_earnings',
  'tenders_illustration_label',
  'tenders_steps_title',
  'tenders_step1_title',
  'tenders_step1_desc',
  'tenders_step2_title',
  'tenders_step2_desc',
  'tenders_step3_title',
  'tenders_step3_desc',
  'tenders_step4_title',
  'tenders_step4_desc',
  'tenders_step5_title',
  'tenders_step5_desc',
  'tenders_step1',
  'tenders_step2',
  'tenders_step3',
  'tenders_step4',
  'tenders_step5',
  'tenders_about_title',
  'tenders_about_desc',
  'tenders_metrics_title',
  'tenders_metrics_prospects_label',
  'tenders_metrics_prospects_value',
  'tenders_metrics_investment_label',
  'tenders_metrics_investment_display',
  'tenders_metrics_investment_title',
  'tenders_metrics_investment_value',
  'tenders_metrics_income_title',
  'tenders_metrics_income_value',
  'tenders_metrics_payback_label',
  'tenders_metrics_payback_display',
  'tenders_metrics_payback_title',
  'tenders_metrics_payback_value',
  'tenders_metrics_disclaimer',
  'tenders_metrics_button',
  'tenders_cta_title',
  'tenders_cta_button',
  
  // Temporary Franchise (Real-Estate-Brokerage) page
  'franchise_main_hero_title',
  'franchise_main_hero_benefit_income',
  'franchise_main_hero_benefit_turnover',
  'franchise_main_hero_benefit_roi',
  'franchise_main_hero_cta',
  'franchise_hero_title',
  'franchise_hero_description',
  'franchise_hero_cta',
  'franchise_client_sources_title',
  'franchise_client_sources_description',
  'franchise_client_service_mortgage_calc',
  'franchise_client_service_mortgage_refinance',
  'franchise_client_service_credit_calc',
  'franchise_client_service_credit_refinance',
  'franchise_partnership_title',
  'franchise_partnership_description',
  'franchise_partnership_service_buy',
  'franchise_partnership_service_rent',
  'franchise_partnership_service_sell',
  'franchise_partnership_service_lease',
  'franchise_partnership_cta',
  'franchise_includes_title',
  'franchise_includes_turnkey_title',
  'franchise_includes_turnkey_benefit_office',
  'franchise_includes_turnkey_benefit_team',
  'franchise_includes_turnkey_benefit_brand',
  'franchise_includes_turnkey_benefit_marketing',
  'franchise_includes_digital_title',
  'franchise_includes_digital_platform',
  'franchise_includes_digital_tools',
  'franchise_includes_digital_support',
  'franchise_includes_support_title',
  'franchise_includes_support_training',
  'franchise_includes_support_phone',
  'franchise_includes_support_consultation',
  'franchise_includes_cta',
  'franchise_includes_info_card_brand',
  'franchise_includes_info_card_office',
  'franchise_includes_info_card_manager',
  'franchise_how_to_open_title',
  'franchise_step_1_title',
  'franchise_step_1_description',
  'franchise_step_2_title',
  'franchise_step_2_description',
  'franchise_step_3_title',
  'franchise_step_3_description',
  'franchise_step_4_title',
  'franchise_step_4_description',
  'franchise_step_5_title',
  'franchise_step_5_description',
  'franchise_pricing_title',
  'franchise_pricing_investments',
  'franchise_pricing_investments_value',
  'franchise_pricing_income',
  'franchise_pricing_income_value',
  'franchise_pricing_roi',
  'franchise_pricing_roi_value',
  'franchise_pricing_note',
  'franchise_pricing_cta',
  'franchise_final_cta_title',
  'franchise_final_cta_button',
  'franchise_final_cta_arrow',
  'franchise_alt_professional_meeting',
  'franchise_alt_techrealt_logo',
  'franchise_alt_bankimonline_platform',
  'franchise_alt_real_estate_keys',
  'franchise_alt_equipped_office',
  
  // Tenders for Lawyers page
  'lawyers_hero_title',
  'lawyers_fill_form_button',
  'lawyers_benefit_leads_title',
  'lawyers_benefit_partnership_title',
  'lawyers_benefit_expansion_title',
  'lawyers_benefit_leads_desc',
  'lawyers_benefit_partnership_desc',
  'lawyers_benefit_expansion_desc',
  'lawyers_about_title',
  'lawyers_about_description',
  'lawyers_about_button',
  'lawyers_earnings_info_title',
  'lawyers_earnings_info_card_title',
  'lawyers_earnings_info_card_description',
  'lawyers_earning_title',
  'lawyers_earning_card_title',
  'lawyers_earning_card_description',
  'lawyers_collaboration_advantages_title',
  'lawyers_collaboration_advantages_subtitle',
  'lawyers_collaboration_advantage_platform',
  'lawyers_collaboration_advantage_marketing',
  'lawyers_collaboration_advantage_crm',
  'lawyers_collaboration_floating_crm',
  'lawyers_collaboration_floating_platform',
  'lawyers_collaboration_get_consultation',
  'lawyers_collaboration_cta_button',
  'lawyers_how_it_works_process_title',
  'lawyers_process_step_1_title',
  'lawyers_process_step_1_description',
  'lawyers_process_step_2_title',
  'lawyers_process_step_2_description',
  'lawyers_process_step_3_title',
  'lawyers_process_step_3_description',
  'lawyers_process_step_4_title',
  'lawyers_process_step_4_description',
  'lawyers_process_step_5_title',
  'lawyers_process_step_5_description',
  'lawyers_process_apply_button',
  'lawyers_partnership_title',
  'lawyers_partnership_button',
  'lawyers_cta_title',
  'lawyers_steps_title',
  'lawyers_step_1_title',
  'lawyers_step_1_desc',
  'lawyers_step_2_title',
  'lawyers_step_2_desc',
  'lawyers_step_3_title',
  'lawyers_step_3_desc',
  'lawyers_step_4_title',
  'lawyers_step_4_desc',
  'lawyers_step_5_title',
  'lawyers_step_5_desc',
  'lawyers_apply_button',
  'lawyers_advantages_title',
  'lawyers_advantage_digital_title',
  'lawyers_advantage_digital_platform',
  'lawyers_advantage_digital_marketing',
  'lawyers_advantage_digital_crm',
  'lawyers_advantage_platform_access',
  'lawyers_advantage_client_management',
  'lawyers_get_consultation_button',
  
  // Footer translations (common)
  'footer_company',
  'footer_about',
  'footer_contacts',
  'footer_vacancies',
  'footer_cooperation',
  'footer_contacts_title',
  'footer_email',
  'footer_phone',
  'footer_admin_contact',
  'footer_legal',
  'footer_user_agreement',
  'footer_privacy_policy',
  'footer_cookie_policy',
  'footer_return_policy',
  'footer_copyright'
];

// Languages to process
const languages = ['en', 'he', 'ru'];

// Process each language file
languages.forEach(lang => {
  const filePath = path.join(__dirname, '..', 'mainapp', 'public', 'locales', lang, 'translation.json');
  
  try {
    // Read the current translation file
    const content = fs.readFileSync(filePath, 'utf8');
    const translations = JSON.parse(content);
    
    // Create a new object with migrated keys prefixed with __MIGRATED_
    const updatedTranslations = {};
    let migratedCount = 0;
    
    for (const [key, value] of Object.entries(translations)) {
      if (migratedKeys.includes(key)) {
        // Prefix migrated keys with __MIGRATED_
        updatedTranslations[`__MIGRATED_${key}`] = value;
        migratedCount++;
      } else {
        // Keep non-migrated keys as is
        updatedTranslations[key] = value;
      }
    }
    
    // Write the updated translations back to file
    fs.writeFileSync(filePath, JSON.stringify(updatedTranslations, null, 2), 'utf8');
    
    console.log(`✅ ${lang}/translation.json: Migrated ${migratedCount} keys`);
  } catch (error) {
    console.error(`❌ Error processing ${lang}/translation.json:`, error.message);
  }
});

console.log('\n📝 Migration complete! Remember to:');
console.log('1. Run the SQL migration script to insert content into the database');
console.log('2. Test all four pages to ensure content loads correctly from the database');
console.log('3. The old translation keys are now prefixed with __MIGRATED_ in the JSON files');