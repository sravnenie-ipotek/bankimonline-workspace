// Mobile Button Overflow Fix
// Fixes the issue where submit buttons appear outside viewport on mobile devices

@media (max-width: 768px) {
  // Fix for form containers to ensure buttons stay in viewport
  .form-container,
  form {
    padding-bottom: 100px !important; // Space for fixed button
    min-height: calc(100vh - 60px); // Account for header
  }

  // ULTRA AGGRESSIVE: Make submit buttons sticky at bottom on mobile
  // Using high specificity to override CSS modules
  button[type="submit"],
  input[type="submit"],
  .submit-button,
  .continue-button,
  button.yellow-button,
  button[class*="submit"],
  button[class*="continue"],
  button[class*="primary"],
  .btn-primary,
  .button-primary,
  .primary-button,
  [data-testid*="submit"],
  [data-testid*="continue"],
  [data-testid*="next"],
  form button:last-child,
  form button[type="button"]:last-child {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 15px 20px !important;
    border-radius: 0 !important;
    z-index: 9999 !important;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1) !important;
    max-width: 100% !important;
    min-height: 50px !important;
    
    // Ensure button is always visible
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    
    // Override any transform that might hide the button
    transform: none !important;
    
    // Ensure button is clickable
    pointer-events: auto !important;
    
    // Override any positioning that might move it
    top: auto !important;
    
    // Make sure button text is visible
    color: white !important;
    background-color: #f39c12 !important; // Visible color
    border: none !important;
    
    // Ensure button content is visible
    span, div, * {
      display: inline !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
  }
  
  // CSS Module override - ultra high specificity
  [class*="continue"] button,
  [class*="submit"] button,
  [class*="primary"] button,
  div[class*="button"] button,
  form div[class*="button"] button {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    z-index: 9999 !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  // Specific fix for refinance mortgage form
  .refinance-mortgage-form,
  [class*="refinance"] form {
    padding-bottom: 120px !important;
  }

  // RTL support for Hebrew
  html[dir="rtl"] {
    button[type="submit"] {
      left: 0;
      right: 0;
    }
  }

  // Ensure content doesn't go under fixed button
  .form-content,
  .form-body,
  [class*="form-content"] {
    padding-bottom: 80px !important;
  }

  // Handle safe area for iPhone X and newer
  @supports (padding-bottom: env(safe-area-inset-bottom)) {
    button[type="submit"] {
      padding-bottom: env(safe-area-inset-bottom);
      bottom: env(safe-area-inset-bottom, 0);
    }
    
    .form-container {
      padding-bottom: calc(100px + env(safe-area-inset-bottom)) !important;
    }
  }
}

// Small phones (iPhone SE, etc.)
@media (max-width: 375px) and (max-height: 667px) {
  .form-container {
    padding-bottom: 90px !important;
  }
}

// Landscape orientation fix
@media (max-width: 896px) and (max-height: 414px) and (orientation: landscape) {
  button[type="submit"] {
    position: sticky !important;
    bottom: 0;
  }
  
  .form-container {
    padding-bottom: 60px !important;
  }
}