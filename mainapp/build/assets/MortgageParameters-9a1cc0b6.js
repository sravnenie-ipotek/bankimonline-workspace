import{j as e}from"./ui-vendor-99260b86.js";import{c as a}from"./index-a394eb59.js";import{a as t,M as s,k as r,c as i,I as c}from"./index-83602c60.js";import{i as n,u as l}from"./i18n-vendor-18addd5f.js";import{P as d}from"./PercentIcon-e1c53aea.js";import{r as o,u as _,f as m}from"./react-vendor-21ec1e1c.js";import{C as p}from"./Column-1049feee.js";const h=e=>{const a=e%10,t=e%100;return 1===a&&11!==t?n.t("year_singular"):[2,3,4].includes(a)&&![12,13,14].includes(t)?n.t("year_dual"):n.t("year_plural")},u=a=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",...a,children:e.jsx("path",{fill:"#FBE54D",d:"M16.25 2.5h-1.875v-.625a.625.625 0 1 0-1.25 0V2.5h-6.25v-.625a.625.625 0 0 0-1.25 0V2.5H3.75A1.25 1.25 0 0 0 2.5 3.75v12.5a1.25 1.25 0 0 0 1.25 1.25h12.5a1.25 1.25 0 0 0 1.25-1.25V3.75a1.25 1.25 0 0 0-1.25-1.25ZM5.625 3.75v.625a.625.625 0 0 0 1.25 0V3.75h6.25v.625a.625.625 0 1 0 1.25 0V3.75h1.875v2.5H3.75v-2.5h1.875Zm10.625 12.5H3.75V7.5h12.5v8.75Z"})}),g={modal:"_modal_11yd4_1","modal-header":"_modal-header_11yd4_11","modal-header__title":"_modal-header__title_11yd4_16","modal-content__text":"_modal-content__text_11yd4_27","modal-content__row":"_modal-content__row_11yd4_35","modal-content__title":"_modal-content__title_11yd4_48","modal-content__condition":"_modal-content__condition_11yd4_65",ellipse:"_ellipse_11yd4_74"},x=a.bind(g),v=({isVisible:a,onClose:i,title:c,description:n,conditionFinance:d,conditionPeriod:_,conditionBid:m})=>{const{t:p,i18n:h}=l(),{getContent:u}=t("bank_offers"),[g,v]=o.useState("description"),j=[{value:"description",label:u("description","description")},{value:"condition",label:u("condition","condition")}];return e.jsx(s,{isVisible:a,onCancel:i,children:e.jsxs("div",{className:x("modal"),children:[e.jsxs("div",{className:x("modal-header"),children:[e.jsx("div",{className:x("modal-header__title"),children:c}),e.jsx(r,{handleChange:e=>{v(e)},tabs:j,tab:g})]}),e.jsxs("div",{children:["description"===g&&e.jsx("div",{className:x("modal-content"),children:e.jsx("p",{className:x("modal-content__text"),children:n})}),"condition"===g&&e.jsxs("div",{className:x("modal-content"),children:[e.jsxs("div",{className:x("modal-content__row"),children:[e.jsx("p",{className:x("modal-content__condition"),children:p("calculate_mortgage_parameters_initial")}),e.jsxs("div",{className:x("modal-content__title"),children:[e.jsx("span",{className:x("ellipse")}),e.jsx("p",{children:d})]})]}),e.jsxs("div",{className:x("modal-content__row"),children:[e.jsx("p",{className:x("modal-content__condition"),children:p("mortgage_term")}),e.jsxs("div",{className:x("modal-content__title"),children:[e.jsx("span",{className:x("ellipse")}),e.jsx("p",{children:_})]})]}),e.jsxs("div",{className:x("modal-content__row"),children:[e.jsx("p",{className:x("modal-content__condition"),children:p("bid")}),e.jsx("p",{className:x("modal-content__title"),children:m})]})]})]})]})})},j={card:"_card_ixwh9_1","card-title":"_card-title_ixwh9_9","card-title__ellipse":"_card-title__ellipse_ixwh9_14","card-title__text":"_card-title__text_ixwh9_20","card-title__info":"_card-title__info_ixwh9_27","card-content":"_card-content_ixwh9_30","card-content__desc":"_card-content__desc_ixwh9_35","card-content__price":"_card-content__price_ixwh9_42","card-desc":"_card-desc_ixwh9_53","card-desc__content":"_card-desc__content_ixwh9_64","card-desc__content-desc":"_card-desc__content-desc_ixwh9_69","card-desc__content-title":"_card-desc__content-title_ixwh9_76",wrapper:"_wrapper_ixwh9_83"},N=a.bind(j),w=({title:a,mortgageAmount:t,monthlyPayment:s,percent:r,period:n,description:o,conditionFinance:_,conditionPeriod:m,conditionBid:p})=>{const{t:g,i18n:x}=l(),j=t.toLocaleString("en-US"),w=s.toLocaleString("en-US"),[f,{open:y,close:b}]=i();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:N("card"),children:[e.jsxs("div",{className:N("card-title"),children:[e.jsx("span",{className:N("card-title__ellipse")}),e.jsx("p",{className:N("card-title__text"),children:a}),e.jsx(c,{className:N("card-title__info"),onClick:y,size:20})]}),e.jsxs("div",{className:N("wrapper"),children:[e.jsxs("div",{className:N("card-content"),children:[e.jsx("p",{className:N("card-content__desc"),children:g("mortgage_total")}),e.jsxs("p",{className:N("card-content__price"),children:[j," ₪"]})]}),e.jsxs("div",{className:N("card-content"),children:[e.jsx("p",{className:N("card-content__desc"),children:g("mortgage_monthly")}),e.jsxs("p",{className:N("card-content__price"),children:[w," ₪"]})]})]}),e.jsxs("div",{className:N("wrapper"),children:[e.jsxs("div",{className:N("card-desc"),children:[e.jsx(d,{}),e.jsxs("div",{className:N("card-desc__content"),children:[e.jsx("p",{className:N("card-desc__content-desc"),children:g("mortgage_percnt")}),e.jsxs("p",{className:N("card-desc__content-title"),children:[Number(r).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:N("card-desc"),children:[e.jsx(u,{}),e.jsxs("div",{className:N("card-desc__content"),children:[e.jsx("p",{className:N("card-desc__content-desc"),children:g("mortgage_term")}),e.jsxs("p",{className:N("card-desc__content-title"),children:[n," ",h(n)]})]})]})]})]}),e.jsx(v,{isVisible:f,onClose:b,title:a,description:o,conditionFinance:_,conditionPeriod:m,conditionBid:p})]})},f=()=>{const e=_();return e.pathname.includes("/calculate-mortgage")?"mortgage":e.pathname.includes("/calculate-credit")?"credit":e.pathname.includes("/refinance-mortgage")?"refinance-mortgage":e.pathname.includes("/refinance-credit")?"refinance-credit":null},y=async e=>{var a;const t=n.language||"en",s="he"===t?"he-IL":"ru"===t?"ru-RU":"en-US",r=await fetch("/api/customer/compare-banks",{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":s},body:JSON.stringify(e)});if(!r.ok){const e=await r.text();throw new Error(`API Error: ${r.status} - ${e}`)}return(null==(a=(await r.json()).data)?void 0:a.bank_offers)||[]},b=async()=>{var e;try{const a="/api",t=n.language||"en",s="he"===t?"he-IL":"ru"===t?"ru-RU":"en-US",r=await fetch(`${a}/customer/mortgage-programs`,{method:"GET",headers:{"Content-Type":"application/json","Accept-Language":s}});if(r.ok){return(null==(e=(await r.json()).data)?void 0:e.programs)||[]}throw new Error(`Failed to fetch programs: ${r.status}`)}catch(a){throw a}},S=(e,a,t,s,r,i)=>{var c;const n="credit"===s,l=r||`sess_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let d;if(null==a?void 0:a.birthday){const e=new Date(a.birthday);if(!isNaN(e.getTime())){const a=new Date;d=a.getFullYear()-e.getFullYear();const t=a.getMonth()-e.getMonth();(t<0||0===t&&a.getDate()<e.getDate())&&d--,(d<18||d>100)&&(d=void 0)}}const o=(null==a?void 0:a.monthlyIncome)||(null==t?void 0:t.monthlyIncome)||(null==e?void 0:e.monthlyIncome)||0;let _=0,m=0;if(n)_=e.loanAmount||0,m=0;else if("refinance-credit"===s){_=(e.creditData||[]).reduce((e,a)=>e+(a.amount||0),0),m=0}else"refinance-mortgage"===s?(_=e.mortgageBalance||0,m=e.priceOfEstate||0):(_=e.priceOfEstate&&e.initialFee?e.priceOfEstate-e.initialFee:.5*e.priceOfEstate,m=e.priceOfEstate||0);"refinance-credit"===s&&(null==(c=null==e?void 0:e.creditData)||c.forEach((e,a)=>{}));return{loan_type:n?"credit":"mortgage",amount:_,property_value:m,monthly_income:o,birth_date:null==a?void 0:a.birthday,employment_start_date:null==t?void 0:t.startDate,age:d||35,employment_years:(null==t?void 0:t.employmentYears)||0,property_ownership:e.propertyOwnership||"no_property",session_id:l,client_id:i,education:null==a?void 0:a.education,citizenship:null==a?void 0:a.citizenship,marital_status:null==a?void 0:a.familyStatus,children_count:"yes"===(null==a?void 0:a.childrens)?(null==a?void 0:a.childrenCount)||1:0,property_city:null==e?void 0:e.cityWhereYouBuy,property_type:n||null==e?void 0:e.typeSelect,is_first_apartment:!n&&"1"===(null==e?void 0:e.willBeYourFirst),has_medical_insurance:"yes"===(null==a?void 0:a.medicalInsurance),is_foreigner:"yes"===(null==a?void 0:a.isForeigner),is_public_figure:"yes"===(null==a?void 0:a.publicPerson)}},C=a=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...a,children:e.jsx("path",{fill:"#FBE54D",d:"M3.75 8.25h3.094a3 3 0 0 0 5.812 0h7.594a.75.75 0 1 0 0-1.5h-7.594a3 3 0 0 0-5.812 0H3.75a.75.75 0 0 0 0 1.5Zm6-2.25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm10.5 9.75h-1.594a3 3 0 0 0-5.812 0H3.75a.75.75 0 1 0 0 1.5h9.094a3 3 0 0 0 5.812 0h1.594a.75.75 0 1 0 0-1.5ZM15.75 18a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z"})}),F={parameters:"_parameters_1op4u_1","parameters-title":"_parameters-title_1op4u_11","parameters-title__text":"_parameters-title__text_1op4u_16","parameters-title__icon":"_parameters-title__icon_1op4u_22","parameters-data":"_parameters-data_1op4u_29","parameters-data__title":"_parameters-data__title_1op4u_35","parameters-data__desc":"_parameters-data__desc_1op4u_41",wrapper:"_wrapper_1op4u_49"},E=a.bind(F),P=({cost:a,initialPayment:s,period:r,credit:i,onEditClick:c})=>{const{t:n,i18n:d}=l(),{getContent:o}=t("mortgage_step4"),_=m(),h=f(),u="credit"===h,g=null!=a?Number(a):void 0,x=null!=s?Number(s):void 0,v=null!=i?Number(i):void 0,j=null!=r?Number(r):void 0,N=void 0!==g?g.toLocaleString("en-US"):void 0,w=void 0!==x?x.toLocaleString("en-US"):void 0,y=void 0!==v?v.toLocaleString("en-US"):void 0,b=void 0!==j?12*j:void 0;return e.jsx(p,{children:e.jsxs("div",{className:E("parameters"),children:[e.jsxs("div",{className:E("parameters-title"),children:[e.jsx("p",{className:E("parameters-title__text"),children:o("calculate_mortgage_parameters","calculate_mortgage_parameters")}),e.jsx(C,{onClick:c||(()=>_((()=>{switch(h){case"mortgage":default:return"/services/calculate-mortgage/1";case"credit":return"/services/calculate-credit/1";case"refinance-mortgage":return"/services/refinance-mortgage/1";case"refinance-credit":return"/services/refinance-credit/1"}})())),className:E("parameters-title__icon")})]}),e.jsxs("div",{className:E("wrapper"),children:[y&&e.jsxs("div",{className:E("parameters-data"),children:[e.jsxs("div",{className:E("parameters-data__title"),children:[y," ₪"]}),e.jsx("div",{className:E("parameters-data__desc"),children:n("sum_credit")})]}),N&&e.jsxs("div",{className:E("parameters-data"),children:[e.jsxs("div",{className:E("parameters-data__title"),children:[N," ₪"]}),e.jsx("div",{className:E("parameters-data__desc"),children:o(u?"calculate_credit_parameters_cost":"calculate_mortgage_parameters_cost",u?"calculate_credit_parameters_cost":"calculate_mortgage_parameters_cost")})]}),w&&e.jsxs("div",{className:E("parameters-data"),children:[e.jsxs("div",{className:E("parameters-data__title"),children:[w," ₪"]}),e.jsx("div",{className:E("parameters-data__desc"),children:o("calculate_mortgage_parameters_initial","calculate_mortgage_parameters_initial")})]})]}),b&&e.jsx("div",{className:E("wrapper"),children:e.jsxs("div",{className:E("parameters-data"),children:[e.jsxs("div",{className:E("parameters-data__title"),children:[b," ",o("calculate_mortgage_parameters_months","calculate_mortgage_parameters_months")]}),e.jsx("div",{className:E("parameters-data__desc"),children:o(u?"calculate_credit_parameters_period":"calculate_mortgage_parameters_period",u?"calculate_credit_parameters_period":"calculate_mortgage_parameters_period")})]})})]})})};export{v as B,P as M,w as P,b as a,y as f,S as t,f as u};
