import{j as e}from"./ui-vendor-99260b86.js";import{u as o,a as n,c as i,f as t,F as a,b as l}from"./form-vendor-6d56d196.js";import{r as s,b as r,f as d}from"./react-vendor-21ec1e1c.js";import{B as c,a as m,M as u,D as _,b as h}from"./index-83602c60.js";import{c as p,a as f,j as v,J as b,u as j,n as x,X as g,Y as w,E as I,Z as y,W as S,q,r as P,$ as O,a0 as D,y as k,z as C}from"./index-a394eb59.js";import{D as A}from"./DoubleButtons-9c8561cd.js";import{A as N,a as F,b as R,O as B,c as M,M as $,d as V,g as E}from"./componentsByIncomeSource-3b301742.js";import{u as z}from"./i18n-vendor-18addd5f.js";import{C as T}from"./Column-1049feee.js";import{F as Y}from"./FormContainer-b4a58025.js";import{R as L}from"./Row-38cc6147.js";import{U as J,A as U}from"./AddButton-af8674b6.js";import{F as W}from"./FormCaption-061cdd41.js";import"./components-vendor-62dc47c0.js";import"./utils-vendor-8f040048.js";import"./state-vendor-069efcec.js";import"./useDropdownData-1fd3cd06.js";import"./DropdownMenu-fce1e579.js";import"./FormattedInput-873f3620.js";import"./Control-b90d9ff7.js";import"./Calendar-6e892777.js";const X={modal:"_modal_lzcpe_1","modal-item":"_modal-item_lzcpe_18","modal-buttons":"_modal-buttons_lzcpe_31",buttons:"_buttons_lzcpe_49"},Z=p.bind(X),G=()=>{const{t:n,i18n:i}=z(),{handleSubmit:t,isValid:a,values:l}=o(),s=f();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:Z("modal"),children:[e.jsxs("div",{className:Z("modal-item"),children:[e.jsx(N,{excludeNoIncome:!0}),l.additionalIncome&&"no_additional_income"!==l.additionalIncome&&e.jsx(F,{})]}),e.jsx("div",{className:Z("modal-buttons"),children:e.jsxs("div",{className:Z("buttons"),children:[e.jsx(c,{variant:"modalBase",type:"submit",onClick:()=>s(v()),children:n("button_back")}),e.jsx(c,{type:"submit",isDisabled:!a,onClick:t,size:"full",children:n("button_next_save")})]})})]})})},H=()=>{const{t:o,i18n:r}=z(),{getContent:d}=m("common");s.useEffect(()=>{b()},[r.language]);const c=f(),_=j(e=>e.modalSlice.isOpenAdditionalIncome),h=j(e=>e.modalSlice.currentId),p=j(e=>e.borrowersPersonalData.additionalIncomeModal),w=void 0!==p[h-1]?p[h-1]:void 0,I=()=>{c(v())},y=!p.some(e=>e.id===h)?R(p):h,S={additionalIncome:(null==w?void 0:w.additionalIncome)||"",additionalIncomeAmount:(null==w?void 0:w.additionalIncomeAmount)||null},q=n().shape({additionalIncome:i().required(x("error_select_one_of_the_options","Please select one of the options")).test("not-empty",x("error_select_one_of_the_options","Please select one of the options"),e=>null!=e&&""!==e),additionalIncomeAmount:t().when("additionalIncome",{is:e=>e&&"no_additional_income"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()})});return e.jsx(u,{isVisible:_,onCancel:I,title:`${d("additional_source_of_income_modal_title","Additional Source of Income")} ${y+1}`,children:e.jsx(a,{initialValues:S,validationSchema:q,validateOnMount:!0,onSubmit:e=>{c(g({id:y,...e})),I()},children:e.jsx(l,{children:e.jsx(G,{})})})})},K={modal:"_modal_r2hy9_1","modal-item":"_modal-item_r2hy9_18","modal-buttons":"_modal-buttons_r2hy9_23",container:"_container_r2hy9_41",component:"_component_r2hy9_47",buttons:"_buttons_r2hy9_59"},Q=p.bind(K),ee=()=>{const{t:n,i18n:i}=z(),{handleSubmit:t,isValid:a,values:l}=o(),s=f(),{obligation:r}=l;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:Q("modal"),children:[e.jsxs("div",{className:Q("container"),children:[e.jsx(B,{}),M[r]&&M[r].map((o,n)=>e.jsx("div",{className:Q("component"),children:o},n)),e.jsx(T,{})]}),e.jsx("div",{className:Q("modal-buttons"),children:e.jsxs("div",{className:Q("buttons"),children:[e.jsx(c,{variant:"modalBase",type:"submit",onClick:()=>s(v()),children:n("button_back")}),e.jsx(c,{type:"submit",isDisabled:!a,onClick:t,size:"full",children:n("button_next_save")})]})})]})})};function oe(){return n().shape({obligation:i().required(x("error_select_one_of_the_options","Please select one of the options")),bank:i().when("obligation",{is:e=>e&&"no_obligations"!==e&&"other"!==e,then:e=>e.required(x("error_select_bank","Please select a bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:t().when("obligation",{is:e=>e&&"no_obligations"!==e&&"other"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),endDate:i().when("obligation",{is:e=>e&&"no_obligations"!==e&&"other"!==e,then:e=>e.required(x("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()})})}const ne=()=>{const{t:o,i18n:n}=z(),{getContent:i}=m("common"),[t,r]=s.useState(()=>oe()),d=f();s.useEffect(()=>{(async()=>{await I();const e=oe();r(e)})()},[n.language]);const c=j(e=>e.modalSlice.isOpenObligation),_=j(e=>e.modalSlice.currentId),h=j(e=>e.borrowersPersonalData.obligationModal),p=void 0!==h[_-1]?h[_-1]:void 0,b=()=>{d(v())},x=!h.some(e=>e.id===_)?R(h):_,g={obligation:(null==p?void 0:p.obligation)||"",bank:(null==p?void 0:p.bank)||"",monthlyPaymentForAnotherBank:(null==p?void 0:p.monthlyPaymentForAnotherBank)||null,endDate:(null==p?void 0:p.endDate)||(new Date).toISOString().split("T")[0],noIncome:(null==p?void 0:p.noIncome)||(new Date).toISOString().split("T")[0]};return e.jsx(u,{isVisible:c,onCancel:b,title:`${i("obligation_modal_title","Obligation")} ${x+1}`,children:e.jsx(a,{initialValues:g,validationSchema:t,validateOnMount:!0,onSubmit:e=>{d(w({id:x,...e})),b()},children:e.jsx(l,{children:e.jsx(ee,{})})})})},ie={modal:"_modal_1gdud_1","modal-item":"_modal-item_1gdud_18","modal-buttons":"_modal-buttons_1gdud_23",container:"_container_1gdud_41",component:"_component_1gdud_47",buttons:"_buttons_1gdud_59"},te=p.bind(ie),ae=()=>{const{t:n,i18n:i}=z(),{handleSubmit:t,isValid:a,values:l,errors:s,touched:r}=o(),{mainSourceOfIncome:d}=l,m=f();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:te("modal"),children:[e.jsxs("div",{className:te("container"),children:[e.jsx("div",{className:te("component"),children:e.jsx($,{})}),V[d]&&V[d].map((o,n)=>e.jsx("div",{className:te("component"),children:o},n)),e.jsx(T,{})]}),e.jsx("div",{className:te("modal-buttons"),children:e.jsxs("div",{className:te("buttons"),children:[e.jsx(c,{variant:"modalBase",type:"submit",onClick:()=>m(v()),children:n("button_back")}),e.jsx(c,{type:"submit",isDisabled:!a,onClick:t,size:"full",children:n("button_next_save")})]})})]})})},le=()=>{z();const{getContent:o}=m("common"),s=f(),r=j(e=>e.modalSlice.isOpenSourceOfIncome),d=j(e=>e.modalSlice.currentId),c=j(e=>e.borrowersPersonalData.sourceOfIncomeModal),_=void 0!==c[d-1]?c[d-1]:void 0,h=()=>{s(v())},p=!c.some(e=>e.id===d)?R(c):d,b={mainSourceOfIncome:(null==_?void 0:_.mainSourceOfIncome)||"",monthlyIncome:(null==_?void 0:_.monthlyIncome)||null,startDate:(null==_?void 0:_.startDate)||(new Date).getTime(),fieldOfActivity:(null==_?void 0:_.fieldOfActivity)||"",profession:(null==_?void 0:_.profession)||"",companyName:(null==_?void 0:_.companyName)||"",amountIncomeCurrentYear:(null==_?void 0:_.amountIncomeCurrentYear)||null},g=n().shape({mainSourceOfIncome:i().required(x("error_select_answer","Please select an answer")),monthlyIncome:t().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),startDate:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_date","Please select a date")),otherwise:e=>e.notRequired()}),fieldOfActivity:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_select_field_of_activity","Please select field of activity")),otherwise:e=>e.notRequired()}),profession:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),companyName:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()})});return e.jsx(u,{isVisible:r,onCancel:h,title:`${o("source_of_income_modal_title","Source of Income")} ${p+1}`,children:e.jsx(a,{initialValues:b,validationSchema:g,validateOnMount:!0,onSubmit:e=>{s(y({id:p,...e})),h()},children:e.jsx(l,{children:e.jsx(ae,{})})})})},se=()=>{const{t:n,i18n:i}=z(),{values:t}=o(),{mainSourceOfIncome:a,additionalIncome:l,obligation:s}=t,d=f(),c=E("other_borrowers_step2");j(e=>e.borrowersPersonalData.sourceOfIncomeModal);const m=j(e=>e.borrowersPersonalData.additionalIncomeModal),u=j(e=>e.borrowersPersonalData.obligationModal);return e.jsxs(Y,{children:[e.jsx(W,{title:n("borrowers_personal_data_title")}),e.jsxs(L,{children:[e.jsx($,{screenLocation:"other_borrowers_step2"}),c[a]&&c[a].map((o,n)=>e.jsx(r.Fragment,{children:o},n)),e.jsx(T,{})]}),e.jsx(_,{}),e.jsxs(L,{children:[e.jsx(N,{screenLocation:"other_borrowers_step2"}),l&&"option_1"!==l&&e.jsx(F,{screenLocation:"other_borrowers_step2"}),e.jsx(T,{})]}),l&&"option_1"!==l&&e.jsx(L,{children:e.jsxs(T,{children:[m.map(o=>e.jsx(J,{onEdit:()=>{return e=o.id,void d(k(e));var e},onDelete:()=>{return e=o.id,void d(O({id:e}));var e},enableEdit:!0,name:`${n("additional_source_of_income")}${o.id+1}`},o.id)),e.jsx(U,{onClick:()=>{d(S(t)),d(q())},color:"#FBE54D",value:n("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(_,{}),e.jsxs(L,{children:[e.jsx(B,{screenLocation:"other_borrowers_step2"}),M[s]&&M[s].map((o,n)=>e.jsx(r.Fragment,{children:o},n)),e.jsx(T,{})]}),s&&"option_1"!==s&&e.jsx(L,{children:e.jsxs(T,{children:[u.map(o=>e.jsx(J,{onEdit:()=>{return e=o.id,void d(C(e));var e},onDelete:()=>{return e=o.id,void d(D({id:e}));var e},enableEdit:!0,name:`${n("obligation")}${o.id+1}`},o.id)),e.jsx(U,{onClick:()=>{d(S(t)),d(P())},color:"#FBE54D",value:n("add_obligation"),variant:"none"})]})})]})},re=n().shape({mainSourceOfIncome:i().required(x("error_select_answer","Please select an answer")).test("not-empty",x("error_select_answer","Please select an answer"),e=>null!=e&&""!==e),monthlyIncome:t().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),startDate:i().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()}),fieldOfActivity:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_select_field_of_activity","Please select field of activity")),otherwise:e=>e.notRequired()}),profession:i().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),companyName:i().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),additionalIncome:i().required(x("error_select_one_of_the_options","Please select one of the options")).test("not-empty",x("error_select_one_of_the_options","Please select one of the options"),e=>null!=e&&""!==e),additionalIncomeAmount:t().when("additionalIncome",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),obligation:i().required(x("error_select_one_of_the_options","Please select one of the options")),bank:i().when("obligation",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_select_bank","Please select a bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:t().when("obligation",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),endDate:i().when("obligation",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()})}),de=()=>{const o=f(),n=d(),i=j(e=>e.borrowersPersonalData.borrowersPersonalData),t=void 0!==i?i:void 0,s={mainSourceOfIncome:(null==t?void 0:t.mainSourceOfIncome)||"",monthlyIncome:(null==t?void 0:t.monthlyIncome)||null,startDate:(null==t?void 0:t.startDate)||(new Date).getTime(),fieldOfActivity:(null==t?void 0:t.fieldOfActivity)||"",profession:(null==t?void 0:t.profession)||"",companyName:(null==t?void 0:t.companyName)||"",additionalIncome:(null==t?void 0:t.additionalIncome)||"",additionalIncomeAmount:(null==t?void 0:t.additionalIncomeAmount)||null,obligation:(null==t?void 0:t.obligation)||"",bank:(null==t?void 0:t.bank)||"",monthlyPaymentForAnotherBank:(null==t?void 0:t.monthlyPaymentForAnotherBank)||null,endDate:(null==t?void 0:t.endDate)||(new Date).getTime(),amountIncomeCurrentYear:(null==t?void 0:t.amountIncomeCurrentYear)||null};return e.jsxs(e.Fragment,{children:[e.jsx(a,{initialValues:s,validationSchema:re,validateOnMount:!0,onSubmit:e=>{o(S(e)),n("/services/calculate-mortgage/2")},children:e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(se,{})}),e.jsx(A,{})]})}),e.jsx(le,{}),e.jsx(H,{}),e.jsx(ne,{})]})};export{de as default};
