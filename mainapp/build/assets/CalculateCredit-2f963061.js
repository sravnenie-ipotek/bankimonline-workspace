import{j as e}from"./ui-vendor-99260b86.js";import{r as a,f as r,b as t,j as o,k as n}from"./react-vendor-21ec1e1c.js";import{a as i,E as s,D as l,T as c,b as d,A as u,L as _}from"./index-73dd41d9.js";import{P as m}from"./ProgressBar-b3b43754.js";import{u as p,a as h,k as g,D as j,m as x,d as f,n as w,o as y,p as b,q as v,r as P,t as q,v as S,w as D,x as M,y as O,z as I,A as C,B as N,E as A,N as F}from"./index-be42ab03.js";import{u as B,F as E,b as k,a as L,c as Y,f as T,g as R}from"./form-vendor-6d56d196.js";import{V as z}from"./VideoPoster-3a2202a4.js";import{S as V,a as $,M as W,U,A as H,F as G,B as J,b as K,c as Q,O as X}from"./SourceOfIncomeModal-5b87dc20.js";import{C as Z}from"./Column-8e9274b3.js";import{D as ee}from"./DropdownMenu-9b978d84.js";import{F as ae}from"./FormContainer-3c74d758.js";import{F as re}from"./FormattedInput-8631259e.js";import{R as te}from"./Row-1fe205ed.js";import{I as oe,c as ne}from"./IncreasePayment-63286bdf.js";import{F as ie}from"./FormCaption-99de3b25.js";import{Y as se,N as le,B as ce,E as de,A as ue,T as _e,C as me,M as pe,I as he,P as ge}from"./Taxes-1bf08f0c.js";import{u as je}from"./i18n-vendor-18addd5f.js";import{D as xe}from"./DoubleButtons-2dfe33b8.js";import{U as fe,A as we}from"./AddButton-c0dadcb9.js";import{R as ye}from"./RowTwo-70a22b13.js";import{B as be,P as ve,A as Pe}from"./PartnerPayMortgage-b13fb03c.js";import{C as qe,a as Se,H as De}from"./HowMuchChildrens-ecebc3ca.js";import{F as Me}from"./FamilyStatus-d89d99b4.js";import{I as Oe}from"./Info-29cf2572.js";import{c as Ie,M as Ce,A as Ne,a as Ae,O as Fe,g as Be,b as Ee}from"./componentsByIncomeSource-4950a17f.js";import"./components-vendor-62dc47c0.js";import"./utils-vendor-8f040048.js";import"./state-vendor-069efcec.js";import"./MortgageParameters-98c61379.js";import"./PercentIcon-e1c53aea.js";import"./useDropdownData-1fd3cd06.js";import"./Control-99ce6a52.js";import"./Calendar-372900a0.js";import"./ShieldCheckIcon-30f9c17a.js";const ke=()=>{const[r,t]=a.useState(51130),[o,n]=a.useState(2654),[d,u]=a.useState([]),{t:_,i18n:m}=je(),{getContent:j}=i("calculate_credit_1"),x=a.useMemo(()=>[{value:"option_1",label:j("calculate_credit_target_option_1",_("calculate_credit_target_option_1"))},{value:"option_2",label:j("calculate_credit_target_option_2",_("calculate_credit_target_option_2"))},{value:"option_3",label:j("calculate_credit_target_option_3",_("calculate_credit_target_option_3"))},{value:"option_4",label:j("calculate_credit_target_option_4",_("calculate_credit_target_option_4"))},{value:"option_5",label:j("calculate_credit_target_option_5",_("calculate_credit_target_option_5"))},{value:"option_6",label:j("calculate_credit_target_option_6",_("calculate_credit_target_option_6"))}],[j,_]),f=a.useMemo(()=>[{value:"option_1",label:j("calculate_mortgage_when_options_1",_("calculate_mortgage_when_options_1"))},{value:"option_2",label:j("calculate_mortgage_when_options_2",_("calculate_mortgage_when_options_2"))},{value:"option_3",label:j("calculate_mortgage_when_options_3",_("calculate_mortgage_when_options_3"))},{value:"option_4",label:j("calculate_mortgage_when_options_4",_("calculate_mortgage_when_options_4"))}],[j,_]),w=a.useMemo(()=>[{value:"option_1",label:j("calculate_credit_prolong_option_1",_("calculate_credit_prolong_option_1"))},{value:"option_2",label:j("calculate_credit_prolong_option_2",_("calculate_credit_prolong_option_2"))},{value:"option_3",label:j("calculate_credit_prolong_option_3",_("calculate_credit_prolong_option_3"))},{value:"option_4",label:j("calculate_credit_prolong_option_4",_("calculate_credit_prolong_option_4"))},{value:"option_5",label:j("calculate_credit_prolong_option_5",_("calculate_credit_prolong_option_5"))},{value:"option_6",label:j("calculate_credit_prolong_option_6",_("calculate_credit_prolong_option_6"))},{value:"option_7",label:j("calculate_credit_prolong_option_7",_("calculate_credit_prolong_option_7"))}],[j,_]),{setFieldValue:y,values:b,errors:v,touched:P,setFieldTouched:q}=B(),S=p(e=>e.activeField),D=h();a.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/get-cities?lang=${m.language}`),a=await e.json();if("success"===a.status){const e=a.data.map(e=>({value:e.value,label:e.name}));u(e)}}catch(e){}})()},[m.language]);return a.useEffect(()=>{(async()=>{try{if("period"===S){const e=await ne.calculateCreditPayment(b.loanAmount,b.period);Number.isNaN(e)||y("monthlyPayment",e)}else{const e=await ne.calculateLoanPeriod(b.loanAmount,0,b.monthlyPayment);Number.isNaN(e)||y("period",e)}}catch(e){}})()},[S,y,b.loanAmount,b.monthlyPayment,b.period]),a.useLayoutEffect(()=>{(async()=>{try{const e=await ne.calculateCreditPayment(b.loanAmount,1),a=await ne.calculateCreditPayment(b.loanAmount,30);Number.isNaN(e)||t(e),0===e&&t(1),Number.isNaN(a)||n(a)}catch(e){t(51130),n(2654)}})()},[b.loanAmount]),e.jsx(e.Fragment,{children:e.jsxs(ae,{children:[e.jsx(ie,{title:_("sidebar_sub_calculate_credit")}),e.jsxs(te,{children:[e.jsx(Z,{children:e.jsx(ee,{title:j("calculate_why",_("calculate_why")),data:x,placeholder:j("calculate_credit_target_ph",_("calculate_credit_target_ph")),value:b.purposeOfLoan,onChange:e=>y("purposeOfLoan",e),onBlur:()=>q("purposeOfLoan",!0),error:P.purposeOfLoan&&v.purposeOfLoan})}),e.jsxs(Z,{children:[e.jsx(re,{handleChange:e=>{D(g("period")),y("loanAmount",e)},name:"loanAmount",title:j("calculate_amount",_("calculate_amount")),value:b.loanAmount,placeholder:"1,000,000",error:v.loanAmount}),v.loanAmount&&e.jsx(s,{error:v.loanAmount})]}),e.jsx(Z,{children:e.jsx(ee,{title:j("calculate_when",_("calculate_when")),data:f,placeholder:j("calculate_mortgage_when_options_Time",_("calculate_mortgage_when_options_Time")),value:b.whenDoYouNeedMoney,onChange:e=>y("whenDoYouNeedMoney",e),onBlur:()=>q("whenDoYouNeedMoney",!0),error:P.whenDoYouNeedMoney&&v.whenDoYouNeedMoney})})]}),e.jsx(te,{children:e.jsx(Z,{children:e.jsx(ee,{title:j("calculate_prolong",_("calculate_prolong")),data:w,placeholder:j("calculate_credit_prolong_ph",_("calculate_credit_prolong_ph")),value:b.loanDeferral,onChange:e=>y("loanDeferral",e),onBlur:()=>q("loanDeferral",!0),error:P.loanDeferral&&v.loanDeferral})})}),b.purposeOfLoan&&"option_2"===b.purposeOfLoan&&e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsxs(te,{children:[e.jsxs(Z,{children:[e.jsx(re,{handleChange:e=>{y("priceOfEstate",e)},name:"PriceOfEstate",title:_("calculate_mortgage_price"),value:b.priceOfEstate,placeholder:"1,000,000",error:v.priceOfEstate}),v.priceOfEstate&&e.jsx(s,{error:v.priceOfEstate})]}),e.jsx(Z,{children:e.jsx(ee,{title:_("calculate_mortgage_city"),data:d,placeholder:_("city"),value:b.cityWhereYouBuy,onChange:e=>y("cityWhereYouBuy",e),onBlur:()=>q("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:_("search"),nothingFoundText:_("nothing_found"),error:P.cityWhereYouBuy&&v.cityWhereYouBuy})}),e.jsxs(Z,{children:[e.jsx(c,{title:_("have_mortgage_title")}),e.jsx(se,{value:b.haveMortgage,onChange:e=>y("haveMortgage",e),error:P.haveMortgage&&v.haveMortgage})]})]})]}),e.jsx(l,{}),e.jsxs(te,{children:[e.jsxs(Z,{children:[e.jsx(V,{disableCurrency:!0,unitsMax:_("calculate_mortgage_period_units_max"),unitsMin:_("calculate_mortgage_period_units_min"),value:b.period,name:"Period",min:1,max:30,error:v.period,title:_("calculate_mortgage_period"),handleChange:e=>{D(g("period")),y("period",e)}}),v.period&&e.jsx(s,{error:v.period})]}),e.jsxs(Z,{children:[e.jsx(V,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:o,max:r,error:v.monthlyPayment,title:_("calculate_mortgage_initial_payment"),handleChange:e=>{D(g("monthlyPayment")),y("monthlyPayment",e)},value:b.monthlyPayment}),e.jsx(oe,{}),v.monthlyPayment&&e.jsx(s,{error:v.monthlyPayment})]}),e.jsx(Z,{})]})]})})},Le=()=>{const{t:a,i18n:t}=je(),o=h(),n=r(),i=p(e=>e.credit),s=p(e=>e.login.isLogin),l={purposeOfLoan:i.purposeOfLoan||"",loanAmount:i.loanAmount||2e5,whenDoYouNeedMoney:i.whenDoYouNeedMoney||"",loanDeferral:i.loanDeferral||"",priceOfEstate:i.priceOfEstate||null,cityWhereYouBuy:i.cityWhereYouBuy||"",haveMortgage:i.haveMortgage||null,period:i.period||30,monthlyPayment:i.monthlyPayment||5368};return e.jsxs(e.Fragment,{children:[e.jsx(E,{initialValues:l,validationSchema:L().shape({purposeOfLoan:Y().required(w("error_select_answer","Please select an answer")),loanAmount:T().when("purposeOfLoan",{is:"option_6",then:e=>e.max(1e6,w("error_loan_of_amount_credit_max_1000000","Maximum loan amount is 1,000,000 NIS")),otherwise:e=>e.max(2e5,w("error_loan_of_amount_credit_max_200000","Maximum loan amount is 200,000 NIS"))}).required(w("error_required_to_fill_out","This field is required")),whenDoYouNeedMoney:Y().required(w("error_select_answer","Please select an answer")),loanDeferral:Y().required(w("error_select_answer","Please select an answer")),priceOfEstate:T().when("purposeOfLoan",{is:"option_2",then:e=>e.required(w("error_required_to_fill_out","This field is required")),otherwise:e=>e.notRequired()}),cityWhereYouBuy:Y().when("purposeOfLoan",{is:"option_2",then:e=>e.required(w("error_select_answer","Please select an answer")),otherwise:e=>e.notRequired()}),haveMortgage:Y().when("purposeOfLoan",{is:"option_2",then:e=>e.required(w("error_select_answer","Please select an answer")),otherwise:e=>e.notRequired()}),period:T().min(1,w("error_min_credit_period","Minimum period is 1 year")).max(30,w("error_max_credit_period","Maximum period is 30 years")).required(w("error_required_to_fill_out","This field is required")),monthlyPayment:T().required(w("error_required_to_fill_out","This field is required"))}),validateOnMount:!0,onSubmit:e=>{o(j(e)),s?"option_2"===e.purposeOfLoan&&"yes"===e.haveMortgage?n("/services/refinance-mortgage/1"):n("/services/calculate-credit/2"):(o(x()),o(f("phoneVerification")))},children:e.jsxs(k,{children:[e.jsxs(d,{children:[e.jsx(z,{title:a("sidebar_sub_calculate_credit"),text:a("calculate_mortgage_banner_subtext"),size:"small"}),e.jsx(ke,{})]}),e.jsx($,{})]})}),e.jsx(W,{}),e.jsx(u,{})]})},Ye=()=>{const{t:a,i18n:r}=je(),{getContent:t}=i("mortgage_step4"),o=p(e=>e.login.loginData),n=p(e=>e.credit);return e.jsxs(ae,{children:[e.jsx(ie,{title:t("calculate_credit_final",a("calculate_credit_final"))}),e.jsx(U,{credit:n.loanAmount,nameSurname:null==o?void 0:o.nameSurname,phoneNumber:null==o?void 0:o.phoneNumber}),e.jsx(H,{text:t("calculate_credit_warning",a("calculate_credit_warning"))}),e.jsx(te,{children:e.jsx(G,{})}),e.jsx(J,{})]})},Te={selectedBank:"",selectedOffer:null},Re=L().shape({selectedBank:Y(),selectedOffer:L().nullable()}),ze=()=>{const a=h(),t=r(),o=p(e=>e.login.loginData),n=p(e=>e.login.isLogin);return e.jsx(E,{initialValues:Te,validationSchema:Re,validateOnMount:!0,onSubmit:e=>{a(j(e)),n&&(null==o?void 0:o.phoneNumber)?t("/services/application-submitted"):(a(y()),a(f("signUp")))},children:e.jsxs(k,{children:[e.jsx(d,{children:e.jsx(Ye,{})}),e.jsx(xe,{})]})})},Ve=()=>{const{t:a,i18n:r}=je(),{getContent:t}=i("calculate_credit_2"),{values:o}=B(),n=p(e=>e.login.loginData);return e.jsxs(ae,{children:[e.jsx(ie,{title:t("calculate_credit_step2_title",a("calculate_mortgage_step2_title"))}),e.jsxs(ye,{children:[e.jsx(Oe,{}),e.jsx(fe,{name:null==n?void 0:n.nameSurname,phone:null==n?void 0:n.phoneNumber})]}),e.jsxs(te,{children:[e.jsx(le,{}),e.jsx(ce,{}),e.jsx(de,{})]}),e.jsxs(te,{children:[e.jsxs(Z,{style:{gap:"2rem"},children:[e.jsx(ue,{}),"yes"===o.additionalCitizenships&&e.jsx(qe,{})]}),e.jsxs(Z,{style:{gap:"2rem"},children:[e.jsx(_e,{}),"yes"===o.taxes&&e.jsx(Se,{})]}),e.jsxs(Z,{style:{gap:"2rem"},children:[e.jsx(me,{}),"yes"===o.childrens&&e.jsx(De,{})]})]}),e.jsx(l,{}),e.jsxs(te,{children:[e.jsx(pe,{}),e.jsx(he,{}),e.jsx(ge,{})]}),e.jsx(l,{}),e.jsxs(te,{children:[e.jsx(be,{}),e.jsx(Z,{}),e.jsx(Z,{})]}),e.jsx(l,{}),e.jsxs(te,{children:[e.jsx(Me,{}),e.jsx(Z,{children:"option_2"===o.familyStatus&&e.jsx(ve,{})}),e.jsx(Z,{children:"yes"===o.partnerPayMortgage&&"option_2"===o.familyStatus&&e.jsx(Pe,{})})]})]})},$e=L().shape({nameSurname:Y().required(w("error_name_surname","Please enter your name and surname")),birthday:Y().required(w("error_date","Please enter a valid date")),education:Y().required(w("error_select_answer","Please select an answer")),additionalCitizenships:Y().required(w("error_select_answer","Please select an answer")),citizenshipsDropdown:R().when("additionalCitizenships",{is:"yes",then:e=>e.min(1,w("error_select_answer","Please select an answer")),otherwise:e=>e.min(0)}),taxes:Y().required(w("error_select_answer","Please select an answer")),countriesPayTaxes:R().when("taxes",{is:"yes",then:e=>e.min(1,w("error_select_answer","Please select an answer")),otherwise:e=>e.min(0)}),childrens:Y().required(w("error_select_answer","Please select an answer")),howMuchChildrens:T().required(w("error_fill_field","Please fill this field")),medicalInsurance:Y().required(w("error_select_answer","Please select an answer")),isForeigner:Y().required(w("error_select_answer","Please select an answer")),publicPerson:Y().required(w("error_select_answer","Please select an answer")),borrowers:T().min(1,w("error_quantity_borrowers","At least one borrower is required")).required(w("error_quantity_borrowers","Number of borrowers is required")),familyStatus:Y().required(w("error_select_answer","Please select an answer")),partnerPayMortgage:Y().when("familyStatus",{is:"Married",then:e=>e.required(w("error_select_answer","Please select an answer")),otherwise:e=>e.notRequired()})}),We=()=>{const a=h(),t=r(),o=p(e=>e.credit),n={nameSurname:p(e=>e.login.loginData).nameSurname||o.nameSurname||"",birthday:o.birthday||new Date((new Date).setFullYear((new Date).getFullYear()-18)).getTime(),education:o.education||"",additionalCitizenships:o.additionalCitizenships||null,citizenshipsDropdown:o.citizenshipsDropdown||[],taxes:o.taxes||null,countriesPayTaxes:o.countriesPayTaxes||[],childrens:o.childrens||null,howMuchChildrens:o.howMuchChildrens||1,medicalInsurance:o.medicalInsurance||null,isForeigner:o.isForeigner||null,publicPerson:o.publicPerson||null,borrowers:o.borrowers||null,familyStatus:o.familyStatus||"",partnerPayMortgage:o.partnerPayMortgage||null,addPartner:o.addPartner||""};return e.jsx(E,{initialValues:n,validationSchema:$e,validateOnMount:!0,onSubmit:e=>{a(j(e)),t("/services/calculate-credit/3")},children:e.jsxs(k,{children:[e.jsx(d,{children:e.jsx(Ve,{})}),e.jsx(xe,{})]})})},Ue=e=>{if(!e)return!1;const a=e.toLowerCase();return"option_1"===a||"1"===a||a.includes("no_additional")||a.includes("no additional")||a.includes("none")},He=()=>{const{t:a,i18n:n}=je(),{getContent:s}=i("credit_step3"),d=r(),{values:u,errors:_,isValid:m,touched:g}=B(),{mainSourceOfIncome:x,additionalIncome:f,obligation:w}=u;t.useEffect(()=>{},[u,_,m,g,x,f,w]);const y=(e=>{if(e&&!e.match(/^\d+$/))return e;return{1:"employee",2:"selfemployed",3:"selfemployed",4:"pension",5:"student",6:"unemployed",7:"other"}[e]||""})(x),A=(e=>{if(!e||"5"===e||"no_obligations"===e)return"";if(e&&!e.match(/^\d+$/))return e;return{1:"bank_loan",2:"consumer_credit",3:"credit_card",4:"other"}[e]||""})(w),F=Be("credit_step3"),E=h(),k=p(e=>e.borrowers.sourceOfIncomeModal),L=p(e=>e.borrowers.additionalIncomeModal),Y=p(e=>e.borrowers.obligationModal),T=p(e=>e.otherBorrowers.otherBorrowers),R=p(e=>e.login.loginData);return e.jsxs(ae,{children:[e.jsx(ie,{title:s("calculate_credit_step3_title","פרטי הכנסה ופיננסיים")}),e.jsx(fe,{name:null==R?void 0:R.nameSurname,phone:null==R?void 0:R.phoneNumber}),e.jsxs(te,{children:[e.jsx(Ce,{screenLocation:"credit_step3"}),(()=>{const a=F[y];return null==a?void 0:a.map((a,r)=>e.jsx(t.Fragment,{children:a},r))})(),e.jsx(Z,{})]}),e.jsx(te,{children:x&&e.jsxs(Z,{children:[k.map(r=>e.jsx(fe,{onEdit:()=>{return e=r.id,void E(M(e));var e},onDelete:()=>{return e=r.id,void E(q({id:e}));var e},enableEdit:!0,name:`${s("calculate_credit_source_of_income",a("main_income_source"))}${r.id+1}`},r.id)),e.jsx(we,{onClick:()=>{E(j(u)),E(b())},color:"#FBE54D",value:s("calculate_credit_add_place_to_work",a("add_place_to_work")),variant:"none"})]})}),e.jsx(l,{}),e.jsxs(te,{children:[e.jsx(Ne,{screenLocation:"credit_step3"}),f&&!Ue(f)&&e.jsx(Ae,{}),e.jsx(Z,{})]}),f&&!Ue(f)&&e.jsx(te,{children:e.jsxs(Z,{children:[L.map(r=>e.jsx(fe,{onEdit:()=>{return e=r.id,void E(O(e));var e},onDelete:()=>{return e=r.id,void E(S({id:e}));var e},enableEdit:!0,name:`${s("calculate_credit_additional_income",a("additional_source_of_income"))}${r.id+1}`},r.id)),e.jsx(we,{onClick:()=>{E(j(u)),E(v())},color:"#FBE54D",value:s("calculate_credit_add_additional_income",a("add_additional_source_of_income")),variant:"none"})]})}),e.jsx(l,{}),e.jsxs(te,{children:[e.jsx(Fe,{screenLocation:"credit_step3"}),(()=>{const a=Ie[A];return null==a?void 0:a.map((a,r)=>e.jsx(t.Fragment,{children:a},r))})(),e.jsx(Z,{})]}),w&&A&&e.jsx(te,{children:e.jsxs(Z,{children:[Y.map(r=>e.jsx(fe,{onEdit:()=>{return e=r.id,void E(I(e));var e},onDelete:()=>{return e=r.id,void E(D({id:e}));var e},enableEdit:!0,name:`${s("calculate_credit_obligation",a("obligation"))}${r.id+1}`},r.id)),e.jsx(we,{onClick:()=>{E(j(u)),E(P())},color:"#FBE54D",value:s("calculate_credit_add_obligation",a("add_obligation")),variant:"none"})]})}),e.jsx(l,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[T&&e.jsx(c,{title:s("calculate_credit_borrower",a("borrower"))}),e.jsxs(te,{style:{columnGap:"2rem"},children:[T.map(a=>e.jsx(Z,{children:e.jsx(fe,{onEdit:()=>(e=>{E(C(e));const a=T.some(a=>a.id===e)?e:Ee(T);d({pathname:"/services/other-borrowers/1/",search:o({pageId:String(a)}).toString()})})(a.id),onDelete:()=>{return e=a.id,void E(N(e));var e},enableEdit:!0,name:a.nameSurname},a.id)},a.id)),!T&&e.jsx(c,{title:s("calculate_credit_borrower",a("borrower"))}),e.jsx(Z,{children:e.jsx(we,{value:s("calculate_credit_add_borrower",a("add_borrower")),onClick:()=>{E(C(Ee(T))),E(j(u)),d({pathname:"/services/other-borrowers/1/",search:o({pageId:Ee(T).toString()}).toString()})},style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(Z,{})]})]})]})},Ge=()=>L().shape({mainSourceOfIncome:Y().required(w("error_select_answer","Please select an answer")).test("not-empty",w("error_select_answer","Please select an answer"),e=>null!=e&&""!==e),monthlyIncome:T().when("mainSourceOfIncome",{is:e=>!["5","6"].includes(e),then:e=>e.required(w("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),startDate:Y().when("mainSourceOfIncome",{is:e=>!["5","6"].includes(e),then:e=>e.required(w("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()}),fieldOfActivity:Y().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["5","6"].includes(e),then:e=>e.required(w("error_select_field_of_activity","Please select field of activity")),otherwise:e=>e.notRequired()}),profession:Y().when("mainSourceOfIncome",{is:e=>!["5","6"].includes(e),then:e=>e.required(w("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),companyName:Y().when("mainSourceOfIncome",{is:e=>!["5","6"].includes(e),then:e=>e.required(w("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),additionalIncome:Y().required(w("error_select_one_of_the_options","Please select one of the options")).test("not-empty",w("error_select_one_of_the_options","Please select one of the options"),e=>null!=e&&""!==e),additionalIncomeAmount:T().when("additionalIncome",{is:e=>null!=e&&""!==e&&"no_additional_income"!==e,then:e=>e.required(w("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),obligation:Y().required(w("error_select_one_of_the_options","Please select one of the options")),bank:Y().when("obligation",{is:e=>null!=e&&""!==e&&"no_obligations"!==e,then:e=>e.required(w("error_select_bank","Please select a bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:T().when("obligation",{is:e=>null!=e&&""!==e&&"no_obligations"!==e,then:e=>e.required(w("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),endDate:Y().when("obligation",{is:e=>null!=e&&""!==e&&"no_obligations"!==e,then:e=>e.required(w("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()})});Ge();const Je=()=>{const t=h(),o=r(),{i18n:n}=je(),[i,s]=a.useState(()=>Ge()),l=p(e=>e.credit);a.useEffect(()=>{(async()=>{await A();const e=Ge();s(e)})()},[n.language]);const c={mainSourceOfIncome:l.mainSourceOfIncome||"",monthlyIncome:l.monthlyIncome||null,startDate:l.startDate||(new Date).toISOString().split("T")[0],fieldOfActivity:l.fieldOfActivity||"",profession:l.profession||"",companyName:l.companyName||"",additionalIncome:l.additionalIncome||"no_additional_income",additionalIncomeAmount:l.additionalIncomeAmount||null,obligation:l.obligation||"no_obligations",bank:l.bank||"",monthlyPaymentForAnotherBank:l.monthlyPaymentForAnotherBank||null,endDate:l.endDate||(new Date).toISOString().split("T")[0],amountIncomeCurrentYear:(null==l?void 0:l.amountIncomeCurrentYear)||null,noIncome:l.noIncome||(new Date).toISOString().split("T")[0]};return e.jsxs(e.Fragment,{children:[e.jsx(E,{initialValues:c,validationSchema:i,validateOnMount:!0,onSubmit:e=>{t(j(e)),o("/services/calculate-credit/4")},children:e.jsxs(k,{children:[e.jsx(d,{children:e.jsx(He,{})}),e.jsx(xe,{})]})}),e.jsx(K,{}),e.jsx(Q,{}),e.jsx(X,{})]})},Ke=()=>{const{stepNumber:t}=n(),{t:o,i18n:i}=je(),s=r(),l=p(e=>e.login.isLogin);if(a.useEffect(()=>{l||"1"===t||s("/services/calculate-credit/1")},[l,t,s]),!l&&"1"!==t)return e.jsx(_,{});const c=[o("mobile_step_1"),o("mobile_step_2"),o("mobile_step_3"),o("mobile_step_4")];let d;switch(t){case"1":d=e.jsx(Le,{});break;case"2":d=e.jsx(We,{});break;case"3":d=e.jsx(Je,{});break;case"4":d=e.jsx(ze,{});break;default:d=e.jsx(F,{type:"NOT_FOUND"})}return e.jsxs(e.Fragment,{children:[e.jsx(m,{progress:t,data:c}),e.jsx(a.Suspense,{fallback:e.jsx(_,{}),children:d})]})};export{Ke as default};
