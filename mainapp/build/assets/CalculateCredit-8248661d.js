import{i as e,r as a,b as r,j as t,l as o,h as n,w as i,R as l,x as s,y as c,z as d,I as u,J as _,K as m,A as h,D as p,E as x,F as g,G as j,H as y}from"./index-d69ab70d.js";import{u as f,b,c as v,E as w,D,T as S,d as q,f as P,e as O,F as I,o as M,g as N,a as A,h as C,L as F}from"./index-c89ce6ee.js";import{P as B}from"./ProgressBar-397d0063.js";import{V as E}from"./VideoPoster-c6f5f480.js";import{S as Y,a as k,L,U as T,A as z,F as R,B as V,b as W,P as $,c as U,d as G,e as H,O as J}from"./SourceOfIncomeModal-027da4f3.js";import{F as K,a as Q,R as X,C as Z,D as ee,b as ae,c as re}from"./StringInput-0f4f0b36.js";import{s as te,I as oe}from"./IncreasePayment-30b57788.js";import{Y as ne,R as ie,I as le,N as se,B as ce,E as de,A as ue,C as _e,T as me,a as he,b as pe,H as xe,M as ge,c as je,P as ye}from"./Taxes-3755a9d7.js";import{c as fe,a as be}from"./calculatePeriod-00770cec.js";import{U as ve,a as we,c as De,A as Se,b as qe,d as Pe,O as Oe,e as Ie,g as Me}from"./componentsByIncomeSource-b5bab525.js";import{F as Ne,o as Ae,d as Ce}from"./otherBorrowersSlice-ca4a7504.js";import"./borrowersPersonalDataSlice-ddbd1ecb.js";import"./ShieldCheckIcon-97c4fe2d.js";const Fe=e({name:"credit",initialState:{},reducers:{updateCreditData:(e,a)=>({...e,...a.payload})}}),{updateCreditData:Be}=Fe.actions,Ee=()=>{const[e,o]=a.useState(51130),[n,i]=a.useState(2654),{t:l,i18n:s}=r();s.language=s.language.split("-")[0];const c=[{value:"option_1",label:l("calculate_credit_target_option_1")},{value:"option_2",label:l("calculate_credit_target_option_2")},{value:"option_3",label:l("calculate_credit_target_option_3")},{value:"option_4",label:l("calculate_credit_target_option_4")},{value:"option_5",label:l("calculate_credit_target_option_5")},{value:"option_6",label:l("calculate_credit_target_option_6")}],d=[{value:"option_1",label:l("calculate_mortgage_when_options_1")},{value:"option_2",label:l("calculate_mortgage_when_options_2")},{value:"option_3",label:l("calculate_mortgage_when_options_3")},{value:"option_4",label:l("calculate_mortgage_when_options_4")}],u=[{value:"option_1",label:l("calculate_credit_prolong_option_1")},{value:"option_2",label:l("calculate_credit_prolong_option_2")},{value:"option_3",label:l("calculate_credit_prolong_option_3")},{value:"option_4",label:l("calculate_credit_prolong_option_4")},{value:"option_5",label:l("calculate_credit_prolong_option_5")},{value:"option_6",label:l("calculate_credit_prolong_option_6")},{value:"option_7",label:l("calculate_credit_prolong_option_7")}],_=[{value:"city_1",label:l("calculate_mortgage_city_1")},{value:"city_2",label:l("calculate_mortgage_city_2")},{value:"city_3",label:l("calculate_mortgage_city_3")}],{setFieldValue:m,values:h,errors:p,touched:x,setFieldTouched:g}=f(),j=b(e=>e.activeField),y=v();return a.useEffect(()=>{if("period"===j){const e=fe(h.loanAmount,0,h.period,5);Number.isNaN(e)||m("monthlyPayment",e)}else{const e=be(h.loanAmount,0,h.monthlyPayment,5);Number.isNaN(e)||m("period",e)}},[j,m,h.loanAmount,h.monthlyPayment,h.period]),a.useLayoutEffect(()=>{const e=fe(h.loanAmount,0,1,5),a=fe(h.loanAmount,0,30,5);Number.isNaN(e)||o(e),0===e&&o(1),Number.isNaN(e)||i(a)},[h.loanAmount]),t.jsx(t.Fragment,{children:t.jsxs(K,{children:[t.jsx(Q,{title:l("sidebar_sub_calculate_credit")}),t.jsxs(X,{children:[t.jsx(Z,{children:t.jsx(ee,{title:l("calculate_why"),data:c,placeholder:l("calculate_credit_target_ph"),value:h.purposeOfLoan,onChange:e=>m("purposeOfLoan",e),onBlur:()=>g("purposeOfLoan",!0),error:x.purposeOfLoan&&p.purposeOfLoan})}),t.jsxs(Z,{children:[t.jsx(ae,{handleChange:e=>{y(te("period")),m("loanAmount",e)},name:"loanAmount",title:l("calculate_amount"),value:h.loanAmount,placeholder:"1,000,000",error:p.loanAmount}),p.loanAmount&&t.jsx(w,{error:p.loanAmount})]}),t.jsx(Z,{children:t.jsx(ee,{title:l("calculate_when"),data:d,placeholder:l("calculate_mortgage_when_options_ph"),value:h.whenDoYouNeedMoney,onChange:e=>m("whenDoYouNeedMoney",e),onBlur:()=>g("whenDoYouNeedMoney",!0),error:x.whenDoYouNeedMoney&&p.whenDoYouNeedMoney})})]}),t.jsx(X,{children:t.jsx(Z,{children:t.jsx(ee,{title:l("calculate_prolong"),data:u,placeholder:l("calculate_mortgage_first_ph"),value:h.loanDeferral,onChange:e=>m("loanDeferral",e),onBlur:()=>g("loanDeferral",!0),error:x.loanDeferral&&p.loanDeferral})})}),h.purposeOfLoan&&"option_6"===h.purposeOfLoan&&t.jsxs(t.Fragment,{children:[t.jsx(D,{}),t.jsxs(X,{children:[t.jsxs(Z,{children:[t.jsx(ae,{handleChange:e=>{m("priceOfEstate",e)},name:"PriceOfEstate",title:l("calculate_mortgage_price"),value:h.priceOfEstate,placeholder:"1,000,000",error:p.priceOfEstate}),p.priceOfEstate&&t.jsx(w,{error:p.priceOfEstate})]}),t.jsx(Z,{children:t.jsx(ee,{title:l("calculate_mortgage_city"),data:_,placeholder:l("city"),value:h.cityWhereYouBuy,onChange:e=>m("cityWhereYouBuy",e),onBlur:()=>g("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:l("search"),nothingFoundText:l("nothing_found"),error:x.cityWhereYouBuy&&p.cityWhereYouBuy})}),t.jsxs(Z,{children:[t.jsx(S,{title:l("have_mortgage_title")}),t.jsx(ne,{value:h.haveMortgage,onChange:e=>m("haveMortgage",e),error:x.haveMortgage&&p.haveMortgage})]})]})]}),t.jsx(D,{}),t.jsxs(X,{children:[t.jsxs(Z,{children:[t.jsx(Y,{disableCurrency:!0,unitsMax:l("calculate_mortgage_period_units_max"),unitsMin:l("calculate_mortgage_period_units_min"),value:h.period,name:"Period",min:1,max:30,error:p.period,title:l("calculate_mortgage_period"),handleChange:e=>{y(te("period")),m("period",e)}}),p.period&&t.jsx(w,{error:p.period})]}),t.jsxs(Z,{children:[t.jsx(Y,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:n,max:e,error:p.monthlyPayment,title:l("calculate_mortgage_initial_payment"),handleChange:e=>{y(te("monthlyPayment")),m("monthlyPayment",e)},value:h.monthlyPayment}),t.jsx(oe,{}),p.monthlyPayment&&t.jsx(w,{error:p.monthlyPayment})]}),t.jsx(Z,{})]})]})})},Ye=q().shape({purposeOfLoan:P().required("Выберите ответ"),loanAmount:O().when("purposeOfLoan",{is:o.t("calculate_credit_target_option_6"),then:e=>e.max(1e6,o.t("error_loan_of_amount_credit_max_1000000")),otherwise:e=>e.max(2e5,o.t("error_loan_of_amount_credit_max_200000"))}).required(o.t("error_required_to_fill_out")),whenDoYouNeedMoney:P().required(o.t("error_select_answer")),loanDeferral:P().required(o.t("error_select_answer")),period:O().min(1,o.t("error_min__credit_period")).max(30,o.t("error_max_credit_period")).required(o.t("error_required_to_fill_out")),monthlyPayment:O().required(o.t("error_required_to_fill_out"))}),ke=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const o=v(),i=n(),l=b(e=>e.credit),s=b(e=>e.login.isLogin),c={purposeOfLoan:l.purposeOfLoan||"",loanAmount:l.loanAmount||2e5,whenDoYouNeedMoney:l.whenDoYouNeedMoney||"",loanDeferral:l.loanDeferral||"",priceOfEstate:l.priceOfEstate||null,cityWhereYouBuy:l.cityWhereYouBuy||"",haveMortgage:l.haveMortgage||null,period:l.period||30,monthlyPayment:l.monthlyPayment||5368};return t.jsxs(t.Fragment,{children:[t.jsx(I,{initialValues:c,validationSchema:Ye,validateOnMount:!0,onSubmit:e=>{o(Be(e)),s?i("/services/calculate-credit/2"):o(M())},children:t.jsxs(N,{children:[t.jsxs(A,{children:[t.jsx(E,{title:e("sidebar_sub_calculate_credit"),text:e("calculate_mortgage_banner_subtext"),size:"small"}),t.jsx(Ee,{})]}),t.jsx(k,{})]})}),t.jsx(L,{})]})},Le=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const o=b(e=>e.login.loginData),n=b(e=>e.credit);return t.jsxs(K,{children:[t.jsx(Q,{title:e("calculate_mortgage_final")}),t.jsx(T,{credit:n.loanAmount,nameSurname:null==o?void 0:o.nameSurname,phoneNumber:null==o?void 0:o.phoneNumber}),t.jsx(z,{text:e("calculate_mortgage_warning")}),t.jsx(X,{children:t.jsx(R,{})}),t.jsx(V,{})]})},Te={},ze=q().shape({}),Re=()=>t.jsx(I,{initialValues:Te,validationSchema:ze,validateOnMount:!0,onSubmit:()=>{console.log("нажата кнопка")},children:t.jsxs(N,{children:[t.jsx(A,{children:t.jsx(Le,{})}),t.jsx(re,{})]})}),Ve=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const{values:o}=f(),n=b(e=>e.login.loginData);return t.jsxs(K,{children:[t.jsx(Q,{title:e("calculate_mortgage_step2_title")}),t.jsxs(ie,{children:[t.jsx(le,{}),t.jsx(ve,{name:null==n?void 0:n.nameSurname,phone:null==n?void 0:n.phoneNumber})]}),t.jsxs(X,{children:[t.jsx(se,{}),t.jsx(ce,{}),t.jsx(de,{})]}),t.jsxs(X,{children:[t.jsxs(Z,{style:{gap:"2rem"},children:[t.jsx(ue,{}),"yes"===o.additionalCitizenships&&t.jsx(_e,{})]}),t.jsxs(Z,{style:{gap:"2rem"},children:[t.jsx(me,{}),"yes"===o.taxes&&t.jsx(he,{})]}),t.jsxs(Z,{style:{gap:"2rem"},children:[t.jsx(pe,{}),"yes"===o.childrens&&t.jsx(xe,{})]})]}),t.jsx(D,{}),t.jsxs(X,{children:[t.jsx(ge,{}),t.jsx(je,{}),t.jsx(ye,{})]}),t.jsx(D,{}),t.jsxs(X,{children:[t.jsx(W,{}),t.jsx(Z,{}),t.jsx(Z,{})]}),t.jsx(D,{}),t.jsxs(X,{children:[t.jsx(Ne,{}),t.jsx(Z,{children:"option_2"===o.familyStatus&&t.jsx($,{})}),t.jsx(Z,{children:"yes"===o.partnerPayMortgage&&"option_2"===o.familyStatus&&t.jsx(U,{})})]})]})},We=q().shape({nameSurname:P().required(o.t("error_name_surname")),birthday:P().required(o.t("error_date")),education:P().required(o.t("error_select_answer")),additionalCitizenships:P().required(o.t("error_select_answer")),citizenshipsDropdown:C().when("additionalCitizenships",{is:"yes",then:e=>e.min(1,o.t("error_select_answer")),otherwise:e=>e.min(0)}),taxes:P().required(o.t("error_select_answer")),countriesPayTaxes:C().when("taxes",{is:"yes",then:e=>e.min(1,o.t("error_select_answer")),otherwise:e=>e.min(0)}),childrens:P().required(o.t("error_select_answer")),howMuchChildrens:O().required(o.t("error_fill_field")),medicalInsurance:P().required(o.t("error_select_answer")),isForeigner:P().required(o.t("error_select_answer")),publicPerson:P().required(o.t("error_select_answer")),borrowers:O().min(1,o.t("error_quantity_borrowers")).required(o.t("error_quantity_borrowers")),familyStatus:P().required(o.t("error_select_answer")),partnerPayMortgage:P().when("familyStatus",{is:o.t("calculate_mortgage_family_status_option_2"),then:e=>e.required(o.t("error_select_answer")),otherwise:e=>e.notRequired()})}),$e=()=>{const e=v(),a=n(),r=b(e=>e.mortgage),o={nameSurname:b(e=>e.login.loginData).nameSurname||r.nameSurname||"",birthday:r.birthday||new Date((new Date).setFullYear((new Date).getFullYear()-18)).getTime(),education:r.education||"",additionalCitizenships:r.additionalCitizenships||null,citizenshipsDropdown:r.citizenshipsDropdown||[],taxes:r.taxes||null,countriesPayTaxes:r.countriesPayTaxes||[],childrens:r.childrens||null,howMuchChildrens:r.howMuchChildrens||1,medicalInsurance:r.medicalInsurance||null,isForeigner:r.isForeigner||null,publicPerson:r.publicPerson||null,borrowers:r.borrowers||null,familyStatus:r.familyStatus||"",partnerPayMortgage:r.partnerPayMortgage||null,addPartner:r.addPartner||""};return t.jsx(I,{initialValues:o,validationSchema:We,validateOnMount:!0,onSubmit:r=>{e(i(r)),a("/services/calculate-credit/3")},children:t.jsxs(N,{children:[t.jsx(A,{children:t.jsx(Ve,{})}),t.jsx(re,{})]})})},Ue=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const o=n(),{values:j}=f(),{mainSourceOfIncome:y,additionalIncome:w,obligation:q}=j,P=v(),O=b(e=>e.borrowers.sourceOfIncomeModal),I=b(e=>e.borrowers.additionalIncomeModal),M=b(e=>e.borrowers.obligationModal),N=b(e=>e.otherBorrowers.otherBorrowers),A=b(e=>e.login.loginData);return t.jsxs(K,{children:[t.jsx(Q,{title:e("calculate_mortgage_step3_title")}),t.jsx(ve,{name:null==A?void 0:A.nameSurname,phone:null==A?void 0:A.phoneNumber}),t.jsxs(X,{children:[t.jsx(we,{}),De[y]&&De[y].map((e,a)=>t.jsx(l.Fragment,{children:e},a)),t.jsx(Z,{})]}),t.jsx(X,{children:y&&t.jsxs(Z,{children:[O.map(a=>t.jsx(ve,{onEdit:()=>{return e=a.id,void P(h(e));var e},onDelete:()=>{return e=a.id,void P(u({id:e}));var e},enableEdit:!0,name:`${e("source_of_income")}${a.id+1}`},a.id)),t.jsx(Se,{onClick:()=>{P(i(j)),P(s())},color:"#FBE54D",value:e("add_place_to_work"),variant:"none"})]})}),t.jsx(D,{}),t.jsxs(X,{children:[t.jsx(qe,{}),w&&"option_1"!==w&&t.jsx(Pe,{}),t.jsx(Z,{})]}),w&&"option_1"!==w&&t.jsx(X,{children:t.jsxs(Z,{children:[I.map(a=>t.jsx(ve,{onEdit:()=>{return e=a.id,void P(p(e));var e},onDelete:()=>{return e=a.id,void P(_({id:e}));var e},enableEdit:!0,name:`${e("additional_source_of_income")}${a.id+1}`},a.id)),t.jsx(Se,{onClick:()=>{P(i(j)),P(c())},color:"#FBE54D",value:e("add_additional_source_of_income"),variant:"none"})]})}),t.jsx(D,{}),t.jsxs(X,{children:[t.jsx(Oe,{}),Ie[q]&&Ie[q].map((e,a)=>t.jsx(l.Fragment,{children:e},a)),t.jsx(Z,{})]}),q&&"option_1"!==q&&t.jsx(X,{children:t.jsxs(Z,{children:[M.map(a=>t.jsx(ve,{onEdit:()=>{return e=a.id,void P(x(e));var e},onDelete:()=>{return e=a.id,void P(m({id:e}));var e},enableEdit:!0,name:`${e("obligation")}${a.id+1}`},a.id)),t.jsx(Se,{onClick:()=>{P(i(j)),P(d())},color:"#FBE54D",value:e("add_obligation"),variant:"none"})]})}),t.jsx(D,{}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[N&&t.jsx(S,{title:e("borrower")}),t.jsxs(X,{style:{columnGap:"2rem"},children:[N.map(e=>t.jsx(Z,{children:t.jsx(ve,{onEdit:()=>(e=>{P(Ae(e));const a=N.some(a=>a.id===e)?e:Me(N);o({pathname:"/services/other-borrowers/1/",search:g({pageId:String(a)}).toString()})})(e.id),onDelete:()=>{return a=e.id,void P(Ce(a));var a},enableEdit:!0,name:e.nameSurname},e.id)},e.id)),!N&&t.jsx(S,{title:e("borrower")}),t.jsx(Z,{children:t.jsx(Se,{value:e("add_borrower"),onClick:()=>{P(Ae(Me(N))),P(i(j)),o({pathname:"/services/other-borrowers/1/",search:g({pageId:Me(N).toString()}).toString()})},style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),t.jsx(Z,{})]})]})]})},Ge=q().shape({mainSourceOfIncome:P().required(o.t("error_select_answer")),monthlyIncome:O().required(o.t("error_fill_field")),startDate:P().required(o.t("error_date")),fieldOfActivity:P().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e,then:e=>e.required(o.t("error_select_field_of_activity")),otherwise:e=>e.notRequired()}),profession:P().required(o.t("error_fill_field")),companyName:P().required(o.t("error_fill_field")),additionalIncome:P().required(o.t("error_select_one_of_the_options")),additionalIncomeAmount:O().when("additionalIncome",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(o.t("error_fill_field")),otherwise:e=>e.notRequired()}),obligation:P().required(o.t("error_select_one_of_the_options")),bank:P().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(o.t("error_select_bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:O().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(o.t("error_fill_field")),otherwise:e=>e.notRequired()}),endDate:P().required(o.t("error_date"))}),He=()=>{const e=v(),a=n(),r=b(e=>e.mortgage),o={mainSourceOfIncome:r.mainSourceOfIncome||"",monthlyIncome:r.monthlyIncome||null,startDate:r.startDate||(new Date).getTime(),fieldOfActivity:r.fieldOfActivity||"",profession:r.profession||"",companyName:r.companyName||"",additionalIncome:r.additionalIncome||"",additionalIncomeAmount:r.additionalIncomeAmount||null,obligation:r.obligation||"",bank:r.bank||"",monthlyPaymentForAnotherBank:r.monthlyPaymentForAnotherBank||null,endDate:r.endDate||(new Date).getTime(),amountIncomeCurrentYear:(null==r?void 0:r.amountIncomeCurrentYear)||null,noIncome:r.noIncome||(new Date).getTime()};return t.jsxs(t.Fragment,{children:[t.jsx(I,{initialValues:o,validationSchema:Ge,validateOnMount:!0,onSubmit:r=>{e(i(r)),a("/services/calculate-credit/4")},children:t.jsxs(N,{children:[t.jsx(A,{children:t.jsx(Ue,{})}),t.jsx(re,{})]})}),t.jsx(G,{}),t.jsx(H,{}),t.jsx(J,{})]})},Je=()=>{const{stepNumber:e}=j(),{t:o,i18n:i}=r(),l=n();i.language=i.language.split("-")[0];if(!b(e=>e.login.isLogin)&&"1"!==e)return void l("/services/calculate-credit/1");const s=[o("calculate_credit_calculator"),o("mortgage_refinance_step_2"),o("calculate_mortgage_income"),o("calculate_mortgage_programs")];let c;switch(e){case"1":c=t.jsx(ke,{});break;case"2":c=t.jsx($e,{});break;case"3":c=t.jsx(He,{});break;case"4":c=t.jsx(Re,{});break;default:c=t.jsx(y,{type:"NOT_FOUND"})}return t.jsxs(t.Fragment,{children:[t.jsx(B,{progress:e,data:s}),t.jsx(a.Suspense,{fallback:t.jsx(F,{}),children:c})]})};export{Je as default};
