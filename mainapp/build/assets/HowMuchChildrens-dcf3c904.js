import{j as e,c as I}from"./index-c051cf77.js";import{u as M}from"./form-vendor-2c7d84e7.js";import{r as c}from"./react-vendor-ede63a09.js";import{C as w}from"./Column-38d7d079.js";import{g as R,h as A,E as V,T as C,a as U}from"./index-1f370e65.js";import{M as H}from"./DropdownMenu-1a239f7d.js";import{u as $}from"./i18n-vendor-aaeace9f.js";import{F as L}from"./FormattedInput-797a3f5a.js";const B=l=>e.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none",...l,children:e.jsxDEV("path",{fill:"#fff",d:"M5.634 10.867a.632.632 0 0 0 .467.184.632.632 0 0 0 .466-.184l1.934-1.933 1.95 1.95c.122.122.275.18.458.175a.65.65 0 0 0 .458-.192.632.632 0 0 0 .184-.466.632.632 0 0 0-.184-.467L9.434 8.001l1.95-1.95a.594.594 0 0 0 .175-.459.65.65 0 0 0-.192-.458.632.632 0 0 0-.466-.183.632.632 0 0 0-.467.183L8.501 7.067l-1.95-1.95a.595.595 0 0 0-.458-.175.653.653 0 0 0-.459.192.632.632 0 0 0-.183.467c0 .189.06.344.183.466l1.933 1.934-1.95 1.95a.593.593 0 0 0-.174.458.65.65 0 0 0 .191.458Zm2.867 3.8a6.489 6.489 0 0 1-2.6-.525 6.728 6.728 0 0 1-2.117-1.425 6.728 6.728 0 0 1-1.425-2.116A6.489 6.489 0 0 1 1.834 8c0-.923.175-1.79.525-2.6a6.728 6.728 0 0 1 1.425-2.117c.6-.6 1.306-1.075 2.117-1.425a6.495 6.495 0 0 1 2.6-.525c.922 0 1.789.175 2.6.525.81.35 1.516.825 2.116 1.425.6.6 1.075 1.306 1.425 2.117.35.81.525 1.677.525 2.6 0 .922-.175 1.789-.525 2.6a6.728 6.728 0 0 1-1.425 2.116c-.6.6-1.305 1.075-2.116 1.425a6.49 6.49 0 0 1-2.6.525Zm0-1.333c1.477 0 2.736-.52 3.775-1.558 1.039-1.04 1.558-2.298 1.558-3.775 0-1.478-.52-2.737-1.558-3.776-1.04-1.038-2.298-1.558-3.775-1.558-1.478 0-2.736.52-3.775 1.558-1.04 1.04-1.559 2.298-1.559 3.776 0 1.477.52 2.736 1.559 3.775 1.039 1.039 2.297 1.558 3.775 1.558Z"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/assets/icons/CancelIcon/CancelIcon.tsx",lineNumber:10,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/assets/icons/CancelIcon/CancelIcon.tsx",lineNumber:3,columnNumber:5},globalThis),Z="_multiselect_18kzf_1",J="_focus_18kzf_140",q="_error_18kzf_144",G="_checkbox_18kzf_148",K={multiselect:Z,"multiselect-scroll":"_multiselect-scroll_18kzf_10","multiselect-wrapper":"_multiselect-wrapper_18kzf_14","multiselect-placeholder":"_multiselect-placeholder_18kzf_22","multiselect-input":"_multiselect-input_18kzf_33","multiselect-input__item":"_multiselect-input__item_18kzf_38","multiselect-select":"_multiselect-select_18kzf_50","multiselect-select__button":"_multiselect-select__button_18kzf_61","multiselect-select__button-item":"_multiselect-select__button-item_18kzf_64","multiselect-select__subtitle":"_multiselect-select__subtitle_18kzf_75","multiselect-select__item":"_multiselect-select__item_18kzf_84","multiselect-select__item-title":"_multiselect-select__item-title_18kzf_99","multiselect-select__search":"_multiselect-select__search_18kzf_104","multiselect-select__search-wrapper":"_multiselect-select__search-wrapper_18kzf_107","multiselect-select__search-input":"_multiselect-select__search-input_18kzf_117","multiselect-select__search-no-result":"_multiselect-select__search-no-result_18kzf_134",focus:J,error:q,checkbox:G},n=I.bind(K),F=({data:l,placeholder:v,onChange:i,value:t,searchable:h,searchPlaceholder:f,nothingFoundText:g,searchDescription:j,onBlur:D,error:x})=>{const{t:S,i18n:E}=$(),[o,m]=c.useState(!1),[d,r]=c.useState(""),[b,k]=c.useState([]),_=c.useRef(null);c.useEffect(()=>{o&&k(t||[])},[o,t]);const u=c.useCallback(s=>{_.current&&!_.current.contains(s.target)&&m(!1)},[]),N=c.useCallback(s=>{_.current&&_.current.contains(s.relatedTarget)||(o&&JSON.stringify(b.sort())!==JSON.stringify((t||[]).sort())&&(i==null||i(b)),m(!1),D==null||D())},[o,b,t,i,D]),y=s=>{k(a=>a.includes(s)?a.filter(p=>p!==s):[...a,s])},T=(s,a)=>{const p=(t==null?void 0:t.filter(z=>z!==s))||[];i==null||i(p),k(z=>z.filter(O=>O!==s)),a.stopPropagation()};c.useEffect(()=>(document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)),[u]);const P=Array.isArray(l)?l.filter(s=>(typeof s=="string"?s:String(s)).toLowerCase().includes(d.toLowerCase())):[];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{ref:_,onBlur:N,className:n("multiselect",`${o&&"focus"}`,`${x&&!o&&"error"}`),children:[e.jsxDEV("div",{className:n("multiselect-wrapper"),onClick:()=>m(!o),tabIndex:0,children:[e.jsxDEV("div",{className:n("multiselect-input","truncate"),children:t&&t.length>0?t.map(s=>e.jsxDEV("div",{className:n("multiselect-input__item"),children:[s,e.jsxDEV(B,{onClick:a=>T(s,a)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:132,columnNumber:19},globalThis)]},s,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:130,columnNumber:17},globalThis)):e.jsxDEV("span",{className:n("multiselect-placeholder"),children:v},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:138,columnNumber:15},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:127,columnNumber:11},globalThis),o?e.jsxDEV(R,{className:"cursor-pointer",onClick:()=>m(!1)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:144,columnNumber:13},globalThis):e.jsxDEV(A,{className:"cursor-pointer",onClick:()=>m(!0)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:149,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:122,columnNumber:9},globalThis),o&&e.jsxDEV("div",{className:n("multiselect-select"),onClick:s=>s.stopPropagation(),children:[e.jsxDEV("div",{className:n("multiselect-scroll","scrollbar scrollbar-thumb-gray-600 scrollbar-thumb-rounded-md scrollbar-w-1"),children:[h&&e.jsxDEV("div",{className:n("multiselect-select__search"),children:e.jsxDEV("div",{className:n("multiselect-select__search-wrapper"),children:[e.jsxDEV(H,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:169,columnNumber:21},globalThis),e.jsxDEV("input",{tabIndex:0,className:n("multiselect-select__search-input"),value:d,onChange:s=>r(s.target.value),placeholder:f,autoComplete:"off"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:170,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:168,columnNumber:19},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:167,columnNumber:17},globalThis),e.jsxDEV("div",{className:n("multiselect-select__subtitle"),children:j},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:181,columnNumber:15},globalThis),P.length>0?P.map((s,a)=>e.jsxDEV("div",{tabIndex:0,className:n("multiselect-select__item"),onClick:p=>{p.stopPropagation(),y(s)},children:e.jsxDEV("div",{className:n("multiselect-select__item-title"),children:[e.jsxDEV("input",{type:"checkbox",id:`${s}-${a}`,className:n("checkbox"),checked:b.includes(s),onChange:()=>y(s),onClick:p=>p.stopPropagation()},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:196,columnNumber:23},globalThis),e.jsxDEV("label",{htmlFor:`${s}-${a}`,onClick:p=>p.stopPropagation(),children:s},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:204,columnNumber:23},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:195,columnNumber:21},globalThis)},a,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:186,columnNumber:19},globalThis)):e.jsxDEV("p",{className:n("multiselect-select__search-no-result"),children:g},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:214,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:160,columnNumber:13},globalThis),e.jsxDEV("div",{className:n("multiselect-select__button"),children:e.jsxDEV("button",{type:"button",className:n("multiselect-select__button-item"),onClick:s=>{s.stopPropagation(),i==null||i(b),m(!1)},children:S("apply")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:220,columnNumber:15},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:219,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:156,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:113,columnNumber:7},globalThis),x&&!o&&e.jsxDEV(V,{error:x},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:235,columnNumber:28},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/components/ui/MultiSelect/MultiSelect.tsx",lineNumber:112,columnNumber:5},globalThis)},ie=()=>{const{values:l,setFieldValue:v,errors:i,touched:t,setFieldTouched:h,validateField:f}=M(),[g,j]=c.useState([]),[D,x]=c.useState(!0),[S,E]=c.useState(null);c.useEffect(()=>{(async()=>{try{x(!0),E(null);const r=await fetch("/api/dropdowns/mortgage_step2/he");if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const b=await r.json(),k=[];Object.keys(b.options).forEach(u=>{if(u.includes("citizenship")&&u!=="mortgage_step2_citizenship"){const N=b.options[u];Array.isArray(N)&&N.length>0&&k.push(...N)}});const _=k.filter((u,N,y)=>y.findIndex(T=>T.value===u.value)===N);j(_),console.log("✅ Citizenship options loaded:",_.length,"options")}catch(r){console.error("❌ Error fetching citizenship options:",r),E(r instanceof Error?r.message:"Unknown error")}finally{x(!1)}})()},[]);const o=d=>{console.log("=== Citizenship Change Debug ==="),console.log("Selected labels:",d),console.log("Current Formik values BEFORE update:",l),console.log("Current citizenshipsDropdown BEFORE:",l.citizenshipsDropdown),console.log("Formik errors BEFORE:",i),console.log("Formik touched BEFORE:",t),v("citizenshipsDropdown",d,!0),h("citizenshipsDropdown",!0,!0),setTimeout(()=>{console.log("=== After Update (delayed) ==="),console.log("Formik values AFTER:",l),console.log("citizenshipsDropdown AFTER:",l.citizenshipsDropdown),console.log("Formik errors AFTER:",i),f("citizenshipsDropdown")},100)};if(D)return e.jsxDEV(w,{gap:"16px",children:[e.jsxDEV(C,{title:"אזרחות"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:93,columnNumber:9},globalThis),e.jsxDEV("div",{children:"Loading citizenship options..."},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:94,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:92,columnNumber:7},globalThis);if(S)return e.jsxDEV(w,{gap:"16px",children:[e.jsxDEV(C,{title:"אזרחות"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:102,columnNumber:9},globalThis),e.jsxDEV("div",{children:["Error loading citizenship options: ",S]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:103,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:101,columnNumber:7},globalThis);const m=l.citizenshipsDropdown||[];return console.log("=== CitizenshipsDropdown Render ==="),console.log("Current form values.citizenshipsDropdown:",l.citizenshipsDropdown),console.log("Display values:",m),console.log("Citizenship options:",g.length),console.log("Touched:",t.citizenshipsDropdown),console.log("Error:",i.citizenshipsDropdown),console.log("Current language:",typeof window<"u"&&window.i18next?window.i18next.language:"unknown"),console.log("Document language:",typeof document<"u"?document.documentElement.lang:"unknown"),e.jsxDEV(w,{gap:"16px",children:[e.jsxDEV(C,{title:"אזרחות"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:122,columnNumber:7},globalThis),e.jsxDEV(F,{data:g.map(d=>d.label),value:m,onChange:o,onBlur:()=>h("citizenshipsDropdown",!0),placeholder:"בחר אזרחות",searchable:!0,searchPlaceholder:"חפש מדינה...",searchDescription:"בחר אזרחויות נוספות ולחץ על 'החל'",nothingFoundText:"לא נמצאו תוצאות",error:t.citizenshipsDropdown&&i.citizenshipsDropdown},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:123,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CitizenshipsDropdown/CitizenshipsDropdown.tsx",lineNumber:121,columnNumber:5},globalThis)},ne=()=>{const{getContent:l}=U("mortgage_step2"),{values:v,setFieldValue:i,errors:t,touched:h,setFieldTouched:f}=M(),g=["ישראל","ארצות הברית","רוסיה","גרמניה","צרפת","בריטניה","קנדה","אוסטרליה","איטליה","ספרד","הולנד","בלגיה","שוויץ","אוסטריה","שוודיה","נורווגיה","דנמרק","פינלנד","פולין","צ'כיה","הונגריה","רומניה","בולגריה","יוון","קפריסין","פורטוגל","אירלנד","לוקסמבורג","מלטה","סלובקיה","סלובניה","קרואטיה","ליטא","לטביה","אסטוניה","אוקראינה","בלרוס","מולדובה","ארגנטינה","ברזיל","צ'ילה","מקסיקו","יפן","דרום קוריאה","סין","הודו","תאילנד","סינגפור","מלזיה","פיליפינים","אינדונזיה","וייטנאם","דרום אפריקה","מרוקו","מצרים","טורקיה","אחר"];return e.jsxDEV(w,{children:[e.jsxDEV(C,{title:l("calculate_mortgage_tax","calculate_mortgage_tax")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CountriesPayTaxes/CountriesPayTaxes.tsx",lineNumber:79,columnNumber:7},globalThis),e.jsxDEV(F,{data:g,placeholder:l("calculate_mortgage_citizenship_ph","calculate_mortgage_citizenship_ph"),searchable:!0,searchPlaceholder:l("search","search"),nothingFoundText:l("nothing_found","nothing_found"),searchDescription:l("countries","countries"),value:v.countriesPayTaxes,onChange:j=>i("countriesPayTaxes",j),onBlur:()=>f("countriesPayTaxes",!0),error:h.countriesPayTaxes&&t.countriesPayTaxes},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CountriesPayTaxes/CountriesPayTaxes.tsx",lineNumber:80,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/CountriesPayTaxes/CountriesPayTaxes.tsx",lineNumber:78,columnNumber:5},globalThis)},oe=()=>{const{getContent:l}=U("mortgage_step2"),{values:v,setFieldValue:i,errors:t,touched:h}=M();return e.jsxDEV(w,{children:[e.jsxDEV(L,{name:"HowManyBorrowers",handleChange:f=>i("howMuchChildrens",f),title:l("calculate_mortgage_how_much_childrens","calculate_mortgage_how_much_childrens"),placeholder:"0",disableCurrency:!0,value:v.howMuchChildrens,error:t.howMuchChildrens},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/HowMuchChildrens/HowMuchChildrens.tsx",lineNumber:17,columnNumber:7},globalThis),h.howMuchChildrens&&t.howMuchChildrens&&e.jsxDEV(V,{error:t.howMuchChildrens},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/HowMuchChildrens/HowMuchChildrens.tsx",lineNumber:27,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/components/HowMuchChildrens/HowMuchChildrens.tsx",lineNumber:16,columnNumber:5},globalThis)};export{ie as C,oe as H,ne as a};
