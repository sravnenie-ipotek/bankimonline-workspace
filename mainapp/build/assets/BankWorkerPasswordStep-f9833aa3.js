import{j as e}from"./ui-vendor-99260b86.js";import{f as s,r as a}from"./react-vendor-21ec1e1c.js";import{a as r,c as t,e as n,h as i,F as o,b as l,j as c,E as d}from"./form-vendor-6d56d196.js";import{Q as _}from"./components-vendor-62dc47c0.js";import{c as h}from"./index-be42ab03.js";import{u as x}from"./i18n-vendor-18addd5f.js";import"./utils-vendor-8f040048.js";import"./state-vendor-069efcec.js";const m={container:"_container_zwxzw_14",header:"_header_zwxzw_27",logo:"_logo_zwxzw_41",languageSelector:"_languageSelector_zwxzw_48",languageText:"_languageText_zwxzw_61",chevronDown:"_chevronDown_zwxzw_67",pageBackground:"_pageBackground_zwxzw_72",signUpForm:"_signUpForm_zwxzw_85",titleSection:"_titleSection_zwxzw_101",mainTitle:"_mainTitle_zwxzw_106",subtitle:"_subtitle_zwxzw_115",stepperNavigation:"_stepperNavigation_zwxzw_122",navigation:"_navigation_zwxzw_126",navItemStepper:"_navItemStepper_zwxzw_133",completed:"_completed_zwxzw_138",shape:"_shape_zwxzw_138",stepText:"_stepText_zwxzw_143",active:"_active_zwxzw_146",stepNumber:"_stepNumber_zwxzw_174",checkIcon:"_checkIcon_zwxzw_185",chevronRight:"_chevronRight_zwxzw_190",containerWithForms:"_containerWithForms_zwxzw_194",firstRow:"_firstRow_zwxzw_198",thirdRow:"_thirdRow_zwxzw_199",inputField:"_inputField_zwxzw_212",label:"_label_zwxzw_219",input:"_input_zwxzw_212",content:"_content_zwxzw_232",inputText:"_inputText_zwxzw_249",selectInput:"_selectInput_zwxzw_250",lockIcon:"_lockIcon_zwxzw_287",chevronDownIcon:"_chevronDownIcon_zwxzw_288",eyeButton:"_eyeButton_zwxzw_299",line:"_line_zwxzw_318",checkboxContainer:"_checkboxContainer_zwxzw_324",checkboxRow:"_checkboxRow_zwxzw_330",checkbox:"_checkbox_zwxzw_324",labelAndHelperText:"_labelAndHelperText_zwxzw_360",checkboxLabel:"_checkboxLabel_zwxzw_365",termsLink:"_termsLink_zwxzw_375",submitButton:"_submitButton_zwxzw_384",disabled:"_disabled_zwxzw_408",buttonText:"_buttonText_zwxzw_419",loginLink:"_loginLink_zwxzw_424",loginButton:"_loginButton_zwxzw_430",errorMessage:"_errorMessage_zwxzw_449",supportWidget:"_supportWidget_zwxzw_458",supportButton:"_supportButton_zwxzw_471",demoNotice:"_demoNotice_zwxzw_498",loadingInput:"_loadingInput_zwxzw_591"},p=h.bind(m),w=()=>{const{t:h,i18n:m}=x(),w=s(),[u,k]=a.useState([]),[v,j]=a.useState(!0),[b,z]=a.useState(!1),[g,N]=a.useState(!1),[f,C]=a.useState(!1);a.useEffect(()=>{(async()=>{try{j(!0);const e=await fetch("/api/banks/list"),s=await e.json();if("success"===s.status&&s.data){const e=s.data.map(e=>({id:e.id.toString(),name:e.name_en||e.name_he||e.name_ru||`Bank ${e.id}`}));k(e)}else _.error(h("errors.loading_banks"))}catch(e){_.error(h("errors.loading_banks"))}finally{j(!1)}})()},[h]);const S=r({fullName:t().min(2,h("bank_worker_validation_name_min")).max(100,h("bank_worker_validation_name_max")).required(h("bank_worker_validation_name_required")),position:t().min(2,h("bank_worker_validation_position_min")).max(100,h("bank_worker_validation_position_max")).required(h("bank_worker_validation_position_required")),selectedService:t().required(h("bank_worker_validation_bank_required")),password:t().min(8,h("bank_worker_validation_password_min")).matches(/[A-Z]/,h("bank_worker_validation_password_uppercase")).matches(/[a-z]/,h("bank_worker_validation_password_lowercase")).matches(/[0-9]/,h("bank_worker_validation_password_number")).matches(/[!@#$%^&*(),.?":{}|<>]/,h("bank_worker_validation_password_special")).required(h("bank_worker_validation_password_required")),confirmPassword:t().oneOf([n("password")],h("bank_worker_validation_password_match")).required(h("bank_worker_validation_password_repeat_required")),acceptTerms:i().oneOf([!0],h("bank_worker_validation_terms_required")).required(h("bank_worker_validation_terms_required"))}),T=()=>{w("/auth")};return e.jsxs("div",{className:p("container"),children:[e.jsxs("div",{className:p("header"),children:[e.jsx("div",{className:p("logo"),children:e.jsx("span",{children:"BankIM"})}),e.jsxs("div",{className:p("languageSelector"),children:[e.jsx("span",{className:p("languageText"),children:"ru"===m.language?"Русский":"he"===m.language?"עברית":"English"}),e.jsx("svg",{className:p("chevronDown"),width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"1.33"})})]})]}),e.jsx("div",{className:p("pageBackground"),children:e.jsxs("div",{className:p("signUpForm"),children:[e.jsxs("div",{className:p("titleSection"),children:[e.jsx("h1",{className:p("mainTitle"),children:h("bank_partner_registration")}),e.jsx("p",{className:p("subtitle"),children:h("bank_partner_welcome")})]}),e.jsx("div",{className:p("stepperNavigation"),children:e.jsxs("div",{className:p("navigation"),children:[e.jsxs("div",{className:p("navItemStepper","completed"),children:[e.jsx("div",{className:p("shape","completed"),children:e.jsx("svg",{className:p("checkIcon"),width:"12",height:"12",viewBox:"0 0 12 12",children:e.jsx("path",{d:"M2 6L5 9L10 3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})}),e.jsx("span",{className:p("stepText"),children:h("bank_worker_basic_info")})]}),e.jsx("div",{className:p("chevronRight"),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M6 4L10 8L6 12",stroke:"currentColor",strokeWidth:"1.33"})})}),e.jsxs("div",{className:p("navItemStepper","active"),children:[e.jsx("div",{className:p("shape","active"),children:e.jsx("span",{className:p("stepNumber"),children:"2"})}),e.jsx("span",{className:p("stepText"),children:h("bank_worker_service_selection")})]})]})}),e.jsx("div",{className:p("containerWithForms"),children:e.jsx(o,{initialValues:{fullName:"",position:"",selectedService:"",password:"",confirmPassword:"",acceptTerms:!1},validationSchema:S,onSubmit:async e=>{try{z(!0);const s={fullName:e.fullName.trim(),position:e.position.trim(),corporateEmail:`${e.fullName.toLowerCase().replace(/\s+/g,".")}@bank.com`,bankId:parseInt(e.selectedService),branchId:1,bankNumber:Math.floor(1e6*Math.random()).toString(),termsAccepted:e.acceptTerms,password:e.password,selectedServices:[]},a=await fetch("/api/bank-employee/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await a.json();if(a.ok&&"success"===r.status)_.success(h("bank_partner_registration_success")),w(`/bank-partner/status/${r.data.id}`);else{const e=r.message||h("errors.registration_failed");_.error(e),z(!1)}}catch(s){_.error(h("errors.registration_failed")),z(!1)}},children:({values:s,setFieldValue:a,errors:r,touched:t,isValid:n})=>e.jsxs(l,{children:[e.jsx("div",{className:p("firstRow"),children:e.jsxs("div",{className:p("inputField"),children:[e.jsx("label",{className:p("label"),children:h("bank_partner_full_name")}),e.jsx("div",{className:p("input"),children:e.jsxs("div",{className:p("content"),children:[e.jsxs("svg",{className:p("userIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M8 8C10.21 8 12 6.21 12 4C12 1.79 10.21 0 8 0C5.79 0 4 1.79 4 4C4 6.21 5.79 8 8 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("path",{d:"M8 10C4.69 10 2 12.69 2 16H14C14 12.69 11.31 10 8 10Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(c,{type:"text",name:"fullName",placeholder:h("bank_partner_full_name_placeholder"),className:p("inputText")})]})}),e.jsx(d,{name:"fullName",component:"div",className:p("errorMessage")})]})}),e.jsx("div",{className:p("secondRow"),children:e.jsxs("div",{className:p("inputField"),children:[e.jsx("label",{className:p("label"),children:h("bank_partner_position")}),e.jsx("div",{className:p("input"),children:e.jsxs("div",{className:p("content"),children:[e.jsxs("svg",{className:p("briefcaseIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("rect",{x:"2",y:"4",width:"12",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("path",{d:"M6 4V2C6 1.45 6.45 1 7 1H9C9.55 1 10 1.45 10 2V4",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(c,{type:"text",name:"position",placeholder:h("bank_partner_position_placeholder"),className:p("inputText")})]})}),e.jsx(d,{name:"position",component:"div",className:p("errorMessage")})]})}),e.jsx("div",{className:p("thirdRow"),children:e.jsxs("div",{className:p("inputField"),children:[e.jsx("label",{className:p("label"),children:h("bank_partner_service_selection")}),e.jsx("div",{className:p("input"),children:e.jsxs("div",{className:p("content"),children:[e.jsxs(c,{as:"select",name:"selectedService",className:p("selectInput"),disabled:v,children:[e.jsx("option",{value:"",children:h("bank_partner_service_selection_placeholder")}),u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("svg",{className:p("chevronDownIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"1.33"})})]})}),e.jsx(d,{name:"selectedService",component:"div",className:p("errorMessage")})]})}),e.jsx("div",{className:p("line")}),e.jsxs("div",{className:p("fourthRow"),children:[e.jsxs("div",{className:p("inputField"),children:[e.jsx("label",{className:p("label"),children:h("bank_partner_password")}),e.jsx("div",{className:p("input"),children:e.jsxs("div",{className:p("content"),children:[e.jsxs("svg",{className:p("lockIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M4 7V5C4 2.79 5.79 1 8 1C10.21 1 12 2.79 12 5V7",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("rect",{x:"3",y:"7",width:"10",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(c,{type:g?"text":"password",name:"password",placeholder:h("bank_partner_password_placeholder"),className:p("inputText")}),e.jsx("button",{type:"button",className:p("eyeButton"),onClick:()=>N(!g),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M1.33 8S3.33 4 8 4S14.67 8 14.67 8S12.67 12 8 12S1.33 8 1.33 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("circle",{cx:"8",cy:"8",r:"2",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]})})]})}),e.jsx(d,{name:"password",component:"div",className:p("errorMessage")})]}),e.jsxs("div",{className:p("inputField"),children:[e.jsx("label",{className:p("label"),children:h("bank_partner_confirm_password")}),e.jsx("div",{className:p("input"),children:e.jsxs("div",{className:p("content"),children:[e.jsxs("svg",{className:p("lockIcon"),width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M4 7V5C4 2.79 5.79 1 8 1C10.21 1 12 2.79 12 5V7",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("rect",{x:"3",y:"7",width:"10",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]}),e.jsx(c,{type:f?"text":"password",name:"confirmPassword",placeholder:h("bank_partner_confirm_password_placeholder"),className:p("inputText")}),e.jsx("button",{type:"button",className:p("eyeButton"),onClick:()=>C(!f),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M1.33 8S3.33 4 8 4S14.67 8 14.67 8S12.67 12 8 12S1.33 8 1.33 8Z",stroke:"currentColor",strokeWidth:"1.33",fill:"none"}),e.jsx("circle",{cx:"8",cy:"8",r:"2",stroke:"currentColor",strokeWidth:"1.33",fill:"none"})]})})]})}),e.jsx(d,{name:"confirmPassword",component:"div",className:p("errorMessage")})]})]}),e.jsxs("div",{className:p("checkboxContainer"),children:[e.jsxs("div",{className:p("checkboxRow"),children:[e.jsx(c,{type:"checkbox",id:"acceptTerms",name:"acceptTerms",className:p("checkbox")}),e.jsx("div",{className:p("labelAndHelperText"),children:e.jsx("label",{htmlFor:"acceptTerms",className:p("checkboxLabel"),children:"he"===m.language?e.jsxs(e.Fragment,{children:["אני מסכים ",e.jsx("span",{className:p("termsLink"),children:"לכללי הפלטפורמה"})]}):h("bank_partner_accept_terms")})})]}),e.jsx(d,{name:"acceptTerms",component:"div",className:p("errorMessage")})]}),e.jsx("button",{type:"submit",className:p("submitButton",{disabled:!n||b}),disabled:!n||b,children:e.jsx("span",{className:p("buttonText"),children:h(b?"loading":"bank_partner_complete_registration")})}),e.jsx("div",{className:p("line")}),e.jsx("div",{className:p("loginLink"),children:e.jsx("button",{type:"button",onClick:T,className:p("loginButton"),children:h("bank_partner_already_registered")})})]})})})]})}),e.jsx("div",{className:p("supportWidget"),children:e.jsx("button",{className:p("supportButton"),title:h("common.support"),children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M12 2C13.1046 2 14 2.89543 14 4V8C14 9.10457 13.1046 10 12 10C10.8954 10 10 9.10457 10 8V4C10 2.89543 10.8954 2 12 2Z",fill:"currentColor"}),e.jsx("path",{d:"M4 12C4 7.58172 7.58172 4 12 4V6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18V20C7.58172 20 4 16.4183 4 12Z",fill:"currentColor"}),e.jsx("path",{d:"M20 12C20 16.4183 16.4183 20 12 20V18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6V4C16.4183 4 20 7.58172 20 12Z",fill:"currentColor"})]})})}),e.jsxs("div",{className:p("demoNotice"),children:[e.jsx("h3",{children:h("bank_worker_demo_notice")}),e.jsx("p",{children:h("bank_worker_demo_description")})]})]})};export{w as BankWorkerPasswordStep,w as default};
