import{j as e}from"./ui-vendor-19e4e52b.js";import{k as M,f as z,r as n}from"./react-vendor-9ed0ad78.js";import{c as F}from"./index-6e45afc9.js";import{u as S}from"./i18n-vendor-e8db3f4c.js";import"./state-vendor-8e443ca8.js";import"./utils-vendor-f2764326.js";import"./form-vendor-67b0fc1d.js";const U="_container_yu4ib_11",B="_header_yu4ib_21",C="_title_yu4ib_26",L="_content_yu4ib_35",P={"mobile-upload-page":"_mobile-upload-page_yu4ib_1",container:U,header:B,title:C,content:L,"upload-section":"_upload-section_yu4ib_42","upload-area":"_upload-area_yu4ib_46","upload-icon":"_upload-icon_yu4ib_69","upload-text":"_upload-text_yu4ib_80","preview-section":"_preview-section_yu4ib_89","preview-container":"_preview-container_yu4ib_100","preview-image":"_preview-image_yu4ib_112","file-icon":"_file-icon_yu4ib_118","file-info":"_file-info_yu4ib_125","file-name":"_file-name_yu4ib_130","file-size":"_file-size_yu4ib_138","upload-button":"_upload-button_yu4ib_144","error-message":"_error-message_yu4ib_170","uploaded-files":"_uploaded-files_yu4ib_180","uploaded-files-title":"_uploaded-files-title_yu4ib_187","uploaded-file-item":"_uploaded-file-item_yu4ib_195","file-details":"_file-details_yu4ib_206","file-status":"_file-status_yu4ib_211"},i=F.bind(P),H=()=>{const{t:a}=S();M(),z();const[l,c]=n.useState(null),[u,d]=n.useState(""),[p,m]=n.useState(!1),[_,j]=n.useState([]),[h,r]=n.useState(""),f=n.useRef(null),g=s=>["application/pdf","image/jpeg","image/jpg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(s.type)?s.size>10485760?a("document_size_error","Размер файла не должен превышать 10 МБ"):"":a("document_type_error","Поддерживаются только PDF, изображения и документы Word"),b=s=>{const t=g(s);if(t){r(t);return}if(r(""),c(s),s.type.startsWith("image/")){const o=URL.createObjectURL(s);d(o)}else d("")},y=s=>{var o;const t=(o=s.target.files)==null?void 0:o[0];t&&b(t)},w=()=>{var s;(s=f.current)==null||s.click()},N=async()=>{if(l){m(!0),r("");try{await new Promise(t=>setTimeout(t,2e3));const s={id:Date.now().toString(),name:l.name,type:l.type,size:l.size,url:URL.createObjectURL(l)};j(t=>[...t,s]),c(null),d(""),alert(a("upload_success","Документ успешно загружен!"))}catch{r(a("upload_error","Ошибка при загрузке документа"))}finally{m(!1)}}},x=s=>{if(s===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,v)).toFixed(2))+" "+o[v]},k=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e.jsx("div",{className:i("mobile-upload-page"),children:e.jsxs("div",{className:i("container"),children:[e.jsx("div",{className:i("header"),children:e.jsx("h1",{className:i("title"),children:a("upload_document_mobile","Загрузите документ")})}),e.jsxs("div",{className:i("content"),children:[e.jsx("div",{className:i("upload-section"),children:e.jsxs("div",{className:i("upload-area"),onClick:w,children:[e.jsx("div",{className:i("upload-icon"),children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("p",{className:i("upload-text"),children:a("upload_from_phone","Загрузить из телефона")})]})}),l&&e.jsxs("div",{className:i("preview-section"),children:[e.jsx("div",{className:i("preview-container"),children:u?e.jsx("img",{src:u,alt:"Preview",className:i("preview-image")}):e.jsx("div",{className:i("file-icon"),children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M14 2v6h6",stroke:"currentColor",strokeWidth:"2"})]})})}),e.jsxs("div",{className:i("file-info"),children:[e.jsx("p",{className:i("file-name"),children:l.name}),e.jsx("p",{className:i("file-size"),children:x(l.size)})]}),e.jsx("button",{className:i("upload-button"),onClick:N,disabled:p,children:p?a("uploading","Загружается..."):a("upload","Загрузить")})]}),h&&e.jsx("div",{className:i("error-message"),children:h}),_.length>0&&e.jsxs("div",{className:i("uploaded-files"),children:[e.jsx("h3",{className:i("uploaded-files-title"),children:a("uploaded_files","Загруженные файлы")}),_.map(s=>e.jsxs("div",{className:i("uploaded-file-item"),children:[e.jsx("div",{className:i("file-icon"),children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M14 2v6h6",stroke:"currentColor",strokeWidth:"2"})]})}),e.jsxs("div",{className:i("file-details"),children:[e.jsx("p",{className:i("file-name"),children:s.name}),e.jsx("p",{className:i("file-size"),children:x(s.size)})]}),e.jsx("div",{className:i("file-status"),children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},s.id))]})]}),e.jsx("input",{ref:f,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",capture:k?"environment":void 0,onChange:y,style:{display:"none"}})]})})};export{H as MobileDocumentUploadPage};
