import{j as e}from"./ui-vendor-19e4e52b.js";import{u as x}from"./form-vendor-67b0fc1d.js";import{a as j,E as y,S as q}from"./index-0069b652.js";import{a as A}from"./useDropdownData-05964376.js";import{C as m}from"./Column-ab439506.js";import{M as G}from"./AddButton-867db182.js";import{u as p}from"./i18n-vendor-e8db3f4c.js";import{D as O}from"./DropdownMenu-4da55dc4.js";import{F as V}from"./FormattedInput-a21a07a2.js";import{u as P}from"./react-vendor-9ed0ad78.js";import{C as D}from"./Calendar-7e8b6f73.js";import{c as J}from"./index-40267bc7.js";const de=o=>Math.max(0,...o.map(a=>a.id))+1,K=()=>{const{t:o,i18n:t}=p();return e.jsx(G,{children:o("add_inc")})},me=({screenLocation:o="mortgage_step3",excludeNoIncome:t=!1})=>{const{t:a,i18n:l}=p(),{getContent:n}=j(o),{values:r,setFieldValue:i,errors:s,setFieldTouched:g,touched:f,setFieldError:u,validateField:d}=x(),_=c=>{if(!c)return!1;const F=c.toLowerCase();return F==="option_1"||F==="1"||F.includes("no_additional")||F.includes("no additional")||F.includes("none")},v=o==null?void 0:o.includes("credit"),I=o==null?void 0:o.includes("refinance"),h=A(o,"additional_income","full"),C=(h==null?void 0:h.options)||[],B=t?C.filter(c=>!_(c.value)&&c.value!=="no_additional_income"):C;console.log("Additional income debug:",{errors:s.additionalIncome,touched:f.additionalIncome});const w=c=>{console.log("Additional income value changed:",{value:c,willShowAmountField:!_(c)}),i("additionalIncome",c,!1),c&&c!==""&&c!==null&&c!==void 0?(u("additionalIncome",void 0),g("additionalIncome",!0,!1),Promise.resolve().then(()=>{u("additionalIncome",void 0)})):g("additionalIncome",!0,!0)},b=(()=>!(!f.additionalIncome||!s.additionalIncome||r.additionalIncome&&r.additionalIncome!==""&&r.additionalIncome!==null&&r.additionalIncome!==void 0))();return e.jsxs(m,{children:[e.jsx(O,{title:(v||I)&&h?h.label:n("calculate_mortgage_has_additional",a("calculate_mortgage_has_additional")),placeholder:(v||I)&&h?h.placeholder:n("calculate_mortgage_has_additional_ph",a("calculate_mortgage_has_additional_ph")),data:B,value:r.additionalIncome,onChange:w,onBlur:()=>g("additionalIncome",!0),error:b?s.additionalIncome:!1,disabled:(v||I)&&(h==null?void 0:h.loading)}),(v||I)&&(h==null?void 0:h.error)&&e.jsx(y,{error:n("error_dropdown_load_failed","Failed to load additional income options. Please refresh the page.")}),e.jsx(K,{})]})},ue=()=>{const{t:o,i18n:t}=p(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:i}=x();return e.jsxs(m,{children:[e.jsx(V,{title:o("calculate_mortgage_monthly_income"),placeholder:o("calculate_mortgage_monthly_income_ph"),value:a.additionalIncomeAmount,handleChange:s=>l("additionalIncomeAmount",s),onBlur:()=>r("additionalIncomeAmount"),error:i.additionalIncomeAmount&&n.additionalIncomeAmount,size:"xs"}),i.additionalIncomeAmount&&n.additionalIncomeAmount&&e.jsx(y,{error:n.additionalIncomeAmount})]})},he=({screenLocation:o})=>{const t=P(),a=o||(t.pathname.includes("calculate-mortgage")?"mortgage_step3":t.pathname.includes("refinance-mortgage")?"refinance_step3":t.pathname.includes("other-borrowers")?"other_borrowers_step2":"credit_step3");p();const{getContent:l}=j(a),{values:n,setFieldValue:r,touched:i,errors:s,setFieldTouched:g}=x(),f=b=>{if(!b)return!1;const c=b.toLowerCase();return c==="option_1"||c==="no_obligations"||c.includes("no_obligation")||c.includes("no obligation")||c.includes("none")},u=A(a,"obligations","full"),d="loading"in u,_=d?u.options:u,v=d?u.loading:!1,I=d?u.error:null,h=d?u.label:null,C=d?u.placeholder:null;I&&console.warn("❌ Obligations dropdown error:",I),console.log("Obligation debug:",{errors:s.obligation,touched:i.obligation});const B=b=>{console.log("Obligation value changed:",{value:b,willShowBankFields:!f(b)}),r("obligation",b),g("obligation",!0)},w=i.obligation&&s.obligation;return e.jsxs(m,{children:[e.jsx(O,{title:h||l("calculate_credit_existing_debts","חובות קיימים"),data:_,placeholder:C||l("calculate_credit_existing_debts_ph","האם יש לך חובות או התחייבויות קיימים?"),value:n.obligation,onChange:B,onBlur:()=>g("obligation",!0),error:w,disabled:v}),I&&e.jsx(y,{error:l("error_dropdown_load_failed","טעינת אפשרויות החובות נכשלה. אנא רענן את הדף.")})]})},N=({screenLocation:o="calculate_credit_3"})=>{p();const{getContent:t}=j("common"),{values:a,setFieldValue:l,errors:n,touched:r,setFieldTouched:i}=x(),s=o==="calculate_credit_3"&&a.obligation,g=s?t("obligation_bank_title","Bank Lender"):t("bank_title","Bank"),f=t(s?"obligation_bank_placeholder":"bank_placeholder","Select bank"),u=[{value:"1",label:t("bank_option_1","Bank Hapoalim")},{value:"2",label:t("bank_option_2","Bank Leumi")},{value:"3",label:t("bank_option_3","Bank Discount")},{value:"4",label:t("bank_option_4","Bank Mizrahi")},{value:"5",label:t("bank_option_5","Other Bank")}];return console.log("Bank options loaded:",u.length),e.jsx(m,{children:e.jsx(O,{title:g,placeholder:f,data:u,value:a.bank,onChange:d=>l("bank",d),onBlur:()=>i("bank"),error:r.bank&&n.bank,disabled:!1})})},M=()=>{const{t:o,i18n:t}=p(),{getContent:a}=j("common"),{values:l,setFieldValue:n,errors:r}=x();return e.jsxs(m,{children:[e.jsx(D,{title:a("obligation_end_date_title","Obligation End Date"),value:l.endDate,onChange:i=>n("endDate",i),placeholder:a("date_placeholder",o("date_ph")),error:r.endDate,blockPastDates:!0}),r.endDate&&e.jsx(y,{error:r.endDate})]})},S=()=>{p();const{getContent:o}=j("common"),{values:t,setFieldValue:a,errors:l,setFieldTouched:n,touched:r}=x();return e.jsxs(m,{children:[e.jsx(V,{value:t.monthlyPaymentForAnotherBank,title:o("obligation_monthly_payment_title","Monthly Payment"),placeholder:o("obligation_monthly_payment_placeholder","Enter monthly payment amount"),name:"MonthlyPayment",handleChange:i=>a("monthlyPaymentForAnotherBank",i),onBlur:()=>n("monthlyPayment"),error:r.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank,size:"xs"}),r.monthlyPaymentForAnotherBank&&l.monthlyPaymentForAnotherBank&&e.jsx(y,{error:l.monthlyPaymentForAnotherBank})]})},_e={bank_loan:[e.jsx(N,{},"Bank"),e.jsx(S,{},"MonthlyPayment"),e.jsx(M,{},"EndDate")],consumer_credit:[e.jsx(N,{},"Bank"),e.jsx(S,{},"MonthlyPayment"),e.jsx(M,{},"EndDate")],credit_card:[e.jsx(S,{},"MonthlyPayment")],other:[e.jsx(S,{},"MonthlyPayment")]},pe=({screenLocation:o})=>{const t=P(),a=o||(t.pathname.includes("calculate-mortgage")?"mortgage_step3":t.pathname.includes("refinance-mortgage")?"refinance_step3":t.pathname.includes("other-borrowers")?"other_borrowers_step2":"credit_step3");p();const{getContent:l}=j(a),{values:n,setFieldValue:r,errors:i,touched:s,setFieldTouched:g}=x(),f=A(a,"main_source","full");console.log("MainSourceOfIncome debug:",{fieldErrors:i.mainSourceOfIncome||{},fieldTouched:s.mainSourceOfIncome||{},errorShowing:s.mainSourceOfIncome&&i.mainSourceOfIncome});const u=_=>{console.log("Main source of income changed:",_),r("mainSourceOfIncome",_,!0),g("mainSourceOfIncome",!0,!1)},d=(()=>!(!s.mainSourceOfIncome||!i.mainSourceOfIncome||n.mainSourceOfIncome&&n.mainSourceOfIncome!==""&&n.mainSourceOfIncome!==null&&n.mainSourceOfIncome!==void 0))();return e.jsxs(m,{children:[e.jsx(O,{data:f.options,title:f.label||l("calculate_credit_main_source","מקור הכנסה עיקרי"),placeholder:f.placeholder||l("calculate_credit_main_source_ph","בחר מקור הכנסה עיקרי"),value:n.mainSourceOfIncome||"",onChange:u,onBlur:()=>g("mainSourceOfIncome",!0,!0),error:d?i.mainSourceOfIncome:!1,disabled:f.loading}),f.error&&e.jsx(y,{error:l("error_dropdown_load_failed","טעינת אפשרויות מקור ההכנסה נכשלה. אנא רענן את הדף.")})]})},E=()=>{const{t:o,i18n:t}=p(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:i}=x();return e.jsxs(m,{children:[e.jsx(q,{placeholder:o("calculate_mortgage_company"),value:a.companyName,title:o("calculate_mortgage_company"),name:"СompanyName",onChange:s=>l("companyName",s),onBlur:()=>r("companyName"),error:i.companyName&&n.companyName}),i.companyName&&n.companyName&&e.jsx(y,{error:n.companyName})]})},T=({screenLocation:o})=>{const t=P(),a=o||(t.pathname.includes("calculate-mortgage")?"mortgage_step3":t.pathname.includes("refinance-mortgage")?"refinance_step3":t.pathname.includes("other-borrowers")?"other_borrowers_step2":"credit_step3"),{getContent:l}=j(a),{values:n,setFieldValue:r,errors:i,setFieldTouched:s,touched:g}=x(),u=(_=>_==="other_borrowers_step2"||_==="mortgage_step3"||_==="refinance_step3"?"field_of_activity":"professional_sphere")(a),d=A(a,u,"full");return d.loading,d.error&&console.warn("❌ Field of activity dropdown error:",d.error),e.jsxs(m,{children:[e.jsx(O,{data:d.options,title:d.label||l("calculate_credit_professional_sphere","תחום מקצועי"),placeholder:d.placeholder||l("calculate_credit_professional_sphere_ph","בחר תחום מקצועי"),searchable:!0,searchPlaceholder:l("search","Search..."),value:n.fieldOfActivity,onChange:_=>{r("fieldOfActivity",_,!0),s("fieldOfActivity",!0,!1)},onBlur:()=>s("fieldOfActivity",!0,!0),error:g.fieldOfActivity&&i.fieldOfActivity,disabled:d.loading}),d.error&&e.jsx(y,{error:l("error_dropdown_load_failed","טעינת אפשרויות התחום המקצועי נכשלה. אנא רענן את הדף.")})]})},Q="_hint_1enfl_1",U={hint:Q},W=J.bind(U),X=({text:o})=>e.jsx("div",{className:W("hint"),children:o}),k=()=>{const{t:o,i18n:t}=p(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:i}=x();return e.jsxs(m,{children:[e.jsx(V,{title:o("calculate_mortgage_monthly_income"),placeholder:o("calculate_mortgage_monthly_income_ph"),value:a.monthlyIncome,handleChange:s=>l("monthlyIncome",s),onBlur:()=>r("monthlyIncome"),error:i.monthlyIncome&&n.monthlyIncome,size:"xs"}),e.jsx(X,{text:o("calculate_mortgage_monthly_income_hint")}),i.monthlyIncome&&n.monthlyIncome&&e.jsx(y,{error:n.monthlyIncome})]})},z=()=>{const{t:o,i18n:t}=p(),{values:a,setFieldValue:l,errors:n}=x();return e.jsxs(m,{children:[e.jsx(D,{title:o("no_income"),value:a.noIncome,onChange:r=>l("noIncome",r),placeholder:o("date_ph"),error:n.noIncome}),n.noIncome&&e.jsx(y,{error:n.noIncome})]})},H=()=>{const{t:o,i18n:t}=p(),{values:a,setFieldValue:l,errors:n,setFieldTouched:r,touched:i}=x();return e.jsxs(m,{children:[e.jsx(q,{placeholder:o("calculate_mortgage_profession_ph"),value:a.profession,title:o("calculate_mortgage_profession"),name:"Profession",onChange:s=>l("profession",s),onBlur:()=>r("profession"),error:i.profession&&n.profession}),i.profession&&n.profession&&e.jsx(y,{error:n.profession})]})};function Y(){const{t:o,i18n:t}=p();return e.jsx(G,{children:o("calculate_mortgage_step3_ctx")})}const R=()=>{const{t:o,i18n:t}=p(),{values:a,setFieldValue:l,errors:n}=x();return e.jsxs(m,{children:[e.jsx(D,{title:o("calculate_mortgage_start_date"),value:a.startDate,onChange:r=>l("startDate",r),placeholder:o("date_ph"),error:n.startDate}),e.jsx(Y,{}),n.startDate&&e.jsx(y,{error:n.startDate})]})},Z=o=>({employee:[e.jsx(k,{screenLocation:o},"MonthlyIncome1"),e.jsx(R,{screenLocation:o},"StartDate1"),e.jsx(T,{screenLocation:o},"FieldOfActivity1"),e.jsx(E,{screenLocation:o},"CompanyName1"),e.jsx(H,{screenLocation:o},"Profession1")],selfemployed:[e.jsx(k,{screenLocation:o},"MonthlyIncome2"),e.jsx(R,{screenLocation:o},"StartDate2"),e.jsx(T,{screenLocation:o},"FieldOfActivity2"),e.jsx(E,{screenLocation:o},"CompanyName2"),e.jsx(H,{screenLocation:o},"Profession2")],pension:[e.jsx(k,{screenLocation:o},"MonthlyIncome4"),e.jsx(m,{},"column")],unemployed:[e.jsx(z,{screenLocation:o},"NoIncome5"),e.jsx(m,{},"column")],unpaid_leave:[e.jsx(z,{screenLocation:o},"NoIncome6"),e.jsx(m,{},"column")],student:[e.jsx(k,{screenLocation:o},"MonthlyIncome7"),e.jsx(m,{},"column")],other:[e.jsx(k,{screenLocation:o},"MonthlyIncome8"),e.jsx(m,{},"column")]}),ge=Z("auto-detect");export{me as A,pe as M,he as O,ue as a,de as b,_e as c,ge as d,Z as g};
