import{r as P,a as M,u as x,b as I,j as e,w as U,i as r,f as D,T as me,y as _e,x as S,R as X,z as he,A as pe,D as ge,E as xe,F as je,G as ye,H as fe,I as be,J as we,K as Z,M as ee,P as ve,Q as Se,S as Me}from"./index-8c325235.js";import{b as K,E as C,D as y,T as J,c as B,e as _,d as f,F as E,f as Y,a as L,g as oe,L as Oe}from"./index-9bc675d4.js";import{P as Pe}from"./ProgressBar-0e664a1a.js";import{V as Ie}from"./VideoPoster-f7235551.js";import{S as ae,a as De,L as Fe,U as Ae,A as Ce,F as qe,B as Ne,b as Be,P as Ee,c as Ye,d as Le,e as ke,O as Te}from"./SourceOfIncomeModal-bd7df346.js";import{F as k,a as T,R as p,C as c,D as q,b as te,c as Q}from"./Calendar-665a9561.js";import{c as H,a as Re,I as $e}from"./IncreasePayment-042dfccc.js";import{Y as ze,R as Ve,I as We,N as Ue,B as He,E as Ge,A as Je,C as Ke,T as Qe,a as Xe,b as Ze,H as eo,M as oo,c as ao,P as to}from"./Taxes-a24fcfb3.js";import{U as v,a as no,c as ne,A as N,b as ro,d as io,O as so,e as re,g as G}from"./componentsByIncomeSource-e23d9c96.js";import{F as lo}from"./FamilyStatus-f8572360.js";import"./ShieldCheckIcon-2e6671e5.js";const co=()=>{const[o,u]=P.useState(51130),[t,m]=P.useState(2654),{t:a,i18n:h}=M();h.language=h.language.split("-")[0];const g=[{value:"option_1",label:a("calculate_credit_target_option_1")},{value:"option_2",label:a("calculate_credit_target_option_2")},{value:"option_3",label:a("calculate_credit_target_option_3")},{value:"option_4",label:a("calculate_credit_target_option_4")},{value:"option_5",label:a("calculate_credit_target_option_5")},{value:"option_6",label:a("calculate_credit_target_option_6")}],l=[{value:"option_1",label:a("calculate_mortgage_when_options_1")},{value:"option_2",label:a("calculate_mortgage_when_options_2")},{value:"option_3",label:a("calculate_mortgage_when_options_3")},{value:"option_4",label:a("calculate_mortgage_when_options_4")}],R=[{value:"option_1",label:a("calculate_credit_prolong_option_1")},{value:"option_2",label:a("calculate_credit_prolong_option_2")},{value:"option_3",label:a("calculate_credit_prolong_option_3")},{value:"option_4",label:a("calculate_credit_prolong_option_4")},{value:"option_5",label:a("calculate_credit_prolong_option_5")},{value:"option_6",label:a("calculate_credit_prolong_option_6")},{value:"option_7",label:a("calculate_credit_prolong_option_7")}],$=[{value:"city_1",label:a("calculate_mortgage_city_1")},{value:"city_2",label:a("calculate_mortgage_city_2")},{value:"city_3",label:a("calculate_mortgage_city_3")}],{setFieldValue:j,values:s,errors:d,touched:b,setFieldTouched:w}=K(),F=x(i=>i.activeField),O=I(),z=i=>{O(U("period")),j("period",i)},V=i=>{O(U("monthlyPayment")),j("monthlyPayment",i)};return P.useEffect(()=>{if(F==="period"){const i=H(s.loanAmount,0,s.period,5);Number.isNaN(i)||j("monthlyPayment",i)}else{const i=Re(s.loanAmount,0,s.monthlyPayment,5);Number.isNaN(i)||j("period",i)}},[F,j,s.loanAmount,s.monthlyPayment,s.period]),P.useLayoutEffect(()=>{const i=H(s.loanAmount,0,1,5),W=H(s.loanAmount,0,30,5);Number.isNaN(i)||u(i),i===0&&u(1),Number.isNaN(i)||m(W)},[s.loanAmount]),e.jsx(e.Fragment,{children:e.jsxs(k,{children:[e.jsx(T,{title:a("sidebar_sub_calculate_credit")}),e.jsxs(p,{children:[e.jsx(c,{children:e.jsx(q,{title:a("calculate_why"),data:g,placeholder:a("calculate_credit_target_ph"),value:s.purposeOfLoan,onChange:i=>j("purposeOfLoan",i),onBlur:()=>w("purposeOfLoan",!0),error:b.purposeOfLoan&&d.purposeOfLoan})}),e.jsxs(c,{children:[e.jsx(te,{handleChange:i=>{O(U("period")),j("loanAmount",i)},name:"loanAmount",title:a("calculate_amount"),value:s.loanAmount,placeholder:"1,000,000",error:d.loanAmount}),d.loanAmount&&e.jsx(C,{error:d.loanAmount})]}),e.jsx(c,{children:e.jsx(q,{title:a("calculate_when"),data:l,placeholder:a("calculate_mortgage_when_options_ph"),value:s.whenDoYouNeedMoney,onChange:i=>j("whenDoYouNeedMoney",i),onBlur:()=>w("whenDoYouNeedMoney",!0),error:b.whenDoYouNeedMoney&&d.whenDoYouNeedMoney})})]}),e.jsx(p,{children:e.jsx(c,{children:e.jsx(q,{title:a("calculate_prolong"),data:R,placeholder:a("calculate_mortgage_first_ph"),value:s.loanDeferral,onChange:i=>j("loanDeferral",i),onBlur:()=>w("loanDeferral",!0),error:b.loanDeferral&&d.loanDeferral})})}),s.purposeOfLoan&&s.purposeOfLoan==="option_6"&&e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(te,{handleChange:i=>{j("priceOfEstate",i)},name:"PriceOfEstate",title:a("calculate_mortgage_price"),value:s.priceOfEstate,placeholder:"1,000,000",error:d.priceOfEstate}),d.priceOfEstate&&e.jsx(C,{error:d.priceOfEstate})]}),e.jsx(c,{children:e.jsx(q,{title:a("calculate_mortgage_city"),data:$,placeholder:a("city"),value:s.cityWhereYouBuy,onChange:i=>j("cityWhereYouBuy",i),onBlur:()=>w("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:a("search"),nothingFoundText:a("nothing_found"),error:b.cityWhereYouBuy&&d.cityWhereYouBuy})}),e.jsxs(c,{children:[e.jsx(J,{title:a("have_mortgage_title")}),e.jsx(ze,{value:s.haveMortgage,onChange:i=>j("haveMortgage",i),error:b.haveMortgage&&d.haveMortgage})]})]})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(ae,{disableCurrency:!0,unitsMax:a("calculate_mortgage_period_units_max"),unitsMin:a("calculate_mortgage_period_units_min"),value:s.period,name:"Period",min:1,max:30,error:d.period,title:a("calculate_mortgage_period"),handleChange:z}),d.period&&e.jsx(C,{error:d.period})]}),e.jsxs(c,{children:[e.jsx(ae,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:t,max:o,error:d.monthlyPayment,title:a("calculate_mortgage_initial_payment"),handleChange:V,value:s.monthlyPayment}),e.jsx($e,{}),d.monthlyPayment&&e.jsx(C,{error:d.monthlyPayment})]}),e.jsx(c,{})]})]})})},uo=B().shape({purposeOfLoan:_().required("Выберите ответ"),loanAmount:f().when("purposeOfLoan",{is:r.t("calculate_credit_target_option_6"),then:o=>o.max(1e6,r.t("error_loan_of_amount_credit_max_1000000")),otherwise:o=>o.max(2e5,r.t("error_loan_of_amount_credit_max_200000"))}).required(r.t("error_required_to_fill_out")),whenDoYouNeedMoney:_().required(r.t("error_select_answer")),loanDeferral:_().required(r.t("error_select_answer")),period:f().min(1,r.t("error_min__credit_period")).max(30,r.t("error_max_credit_period")).required(r.t("error_required_to_fill_out")),monthlyPayment:f().required(r.t("error_required_to_fill_out"))}),mo=()=>{const{t:o,i18n:u}=M();u.language=u.language.split("-")[0];const t=I(),m=D(),a=x(l=>l.credit),h=x(l=>l.login.isLogin),g={purposeOfLoan:a.purposeOfLoan||"",loanAmount:a.loanAmount||2e5,whenDoYouNeedMoney:a.whenDoYouNeedMoney||"",loanDeferral:a.loanDeferral||"",priceOfEstate:a.priceOfEstate||null,cityWhereYouBuy:a.cityWhereYouBuy||"",haveMortgage:a.haveMortgage||null,period:a.period||30,monthlyPayment:a.monthlyPayment||5368};return e.jsxs(e.Fragment,{children:[e.jsx(E,{initialValues:g,validationSchema:uo,validateOnMount:!0,onSubmit:l=>{t(me(l)),h?m("/services/calculate-credit/2"):t(_e())},children:e.jsxs(Y,{children:[e.jsxs(L,{children:[e.jsx(Ie,{title:o("sidebar_sub_calculate_credit"),text:o("calculate_mortgage_banner_subtext"),size:"small"}),e.jsx(co,{})]}),e.jsx(De,{})]})}),e.jsx(Fe,{})]})},_o=()=>{const{t:o,i18n:u}=M();u.language=u.language.split("-")[0];const t=x(a=>a.login.loginData),m=x(a=>a.credit);return e.jsxs(k,{children:[e.jsx(T,{title:o("calculate_mortgage_final")}),e.jsx(Ae,{credit:m.loanAmount,nameSurname:t==null?void 0:t.nameSurname,phoneNumber:t==null?void 0:t.phoneNumber}),e.jsx(Ce,{text:o("calculate_mortgage_warning")}),e.jsx(p,{children:e.jsx(qe,{})}),e.jsx(Ne,{})]})},ho={},po=B().shape({}),go=()=>e.jsx(E,{initialValues:ho,validationSchema:po,validateOnMount:!0,onSubmit:()=>{console.log("нажата кнопка")},children:e.jsxs(Y,{children:[e.jsx(L,{children:e.jsx(_o,{})}),e.jsx(Q,{})]})}),xo=()=>{const{t:o,i18n:u}=M();u.language=u.language.split("-")[0];const{values:t}=K(),m=x(a=>a.login.loginData);return e.jsxs(k,{children:[e.jsx(T,{title:o("calculate_mortgage_step2_title")}),e.jsxs(Ve,{children:[e.jsx(We,{}),e.jsx(v,{name:m==null?void 0:m.nameSurname,phone:m==null?void 0:m.phoneNumber})]}),e.jsxs(p,{children:[e.jsx(Ue,{}),e.jsx(He,{}),e.jsx(Ge,{})]}),e.jsxs(p,{children:[e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Je,{}),t.additionalCitizenships==="yes"&&e.jsx(Ke,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Qe,{}),t.taxes==="yes"&&e.jsx(Xe,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Ze,{}),t.childrens==="yes"&&e.jsx(eo,{})]})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(oo,{}),e.jsx(ao,{}),e.jsx(to,{})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(Be,{}),e.jsx(c,{}),e.jsx(c,{})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(lo,{}),e.jsx(c,{children:t.familyStatus==="option_2"&&e.jsx(Ee,{})}),e.jsx(c,{children:t.partnerPayMortgage==="yes"&&t.familyStatus==="option_2"&&e.jsx(Ye,{})})]})]})},jo=B().shape({nameSurname:_().required(r.t("error_name_surname")),birthday:_().required(r.t("error_date")),education:_().required(r.t("error_select_answer")),additionalCitizenships:_().required(r.t("error_select_answer")),citizenshipsDropdown:oe().when("additionalCitizenships",{is:"yes",then:o=>o.min(1,r.t("error_select_answer")),otherwise:o=>o.min(0)}),taxes:_().required(r.t("error_select_answer")),countriesPayTaxes:oe().when("taxes",{is:"yes",then:o=>o.min(1,r.t("error_select_answer")),otherwise:o=>o.min(0)}),childrens:_().required(r.t("error_select_answer")),howMuchChildrens:f().required(r.t("error_fill_field")),medicalInsurance:_().required(r.t("error_select_answer")),isForeigner:_().required(r.t("error_select_answer")),publicPerson:_().required(r.t("error_select_answer")),borrowers:f().min(1,r.t("error_quantity_borrowers")).required(r.t("error_quantity_borrowers")),familyStatus:_().required(r.t("error_select_answer")),partnerPayMortgage:_().when("familyStatus",{is:r.t("calculate_mortgage_family_status_option_2"),then:o=>o.required(r.t("error_select_answer")),otherwise:o=>o.notRequired()})}),yo=()=>{const o=I(),u=D(),t=x(h=>h.mortgage),a={nameSurname:x(h=>h.login.loginData).nameSurname||t.nameSurname||"",birthday:t.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:t.education||"",additionalCitizenships:t.additionalCitizenships||null,citizenshipsDropdown:t.citizenshipsDropdown||[],taxes:t.taxes||null,countriesPayTaxes:t.countriesPayTaxes||[],childrens:t.childrens||null,howMuchChildrens:t.howMuchChildrens||1,medicalInsurance:t.medicalInsurance||null,isForeigner:t.isForeigner||null,publicPerson:t.publicPerson||null,borrowers:t.borrowers||null,familyStatus:t.familyStatus||"",partnerPayMortgage:t.partnerPayMortgage||null,addPartner:t.addPartner||""};return e.jsx(E,{initialValues:a,validationSchema:jo,validateOnMount:!0,onSubmit:h=>{o(S(h)),u("/services/calculate-credit/3")},children:e.jsxs(Y,{children:[e.jsx(L,{children:e.jsx(xo,{})}),e.jsx(Q,{})]})})},fo=()=>{const{t:o,i18n:u}=M();u.language=u.language.split("-")[0];const t=D(),{values:m}=K(),{mainSourceOfIncome:a,additionalIncome:h,obligation:g}=m,l=I(),R=x(n=>n.borrowers.sourceOfIncomeModal),$=x(n=>n.borrowers.additionalIncomeModal),j=x(n=>n.borrowers.obligationModal),s=x(n=>n.otherBorrowers.otherBorrowers),d=x(n=>n.login.loginData),b=()=>{l(S(m)),l(he())},w=()=>{l(S(m)),l(pe())},F=()=>{l(S(m)),l(ge())},O=n=>{l(xe({id:n}))},z=n=>{l(je({id:n}))},V=n=>{l(ye({id:n}))},i=n=>{l(fe(n))},W=n=>{l(be(n))},ie=n=>{l(we(n))},se=n=>{l(Z(n));const de=!s.some(ue=>ue.id===n)?G(s):n;t({pathname:"/services/other-borrowers/1/",search:ee({pageId:String(de)}).toString()})},le=()=>{l(Z(G(s))),l(S(m)),t({pathname:"/services/other-borrowers/1/",search:ee({pageId:G(s).toString()}).toString()})},ce=n=>{l(ve(n))};return e.jsxs(k,{children:[e.jsx(T,{title:o("calculate_mortgage_step3_title")}),e.jsx(v,{name:d==null?void 0:d.nameSurname,phone:d==null?void 0:d.phoneNumber}),e.jsxs(p,{children:[e.jsx(no,{}),ne[a]&&ne[a].map((n,A)=>e.jsx(X.Fragment,{children:n},A)),e.jsx(c,{})]}),e.jsx(p,{children:a&&e.jsxs(c,{children:[R.map(n=>e.jsx(v,{onEdit:()=>i(n.id),onDelete:()=>O(n.id),enableEdit:!0,name:`${o("source_of_income")}${n.id+1}`},n.id)),e.jsx(N,{onClick:b,color:"#FBE54D",value:o("add_place_to_work"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(ro,{}),h&&h!=="option_1"&&e.jsx(io,{}),e.jsx(c,{})]}),h&&h!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[$.map(n=>e.jsx(v,{onEdit:()=>W(n.id),onDelete:()=>z(n.id),enableEdit:!0,name:`${o("additional_source_of_income")}${n.id+1}`},n.id)),e.jsx(N,{onClick:w,color:"#FBE54D",value:o("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(so,{}),re[g]&&re[g].map((n,A)=>e.jsx(X.Fragment,{children:n},A)),e.jsx(c,{})]}),g&&g!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[j.map(n=>e.jsx(v,{onEdit:()=>ie(n.id),onDelete:()=>V(n.id),enableEdit:!0,name:`${o("obligation")}${n.id+1}`},n.id)),e.jsx(N,{onClick:F,color:"#FBE54D",value:o("add_obligation"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[s&&e.jsx(J,{title:o("borrower")}),e.jsxs(p,{style:{columnGap:"2rem"},children:[s.map(n=>e.jsx(c,{children:e.jsx(v,{onEdit:()=>se(n.id),onDelete:()=>ce(n.id),enableEdit:!0,name:n.nameSurname},n.id)},n.id)),!s&&e.jsx(J,{title:o("borrower")}),e.jsx(c,{children:e.jsx(N,{value:o("add_borrower"),onClick:le,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(c,{})]})]})]})},bo=B().shape({mainSourceOfIncome:_().required(r.t("error_select_answer")),monthlyIncome:f().required(r.t("error_fill_field")),startDate:_().required(r.t("error_date")),fieldOfActivity:_().when("mainSourceOfIncome",{is:o=>o!=null&&o!=="",then:o=>o.required(r.t("error_select_field_of_activity")),otherwise:o=>o.notRequired()}),profession:_().required(r.t("error_fill_field")),companyName:_().required(r.t("error_fill_field")),additionalIncome:_().required(r.t("error_select_one_of_the_options")),additionalIncomeAmount:f().when("additionalIncome",{is:o=>o!=null&&o!==""&&o==="no",then:o=>o.required(r.t("error_fill_field")),otherwise:o=>o.notRequired()}),obligation:_().required(r.t("error_select_one_of_the_options")),bank:_().when("obligation",{is:o=>o!=null&&o!==""&&o==="no",then:o=>o.required(r.t("error_select_bank")),otherwise:o=>o.notRequired()}),monthlyPaymentForAnotherBank:f().when("obligation",{is:o=>o!=null&&o!==""&&o==="no",then:o=>o.required(r.t("error_fill_field")),otherwise:o=>o.notRequired()}),endDate:_().required(r.t("error_date"))}),wo=()=>{const o=I(),u=D(),t=x(a=>a.mortgage),m={mainSourceOfIncome:t.mainSourceOfIncome||"",monthlyIncome:t.monthlyIncome||null,startDate:t.startDate||new Date().getTime(),fieldOfActivity:t.fieldOfActivity||"",profession:t.profession||"",companyName:t.companyName||"",additionalIncome:t.additionalIncome||"",additionalIncomeAmount:t.additionalIncomeAmount||null,obligation:t.obligation||"",bank:t.bank||"",monthlyPaymentForAnotherBank:t.monthlyPaymentForAnotherBank||null,endDate:t.endDate||new Date().getTime(),amountIncomeCurrentYear:(t==null?void 0:t.amountIncomeCurrentYear)||null,noIncome:t.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(E,{initialValues:m,validationSchema:bo,validateOnMount:!0,onSubmit:a=>{o(S(a)),u("/services/calculate-credit/4")},children:e.jsxs(Y,{children:[e.jsx(L,{children:e.jsx(fo,{})}),e.jsx(Q,{})]})}),e.jsx(Le,{}),e.jsx(ke,{}),e.jsx(Te,{})]})},No=()=>{const{stepNumber:o}=Se(),{t:u,i18n:t}=M(),m=D();if(t.language=t.language.split("-")[0],!x(l=>l.login.isLogin)&&o!=="1"){m("/services/calculate-credit/1");return}const h=[u("calculate_credit_calculator"),u("mortgage_refinance_step_2"),u("calculate_mortgage_income"),u("calculate_mortgage_programs")];let g;switch(o){case"1":g=e.jsx(mo,{});break;case"2":g=e.jsx(yo,{});break;case"3":g=e.jsx(wo,{});break;case"4":g=e.jsx(go,{});break;default:g=e.jsx(Me,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{progress:o,data:h}),e.jsx(P.Suspense,{fallback:e.jsx(Oe,{}),children:g})]})};export{No as default};
