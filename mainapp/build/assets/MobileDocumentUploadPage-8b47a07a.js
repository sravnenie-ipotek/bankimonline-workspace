import{j as e}from"./ui-vendor-99260b86.js";import{k as i,f as s,r as a}from"./react-vendor-21ec1e1c.js";import{c as l}from"./index-18f68479.js";import{u as t}from"./i18n-vendor-18addd5f.js";import"./state-vendor-069efcec.js";import"./utils-vendor-8f040048.js";import"./form-vendor-6d56d196.js";const o={"mobile-upload-page":"_mobile-upload-page_yu4ib_1",container:"_container_yu4ib_11",header:"_header_yu4ib_21",title:"_title_yu4ib_26",content:"_content_yu4ib_35","upload-section":"_upload-section_yu4ib_42","upload-area":"_upload-area_yu4ib_46","upload-icon":"_upload-icon_yu4ib_69","upload-text":"_upload-text_yu4ib_80","preview-section":"_preview-section_yu4ib_89","preview-container":"_preview-container_yu4ib_100","preview-image":"_preview-image_yu4ib_112","file-icon":"_file-icon_yu4ib_118","file-info":"_file-info_yu4ib_125","file-name":"_file-name_yu4ib_130","file-size":"_file-size_yu4ib_138","upload-button":"_upload-button_yu4ib_144","error-message":"_error-message_yu4ib_170","uploaded-files":"_uploaded-files_yu4ib_180","uploaded-files-title":"_uploaded-files-title_yu4ib_187","uploaded-file-item":"_uploaded-file-item_yu4ib_195","file-details":"_file-details_yu4ib_206","file-status":"_file-status_yu4ib_211"},r=l.bind(o),n=()=>{const{t:l}=t();i(),s();const[o,n]=a.useState(null),[d,c]=a.useState(""),[u,p]=a.useState(!1),[_,m]=a.useState([]),[h,f]=a.useState(""),v=a.useRef(null),j=e=>{const i=(e=>["application/pdf","image/jpeg","image/jpg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(e.type)?e.size>10485760?l("document_size_error","Размер файла не должен превышать 10 МБ"):"":l("document_type_error","Поддерживаются только PDF, изображения и документы Word"))(e);if(i)f(i);else if(f(""),n(e),e.type.startsWith("image/")){const i=URL.createObjectURL(e);c(i)}else c("")},x=e=>{if(0===e)return"0 Bytes";const i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(2))+" "+["Bytes","KB","MB","GB"][i]},b=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e.jsx("div",{className:r("mobile-upload-page"),children:e.jsxs("div",{className:r("container"),children:[e.jsx("div",{className:r("header"),children:e.jsx("h1",{className:r("title"),children:l("upload_document_mobile","Загрузите документ")})}),e.jsxs("div",{className:r("content"),children:[e.jsx("div",{className:r("upload-section"),children:e.jsxs("div",{className:r("upload-area"),onClick:()=>{var e;null==(e=v.current)||e.click()},children:[e.jsx("div",{className:r("upload-icon"),children:e.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("p",{className:r("upload-text"),children:l("upload_from_phone","Загрузить из телефона")})]})}),o&&e.jsxs("div",{className:r("preview-section"),children:[e.jsx("div",{className:r("preview-container"),children:d?e.jsx("img",{src:d,alt:"Preview",className:r("preview-image")}):e.jsx("div",{className:r("file-icon"),children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M14 2v6h6",stroke:"currentColor",strokeWidth:"2"})]})})}),e.jsxs("div",{className:r("file-info"),children:[e.jsx("p",{className:r("file-name"),children:o.name}),e.jsx("p",{className:r("file-size"),children:x(o.size)})]}),e.jsx("button",{className:r("upload-button"),onClick:async()=>{if(o){p(!0),f("");try{await new Promise(e=>setTimeout(e,2e3));const e={id:Date.now().toString(),name:o.name,type:o.type,size:o.size,url:URL.createObjectURL(o)};m(i=>[...i,e]),n(null),c(""),alert(l("upload_success","Документ успешно загружен!"))}catch(e){f(l("upload_error","Ошибка при загрузке документа"))}finally{p(!1)}}},disabled:u,children:u?l("uploading","Загружается..."):l("upload","Загрузить")})]}),h&&e.jsx("div",{className:r("error-message"),children:h}),_.length>0&&e.jsxs("div",{className:r("uploaded-files"),children:[e.jsx("h3",{className:r("uploaded-files-title"),children:l("uploaded_files","Загруженные файлы")}),_.map(i=>e.jsxs("div",{className:r("uploaded-file-item"),children:[e.jsx("div",{className:r("file-icon"),children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M14 2v6h6",stroke:"currentColor",strokeWidth:"2"})]})}),e.jsxs("div",{className:r("file-details"),children:[e.jsx("p",{className:r("file-name"),children:i.name}),e.jsx("p",{className:r("file-size"),children:x(i.size)})]}),e.jsx("div",{className:r("file-status"),children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},i.id))]})]}),e.jsx("input",{ref:v,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",capture:b?"environment":void 0,onChange:e=>{var i;const s=null==(i=e.target.files)?void 0:i[0];s&&j(s)},style:{display:"none"}})]})})};export{n as MobileDocumentUploadPage};
