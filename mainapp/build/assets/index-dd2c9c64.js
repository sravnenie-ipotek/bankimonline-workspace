import{j as a}from"./ui-vendor-99260b86.js";import{k as e,f as i,r as n,L as c}from"./react-vendor-21ec1e1c.js";import{b as t}from"./index-73dd41d9.js";import{M as l,C as s}from"./ClockIcon-43db79e1.js";import{u as r}from"./i18n-vendor-18addd5f.js";import"./index-be42ab03.js";import"./state-vendor-069efcec.js";import"./utils-vendor-8f040048.js";import"./form-vendor-6d56d196.js";import"./components-vendor-62dc47c0.js";const o={vacancyDetailPage:"_vacancyDetailPage_1igo5_1",content:"_content_1igo5_7",breadcrumbs:"_breadcrumbs_1igo5_12",breadcrumbLink:"_breadcrumbLink_1igo5_20",breadcrumbSeparator:"_breadcrumbSeparator_1igo5_28",breadcrumbCurrent:"_breadcrumbCurrent_1igo5_31",vacancyLayout:"_vacancyLayout_1igo5_35",vacancyDetails:"_vacancyDetails_1igo5_54",backButtonTop:"_backButtonTop_1igo5_54",vacancyHeader:"_vacancyHeader_1igo5_70",title:"_title_1igo5_73",vacancyMeta:"_vacancyMeta_1igo5_85",categoryChip:"_categoryChip_1igo5_90",categoryDot:"_categoryDot_1igo5_102",metaInfo:"_metaInfo_1igo5_108",metaItem:"_metaItem_1igo5_113",currency:"_currency_1igo5_125",section:"_section_1igo5_129",sectionContent:"_sectionContent_1igo5_138",applicationForm:"_applicationForm_1igo5_155",formContainer:"_formContainer_1igo5_167",successMessage:"_successMessage_1igo5_195",successIcon:"_successIcon_1igo5_202",goHomeButton:"_goHomeButton_1igo5_227",formGroup:"_formGroup_1igo5_260",error:"_error_1igo5_288",errorText:"_errorText_1igo5_291",phoneInputContainer:"_phoneInputContainer_1igo5_301",countryFlag:"_countryFlag_1igo5_319",flagIcon:"_flagIcon_1igo5_329",dropdownArrow:"_dropdownArrow_1igo5_335",salaryInputContainer:"_salaryInputContainer_1igo5_353",currencySymbol:"_currencySymbol_1igo5_388",fileUpload:"_fileUpload_1igo5_400",dragActive:"_dragActive_1igo5_419",fileUploadLabel:"_fileUploadLabel_1igo5_426",uploadContent:"_uploadContent_1igo5_434",uploadIcon:"_uploadIcon_1igo5_440",fileName:"_fileName_1igo5_451",fileHelp:"_fileHelp_1igo5_457",submitButton:"_submitButton_1igo5_464",loading:"_loading_1igo5_485",spinner:"_spinner_1igo5_493",spin:"_spin_1igo5_493",backButton:"_backButton_1igo5_54",centeredMessageContainer:"_centeredMessageContainer_1igo5_579",successMessageCentered:"_successMessageCentered_1igo5_586",alreadyAppliedMessageCentered:"_alreadyAppliedMessageCentered_1igo5_587",infoIcon:"_infoIcon_1igo5_597",buttonGroup:"_buttonGroup_1igo5_634",viewOtherPositionsButton:"_viewOtherPositionsButton_1igo5_642"},p=()=>{const{id:p}=e(),m=i(),{t:d,i18n:_}=r(),[u,v]=n.useState(null),[h,y]=n.useState(!0),[x,g]=n.useState(null),[j,f]=n.useState(!1),[N,b]=n.useState(!1),[F,D]=n.useState(!1),[C,I]=n.useState({applicant_name:"",applicant_phone:"",applicant_email:"",applicant_city:"",expected_salary:"",portfolio_url:"",cover_letter:"",resume:null}),[w,k]=n.useState({}),[L,T]=n.useState(!1);n.useEffect(()=>{(async()=>{if(p)try{y(!0),g(null);const a=await fetch(`/api/vacancies/${p}?lang=${_.language}`);if(!a.ok){if(404===a.status)return void g("Vacancy not found");throw new Error(`HTTP error! status: ${a.status}`)}const e=await a.json();if("success"!==e.status)throw new Error(e.message||"Failed to fetch vacancy");v(e.data)}catch(a){g(a instanceof Error?a.message:"Failed to load vacancy")}finally{y(!1)}})()},[p,_.language]);const B=a=>{const{name:e,value:i}=a.target;I(a=>({...a,[e]:i})),w[e]&&k(a=>({...a,[e]:""}))},M=a=>{if(I(e=>({...e,resume:a})),a){const e=5242880,i=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];a.size>e?k(a=>({...a,resume:d("vacancyDetail.applicationForm.validation.fileSize")})):i.includes(a.type)?k(a=>({...a,resume:""})):k(a=>({...a,resume:d("vacancyDetail.applicationForm.validation.fileType")}))}else k(a=>({...a,resume:""}))},S=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?T(!0):"dragleave"===a.type&&T(!1)},P=a=>u&&u[a]||"",$=()=>u&&u.title||"";return h?a.jsx("div",{className:o.vacancyDetailPage,children:a.jsx(t,{children:a.jsxs("div",{className:o.loading,children:[a.jsx("div",{className:o.spinner}),a.jsx("p",{children:d("loading","Loading...")})]})})}):x||!u?a.jsx("div",{className:o.vacancyDetailPage,children:a.jsx(t,{children:a.jsxs("div",{className:o.error,children:[a.jsx("h1",{children:d("vacancy_not_found","Vacancy Not Found")}),a.jsx("p",{children:x||d("vacancy_not_found_description","The vacancy you are looking for does not exist or has been removed.")}),a.jsx(c,{to:"/vacancies",className:o.backButton,children:d("back_to_vacancies","Back to Vacancies")})]})})}):a.jsx("div",{className:o.vacancyDetailPage,children:a.jsx(t,{children:a.jsxs("div",{className:o.content,children:[a.jsxs("div",{className:o.breadcrumbs,children:[a.jsx(c,{to:"/",className:o.breadcrumbLink,children:d("navigation.home")}),a.jsx("span",{className:o.breadcrumbSeparator,children:"›"}),a.jsx(c,{to:"/vacancies",className:o.breadcrumbLink,children:d("vacancies.title")}),a.jsx("span",{className:o.breadcrumbSeparator,children:"›"}),a.jsx("span",{className:o.breadcrumbCurrent,children:$()})]}),N||F?a.jsx("div",{className:o.centeredMessageContainer,children:N?a.jsxs("div",{className:o.successMessageCentered,children:[a.jsx("div",{className:o.successIcon,children:"✓"}),a.jsx("h2",{children:d("vacancyDetail.applicationForm.success")}),a.jsx("p",{children:d("vacancyDetail.applicationForm.successMessage")}),a.jsx("button",{onClick:()=>m("/"),className:o.goHomeButton,children:d("vacancyDetail.applicationForm.goHome")})]}):a.jsxs("div",{className:o.alreadyAppliedMessageCentered,children:[a.jsx("div",{className:o.infoIcon,children:"ℹ"}),a.jsx("h2",{children:d("vacancyDetail.applicationForm.alreadyApplied")}),a.jsx("p",{children:d("vacancyDetail.applicationForm.alreadyAppliedMessage")}),a.jsxs("div",{className:o.buttonGroup,children:[a.jsx("button",{onClick:()=>m("/vacancies"),className:o.viewOtherPositionsButton,children:d("vacancyDetail.applicationForm.viewOtherPositions")}),a.jsx("button",{onClick:()=>m("/"),className:o.goHomeButton,children:d("vacancyDetail.applicationForm.goHome")})]})]})}):a.jsxs("div",{className:o.vacancyLayout,children:[a.jsxs("div",{className:o.vacancyDetails,children:[a.jsxs("button",{onClick:()=>m("/vacancies"),className:o.backButtonTop,children:["‹ ",d("vacancies.backToVacancies")]}),a.jsxs("div",{className:o.vacancyHeader,children:[a.jsx("h1",{className:o.title,children:$()}),a.jsxs("div",{className:o.vacancyMeta,children:[a.jsxs("div",{className:o.categoryChip,style:{backgroundColor:(H=u.category,{development:"#FBE54D",design:"#4DABF7",management:"#69DB7C",marketing:"#FFB366",finance:"#A78BFA",customer_service:"#FF8CC8"}[H]||"#FBE54D")},children:[a.jsx("div",{className:o.categoryDot}),a.jsx("span",{children:d(`vacancies.categories.${u.category.toLowerCase()}`,u.category)})]}),a.jsxs("div",{className:o.metaInfo,children:[a.jsxs("div",{className:o.metaItem,children:[a.jsx(l,{}),a.jsx("span",{children:u.location})]}),a.jsxs("div",{className:o.metaItem,children:[a.jsx(s,{}),a.jsx("span",{children:(A=u.employment_type,{full_time:d("vacancy_employment_fulltime"),part_time:d("vacancy_employment_parttime","Part Time"),contract:d("vacancy_employment_contract","Contract"),temporary:d("vacancy_employment_temporary","Temporary")}[A]||A)})]}),a.jsxs("div",{className:o.metaItem,children:[a.jsx("span",{className:o.currency,children:"₪"}),a.jsx("span",{children:((a,e,i)=>{const n=a=>(new Intl.NumberFormat).format(a);return a&&e&&a!==e?`${n(a)} - ${n(e)} ${i}`:a?`${d("vacancy_salary_from")} ${n(a)} ${i}`:""})(u.salary_min,u.salary_max,u.salary_currency)})]})]})]})]}),a.jsxs("div",{className:o.section,children:[a.jsx("h2",{children:d("vacancyDetail.generalInfo")}),a.jsx("div",{className:o.sectionContent,children:P("description").split("\n").map((e,i)=>a.jsx("p",{children:e},i))})]}),a.jsxs("div",{className:o.section,children:[a.jsx("h2",{children:d("vacancyDetail.responsibilities")}),a.jsx("div",{className:o.sectionContent,children:P("responsibilities").split("\n").map((e,i)=>a.jsx("div",{className:o.textLine,children:e},i))})]}),a.jsxs("div",{className:o.section,children:[a.jsx("h2",{children:d("vacancyDetail.requirements")}),a.jsx("div",{className:o.sectionContent,children:P("requirements").split("\n").map((e,i)=>a.jsx("div",{className:o.textLine,children:e},i))})]}),a.jsxs("div",{className:o.section,children:[a.jsx("h2",{children:d("vacancyDetail.niceToHave")}),a.jsx("div",{className:o.sectionContent,children:P("nice_to_have").split("\n").map((e,i)=>a.jsx("div",{className:o.textLine,children:e},i))})]}),a.jsxs("div",{className:o.section,children:[a.jsx("h2",{children:d("vacancyDetail.benefits")}),a.jsx("div",{className:o.sectionContent,children:P("benefits").split("\n").map((e,i)=>a.jsx("div",{className:o.textLine,children:e},i))})]})]}),a.jsx("div",{className:o.applicationForm,children:a.jsxs("div",{className:o.formContainer,children:[a.jsx("h3",{children:d("vacancyDetail.applicationForm.title")}),a.jsxs("form",{onSubmit:async a=>{if(a.preventDefault(),(()=>{const a={};var e,i;if(C.applicant_name.trim()?C.applicant_name.length<2?a.applicant_name=d("vacancyDetail.applicationForm.validation.nameMinLength"):C.applicant_name.length>100&&(a.applicant_name=d("vacancyDetail.applicationForm.validation.nameMaxLength")):a.applicant_name=d("vacancyDetail.applicationForm.validation.required"),C.applicant_phone.trim()?(e=C.applicant_phone,/^(\+?972|0)?[5-9]\d{8}$/.test(e.replace(/[-\s]/g,""))||(a.applicant_phone=d("vacancyDetail.applicationForm.validation.phoneFormat"))):a.applicant_phone=d("vacancyDetail.applicationForm.validation.required"),C.applicant_email.trim()?(i=C.applicant_email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)||(a.applicant_email=d("vacancyDetail.applicationForm.validation.invalidEmail"))):a.applicant_email=d("vacancyDetail.applicationForm.validation.required"),C.applicant_city.trim()?C.applicant_city.length<2&&(a.applicant_city=d("vacancyDetail.applicationForm.validation.cityMinLength")):a.applicant_city=d("vacancyDetail.applicationForm.validation.required"),C.expected_salary.trim()){const e=parseInt(C.expected_salary);isNaN(e)||e<=0?a.expected_salary=d("vacancyDetail.applicationForm.validation.salaryMinValue"):e>1e5&&(a.expected_salary=d("vacancyDetail.applicationForm.validation.salaryMaxValue"))}if(C.cover_letter.length>2e3&&(a.cover_letter=d("vacancyDetail.applicationForm.validation.coverLetterMaxLength")),C.resume){const e=5242880;C.resume.size>e&&(a.resume=d("vacancyDetail.applicationForm.validation.fileSize")),["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.resume.type)||(a.resume=d("vacancyDetail.applicationForm.validation.fileType"))}else a.resume=d("vacancyDetail.applicationForm.validation.fileRequired");return k(a),0===Object.keys(a).length})()){f(!0),b(!1),D(!1);try{const a=new FormData;a.append("applicant_name",C.applicant_name),a.append("applicant_phone",C.applicant_phone),a.append("applicant_email",C.applicant_email),a.append("applicant_city",C.applicant_city),a.append("expected_salary",C.expected_salary),a.append("portfolio_url",C.portfolio_url),a.append("cover_letter",C.cover_letter),C.resume&&a.append("resume",C.resume);const e=await fetch(`/api/vacancies/${p}/apply`,{method:"POST",body:a}),i=await e.json();if(e.ok&&"success"===i.status)b(!0),I({applicant_name:"",applicant_phone:"",applicant_email:"",applicant_city:"",expected_salary:"",portfolio_url:"",cover_letter:"",resume:null});else{if(409!==e.status)throw new Error(i.message||"Failed to submit application");D(!0)}}catch(e){alert(d("vacancyDetail.applicationForm.error"))}finally{f(!1)}}},children:[a.jsxs("div",{className:o.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_name",children:[d("vacancyDetail.applicationForm.fullName")," *"]}),a.jsx("input",{type:"text",id:"applicant_name",name:"applicant_name",value:C.applicant_name,onChange:B,required:!0,placeholder:d("vacancyDetail.applicationForm.fullNamePlaceholder"),className:w.applicant_name?o.error:""}),w.applicant_name&&a.jsx("span",{className:o.errorText,children:w.applicant_name})]}),a.jsxs("div",{className:o.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_phone",children:[d("vacancyDetail.applicationForm.phone")," *"]}),a.jsxs("div",{className:`${o.phoneInputContainer} ${w.applicant_phone?o.error:""}`,children:[a.jsxs("div",{className:o.countryFlag,children:[a.jsx("img",{src:"/static/lang/he.svg",alt:"Israel",className:o.flagIcon}),a.jsx("span",{className:o.dropdownArrow,children:"▼"})]}),a.jsx("input",{type:"tel",id:"applicant_phone",name:"applicant_phone",value:C.applicant_phone,onChange:B,required:!0,placeholder:d("vacancyDetail.applicationForm.phonePlaceholder")})]}),w.applicant_phone&&a.jsx("span",{className:o.errorText,children:w.applicant_phone})]}),a.jsxs("div",{className:o.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_email",children:[d("vacancyDetail.applicationForm.email")," *"]}),a.jsx("input",{type:"email",id:"applicant_email",name:"applicant_email",value:C.applicant_email,onChange:B,required:!0,placeholder:d("vacancyDetail.applicationForm.emailPlaceholder"),className:w.applicant_email?o.error:""}),w.applicant_email&&a.jsx("span",{className:o.errorText,children:w.applicant_email})]}),a.jsxs("div",{className:o.formGroup,children:[a.jsxs("label",{htmlFor:"applicant_city",children:[d("vacancyDetail.applicationForm.city")," *"]}),a.jsx("input",{type:"text",id:"applicant_city",name:"applicant_city",value:C.applicant_city,onChange:B,required:!0,placeholder:d("vacancyDetail.applicationForm.cityPlaceholder"),className:w.applicant_city?o.error:""}),w.applicant_city&&a.jsx("span",{className:o.errorText,children:w.applicant_city})]}),a.jsxs("div",{className:o.formGroup,children:[a.jsx("label",{htmlFor:"expected_salary",children:d("vacancyDetail.applicationForm.expectedSalary")}),a.jsxs("div",{className:`${o.salaryInputContainer} ${w.expected_salary?o.error:""}`,children:[a.jsx("input",{type:"text",id:"expected_salary",name:"expected_salary",value:C.expected_salary,onChange:B,placeholder:d("vacancyDetail.applicationForm.expectedSalaryPlaceholder")}),a.jsx("span",{className:o.currencySymbol,children:"₪"})]}),w.expected_salary&&a.jsx("span",{className:o.errorText,children:w.expected_salary})]}),a.jsxs("div",{className:o.formGroup,children:[a.jsx("label",{htmlFor:"portfolio_url",children:d("vacancyDetail.applicationForm.portfolioLink")}),a.jsx("input",{type:"url",id:"portfolio_url",name:"portfolio_url",value:C.portfolio_url,onChange:B,placeholder:d("vacancyDetail.applicationForm.portfolioLinkPlaceholder")})]}),a.jsxs("div",{className:o.formGroup,children:[a.jsxs("label",{htmlFor:"resume",children:[d("vacancyDetail.applicationForm.uploadResume")," *"]}),a.jsxs("div",{className:`${o.fileUpload} ${L?o.dragActive:""} ${w.resume?o.error:""}`,onDragEnter:S,onDragLeave:S,onDragOver:S,onDrop:a=>{if(a.preventDefault(),a.stopPropagation(),T(!1),a.dataTransfer.files&&a.dataTransfer.files[0]){const e=a.dataTransfer.files[0];M(e)}},children:[a.jsx("input",{type:"file",id:"resume",name:"resume",onChange:a=>{a.target.files&&a.target.files[0]&&M(a.target.files[0])},accept:".pdf,.doc,.docx",style:{display:"none"}}),a.jsx("label",{htmlFor:"resume",className:o.fileUploadLabel,children:C.resume?a.jsx("span",{className:o.fileName,children:C.resume.name}):a.jsxs("div",{className:o.uploadContent,children:[a.jsx("div",{className:o.uploadIcon,children:"⬆"}),a.jsx("p",{children:d("vacancyDetail.applicationForm.uploadResumeText")})]})})]}),a.jsx("small",{className:o.fileHelp,children:d("vacancyDetail.applicationForm.allowedFiles")}),w.resume&&a.jsx("span",{className:o.errorText,children:w.resume})]}),a.jsxs("div",{className:o.formGroup,children:[a.jsx("label",{htmlFor:"cover_letter",children:d("vacancyDetail.applicationForm.coverLetter")}),a.jsx("textarea",{id:"cover_letter",name:"cover_letter",value:C.cover_letter,onChange:B,rows:4,placeholder:d("vacancyDetail.applicationForm.coverLetterPlaceholder"),className:w.cover_letter?o.error:""}),w.cover_letter&&a.jsx("span",{className:o.errorText,children:w.cover_letter})]}),a.jsx("button",{type:"submit",className:o.submitButton,disabled:j,children:d(j?"vacancyDetail.applicationForm.submitting":"vacancyDetail.applicationForm.submit")})]})]})})]})]})})});var A,H};export{p as VacancyDetail};
