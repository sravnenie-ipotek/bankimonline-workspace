import{c as me,a as b,j as e,r as v,u as j,b as P,w as D,i as o,f as I,x as F,y as he,R as H,z as ge,A as _e,D as pe,E as xe,F as je,G as ye,H as fe,I as we,J as be,K as G,M as J,P as Fe,Q as Se,S as Oe}from"./index-8c325235.js";import{b as M,E as N,D as S,c as Y,d as w,e as c,F as A,f as k,a as T,g as K,T as Q,L as Pe}from"./index-9bc675d4.js";import{P as ve}from"./ProgressBar-0e664a1a.js";import{V as Ie}from"./VideoPoster-f7235551.js";import{S as W,a as Me,L as Be,U as Ee,A as Ce,F as qe,B as De,b as Ne,P as Ye,c as Ae,d as ke,e as Te,O as Ve}from"./SourceOfIncomeModal-bd7df346.js";import{M as Re,U as O,a as $e,c as X,A as E,b as ze,d as Le,O as We,e as Z,g as z}from"./componentsByIncomeSource-e23d9c96.js";import{c as L,a as Ue,I as He}from"./IncreasePayment-042dfccc.js";import{R as p,C as d,F as V,a as R,b as Ge,D as C,c as U}from"./Calendar-665a9561.js";import{R as Je,I as Ke,N as Qe,B as Xe,E as Ze,A as et,C as tt,T as at,a as rt,b as nt,H as ot,M as it,c as st,P as lt}from"./Taxes-a24fcfb3.js";import{F as ct}from"./FamilyStatus-f8572360.js";import"./ShieldCheckIcon-2e6671e5.js";const dt="_image_1435f_1",ut={image:dt,"inner-div":"_inner-div_1435f_8","bold-text":"_bold-text_1435f_16"},q=me.bind(ut),mt=()=>{const{t,i18n:s}=b();s.language=s.language.split("-")[0];const{values:a}=M(),l=a.initialFee.toLocaleString("en-US"),i=Math.trunc(a.initialFee/a.priceOfEstate*100);return e.jsxs(Re,{style:{marginTop:"2px"},children:[e.jsx("span",{className:q("margin-sides"),children:t("calc_mortrage_subtext_1")}),e.jsxs("b",{className:q("bold-text"),children:[l," ₪"]}),e.jsx("br",{}),e.jsx("span",{className:q("margin-sides"),children:t("calc_mortrage_subtext_3")}),e.jsxs("b",{className:q("bold-text"),children:[i===1/0?0:i," %"]})]})};function ht(){const[t,s]=v.useState(51130),[a,l]=v.useState(2654),{t:i,i18n:h}=b();h.language=h.language.split("-")[0];const{setFieldValue:u,values:n,errors:g}=M(),x=j(_=>_.activeField),f=P(),y=_=>{f(D("period")),u("period",_)},m=_=>{f(D("monthlyPayment")),u("monthlyPayment",_)};return v.useEffect(()=>{if(x==="period"){const _=L(n.priceOfEstate,n.initialFee,n.period);Number.isNaN(_)||u("monthlyPayment",_)}else{const _=Ue(n.priceOfEstate,n.initialFee,n.monthlyPayment);Number.isNaN(_)||u("period",_)}},[x,u,n.initialFee,n.monthlyPayment,n.period,n.priceOfEstate]),v.useLayoutEffect(()=>{const _=L(n.priceOfEstate,n.initialFee,4),$=L(n.priceOfEstate,n.initialFee,30);Number.isNaN(_)||s(_),_===0&&s(1),Number.isNaN(_)||l($)},[n.initialFee,n.priceOfEstate]),e.jsxs(p,{children:[e.jsxs(d,{children:[e.jsx(W,{disableCurrency:!0,unitsMax:i("calculate_mortgage_period_units_max"),unitsMin:i("calculate_mortgage_period_units_min"),value:n.period,name:"Period",min:4,max:30,error:g.period,title:i("calculate_mortgage_period"),handleChange:y}),g.period&&e.jsx(N,{error:g.period})]}),e.jsxs(d,{children:[e.jsx(W,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:a,max:t,error:g.monthlyPayment,title:i("calculate_mortgage_initial_payment"),handleChange:m,value:n.monthlyPayment}),e.jsx(He,{}),g.monthlyPayment&&e.jsx(N,{error:g.monthlyPayment})]}),e.jsx(d,{})]})}const gt=()=>{const{t,i18n:s}=b();s.language=s.language.split("-")[0];const a=P(),l=[{value:"1",label:t("calculate_mortgage_when_options_1")},{value:"2",label:t("calculate_mortgage_when_options_2")},{value:"3",label:t("calculate_mortgage_when_options_3")},{value:"4",label:t("calculate_mortgage_when_options_4")}],i=[{value:"1",label:t("calculate_mortgage_city_1")},{value:"2",label:t("calculate_mortgage_city_2")},{value:"3",label:t("calculate_mortgage_city_3")}],h=[{value:"1",label:t("calculate_mortgage_type_options_1")},{value:"2",label:t("calculate_mortgage_type_options_2")},{value:"3",label:t("calculate_mortgage_type_options_3")},{value:"4",label:t("calculate_mortgage_type_options_4")}],u=[{value:"1",label:t("calculate_mortgage_first_options_1")},{value:"2",label:t("calculate_mortgage_first_options_2")},{value:"3",label:t("calculate_mortgage_first_options_3")}],{setFieldValue:n,values:g,errors:x,touched:f,setFieldTouched:y}=M();return e.jsx(e.Fragment,{children:e.jsxs(V,{children:[e.jsx(R,{title:t("calculate_mortgage_title")}),e.jsxs(p,{children:[e.jsxs(d,{children:[e.jsx(Ge,{handleChange:m=>{a(D("period")),n("priceOfEstate",m)},name:"PriceOfEstate",title:t("calculate_mortgage_price"),value:g.priceOfEstate,placeholder:"1,000,000",error:x.priceOfEstate}),x.priceOfEstate&&e.jsx(N,{error:x.priceOfEstate})]}),e.jsx(d,{children:e.jsx(C,{title:t("calculate_mortgage_city"),data:i,placeholder:t("city"),value:g.cityWhereYouBuy,onChange:m=>n("cityWhereYouBuy",m),onBlur:()=>y("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:t("search"),nothingFoundText:t("nothing_found"),error:f.cityWhereYouBuy&&x.cityWhereYouBuy})}),e.jsx(d,{children:e.jsx(C,{title:t("calculate_mortgage_when"),data:l,placeholder:t("calculate_mortgage_when_options_ph"),value:g.whenDoYouNeedMoney,onChange:m=>n("whenDoYouNeedMoney",m),onBlur:()=>y("whenDoYouNeedMoney",!0),error:f.whenDoYouNeedMoney&&x.whenDoYouNeedMoney})})]}),e.jsxs(p,{children:[e.jsxs(d,{children:[e.jsx(W,{name:"InitialFee",value:g.initialFee,min:0,max:String(g.priceOfEstate)===""||g.priceOfEstate===0?1:g.priceOfEstate,title:t("calculate_mortgage_initial_fee"),handleChange:m=>{a(D("period")),n("initialFee",m)},tooltip:t("initial_payment_tooltip"),error:x.initialFee,disableRangeValues:!0}),e.jsx(mt,{}),x.initialFee&&e.jsx(N,{error:x.initialFee})]}),e.jsx(d,{children:e.jsx(C,{title:t("calculate_mortgage_type"),data:h,placeholder:t("calculate_mortgage_type_ph"),value:g.typeSelect,onChange:m=>n("typeSelect",m),onBlur:()=>y("typeSelect",!0),error:f.typeSelect&&x.typeSelect})}),e.jsx(d,{children:e.jsx(C,{title:t("calculate_mortgage_first"),data:u,placeholder:t("calculate_mortgage_first_ph"),value:g.willBeYourFirst,onChange:m=>n("willBeYourFirst",m),onBlur:()=>y("willBeYourFirst",!0),error:f.willBeYourFirst&&x.willBeYourFirst})})]}),e.jsx(S,{}),e.jsx(ht,{})]})})},_t=Y().shape({priceOfEstate:w().max(1e7,o.t("error_max_price")).required(o.t("error_required_to_fill_out")),cityWhereYouBuy:c().required(o.t("error_select_answer")),whenDoYouNeedMoney:c().required(o.t("error_select_answer")),initialFee:w().test("initial-payment-percentage",o.t("error_initial_fee"),function(t){const s=this.parent.priceOfEstate||0;return pt(s,t)}).required(o.t("error_required_to_fill_out")),typeSelect:c().required(o.t("error_select_answer")),willBeYourFirst:c().required(o.t("error_select_answer")),period:w().min(4,o.t("error_min_period")).max(30,o.t("error_max_period")).required(o.t("error_required_to_fill_out")),monthlyPayment:w().min(2654,"Размер ежемесячного платежа не может быть меньше 2,654 иначе срок будет больше 30 лет").required(o.t("error_required_to_fill_out"))});function pt(t,s){const a=t*.25;return typeof s>"u"?!1:s>=a}const xt=()=>{const{t,i18n:s}=b();s.language=s.language.split("-")[0];const a=P(),l=I(),i=j(n=>n.mortgage),h=j(n=>n.login.isLogin),u={priceOfEstate:i.priceOfEstate||1e6,cityWhereYouBuy:i.cityWhereYouBuy||"",whenDoYouNeedMoney:i.whenDoYouNeedMoney||"",initialFee:i.initialFee||5e5,typeSelect:i.typeSelect||"",willBeYourFirst:i.willBeYourFirst||"",period:i.period||4,monthlyPayment:i.monthlyPayment||11514};return e.jsxs(e.Fragment,{children:[e.jsx(A,{initialValues:u,validationSchema:_t,validateOnMount:!0,onSubmit:n=>{a(F(n)),h?l("/services/calculate-mortgage/2"):a(he())},children:e.jsxs(k,{children:[e.jsxs(T,{children:[e.jsx(Ie,{title:t("video_calculate_mortgage_title"),text:t("show_offers"),size:"small"}),e.jsx(gt,{})]}),e.jsx(Me,{})]})}),e.jsx(Be,{})]})},jt=()=>{const{t,i18n:s}=b();s.language=s.language.split("-")[0];const a=j(i=>i.login.loginData),l=j(i=>i.mortgage);return e.jsxs(V,{children:[e.jsx(R,{title:t("calculate_mortgage_final")}),e.jsx(Ee,{cost:l.priceOfEstate,initialPayment:l.initialFee,period:l.period,nameSurname:a==null?void 0:a.nameSurname,phoneNumber:a==null?void 0:a.phoneNumber}),e.jsx(Ce,{text:t("calculate_mortgage_warning")}),e.jsx(p,{children:e.jsx(qe,{})}),e.jsx(De,{})]})},yt={},ft=Y().shape({}),wt=()=>e.jsx(A,{initialValues:yt,validationSchema:ft,validateOnMount:!0,onSubmit:()=>{console.log("нажата кнопка")},children:e.jsxs(k,{children:[e.jsx(T,{children:e.jsx(jt,{})}),e.jsx(U,{})]})}),bt=()=>{const{t,i18n:s}=b();s.language=s.language.split("-")[0];const{values:a}=M(),l=j(i=>i.login.loginData);return e.jsx(e.Fragment,{children:e.jsxs(V,{children:[e.jsx(R,{title:t("calculate_mortgage_step2_title")}),e.jsxs(Je,{children:[e.jsx(Ke,{}),e.jsx(O,{name:l==null?void 0:l.nameSurname,phone:l==null?void 0:l.phoneNumber})]}),e.jsxs(p,{children:[e.jsx(Qe,{}),e.jsx(Xe,{}),e.jsx(Ze,{})]}),e.jsxs(p,{children:[e.jsxs(d,{style:{gap:"2rem"},children:[e.jsx(et,{}),a.additionalCitizenships==="yes"&&e.jsx(tt,{})]}),e.jsxs(d,{style:{gap:"2rem"},children:[e.jsx(at,{}),a.taxes==="yes"&&e.jsx(rt,{})]}),e.jsxs(d,{style:{gap:"2rem"},children:[e.jsx(nt,{}),a.childrens==="yes"&&e.jsx(ot,{})]})]}),e.jsx(S,{}),e.jsxs(p,{children:[e.jsx(it,{}),e.jsx(st,{}),e.jsx(lt,{})]}),e.jsx(S,{}),e.jsxs(p,{children:[e.jsx(Ne,{}),e.jsx(d,{}),e.jsx(d,{})]}),e.jsx(S,{}),e.jsxs(p,{children:[e.jsx(ct,{}),e.jsx(d,{children:a.familyStatus==="option_2"&&e.jsx(Ye,{})}),e.jsx(d,{children:a.partnerPayMortgage==="yes"&&a.familyStatus==="option_2"&&e.jsx(Ae,{})})]})]})})},Ft=Y().shape({nameSurname:c().required(o.t("error_name_surname")),birthday:c().required(o.t("error_date")),education:c().required(o.t("error_select_answer")),additionalCitizenships:c().required(o.t("error_select_answer")),citizenshipsDropdown:K().when("additionalCitizenships",{is:"yes",then:t=>t.min(1,o.t("error_select_answer")),otherwise:t=>t.min(0)}),taxes:c().required(o.t("error_select_answer")),countriesPayTaxes:K().when("taxes",{is:"yes",then:t=>t.min(1,o.t("error_select_answer")),otherwise:t=>t.min(0)}),childrens:c().required(o.t("error_select_answer")),howMuchChildrens:w().required(o.t("error_fill_field")),medicalInsurance:c().required(o.t("error_select_answer")),isForeigner:c().required(o.t("error_select_answer")),publicPerson:c().required(o.t("error_select_answer")),borrowers:w().min(1,o.t("error_quantity_borrowers")).required(o.t("error_quantity_borrowers")),familyStatus:c().required(o.t("error_select_answer")),partnerPayMortgage:c().when("familyStatus",{is:o.t("calculate_mortgage_family_status_option_2"),then:t=>t.required(o.t("error_select_answer")),otherwise:t=>t.notRequired()})}),St=()=>{const t=P(),s=I(),a=j(h=>h.mortgage),i={nameSurname:j(h=>h.login.loginData).nameSurname||a.nameSurname||"",birthday:a.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:a.education||"",additionalCitizenships:a.additionalCitizenships||null,citizenshipsDropdown:a.citizenshipsDropdown||[],taxes:a.taxes||null,countriesPayTaxes:a.countriesPayTaxes||[],childrens:a.childrens||null,howMuchChildrens:a.howMuchChildrens||1,medicalInsurance:a.medicalInsurance||null,isForeigner:a.isForeigner||null,publicPerson:a.publicPerson||null,borrowers:a.borrowers||null,familyStatus:a.familyStatus||"",partnerPayMortgage:a.partnerPayMortgage||null,addPartner:a.addPartner||""};return e.jsx(A,{initialValues:i,validationSchema:Ft,validateOnMount:!0,onSubmit:h=>{t(F(h)),s("/services/calculate-mortgage/3")},children:e.jsxs(k,{children:[e.jsx(T,{children:e.jsx(bt,{})}),e.jsx(U,{})]})})},Ot=()=>{const{t,i18n:s}=b();s.language=s.language.split("-")[0];const a=I(),{values:l}=M(),{mainSourceOfIncome:i,additionalIncome:h,obligation:u}=l,n=P(),g=j(r=>r.borrowers.sourceOfIncomeModal),x=j(r=>r.borrowers.additionalIncomeModal),f=j(r=>r.borrowers.obligationModal),y=j(r=>r.otherBorrowers.otherBorrowers),m=j(r=>r.login.loginData),_=()=>{n(F(l)),n(ge())},$=()=>{n(F(l)),n(_e())},ee=()=>{n(F(l)),n(pe())},te=r=>{n(xe({id:r}))},ae=r=>{n(je({id:r}))},re=r=>{n(ye({id:r}))},ne=r=>{n(fe(r))},oe=r=>{n(we(r))},ie=r=>{n(be(r))},se=r=>{n(G(r));const de=!y.some(ue=>ue.id===r)?z(y):r;a({pathname:"/services/other-borrowers/1/",search:J({pageId:String(de)}).toString()})},le=()=>{n(G(z(y))),n(F(l)),a({pathname:"/services/other-borrowers/1/",search:J({pageId:z(y).toString()}).toString()})},ce=r=>{n(Fe(r))};return e.jsxs(V,{children:[e.jsx(R,{title:t("calculate_mortgage_step3_title")}),e.jsx(O,{name:m==null?void 0:m.nameSurname,phone:m==null?void 0:m.phoneNumber}),e.jsxs(p,{children:[e.jsx($e,{}),X[i]&&X[i].map((r,B)=>e.jsx(H.Fragment,{children:r},B))]}),e.jsx(p,{children:e.jsx(d,{children:i&&e.jsxs(e.Fragment,{children:[g.map(r=>e.jsx(O,{onEdit:()=>ne(r.id),onDelete:()=>te(r.id),enableEdit:!0,name:`${t("source_of_income")}${r.id+1}`},r.id)),e.jsx(E,{onClick:_,color:"#FBE54D",value:t("add_place_to_work"),variant:"none"})]})})}),e.jsx(S,{}),e.jsxs(p,{children:[e.jsx(ze,{}),h&&h!=="option_1"&&e.jsx(Le,{}),e.jsx(d,{})]}),h&&h!=="option_1"&&e.jsx(p,{children:e.jsxs(d,{children:[x.map(r=>e.jsx(O,{onEdit:()=>oe(r.id),onDelete:()=>ae(r.id),enableEdit:!0,name:`${t("additional_source_of_income")}${r.id+1}`},r.id)),e.jsx(E,{onClick:$,color:"#FBE54D",value:t("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(S,{}),e.jsxs(p,{children:[e.jsx(We,{}),Z[u]&&Z[u].map((r,B)=>e.jsx(H.Fragment,{children:r},B)),e.jsx(d,{})]}),u&&u!=="option_1"&&e.jsx(p,{children:e.jsxs(d,{children:[f.map(r=>e.jsx(O,{onEdit:()=>ie(r.id),onDelete:()=>re(r.id),enableEdit:!0,name:`${t("obligation")}${r.id+1}`},r.id)),e.jsx(E,{onClick:ee,color:"#FBE54D",value:t("add_obligation"),variant:"none"})]})}),e.jsx(S,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[y&&e.jsx(Q,{title:t("borrower")}),e.jsxs(p,{style:{columnGap:"2rem"},children:[y.map(r=>e.jsx(d,{children:e.jsx(O,{onEdit:()=>se(r.id),onDelete:()=>ce(r.id),enableEdit:!0,name:r.nameSurname},r.id)},r.id)),!y&&e.jsx(Q,{title:t("borrower")}),e.jsx(d,{children:e.jsx(E,{value:t("add_borrower"),onClick:le,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(d,{})]})]})]})},Pt=Y().shape({mainSourceOfIncome:c().required(o.t("error_select_answer")),monthlyIncome:w().required(o.t("error_fill_field")),startDate:c().required(o.t("error_date")),fieldOfActivity:c().when("mainSourceOfIncome",{is:t=>t!=null&&t!=="",then:t=>t.required(o.t("error_select_field_of_activity")),otherwise:t=>t.notRequired()}),profession:c().required(o.t("error_fill_field")),companyName:c().required(o.t("error_fill_field")),additionalIncome:c().required(o.t("error_select_one_of_the_options")),additionalIncomeAmount:w().when("additionalIncome",{is:t=>t!=null&&t!==""&&t==="no",then:t=>t.required(o.t("error_fill_field")),otherwise:t=>t.notRequired()}),obligation:c().required(o.t("error_select_one_of_the_options")),bank:c().when("obligation",{is:t=>t!=null&&t!==""&&t==="no",then:t=>t.required(o.t("error_select_bank")),otherwise:t=>t.notRequired()}),monthlyPaymentForAnotherBank:w().when("obligation",{is:t=>t!=null&&t!==""&&t==="no",then:t=>t.required(o.t("error_fill_field")),otherwise:t=>t.notRequired()}),endDate:c().required(o.t("error_date"))}),vt=()=>{const t=P(),s=I(),a=j(i=>i.mortgage),l={mainSourceOfIncome:a.mainSourceOfIncome||"",monthlyIncome:a.monthlyIncome||null,startDate:a.startDate||new Date().getTime(),fieldOfActivity:a.fieldOfActivity||"",profession:a.profession||"",companyName:a.companyName||"",additionalIncome:a.additionalIncome||"",additionalIncomeAmount:a.additionalIncomeAmount||null,obligation:a.obligation||"",bank:a.bank||"",monthlyPaymentForAnotherBank:a.monthlyPaymentForAnotherBank||null,endDate:a.endDate||new Date().getTime(),amountIncomeCurrentYear:a.amountIncomeCurrentYear||null,noIncome:a.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(A,{initialValues:l,validationSchema:Pt,validateOnMount:!0,onSubmit:i=>{t(F(i)),s("/services/calculate-mortgage/4")},children:e.jsxs(k,{children:[e.jsx(T,{children:e.jsx(Ot,{})}),e.jsx(U,{})]})}),e.jsx(ke,{}),e.jsx(Te,{}),e.jsx(Ve,{})]})},It=()=>{const{stepNumber:t}=Se(),{t:s,i18n:a}=b(),l=I();if(a.language=a.language.split("-")[0],!j(n=>n.login.isLogin)&&t!=="1"){l("/services/calculate-mortgage/1");return}const h=[s("calculate_mortgage_calculator"),s("calculate_mortgage_anketa"),s("calculate_mortgage_income"),s("calculate_mortgage_programs")];let u;switch(t){case"1":u=e.jsx(xt,{});break;case"2":u=e.jsx(St,{});break;case"3":u=e.jsx(vt,{});break;case"4":u=e.jsx(wt,{});break;default:u=e.jsx(Oe,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[t!=="4"&&e.jsx(ve,{progress:t,data:h}),e.jsx(v.Suspense,{fallback:e.jsx(Pe,{}),children:u})]})},Vt=It;export{Vt as CalculateMortgage};
