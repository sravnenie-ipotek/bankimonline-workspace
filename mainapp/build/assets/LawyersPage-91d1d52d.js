import{j as e}from"./ui-vendor-99260b86.js";import{c as a}from"./index-be42ab03.js";import{f as s,u as r,r as t}from"./react-vendor-21ec1e1c.js";import{F as l,b as o,a as n,c as i,h as c,u as m}from"./form-vendor-6d56d196.js";import{u as d,i as u}from"./i18n-vendor-18addd5f.js";import{b as h,E as x}from"./index-73dd41d9.js";import"./state-vendor-069efcec.js";import"./utils-vendor-8f040048.js";import"./components-vendor-62dc47c0.js";const p={"lawyers-form":"_lawyers-form_1wyx5_2",rtl:"_rtl_1wyx5_7","form-container":"_form-container_1wyx5_19","form-header":"_form-header_1wyx5_34",logo:"_logo_1wyx5_43","logo-text":"_logo-text_1wyx5_48","header-img":"_header-img_1wyx5_63","form-content":"_form-content_1wyx5_92","form-title":"_form-title_1wyx5_101","application-form":"_application-form_1wyx5_116","form-section":"_form-section_1wyx5_120","section-title":"_section-title_1wyx5_127","form-row":"_form-row_1wyx5_142","form-group":"_form-group_1wyx5_158","full-width":"_full-width_1wyx5_163","radio-group":"_radio-group_1wyx5_166","form-label":"_form-label_1wyx5_170","form-input":"_form-input_1wyx5_178",error:"_error_1wyx5_197","form-select":"_form-select_1wyx5_201","form-textarea":"_form-textarea_1wyx5_226",checkbox:"_checkbox_1wyx5_251","phone-input":"_phone-input_1wyx5_262","country-code":"_country-code_1wyx5_267","radio-options":"_radio-options_1wyx5_284","radio-option":"_radio-option_1wyx5_284","checkbox-label":"_checkbox-label_1wyx5_308","checkbox-text":"_checkbox-text_1wyx5_323","terms-link":"_terms-link_1wyx5_329","form-actions":"_form-actions_1wyx5_337","form-button":"_form-button_1wyx5_352","form-button--primary":"_form-button--primary_1wyx5_369","form-button--secondary":"_form-button--secondary_1wyx5_384","btn-primary":"_btn-primary_1wyx5_396","btn-secondary":"_btn-secondary_1wyx5_397","loading-state":"_loading-state_1wyx5_481"},f=a.bind(p),_={contactName:"",phone:"",email:"",city:"",desiredRegion:"",employmentType:"",monthlyIncome:"",workExperience:"",clientLitigation:"",debtLitigation:"",comments:"",termsAccepted:!1,source:""},v=({cities:a,regions:s,professions:r,onBack:t})=>{d();const{values:l,setFieldValue:o,errors:n,setFieldTouched:i,touched:c}=m(),u=(e,a)=>{o(e,a)},h=e=>{i(e,!0)};return e.jsxs("div",{className:f("form-content"),children:[e.jsxs("div",{className:f("form-title"),children:[e.jsx("h1",{children:"טופס הרשמה לעורכי דין ויועצים משפטיים"}),e.jsx("p",{className:f("form-subtitle"),children:'הצטרפו לרשת המובילה של מתווכי נדל"ן ומשפטנים מקצועיים'})]}),e.jsxs("div",{className:f("lawyer-form"),children:[e.jsxs("div",{className:f("form-section"),children:[e.jsx("h2",{className:f("section-title"),children:"פרטים אישיים"}),e.jsxs("div",{className:f("form-row"),children:[e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"שם איש הקשר המוסמך"}),e.jsx("input",{type:"text",className:f("form-input",{error:c.contactName&&n.contactName}),placeholder:"הזינו שם מלא",value:l.contactName,onChange:e=>u("contactName",e.target.value),onBlur:()=>h("contactName")}),c.contactName&&n.contactName&&e.jsx(x,{error:n.contactName})]}),e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"טלפון"}),e.jsx("input",{type:"tel",className:f("form-input",{error:c.phone&&n.phone}),placeholder:"050-123-4567",value:l.phone,onChange:e=>u("phone",e.target.value),onBlur:()=>h("phone")}),c.phone&&n.phone&&e.jsx(x,{error:n.phone})]})]}),e.jsxs("div",{className:f("form-row"),children:[e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:'דוא"ל'}),e.jsx("input",{type:"email",className:f("form-input",{error:c.email&&n.email}),placeholder:"example@email.com",value:l.email,onChange:e=>u("email",e.target.value),onBlur:()=>h("email")}),c.email&&n.email&&e.jsx(x,{error:n.email})]}),e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"עיר מגורים"}),e.jsxs("select",{className:f("form-select"),value:l.city,onChange:e=>u("city",e.target.value),onBlur:()=>h("city"),children:[e.jsx("option",{value:"",children:"בחרו עיר"}),a.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})]}),e.jsx("div",{className:f("form-row"),children:e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"אזור פעילות מועדף לשירותים משפטיים"}),e.jsxs("select",{className:f("form-select"),value:l.desiredRegion,onChange:e=>u("desiredRegion",e.target.value),onBlur:()=>h("desiredRegion"),children:[e.jsx("option",{value:"",children:"בחרו אזור"}),s.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})})]}),e.jsxs("div",{className:f("form-section"),children:[e.jsx("h2",{className:f("section-title"),children:"פרטים מקצועיים"}),e.jsxs("div",{className:f("form-row"),children:[e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"סטטוס מקצועי"}),e.jsxs("select",{className:f("form-select"),value:l.employmentType,onChange:e=>u("employmentType",e.target.value),onBlur:()=>h("employmentType"),children:[e.jsx("option",{value:"",children:"בחרו סטטוס"}),r.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"הכנסה חודשית ממוצעת"}),e.jsx("input",{type:"text",className:f("form-input"),placeholder:"25,000 ₪",value:l.monthlyIncome,onChange:e=>u("monthlyIncome",e.target.value),onBlur:()=>h("monthlyIncome")})]})]}),e.jsx("div",{className:f("form-row"),children:e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"שנות ניסיון בתחום המשפטי"}),e.jsxs("select",{className:f("form-select"),value:l.workExperience,onChange:e=>u("workExperience",e.target.value),onBlur:()=>h("workExperience"),children:[e.jsx("option",{value:"",children:"בחרו מספר שנים"}),e.jsx("option",{value:"0-2",children:"0-2 שנים"}),e.jsx("option",{value:"3-5",children:"3-5 שנים"}),e.jsx("option",{value:"6-10",children:"6-10 שנים"}),e.jsx("option",{value:"11-15",children:"11-15 שנים"}),e.jsx("option",{value:"16+",children:"16+ שנים"})]})]})})]}),e.jsxs("div",{className:f("form-section"),children:[e.jsx("h2",{className:f("section-title"),children:"מידע נוסף"}),e.jsxs("div",{className:f("form-row"),children:[e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"האם יש לכם ניסיון בייצוג לקוחות בהליכים משפטיים?"}),e.jsxs("select",{className:f("form-select"),value:l.clientLitigation,onChange:e=>u("clientLitigation",e.target.value),onBlur:()=>h("clientLitigation"),children:[e.jsx("option",{value:"",children:"בחרו תשובה"}),e.jsx("option",{value:"yes",children:"כן, ניסיון רב"}),e.jsx("option",{value:"some",children:"כן, ניסיון מוגבל"}),e.jsx("option",{value:"no",children:"לא"})]})]}),e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"האם יש לכם ניסיון בהליכי גביית חובות?"}),e.jsxs("select",{className:f("form-select"),value:l.debtLitigation,onChange:e=>u("debtLitigation",e.target.value),onBlur:()=>h("debtLitigation"),children:[e.jsx("option",{value:"",children:"בחרו תשובה"}),e.jsx("option",{value:"yes",children:"כן, ניסיון רב"}),e.jsx("option",{value:"some",children:"כן, ניסיון מוגבל"}),e.jsx("option",{value:"no",children:"לא"})]})]})]}),e.jsxs("div",{className:f("form-group"),children:[e.jsx("label",{className:f("form-label"),children:"הערות נוספות"}),e.jsx("textarea",{className:f("form-textarea"),placeholder:"ספרו לנו עוד על הרקע המקצועי שלכם ועל התחומים המעניינים אתכם...",rows:4,value:l.comments,onChange:e=>u("comments",e.target.value),onBlur:()=>h("comments")})]})]}),e.jsxs("div",{className:f("form-section"),children:[e.jsxs("div",{className:f("terms-section"),children:[e.jsxs("label",{className:f("checkbox-label"),children:[e.jsx("input",{type:"checkbox",className:f("checkbox",{error:c.termsAccepted&&n.termsAccepted}),checked:l.termsAccepted,onChange:e=>u("termsAccepted",e.target.checked),onBlur:()=>h("termsAccepted")}),e.jsx("span",{className:f("checkbox-text"),children:"אני מסכים/ה לתנאי השימוש ולמדיניות הפרטיות ומאשר/ת קבלת עדכונים מטעם TechRealt"})]}),c.termsAccepted&&n.termsAccepted&&e.jsx(x,{error:n.termsAccepted})]}),e.jsxs("div",{className:f("form-actions"),children:[e.jsx("button",{type:"button",className:f("form-button","form-button--secondary"),onClick:t,children:"חזרה"}),e.jsx("button",{type:"submit",className:f("form-button","form-button--primary"),disabled:!(()=>{const e=l.contactName.trim().length>=2,a=/^0[5-9][0-9]{8}$|^[+]?972[5-9][0-9]{8}$/.test(l.phone.replace(/[-\s]/g,"")),s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email.trim()),r=l.termsAccepted;return e&&a&&s&&r})(),children:"שליחת הטופס"})]})]})]})]})},j=()=>{const{i18n:a}=d(),m=s(),x=r(),[p,j]=t.useState([]),[g,y]=t.useState([]),[b,N]=t.useState([]),[w,k]=t.useState(!0),[S,B]=t.useState("");t.useEffect(()=>{(()=>{const e=new URLSearchParams(x.search).get("source");if(e)return void B(e);const a=x.state;if(null==a?void 0:a.source)return void B(a.source);const s=document.referrer;if(s)try{const e=new URL(s);return void(e.pathname.includes("/tenders-for-lawyers")?B("tenders-for-lawyers-page"):e.pathname.includes("/temporary-franchise")?B("temporary-franchise-page"):B("external-referrer"))}catch(t){}const r=sessionStorage.getItem("lawyerFormSource");B(r||"direct-navigation")})()},[x]),t.useEffect(()=>{S&&sessionStorage.setItem("lawyerFormSource",S)},[S]),t.useEffect(()=>{(async()=>{try{k(!0);const e=await fetch(`/api/get-cities?lang=${a.language}`);if(e.ok){const a=await e.json();if("success"===a.status){const e=a.data.map(e=>({value:e.value||e.key,label:e.name}));j(e)}}const s=await fetch(`/api/get-regions?lang=${a.language}`);if(s.ok){const e=await s.json();if("success"===e.status){const a=e.data.map(e=>({value:e.key,label:e.name}));y(a)}}const r=await fetch(`/api/get-professions?lang=${a.language}`);if(r.ok){const e=await r.json();if("success"===e.status){const a=e.data.map(e=>({value:e.key,label:e.name}));N(a)}}}catch(e){j([{value:"tel_aviv",label:"תל אביב"},{value:"jerusalem",label:"ירושלים"},{value:"haifa",label:"חיפה"}]),y([{value:"center",label:"מחוז המרכז"},{value:"tel_aviv",label:"מחוז תל אביב"},{value:"jerusalem",label:"מחוז ירושלים"}]),N([{value:"lawyer",label:"עורך דין"},{value:"legal_advisor",label:"יועץ משפטי"},{value:"notary",label:"נוטריון"}])}finally{k(!1)}})()},[a.language]);if(w)return e.jsx("div",{className:f("lawyers-form",{rtl:"he"===a.language}),lang:a.language,children:e.jsx(h,{children:e.jsxs("div",{className:f("form-container"),children:[e.jsx("div",{className:f("form-header"),children:e.jsx("div",{className:f("logo"),children:e.jsx("img",{src:"/static/menu/header.png",alt:"Header",className:f("header-img")})})}),e.jsx("div",{className:f("form-content"),children:e.jsx("div",{className:f("loading-state"),children:"טוען נתונים..."})})]})})});const C={..._,source:S};return e.jsx("div",{className:f("lawyers-form",{rtl:"he"===a.language}),lang:a.language,children:e.jsx(h,{children:e.jsxs("div",{className:f("form-container"),children:[e.jsx("div",{className:f("form-header"),children:e.jsx("div",{className:f("logo"),children:e.jsx("img",{src:"/static/menu/header.png",alt:"Header",className:f("header-img")})})}),e.jsx(l,{initialValues:C,validationSchema:n().shape({contactName:i().min(2,u.t("name_min_length")).required(u.t("name_required")),phone:i().matches(/^0[5-9][0-9]{8}$|^[+]?972[5-9][0-9]{8}$/,u.t("phone_invalid")).required(u.t("phone_required")),email:i().email(u.t("invalid_email")).required(u.t("required_field")),termsAccepted:c().oneOf([!0],u.t("agreement_text_start")+" "+u.t("terms_title")).required(u.t("agreement_text_start")+" "+u.t("terms_title"))}),validateOnMount:!1,onSubmit:async(e,{setSubmitting:a})=>{const s={...e,source:S,submittedAt:(new Date).toISOString(),referrer:document.referrer||"none"};try{await(async e=>{const a=await fetch("/api/lawyers/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to submit lawyer application");return s})(s),m("/lawyer-success")}catch(r){}finally{a(!1)}},children:e.jsx(o,{children:e.jsx(v,{cities:p,regions:g,professions:b,onBack:()=>{m(-1)}})})})]})})})};export{j as default};
