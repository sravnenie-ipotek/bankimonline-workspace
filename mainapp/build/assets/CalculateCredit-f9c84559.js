import{u as f,a as M,j as e,l as ee,E,n as Te,d as be,p as l,o as je,q as Pe,r as Ee,t as ke,v as Ve,w as Ue,x as we,y as Oe,z as Me,A as Ie,B as me,D as qe,F as Ae,N as Be}from"./index-04ca98fa.js";import{r as F,f as I,b as ae,j as pe,k as Le}from"./react-vendor-ede63a09.js";import{a as K,E as Y,D as k,T as re,b as W,A as Ye,L as de}from"./index-4b29ac13.js";import{P as Re}from"./ProgressBar-eedafebe.js";import{u as te,F as G,b as H,a as A,c as d,f as T,g as ue}from"./form-vendor-2c7d84e7.js";import{V as $e}from"./VideoPoster-fb9cf3f9.js";import{S as he,a as ze,M as Ke,U as We,A as Ge,F as He,B as Je,b as Qe,c as Xe,O as Ze}from"./SourceOfIncomeModal-b015de68.js";import{C as u}from"./Column-7dab2442.js";import{D as R}from"./DropdownMenu-d5015576.js";import{F as J}from"./FormContainer-89f7fb0c.js";import{F as ge}from"./FormattedInput-f5f6f17f.js";import{R as N}from"./Row-cfc0a510.js";import{I as ea,c as $}from"./IncreasePayment-908d12a2.js";import{F as Q}from"./FormCaption-14eaeb54.js";import{Y as aa,N as sa,B as ra,E as ia,A as ta,T as la,C as oa,M as na,I as ca,P as ma}from"./Taxes-68eccc8e.js";import{u as V}from"./i18n-vendor-aaeace9f.js";import{D as le}from"./DoubleButtons-af9cae2f.js";import{U as O,A as z}from"./AddButton-8cbb6312.js";import{R as pa}from"./RowTwo-205e4cb4.js";import{B as da,P as ua,A as ha}from"./PartnerPayMortgage-c6971f3f.js";import{C as ga,a as Sa,H as ba}from"./HowMuchChildrens-f3c63c83.js";import{F as va}from"./FamilyStatus-176136ac.js";import{I as _a}from"./Info-612e1a72.js";import{b as w,M as Na,A as fa,a as Fa,O as Ca,d as Da,g as se}from"./componentsByIncomeSource-a806ace2.js";import"./state-vendor-c4e6020a.js";import"./ui-vendor-d73673ed.js";import"./utils-vendor-dcc8b708.js";import"./components-vendor-632ebedf.js";import"./MortgageParameters-c0193817.js";import"./PercentIcon-5e88e86c.js";import"./useDropdownData-7b90036f.js";import"./Control-5756a803.js";import"./Calendar-28ad2043.js";import"./ShieldCheckIcon-026ee23c.js";const xa=()=>{const[a,h]=F.useState(51130),[i,c]=F.useState(2654),[t,n]=F.useState([]),{t:r,i18n:g}=V(),{getContent:o}=K("calculate_credit_1"),j=F.useMemo(()=>[{value:"option_1",label:o("calculate_credit_target_option_1",r("calculate_credit_target_option_1"))},{value:"option_2",label:o("calculate_credit_target_option_2",r("calculate_credit_target_option_2"))},{value:"option_3",label:o("calculate_credit_target_option_3",r("calculate_credit_target_option_3"))},{value:"option_4",label:o("calculate_credit_target_option_4",r("calculate_credit_target_option_4"))},{value:"option_5",label:o("calculate_credit_target_option_5",r("calculate_credit_target_option_5"))},{value:"option_6",label:o("calculate_credit_target_option_6",r("calculate_credit_target_option_6"))}],[o,r]),x=F.useMemo(()=>[{value:"option_1",label:o("calculate_mortgage_when_options_1",r("calculate_mortgage_when_options_1"))},{value:"option_2",label:o("calculate_mortgage_when_options_2",r("calculate_mortgage_when_options_2"))},{value:"option_3",label:o("calculate_mortgage_when_options_3",r("calculate_mortgage_when_options_3"))},{value:"option_4",label:o("calculate_mortgage_when_options_4",r("calculate_mortgage_when_options_4"))}],[o,r]),oe=F.useMemo(()=>[{value:"option_1",label:o("calculate_credit_prolong_option_1",r("calculate_credit_prolong_option_1"))},{value:"option_2",label:o("calculate_credit_prolong_option_2",r("calculate_credit_prolong_option_2"))},{value:"option_3",label:o("calculate_credit_prolong_option_3",r("calculate_credit_prolong_option_3"))},{value:"option_4",label:o("calculate_credit_prolong_option_4",r("calculate_credit_prolong_option_4"))},{value:"option_5",label:o("calculate_credit_prolong_option_5",r("calculate_credit_prolong_option_5"))},{value:"option_6",label:o("calculate_credit_prolong_option_6",r("calculate_credit_prolong_option_6"))},{value:"option_7",label:o("calculate_credit_prolong_option_7",r("calculate_credit_prolong_option_7"))}],[o,r]),{setFieldValue:v,values:S,errors:p,touched:C,setFieldTouched:b}=te(),B=f(m=>m.activeField),q=M();F.useEffect(()=>{(async()=>{try{const P=await(await fetch(`/api/get-cities?lang=${g.language}`)).json();if(P.status==="success"){const Z=P.data.map(L=>({value:L.value,label:L.name}));n(Z)}else console.error("Failed to fetch cities:",P.message)}catch(_){console.error("Error fetching cities:",_)}})()},[g.language]);const X=m=>{q(ee("period")),v("period",m)},y=m=>{q(ee("monthlyPayment")),v("monthlyPayment",m)};return F.useEffect(()=>{(async()=>{try{if(B==="period"){const _=await $.calculateCreditPayment(S.loanAmount,S.period);Number.isNaN(_)||v("monthlyPayment",_)}else{const _=await $.calculateLoanPeriod(S.loanAmount,0,S.monthlyPayment);Number.isNaN(_)||v("period",_)}}catch(_){console.error("❌ Error calculating credit values:",_)}})()},[B,v,S.loanAmount,S.monthlyPayment,S.period]),F.useLayoutEffect(()=>{(async()=>{try{const _=await $.calculateCreditPayment(S.loanAmount,1),P=await $.calculateCreditPayment(S.loanAmount,30);Number.isNaN(_)||h(_),_===0&&h(1),Number.isNaN(P)||c(P)}catch(_){console.error("❌ Error calculating payment limits:",_),h(51130),c(2654)}})()},[S.loanAmount]),e.jsxDEV(e.Fragment,{children:e.jsxDEV(J,{children:[e.jsxDEV(Q,{title:r("sidebar_sub_calculate_credit")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:174,columnNumber:9},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(u,{children:e.jsxDEV(R,{title:o("calculate_why",r("calculate_why")),data:j,placeholder:o("calculate_credit_target_ph",r("calculate_credit_target_ph")),value:S.purposeOfLoan,onChange:m=>v("purposeOfLoan",m),onBlur:()=>b("purposeOfLoan",!0),error:C.purposeOfLoan&&p.purposeOfLoan},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:178,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:177,columnNumber:11},globalThis),e.jsxDEV(u,{children:[e.jsxDEV(ge,{handleChange:m=>{q(ee("period")),v("loanAmount",m)},name:"loanAmount",title:o("calculate_amount",r("calculate_amount")),value:S.loanAmount,placeholder:"1,000,000",error:p.loanAmount},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:189,columnNumber:13},globalThis),p.loanAmount&&e.jsxDEV(Y,{error:p.loanAmount},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:200,columnNumber:35},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:188,columnNumber:11},globalThis),e.jsxDEV(u,{children:e.jsxDEV(R,{title:o("calculate_when",r("calculate_when")),data:x,placeholder:o("calculate_mortgage_when_options_Time",r("calculate_mortgage_when_options_Time")),value:S.whenDoYouNeedMoney,onChange:m=>v("whenDoYouNeedMoney",m),onBlur:()=>b("whenDoYouNeedMoney",!0),error:C.whenDoYouNeedMoney&&p.whenDoYouNeedMoney},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:204,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:203,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:176,columnNumber:9},globalThis),e.jsxDEV(N,{children:e.jsxDEV(u,{children:e.jsxDEV(R,{title:o("calculate_prolong",r("calculate_prolong")),data:oe,placeholder:o("calculate_credit_prolong_ph",r("calculate_credit_prolong_ph")),value:S.loanDeferral,onChange:m=>v("loanDeferral",m),onBlur:()=>b("loanDeferral",!0),error:C.loanDeferral&&p.loanDeferral},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:217,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:216,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:215,columnNumber:9},globalThis),S.purposeOfLoan&&S.purposeOfLoan==="option_2"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:231,columnNumber:13},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(u,{children:[e.jsxDEV(ge,{handleChange:m=>{v("priceOfEstate",m)},name:"PriceOfEstate",title:r("calculate_mortgage_price"),value:S.priceOfEstate,placeholder:"1,000,000",error:p.priceOfEstate},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:234,columnNumber:17},globalThis),p.priceOfEstate&&e.jsxDEV(Y,{error:p.priceOfEstate},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:244,columnNumber:42},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:233,columnNumber:15},globalThis),e.jsxDEV(u,{children:e.jsxDEV(R,{title:r("calculate_mortgage_city"),data:t,placeholder:r("city"),value:S.cityWhereYouBuy,onChange:m=>v("cityWhereYouBuy",m),onBlur:()=>b("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:r("search"),nothingFoundText:r("nothing_found"),error:C.cityWhereYouBuy&&p.cityWhereYouBuy},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:247,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:246,columnNumber:15},globalThis),e.jsxDEV(u,{children:[e.jsxDEV(re,{title:r("have_mortgage_title")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:261,columnNumber:17},globalThis),e.jsxDEV(aa,{value:S.haveMortgage,onChange:m=>v("haveMortgage",m),error:C.haveMortgage&&p.haveMortgage},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:262,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:260,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:232,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:230,columnNumber:11},globalThis),e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:272,columnNumber:9},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(u,{children:[e.jsxDEV(he,{disableCurrency:!0,unitsMax:r("calculate_mortgage_period_units_max"),unitsMin:r("calculate_mortgage_period_units_min"),value:S.period,name:"Period",min:1,max:30,error:p.period,title:r("calculate_mortgage_period"),handleChange:X},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:276,columnNumber:13},globalThis),p.period&&e.jsxDEV(Y,{error:p.period},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:288,columnNumber:31},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:275,columnNumber:11},globalThis),e.jsxDEV(u,{children:[e.jsxDEV(he,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:i,max:a,error:p.monthlyPayment,title:r("calculate_mortgage_initial_payment"),handleChange:y,value:S.monthlyPayment},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:292,columnNumber:13},globalThis),e.jsxDEV(ea,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:303,columnNumber:13},globalThis),p.monthlyPayment&&e.jsxDEV(Y,{error:p.monthlyPayment},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:304,columnNumber:39},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:291,columnNumber:11},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:307,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:274,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:173,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:172,columnNumber:5},globalThis)},ya=()=>A().shape({purposeOfLoan:d().required(l("error_select_answer","Please select an answer")),loanAmount:T().when("purposeOfLoan",{is:"option_6",then:a=>a.max(1e6,l("error_loan_of_amount_credit_max_1000000","Maximum loan amount is 1,000,000 NIS")),otherwise:a=>a.max(2e5,l("error_loan_of_amount_credit_max_200000","Maximum loan amount is 200,000 NIS"))}).required(l("error_required_to_fill_out","This field is required")),whenDoYouNeedMoney:d().required(l("error_select_answer","Please select an answer")),loanDeferral:d().required(l("error_select_answer","Please select an answer")),priceOfEstate:T().when("purposeOfLoan",{is:"option_2",then:a=>a.required(l("error_required_to_fill_out","This field is required")),otherwise:a=>a.notRequired()}),cityWhereYouBuy:d().when("purposeOfLoan",{is:"option_2",then:a=>a.required(l("error_select_answer","Please select an answer")),otherwise:a=>a.notRequired()}),haveMortgage:d().when("purposeOfLoan",{is:"option_2",then:a=>a.required(l("error_select_answer","Please select an answer")),otherwise:a=>a.notRequired()}),period:T().min(1,l("error_min_credit_period","Minimum period is 1 year")).max(30,l("error_max_credit_period","Maximum period is 30 years")).required(l("error_required_to_fill_out","This field is required")),monthlyPayment:T().required(l("error_required_to_fill_out","This field is required"))}),Ta=()=>{const{t:a,i18n:h}=V(),i=M(),c=I(),t=f(g=>g.credit),n=f(g=>g.login.isLogin),r={purposeOfLoan:t.purposeOfLoan||"",loanAmount:t.loanAmount||2e5,whenDoYouNeedMoney:t.whenDoYouNeedMoney||"",loanDeferral:t.loanDeferral||"",priceOfEstate:t.priceOfEstate||null,cityWhereYouBuy:t.cityWhereYouBuy||"",haveMortgage:t.haveMortgage||null,period:t.period||30,monthlyPayment:t.monthlyPayment||5368};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(G,{initialValues:r,validationSchema:ya(),validateOnMount:!0,onSubmit:g=>{i(E(g)),n?g.purposeOfLoan==="option_2"&&g.haveMortgage==="yes"?c("/services/refinance-mortgage/1"):c("/services/calculate-credit/2"):(i(Te()),i(be("phoneVerification")))},children:e.jsxDEV(H,{children:[e.jsxDEV(W,{children:[e.jsxDEV($e,{title:a("sidebar_sub_calculate_credit"),text:a("calculate_mortgage_banner_subtext"),size:"small"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:106,columnNumber:13},globalThis),e.jsxDEV(xa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:111,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:105,columnNumber:11},globalThis),e.jsxDEV(ze,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:113,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:104,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:84,columnNumber:7},globalThis),e.jsxDEV(Ke,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:116,columnNumber:7},globalThis),e.jsxDEV(Ye,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:117,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:83,columnNumber:5},globalThis)},ja=()=>{const{t:a,i18n:h}=V(),{getContent:i}=K("mortgage_step4"),c=f(n=>n.login.loginData),t=f(n=>n.credit);return e.jsxDEV(J,{children:[e.jsxDEV(Q,{title:i("calculate_credit_final",a("calculate_credit_final"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:22,columnNumber:7},globalThis),e.jsxDEV(We,{credit:t.loanAmount,nameSurname:c==null?void 0:c.nameSurname,phoneNumber:c==null?void 0:c.phoneNumber},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:23,columnNumber:7},globalThis),e.jsxDEV(Ge,{text:i("calculate_credit_warning",a("calculate_credit_warning"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:28,columnNumber:7},globalThis),e.jsxDEV(N,{children:e.jsxDEV(He,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:30,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:29,columnNumber:7},globalThis),e.jsxDEV(Je,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:32,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:21,columnNumber:5},globalThis)},Pa={selectedBank:"",selectedOffer:null},Ea=A().shape({selectedBank:d(),selectedOffer:A().nullable()}),ka=()=>{const a=M(),h=I(),i=f(t=>t.login.loginData),c=f(t=>t.login.isLogin);return e.jsxDEV(G,{initialValues:Pa,validationSchema:Ea,validateOnMount:!0,onSubmit:t=>{console.log("Saving credit data and proceeding...",t),a(E(t)),!c||!(i!=null&&i.phoneNumber)?(console.log("User not authenticated, opening auth modal"),a(je()),a(be("signUp"))):(console.log("User authenticated, proceeding to application"),h("/services/application-submitted"))},children:e.jsxDEV(H,{children:[e.jsxDEV(W,{children:e.jsxDEV(ja,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:55,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:54,columnNumber:9},globalThis),e.jsxDEV(le,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:57,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:53,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:31,columnNumber:5},globalThis)},Va=()=>{const{t:a,i18n:h}=V(),{getContent:i}=K("calculate_credit_2"),{values:c}=te(),t=f(n=>n.login.loginData);return e.jsxDEV(J,{children:[e.jsxDEV(Q,{title:i("calculate_credit_step2_title",a("calculate_mortgage_step2_title"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:43,columnNumber:7},globalThis),e.jsxDEV(pa,{children:[e.jsxDEV(_a,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:45,columnNumber:9},globalThis),e.jsxDEV(O,{name:t==null?void 0:t.nameSurname,phone:t==null?void 0:t.phoneNumber},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:46,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:44,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(sa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:52,columnNumber:9},globalThis),e.jsxDEV(ra,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:53,columnNumber:9},globalThis),e.jsxDEV(ia,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:54,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:51,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(u,{style:{gap:"2rem"},children:[e.jsxDEV(ta,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:58,columnNumber:11},globalThis),c.additionalCitizenships==="yes"&&e.jsxDEV(ga,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:59,columnNumber:55},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:57,columnNumber:9},globalThis),e.jsxDEV(u,{style:{gap:"2rem"},children:[e.jsxDEV(la,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:62,columnNumber:11},globalThis),c.taxes==="yes"&&e.jsxDEV(Sa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:63,columnNumber:38},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:61,columnNumber:9},globalThis),e.jsxDEV(u,{style:{gap:"2rem"},children:[e.jsxDEV(oa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:66,columnNumber:11},globalThis),c.childrens==="yes"&&e.jsxDEV(ba,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:67,columnNumber:42},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:65,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:56,columnNumber:7},globalThis),e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:71,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(na,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:73,columnNumber:9},globalThis),e.jsxDEV(ca,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:74,columnNumber:9},globalThis),e.jsxDEV(ma,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:75,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:72,columnNumber:7},globalThis),e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:78,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(da,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:81,columnNumber:9},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:82,columnNumber:9},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:83,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:80,columnNumber:7},globalThis),e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:86,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(va,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:89,columnNumber:9},globalThis),e.jsxDEV(u,{children:c.familyStatus==="option_2"&&e.jsxDEV(ua,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:91,columnNumber:50},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:90,columnNumber:9},globalThis),e.jsxDEV(u,{children:c.partnerPayMortgage==="yes"&&c.familyStatus==="option_2"&&e.jsxDEV(ha,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:95,columnNumber:51},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:93,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:88,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:42,columnNumber:5},globalThis)},Ua=A().shape({nameSurname:d().required(l("error_name_surname","Please enter your name and surname")),birthday:d().required(l("error_date","Please enter a valid date")),education:d().required(l("error_select_answer","Please select an answer")),additionalCitizenships:d().required(l("error_select_answer","Please select an answer")),citizenshipsDropdown:ue().when("additionalCitizenships",{is:"yes",then:a=>a.min(1,l("error_select_answer","Please select an answer")),otherwise:a=>a.min(0)}),taxes:d().required(l("error_select_answer","Please select an answer")),countriesPayTaxes:ue().when("taxes",{is:"yes",then:a=>a.min(1,l("error_select_answer","Please select an answer")),otherwise:a=>a.min(0)}),childrens:d().required(l("error_select_answer","Please select an answer")),howMuchChildrens:T().required(l("error_fill_field","Please fill this field")),medicalInsurance:d().required(l("error_select_answer","Please select an answer")),isForeigner:d().required(l("error_select_answer","Please select an answer")),publicPerson:d().required(l("error_select_answer","Please select an answer")),borrowers:T().min(1,l("error_quantity_borrowers","At least one borrower is required")).required(l("error_quantity_borrowers","Number of borrowers is required")),familyStatus:d().required(l("error_select_answer","Please select an answer")),partnerPayMortgage:d().when("familyStatus",{is:"Married",then:a=>a.required(l("error_select_answer","Please select an answer")),otherwise:a=>a.notRequired()})}),wa=()=>{const a=M(),h=I(),i=f(n=>n.credit),t={nameSurname:f(n=>n.login.loginData).nameSurname||i.nameSurname||"",birthday:i.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:i.education||"",additionalCitizenships:i.additionalCitizenships||null,citizenshipsDropdown:i.citizenshipsDropdown||[],taxes:i.taxes||null,countriesPayTaxes:i.countriesPayTaxes||[],childrens:i.childrens||null,howMuchChildrens:i.howMuchChildrens||1,medicalInsurance:i.medicalInsurance||null,isForeigner:i.isForeigner||null,publicPerson:i.publicPerson||null,borrowers:i.borrowers||null,familyStatus:i.familyStatus||"",partnerPayMortgage:i.partnerPayMortgage||null,addPartner:i.addPartner||""};return e.jsxDEV(G,{initialValues:t,validationSchema:Ua,validateOnMount:!0,onSubmit:n=>{a(E(n)),h("/services/calculate-credit/3")},children:e.jsxDEV(H,{children:[e.jsxDEV(W,{children:e.jsxDEV(Va,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:52,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:51,columnNumber:9},globalThis),e.jsxDEV(le,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:54,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:50,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:41,columnNumber:5},globalThis)},Se=a=>{if(!a)return!1;const h=a.toLowerCase();return h==="option_1"||h==="1"||h.includes("no_additional")||h.includes("no additional")||h.includes("none")},Oa=()=>{var ne,ce;const{t:a,i18n:h}=V(),{getContent:i}=K("credit_step3"),c=I(),{values:t,errors:n,isValid:r,touched:g}=te(),{mainSourceOfIncome:o,additionalIncome:j,obligation:x}=t;ae.useEffect(()=>{console.log("🔍 ThirdStepForm Debug:",{isValid:r,values:t,errors:n,touched:g,mainSourceOfIncome:o,additionalIncome:j,obligation:x}),["mainSourceOfIncome","additionalIncome","obligation"].forEach(D=>{console.log(`Field ${D}:`,{value:t[D],error:n[D],touched:g[D]})}),o&&!["5","6"].includes(o)&&["monthlyIncome","startDate","fieldOfActivity","profession","companyName"].forEach(U=>{console.log(`Conditional Field ${U}:`,{value:t[U],error:n[U],touched:g[U]})})},[t,n,r,g,o,j,x]);const v=(s=>s&&!s.match(/^\d+$/)?s:{1:"employee",2:"selfemployed",3:"selfemployed",4:"pension",5:"student",6:"unemployed",7:"other"}[s]||"")(o),p=(s=>!s||s==="5"||s==="no_obligations"?"":s&&!s.match(/^\d+$/)?s:{1:"bank_loan",2:"consumer_credit",3:"credit_card",4:"other"}[s]||"")(x),C=Da("credit_step3");console.log("🔍 Credit Step 3 - ENHANCED DEBUG:",{formValues:{mainSourceOfIncome:o,obligation:x},incomeMapping:{originalValue:o,mappedKey:v,hasComponents:!!C[v],componentsCount:((ne=C[v])==null?void 0:ne.length)||0,availableKeys:Object.keys(C)},obligationMapping:{originalValue:x,mappedKey:p,hasComponents:!!w[p],componentsCount:((ce=w[p])==null?void 0:ce.length)||0,availableKeys:Object.keys(w)},shouldShowIncomeComponents:!!(o&&C[v]),shouldShowObligationComponents:!!(x&&w[p])}),console.log("🚨 FORM RENDERING DEBUG - ThirdStepForm is mounting/updating"),console.log("🚨 VALUES:",{mainSourceOfIncome:o,obligation:x}),console.log("🚨 MAPPED KEYS:",{incomeSourceKey:v,obligationKey:p});const b=M(),B=f(s=>s.borrowers.sourceOfIncomeModal),q=f(s=>s.borrowers.additionalIncomeModal),X=f(s=>s.borrowers.obligationModal),y=f(s=>s.otherBorrowers.otherBorrowers),m=f(s=>s.login.loginData),_=()=>{b(E(t)),b(Pe())},P=()=>{b(E(t)),b(Ee())},Z=()=>{b(E(t)),b(ke())},L=s=>{b(Ve({id:s}))},ve=s=>{b(Ue({id:s}))},_e=s=>{b(we({id:s}))},Ne=s=>{b(Oe(s))},fe=s=>{b(Me(s))},Fe=s=>{b(Ie(s))},Ce=s=>{b(me(s));const U=!y.some(ye=>ye.id===s)?se(y):s;c({pathname:"/services/other-borrowers/1/",search:pe({pageId:String(U)}).toString()})},De=()=>{b(me(se(y))),b(E(t)),c({pathname:"/services/other-borrowers/1/",search:pe({pageId:se(y).toString()}).toString()})},xe=s=>{b(qe(s))};return e.jsxDEV(J,{children:[e.jsxDEV(Q,{title:i("calculate_credit_step3_title","פרטי הכנסה ופיננסיים")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:272,columnNumber:7},globalThis),e.jsxDEV(O,{name:m==null?void 0:m.nameSurname,phone:m==null?void 0:m.phoneNumber},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:274,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(Na,{screenLocation:"credit_step3"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:280,columnNumber:9},globalThis),C[v]&&C[v].map((s,D)=>e.jsxDEV(ae.Fragment,{children:s},D,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:284,columnNumber:15},globalThis)),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:287,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:279,columnNumber:7},globalThis),e.jsxDEV(N,{children:o&&e.jsxDEV(u,{children:[B.map(s=>e.jsxDEV(O,{onEdit:()=>Ne(s.id),onDelete:()=>L(s.id),enableEdit:!0,name:`${i("calculate_credit_source_of_income",a("main_income_source"))}${s.id+1}`},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:293,columnNumber:15},globalThis)),e.jsxDEV(z,{onClick:_,color:"#FBE54D",value:i("calculate_credit_add_place_to_work",a("add_place_to_work")),variant:"none"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:301,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:291,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:289,columnNumber:7},globalThis),e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:311,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(fa,{screenLocation:"credit_step3"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:314,columnNumber:9},globalThis),j&&!Se(j)&&e.jsxDEV(Fa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:316,columnNumber:11},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:318,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:313,columnNumber:7},globalThis),j&&!Se(j)&&e.jsxDEV(N,{children:e.jsxDEV(u,{children:[q.map(s=>e.jsxDEV(O,{onEdit:()=>fe(s.id),onDelete:()=>ve(s.id),enableEdit:!0,name:`${i("calculate_credit_additional_income",a("additional_source_of_income"))}${s.id+1}`},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:325,columnNumber:15},globalThis)),e.jsxDEV(z,{onClick:P,color:"#FBE54D",value:i("calculate_credit_add_additional_income",a("add_additional_source_of_income")),variant:"none"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:333,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:323,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:322,columnNumber:9},globalThis),e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:343,columnNumber:7},globalThis),e.jsxDEV(N,{children:[e.jsxDEV(Ca,{screenLocation:"credit_step3"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:346,columnNumber:9},globalThis),w[p]&&w[p].map((s,D)=>e.jsxDEV(ae.Fragment,{children:s},D,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:349,columnNumber:13},globalThis)),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:351,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:345,columnNumber:7},globalThis),x&&p&&e.jsxDEV(N,{children:e.jsxDEV(u,{children:[X.map(s=>e.jsxDEV(O,{onEdit:()=>Fe(s.id),onDelete:()=>_e(s.id),enableEdit:!0,name:`${i("calculate_credit_obligation",a("obligation"))}${s.id+1}`},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:358,columnNumber:15},globalThis)),e.jsxDEV(z,{onClick:Z,color:"#FBE54D",value:i("calculate_credit_add_obligation",a("add_obligation")),variant:"none"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:366,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:356,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:355,columnNumber:9},globalThis),e.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:376,columnNumber:7},globalThis),e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[y&&e.jsxDEV(re,{title:i("calculate_credit_borrower",a("borrower"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:378,columnNumber:28},globalThis),e.jsxDEV(N,{style:{columnGap:"2rem"},children:[y.map(s=>e.jsxDEV(u,{children:e.jsxDEV(O,{onEdit:()=>Ce(s.id),onDelete:()=>xe(s.id),enableEdit:!0,name:s.nameSurname},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:382,columnNumber:15},globalThis)},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:381,columnNumber:13},globalThis)),!y&&e.jsxDEV(re,{title:i("calculate_credit_borrower",a("borrower"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:391,columnNumber:31},globalThis),e.jsxDEV(u,{children:e.jsxDEV(z,{value:i("calculate_credit_add_borrower",a("add_borrower")),onClick:De,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:393,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:392,columnNumber:11},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:404,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:379,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:377,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:270,columnNumber:5},globalThis)},ie=()=>A().shape({mainSourceOfIncome:d().required(l("error_select_answer","Please select an answer")).test("not-empty",l("error_select_answer","Please select an answer"),a=>a!=null&&a!==""),monthlyIncome:T().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),startDate:d().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_date","Please enter a valid date")),otherwise:a=>a.notRequired()}),fieldOfActivity:d().when("mainSourceOfIncome",{is:a=>a!=null&&a!==""&&!["5","6"].includes(a),then:a=>a.required(l("error_select_field_of_activity","Please select field of activity")),otherwise:a=>a.notRequired()}),profession:d().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),companyName:d().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),additionalIncome:d().required(l("error_select_one_of_the_options","Please select one of the options")).test("not-empty",l("error_select_one_of_the_options","Please select one of the options"),a=>a!=null&&a!==""),additionalIncomeAmount:T().when("additionalIncome",{is:a=>a!=null&&a!==""&&a!=="no_additional_income",then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),obligation:d().required(l("error_select_one_of_the_options","Please select one of the options")),bank:d().when("obligation",{is:a=>a!=null&&a!==""&&a!=="no_obligations",then:a=>a.required(l("error_select_bank","Please select a bank")),otherwise:a=>a.notRequired()}),monthlyPaymentForAnotherBank:T().when("obligation",{is:a=>a!=null&&a!==""&&a!=="no_obligations",then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),endDate:d().when("obligation",{is:a=>a!=null&&a!==""&&a!=="no_obligations",then:a=>a.required(l("error_date","Please enter a valid date")),otherwise:a=>a.notRequired()})});ie();const Ma=()=>{const a=M(),h=I(),{i18n:i}=V(),[c,t]=F.useState(()=>ie()),n=f(g=>g.credit);F.useEffect(()=>{(async()=>{console.log("🔄 ThirdStep: Preloading validation errors for language:",i.language),await Ae();const o=ie();t(o),console.log("✅ ThirdStep: Validation schema updated for language:",i.language)})()},[i.language]);const r={mainSourceOfIncome:n.mainSourceOfIncome||"",monthlyIncome:n.monthlyIncome||null,startDate:n.startDate||new Date().toISOString().split("T")[0],fieldOfActivity:n.fieldOfActivity||"",profession:n.profession||"",companyName:n.companyName||"",additionalIncome:n.additionalIncome||"no_additional_income",additionalIncomeAmount:n.additionalIncomeAmount||null,obligation:n.obligation||"no_obligations",bank:n.bank||"",monthlyPaymentForAnotherBank:n.monthlyPaymentForAnotherBank||null,endDate:n.endDate||new Date().toISOString().split("T")[0],amountIncomeCurrentYear:(n==null?void 0:n.amountIncomeCurrentYear)||null,noIncome:n.noIncome||new Date().toISOString().split("T")[0]};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(G,{initialValues:r,validationSchema:c,validateOnMount:!0,onSubmit:g=>{a(E(g)),h("/services/calculate-credit/4")},children:e.jsxDEV(H,{children:[e.jsxDEV(W,{children:e.jsxDEV(Oa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:72,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:71,columnNumber:11},globalThis),e.jsxDEV(le,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:74,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:70,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:61,columnNumber:7},globalThis),e.jsxDEV(Qe,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:77,columnNumber:7},globalThis),e.jsxDEV(Xe,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:78,columnNumber:7},globalThis),e.jsxDEV(Ze,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:79,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:60,columnNumber:5},globalThis)},bs=()=>{const{stepNumber:a}=Le(),{t:h,i18n:i}=V(),c=I(),t=f(g=>g.login.isLogin);if(F.useEffect(()=>{!t&&a!=="1"&&c("/services/calculate-credit/1")},[t,a,c]),!t&&a!=="1")return e.jsxDEV(de,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:31,columnNumber:12},globalThis);const n=[h("mobile_step_1"),h("mobile_step_2"),h("mobile_step_3"),h("mobile_step_4")];let r;switch(a){case"1":r=e.jsxDEV(Ta,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:45,columnNumber:23},globalThis);break;case"2":r=e.jsxDEV(wa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:48,columnNumber:23},globalThis);break;case"3":r=e.jsxDEV(Ma,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:51,columnNumber:23},globalThis);break;case"4":r=e.jsxDEV(ka,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:54,columnNumber:23},globalThis);break;default:r=e.jsxDEV(Be,{type:"NOT_FOUND"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:57,columnNumber:23},globalThis);break}return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Re,{progress:a,data:n},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:63,columnNumber:7},globalThis),e.jsxDEV(F.Suspense,{fallback:e.jsxDEV(de,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:64,columnNumber:27},globalThis),children:r},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:64,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:62,columnNumber:5},globalThis)};export{bs as default};
