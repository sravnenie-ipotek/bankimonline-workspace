import{u as F,a as M,j as e,l as se,E as V,n as je,d as _e,p as l,o as Pe,q as Ee,r as ke,t as Ve,v as Ue,w as we,x as Oe,y as Me,z as Ie,A as qe,B as de,D as Ae,F as Be,N as Le}from"./index-1418039d.js";import{r as x,f as I,b as re,j as ue,k as Re}from"./react-vendor-ede63a09.js";import{a as G,E as Y,D as U,T as te,b as W,A as Ye,L as he}from"./index-9e04781d.js";import{P as $e}from"./ProgressBar-d6706e24.js";import{u as le,F as H,b as J,a as B,c as d,f as P,g as ge}from"./form-vendor-2c7d84e7.js";import{V as Ke}from"./VideoPoster-76799c74.js";import{S as Se,a as ze,M as Ge,U as We,A as He,F as Je,B as Qe,b as Xe,c as Ze,O as ea}from"./SourceOfIncomeModal-52c7feb7.js";import{C as u}from"./Column-a4cbd9cf.js";import{D as $}from"./DropdownMenu-7f43119c.js";import{F as Q}from"./FormContainer-68e879d9.js";import{F as be}from"./FormattedInput-f8e367a4.js";import{R as f}from"./Row-fb6fdf4b.js";import{I as aa,c as K}from"./IncreasePayment-87182198.js";import{F as X}from"./FormCaption-84dc85b7.js";import{Y as sa,N as ra,B as ia,E as ta,A as oa,T as la,C as na,M as ca,I as ma,P as pa}from"./Taxes-1329b079.js";import{u as w}from"./i18n-vendor-aaeace9f.js";import{D as ne}from"./DoubleButtons-b3ec1abf.js";import{U as O,A as z}from"./AddButton-97585e88.js";import{R as da}from"./RowTwo-322e58d9.js";import{B as ua,P as ha,A as ga}from"./PartnerPayMortgage-e53f8c88.js";import{C as Sa,a as ba,H as va}from"./HowMuchChildrens-20d7f753.js";import{F as _a}from"./FamilyStatus-3035a95c.js";import{I as Na}from"./Info-b0153e9d.js";import{b as T,M as fa,A as Fa,a as Ca,O as Da,d as xa,g as ie}from"./componentsByIncomeSource-8bf08b35.js";import"./state-vendor-c4e6020a.js";import"./ui-vendor-d73673ed.js";import"./utils-vendor-dcc8b708.js";import"./components-vendor-632ebedf.js";import"./MortgageParameters-010e30f2.js";import"./PercentIcon-24102684.js";import"./useDropdownData-7b90036f.js";import"./Control-ffb928cd.js";import"./Calendar-9bd743e1.js";import"./ShieldCheckIcon-76ca1d7e.js";const ya=()=>{const[a,h]=x.useState(51130),[i,c]=x.useState(2654),[o,n]=x.useState([]),{t:r,i18n:S}=w(),{getContent:t}=G("calculate_credit_1"),E=x.useMemo(()=>[{value:"option_1",label:t("calculate_credit_target_option_1",r("calculate_credit_target_option_1"))},{value:"option_2",label:t("calculate_credit_target_option_2",r("calculate_credit_target_option_2"))},{value:"option_3",label:t("calculate_credit_target_option_3",r("calculate_credit_target_option_3"))},{value:"option_4",label:t("calculate_credit_target_option_4",r("calculate_credit_target_option_4"))},{value:"option_5",label:t("calculate_credit_target_option_5",r("calculate_credit_target_option_5"))},{value:"option_6",label:t("calculate_credit_target_option_6",r("calculate_credit_target_option_6"))}],[t,r]),D=x.useMemo(()=>[{value:"option_1",label:t("calculate_mortgage_when_options_1",r("calculate_mortgage_when_options_1"))},{value:"option_2",label:t("calculate_mortgage_when_options_2",r("calculate_mortgage_when_options_2"))},{value:"option_3",label:t("calculate_mortgage_when_options_3",r("calculate_mortgage_when_options_3"))},{value:"option_4",label:t("calculate_mortgage_when_options_4",r("calculate_mortgage_when_options_4"))}],[t,r]),ce=x.useMemo(()=>[{value:"option_1",label:t("calculate_credit_prolong_option_1",r("calculate_credit_prolong_option_1"))},{value:"option_2",label:t("calculate_credit_prolong_option_2",r("calculate_credit_prolong_option_2"))},{value:"option_3",label:t("calculate_credit_prolong_option_3",r("calculate_credit_prolong_option_3"))},{value:"option_4",label:t("calculate_credit_prolong_option_4",r("calculate_credit_prolong_option_4"))},{value:"option_5",label:t("calculate_credit_prolong_option_5",r("calculate_credit_prolong_option_5"))},{value:"option_6",label:t("calculate_credit_prolong_option_6",r("calculate_credit_prolong_option_6"))},{value:"option_7",label:t("calculate_credit_prolong_option_7",r("calculate_credit_prolong_option_7"))}],[t,r]),{setFieldValue:g,values:b,errors:m,touched:N,setFieldTouched:v}=le(),L=F(p=>p.activeField),q=M();x.useEffect(()=>{(async()=>{try{const k=await(await fetch(`/api/get-cities?lang=${S.language}`)).json();if(k.status==="success"){const ee=k.data.map(R=>({value:R.value,label:R.name}));n(ee)}else console.error("Failed to fetch cities:",k.message)}catch(_){console.error("Error fetching cities:",_)}})()},[S.language]);const Z=p=>{q(se("period")),g("period",p)},j=p=>{q(se("monthlyPayment")),g("monthlyPayment",p)};return x.useEffect(()=>{(async()=>{try{if(L==="period"){const _=await K.calculateCreditPayment(b.loanAmount,b.period);Number.isNaN(_)||g("monthlyPayment",_)}else{const _=await K.calculateLoanPeriod(b.loanAmount,0,b.monthlyPayment);Number.isNaN(_)||g("period",_)}}catch(_){console.error("❌ Error calculating credit values:",_)}})()},[L,g,b.loanAmount,b.monthlyPayment,b.period]),x.useLayoutEffect(()=>{(async()=>{try{const _=await K.calculateCreditPayment(b.loanAmount,1),k=await K.calculateCreditPayment(b.loanAmount,30);Number.isNaN(_)||h(_),_===0&&h(1),Number.isNaN(k)||c(k)}catch(_){console.error("❌ Error calculating payment limits:",_),h(51130),c(2654)}})()},[b.loanAmount]),e.jsxDEV(e.Fragment,{children:e.jsxDEV(Q,{children:[e.jsxDEV(X,{title:r("sidebar_sub_calculate_credit")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:174,columnNumber:9},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(u,{children:e.jsxDEV($,{title:t("calculate_why",r("calculate_why")),data:E,placeholder:t("calculate_credit_target_ph",r("calculate_credit_target_ph")),value:b.purposeOfLoan,onChange:p=>g("purposeOfLoan",p),onBlur:()=>v("purposeOfLoan",!0),error:N.purposeOfLoan&&m.purposeOfLoan},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:178,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:177,columnNumber:11},globalThis),e.jsxDEV(u,{children:[e.jsxDEV(be,{handleChange:p=>{q(se("period")),g("loanAmount",p)},name:"loanAmount",title:t("calculate_amount",r("calculate_amount")),value:b.loanAmount,placeholder:"1,000,000",error:m.loanAmount},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:189,columnNumber:13},globalThis),m.loanAmount&&e.jsxDEV(Y,{error:m.loanAmount},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:200,columnNumber:35},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:188,columnNumber:11},globalThis),e.jsxDEV(u,{children:e.jsxDEV($,{title:t("calculate_when",r("calculate_when")),data:D,placeholder:t("calculate_mortgage_when_options_Time",r("calculate_mortgage_when_options_Time")),value:b.whenDoYouNeedMoney,onChange:p=>g("whenDoYouNeedMoney",p),onBlur:()=>v("whenDoYouNeedMoney",!0),error:N.whenDoYouNeedMoney&&m.whenDoYouNeedMoney},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:204,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:203,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:176,columnNumber:9},globalThis),e.jsxDEV(f,{children:e.jsxDEV(u,{children:e.jsxDEV($,{title:t("calculate_prolong",r("calculate_prolong")),data:ce,placeholder:t("calculate_credit_prolong_ph",r("calculate_credit_prolong_ph")),value:b.loanDeferral,onChange:p=>g("loanDeferral",p),onBlur:()=>v("loanDeferral",!0),error:N.loanDeferral&&m.loanDeferral},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:217,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:216,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:215,columnNumber:9},globalThis),b.purposeOfLoan&&b.purposeOfLoan==="option_2"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:231,columnNumber:13},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(u,{children:[e.jsxDEV(be,{handleChange:p=>{g("priceOfEstate",p)},name:"PriceOfEstate",title:r("calculate_mortgage_price"),value:b.priceOfEstate,placeholder:"1,000,000",error:m.priceOfEstate},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:234,columnNumber:17},globalThis),m.priceOfEstate&&e.jsxDEV(Y,{error:m.priceOfEstate},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:244,columnNumber:42},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:233,columnNumber:15},globalThis),e.jsxDEV(u,{children:e.jsxDEV($,{title:r("calculate_mortgage_city"),data:o,placeholder:r("city"),value:b.cityWhereYouBuy,onChange:p=>g("cityWhereYouBuy",p),onBlur:()=>v("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:r("search"),nothingFoundText:r("nothing_found"),error:N.cityWhereYouBuy&&m.cityWhereYouBuy},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:247,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:246,columnNumber:15},globalThis),e.jsxDEV(u,{children:[e.jsxDEV(te,{title:r("have_mortgage_title")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:261,columnNumber:17},globalThis),e.jsxDEV(sa,{value:b.haveMortgage,onChange:p=>g("haveMortgage",p),error:N.haveMortgage&&m.haveMortgage},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:262,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:260,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:232,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:230,columnNumber:11},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:272,columnNumber:9},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(u,{children:[e.jsxDEV(Se,{disableCurrency:!0,unitsMax:r("calculate_mortgage_period_units_max"),unitsMin:r("calculate_mortgage_period_units_min"),value:b.period,name:"Period",min:1,max:30,error:m.period,title:r("calculate_mortgage_period"),handleChange:Z},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:276,columnNumber:13},globalThis),m.period&&e.jsxDEV(Y,{error:m.period},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:288,columnNumber:31},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:275,columnNumber:11},globalThis),e.jsxDEV(u,{children:[e.jsxDEV(Se,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:i,max:a,error:m.monthlyPayment,title:r("calculate_mortgage_initial_payment"),handleChange:j,value:b.monthlyPayment},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:292,columnNumber:13},globalThis),e.jsxDEV(aa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:303,columnNumber:13},globalThis),m.monthlyPayment&&e.jsxDEV(Y,{error:m.monthlyPayment},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:304,columnNumber:39},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:291,columnNumber:11},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:307,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:274,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:173,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStepForm/FirstStepForm.tsx",lineNumber:172,columnNumber:5},globalThis)},Ta=()=>B().shape({purposeOfLoan:d().required(l("error_select_answer","Please select an answer")),loanAmount:P().when("purposeOfLoan",{is:"option_6",then:a=>a.max(1e6,l("error_loan_of_amount_credit_max_1000000","Maximum loan amount is 1,000,000 NIS")),otherwise:a=>a.max(2e5,l("error_loan_of_amount_credit_max_200000","Maximum loan amount is 200,000 NIS"))}).required(l("error_required_to_fill_out","This field is required")),whenDoYouNeedMoney:d().required(l("error_select_answer","Please select an answer")),loanDeferral:d().required(l("error_select_answer","Please select an answer")),priceOfEstate:P().when("purposeOfLoan",{is:"option_2",then:a=>a.required(l("error_required_to_fill_out","This field is required")),otherwise:a=>a.notRequired()}),cityWhereYouBuy:d().when("purposeOfLoan",{is:"option_2",then:a=>a.required(l("error_select_answer","Please select an answer")),otherwise:a=>a.notRequired()}),haveMortgage:d().when("purposeOfLoan",{is:"option_2",then:a=>a.required(l("error_select_answer","Please select an answer")),otherwise:a=>a.notRequired()}),period:P().min(1,l("error_min_credit_period","Minimum period is 1 year")).max(30,l("error_max_credit_period","Maximum period is 30 years")).required(l("error_required_to_fill_out","This field is required")),monthlyPayment:P().required(l("error_required_to_fill_out","This field is required"))}),ja=()=>{const{t:a,i18n:h}=w(),i=M(),c=I(),o=F(S=>S.credit),n=F(S=>S.login.isLogin),r={purposeOfLoan:o.purposeOfLoan||"",loanAmount:o.loanAmount||2e5,whenDoYouNeedMoney:o.whenDoYouNeedMoney||"",loanDeferral:o.loanDeferral||"",priceOfEstate:o.priceOfEstate||null,cityWhereYouBuy:o.cityWhereYouBuy||"",haveMortgage:o.haveMortgage||null,period:o.period||30,monthlyPayment:o.monthlyPayment||5368};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(H,{initialValues:r,validationSchema:Ta(),validateOnMount:!0,onSubmit:S=>{i(V(S)),n?S.purposeOfLoan==="option_2"&&S.haveMortgage==="yes"?c("/services/refinance-mortgage/1"):c("/services/calculate-credit/2"):(i(je()),i(_e("phoneVerification")))},children:e.jsxDEV(J,{children:[e.jsxDEV(W,{children:[e.jsxDEV(Ke,{title:a("sidebar_sub_calculate_credit"),text:a("calculate_mortgage_banner_subtext"),size:"small"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:106,columnNumber:13},globalThis),e.jsxDEV(ya,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:111,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:105,columnNumber:11},globalThis),e.jsxDEV(ze,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:113,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:104,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:84,columnNumber:7},globalThis),e.jsxDEV(Ge,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:116,columnNumber:7},globalThis),e.jsxDEV(Ye,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:117,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FirstStep/FirstStep.tsx",lineNumber:83,columnNumber:5},globalThis)},Pa=()=>{const{t:a,i18n:h}=w(),{getContent:i}=G("mortgage_step4"),c=F(n=>n.login.loginData),o=F(n=>n.credit);return e.jsxDEV(Q,{children:[e.jsxDEV(X,{title:i("calculate_credit_final",a("calculate_credit_final"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:22,columnNumber:7},globalThis),e.jsxDEV(We,{credit:o.loanAmount,nameSurname:c==null?void 0:c.nameSurname,phoneNumber:c==null?void 0:c.phoneNumber},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:23,columnNumber:7},globalThis),e.jsxDEV(He,{text:i("calculate_credit_warning",a("calculate_credit_warning"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:28,columnNumber:7},globalThis),e.jsxDEV(f,{children:e.jsxDEV(Je,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:30,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:29,columnNumber:7},globalThis),e.jsxDEV(Qe,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:32,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStepForm/FourthStepForm.tsx",lineNumber:21,columnNumber:5},globalThis)},Ea={selectedBank:"",selectedOffer:null},ka=B().shape({selectedBank:d(),selectedOffer:B().nullable()}),Va=()=>{const a=M(),h=I(),i=F(o=>o.login.loginData),c=F(o=>o.login.isLogin);return e.jsxDEV(H,{initialValues:Ea,validationSchema:ka,validateOnMount:!0,onSubmit:o=>{console.log("Saving credit data and proceeding...",o),a(V(o)),!c||!(i!=null&&i.phoneNumber)?(console.log("User not authenticated, opening auth modal"),a(Pe()),a(_e("signUp"))):(console.log("User authenticated, proceeding to application"),h("/services/application-submitted"))},children:e.jsxDEV(J,{children:[e.jsxDEV(W,{children:e.jsxDEV(Pa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:55,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:54,columnNumber:9},globalThis),e.jsxDEV(ne,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:57,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:53,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/FourthStep/FourthStep.tsx",lineNumber:31,columnNumber:5},globalThis)},Ua=()=>{const{t:a,i18n:h}=w(),{getContent:i}=G("calculate_credit_2"),{values:c}=le(),o=F(n=>n.login.loginData);return e.jsxDEV(Q,{children:[e.jsxDEV(X,{title:i("calculate_credit_step2_title",a("calculate_mortgage_step2_title"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:43,columnNumber:7},globalThis),e.jsxDEV(da,{children:[e.jsxDEV(Na,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:45,columnNumber:9},globalThis),e.jsxDEV(O,{name:o==null?void 0:o.nameSurname,phone:o==null?void 0:o.phoneNumber},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:46,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:44,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(ra,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:52,columnNumber:9},globalThis),e.jsxDEV(ia,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:53,columnNumber:9},globalThis),e.jsxDEV(ta,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:54,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:51,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(u,{style:{gap:"2rem"},children:[e.jsxDEV(oa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:58,columnNumber:11},globalThis),c.additionalCitizenships==="yes"&&e.jsxDEV(Sa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:59,columnNumber:55},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:57,columnNumber:9},globalThis),e.jsxDEV(u,{style:{gap:"2rem"},children:[e.jsxDEV(la,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:62,columnNumber:11},globalThis),c.taxes==="yes"&&e.jsxDEV(ba,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:63,columnNumber:38},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:61,columnNumber:9},globalThis),e.jsxDEV(u,{style:{gap:"2rem"},children:[e.jsxDEV(na,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:66,columnNumber:11},globalThis),c.childrens==="yes"&&e.jsxDEV(va,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:67,columnNumber:42},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:65,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:56,columnNumber:7},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:71,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(ca,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:73,columnNumber:9},globalThis),e.jsxDEV(ma,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:74,columnNumber:9},globalThis),e.jsxDEV(pa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:75,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:72,columnNumber:7},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:78,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(ua,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:81,columnNumber:9},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:82,columnNumber:9},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:83,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:80,columnNumber:7},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:86,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(_a,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:89,columnNumber:9},globalThis),e.jsxDEV(u,{children:c.familyStatus==="option_2"&&e.jsxDEV(ha,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:91,columnNumber:50},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:90,columnNumber:9},globalThis),e.jsxDEV(u,{children:c.partnerPayMortgage==="yes"&&c.familyStatus==="option_2"&&e.jsxDEV(ga,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:95,columnNumber:51},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:93,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:88,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStepForm/SecondStepForm.tsx",lineNumber:42,columnNumber:5},globalThis)},wa=B().shape({nameSurname:d().required(l("error_name_surname","Please enter your name and surname")),birthday:d().required(l("error_date","Please enter a valid date")),education:d().required(l("error_select_answer","Please select an answer")),additionalCitizenships:d().required(l("error_select_answer","Please select an answer")),citizenshipsDropdown:ge().when("additionalCitizenships",{is:"yes",then:a=>a.min(1,l("error_select_answer","Please select an answer")),otherwise:a=>a.min(0)}),taxes:d().required(l("error_select_answer","Please select an answer")),countriesPayTaxes:ge().when("taxes",{is:"yes",then:a=>a.min(1,l("error_select_answer","Please select an answer")),otherwise:a=>a.min(0)}),childrens:d().required(l("error_select_answer","Please select an answer")),howMuchChildrens:P().required(l("error_fill_field","Please fill this field")),medicalInsurance:d().required(l("error_select_answer","Please select an answer")),isForeigner:d().required(l("error_select_answer","Please select an answer")),publicPerson:d().required(l("error_select_answer","Please select an answer")),borrowers:P().min(1,l("error_quantity_borrowers","At least one borrower is required")).required(l("error_quantity_borrowers","Number of borrowers is required")),familyStatus:d().required(l("error_select_answer","Please select an answer")),partnerPayMortgage:d().when("familyStatus",{is:"Married",then:a=>a.required(l("error_select_answer","Please select an answer")),otherwise:a=>a.notRequired()})}),Oa=()=>{const a=M(),h=I(),i=F(n=>n.credit),o={nameSurname:F(n=>n.login.loginData).nameSurname||i.nameSurname||"",birthday:i.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:i.education||"",additionalCitizenships:i.additionalCitizenships||null,citizenshipsDropdown:i.citizenshipsDropdown||[],taxes:i.taxes||null,countriesPayTaxes:i.countriesPayTaxes||[],childrens:i.childrens||null,howMuchChildrens:i.howMuchChildrens||1,medicalInsurance:i.medicalInsurance||null,isForeigner:i.isForeigner||null,publicPerson:i.publicPerson||null,borrowers:i.borrowers||null,familyStatus:i.familyStatus||"",partnerPayMortgage:i.partnerPayMortgage||null,addPartner:i.addPartner||""};return e.jsxDEV(H,{initialValues:o,validationSchema:wa,validateOnMount:!0,onSubmit:n=>{a(V(n)),h("/services/calculate-credit/3")},children:e.jsxDEV(J,{children:[e.jsxDEV(W,{children:e.jsxDEV(Ua,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:52,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:51,columnNumber:9},globalThis),e.jsxDEV(ne,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:54,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:50,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/SecondStep/SecondStep.tsx",lineNumber:41,columnNumber:5},globalThis)},ve=a=>{if(!a)return!1;const h=a.toLowerCase();return h==="option_1"||h==="1"||h.includes("no_additional")||h.includes("no additional")||h.includes("none")},Ma=()=>{var me,pe;const{t:a,i18n:h}=w(),{getContent:i}=G("credit_step3"),c=I(),{values:o,errors:n,isValid:r,touched:S}=le(),{mainSourceOfIncome:t,additionalIncome:E,obligation:D}=o;re.useEffect(()=>{console.log("🔍 ThirdStepForm Debug:",{isValid:r,values:o,errors:n,touched:S,mainSourceOfIncome:t,additionalIncome:E,obligation:D}),["mainSourceOfIncome","additionalIncome","obligation"].forEach(C=>{console.log(`Field ${C}:`,{value:o[C],error:n[C],touched:S[C]})}),t&&!["5","6"].includes(t)&&["monthlyIncome","startDate","fieldOfActivity","profession","companyName"].forEach(y=>{console.log(`Conditional Field ${y}:`,{value:o[y],error:n[y],touched:S[y]})})},[o,n,r,S,t,E,D]);const g=(s=>s&&!s.match(/^\d+$/)?s:{1:"employee",2:"selfemployed",3:"selfemployed",4:"pension",5:"student",6:"unemployed",7:"other"}[s]||"")(t),m=(s=>!s||s==="5"||s==="no_obligations"?"":s&&!s.match(/^\d+$/)?s:{1:"bank_loan",2:"consumer_credit",3:"credit_card",4:"other"}[s]||"")(D),N=xa("credit_step3");console.log("🔍 Credit Step 3 - ENHANCED DEBUG:",{formValues:{mainSourceOfIncome:t,obligation:D},incomeMapping:{originalValue:t,mappedKey:g,hasComponents:!!N[g],componentsCount:((me=N[g])==null?void 0:me.length)||0,availableKeys:Object.keys(N)},obligationMapping:{originalValue:D,mappedKey:m,hasComponents:!!T[m],componentsCount:((pe=T[m])==null?void 0:pe.length)||0,availableKeys:Object.keys(T)},shouldShowIncomeComponents:!!(t&&N[g]),shouldShowObligationComponents:!!(D&&T[m])}),console.log("🚨 FORM RENDERING DEBUG - ThirdStepForm is mounting/updating"),console.log("🚨 VALUES:",{mainSourceOfIncome:t,obligation:D}),console.log("🚨 MAPPED KEYS:",{incomeSourceKey:g,obligationKey:m});const v=M(),L=F(s=>s.borrowers.sourceOfIncomeModal),q=F(s=>s.borrowers.additionalIncomeModal),Z=F(s=>s.borrowers.obligationModal),j=F(s=>s.otherBorrowers.otherBorrowers),p=F(s=>s.login.loginData),_=()=>{v(V(o)),v(Ee())},k=()=>{v(V(o)),v(ke())},ee=()=>{v(V(o)),v(Ve())},R=s=>{v(Ue({id:s}))},Ne=s=>{v(we({id:s}))},fe=s=>{v(Oe({id:s}))},Fe=s=>{v(Me(s))},Ce=s=>{v(Ie(s))},De=s=>{v(qe(s))},xe=s=>{v(de(s));const y=!j.some(A=>A.id===s)?ie(j):s;c({pathname:"/services/other-borrowers/1/",search:ue({pageId:String(y)}).toString()})},ye=()=>{v(de(ie(j))),v(V(o)),c({pathname:"/services/other-borrowers/1/",search:ue({pageId:ie(j).toString()}).toString()})},Te=s=>{v(Ae(s))};return e.jsxDEV(Q,{children:[e.jsxDEV(X,{title:i("calculate_credit_step3_title","פרטי הכנסה ופיננסיים")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:272,columnNumber:7},globalThis),e.jsxDEV(O,{name:p==null?void 0:p.nameSurname,phone:p==null?void 0:p.phoneNumber},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:274,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(fa,{screenLocation:"credit_step3"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:280,columnNumber:9},globalThis),(()=>{var C,y;console.log("🔍 Credit Step 3 - PRODUCTION DEBUGGING:",{rawMainSourceOfIncome:t,mappedIncomeSourceKey:g,hasComponentsForMapped:!!N[g],hasComponentsForRaw:!!N[t],availableKeys:Object.keys(N),componentCountForMapped:((C=N[g])==null?void 0:C.length)||0,componentCountForRaw:((y=N[t])==null?void 0:y.length)||0,mappingFunction:"getIncomeSourceKey working?",isNumeric:t==null?void 0:t.match(/^\d+$/),shouldShowComponents:!!(g&&N[g])});const s=N[g];return s==null?void 0:s.map((A,ae)=>e.jsxDEV(re.Fragment,{children:A},ae,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:297,columnNumber:13},globalThis))})(),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:300,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:279,columnNumber:7},globalThis),e.jsxDEV(f,{children:t&&e.jsxDEV(u,{children:[L.map(s=>e.jsxDEV(O,{onEdit:()=>Fe(s.id),onDelete:()=>R(s.id),enableEdit:!0,name:`${i("calculate_credit_source_of_income",a("main_income_source"))}${s.id+1}`},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:306,columnNumber:15},globalThis)),e.jsxDEV(z,{onClick:_,color:"#FBE54D",value:i("calculate_credit_add_place_to_work",a("add_place_to_work")),variant:"none"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:314,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:304,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:302,columnNumber:7},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:324,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(Fa,{screenLocation:"credit_step3"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:327,columnNumber:9},globalThis),E&&!ve(E)&&e.jsxDEV(Ca,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:329,columnNumber:11},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:331,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:326,columnNumber:7},globalThis),E&&!ve(E)&&e.jsxDEV(f,{children:e.jsxDEV(u,{children:[q.map(s=>e.jsxDEV(O,{onEdit:()=>Ce(s.id),onDelete:()=>Ne(s.id),enableEdit:!0,name:`${i("calculate_credit_additional_income",a("additional_source_of_income"))}${s.id+1}`},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:338,columnNumber:15},globalThis)),e.jsxDEV(z,{onClick:k,color:"#FBE54D",value:i("calculate_credit_add_additional_income",a("add_additional_source_of_income")),variant:"none"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:346,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:336,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:335,columnNumber:9},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:356,columnNumber:7},globalThis),e.jsxDEV(f,{children:[e.jsxDEV(Da,{screenLocation:"credit_step3"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:359,columnNumber:9},globalThis),(()=>{var C,y;console.log("🔍 Credit Step 3 - OBLIGATION DEBUGGING:",{rawObligation:D,mappedObligationKey:m,hasComponentsForMapped:!!T[m],hasComponentsForRaw:!!T[D],availableObligationKeys:Object.keys(T),componentCountForMapped:((C=T[m])==null?void 0:C.length)||0,componentCountForRaw:((y=T[D])==null?void 0:y.length)||0,shouldShowObligationComponents:!!(m&&T[m])});const s=T[m];return s==null?void 0:s.map((A,ae)=>e.jsxDEV(re.Fragment,{children:A},ae,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:374,columnNumber:13},globalThis))})(),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:377,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:358,columnNumber:7},globalThis),D&&m&&e.jsxDEV(f,{children:e.jsxDEV(u,{children:[Z.map(s=>e.jsxDEV(O,{onEdit:()=>De(s.id),onDelete:()=>fe(s.id),enableEdit:!0,name:`${i("calculate_credit_obligation",a("obligation"))}${s.id+1}`},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:384,columnNumber:15},globalThis)),e.jsxDEV(z,{onClick:ee,color:"#FBE54D",value:i("calculate_credit_add_obligation",a("add_obligation")),variant:"none"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:392,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:382,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:381,columnNumber:9},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:402,columnNumber:7},globalThis),e.jsxDEV("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[j&&e.jsxDEV(te,{title:i("calculate_credit_borrower",a("borrower"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:404,columnNumber:28},globalThis),e.jsxDEV(f,{style:{columnGap:"2rem"},children:[j.map(s=>e.jsxDEV(u,{children:e.jsxDEV(O,{onEdit:()=>xe(s.id),onDelete:()=>Te(s.id),enableEdit:!0,name:s.nameSurname},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:408,columnNumber:15},globalThis)},s.id,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:407,columnNumber:13},globalThis)),!j&&e.jsxDEV(te,{title:i("calculate_credit_borrower",a("borrower"))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:417,columnNumber:31},globalThis),e.jsxDEV(u,{children:e.jsxDEV(z,{value:i("calculate_credit_add_borrower",a("add_borrower")),onClick:ye,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:419,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:418,columnNumber:11},globalThis),e.jsxDEV(u,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:430,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:405,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:403,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStepForm/ThirdStepForm.tsx",lineNumber:270,columnNumber:5},globalThis)},oe=()=>B().shape({mainSourceOfIncome:d().required(l("error_select_answer","Please select an answer")).test("not-empty",l("error_select_answer","Please select an answer"),a=>a!=null&&a!==""),monthlyIncome:P().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),startDate:d().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_date","Please enter a valid date")),otherwise:a=>a.notRequired()}),fieldOfActivity:d().when("mainSourceOfIncome",{is:a=>a!=null&&a!==""&&!["5","6"].includes(a),then:a=>a.required(l("error_select_field_of_activity","Please select field of activity")),otherwise:a=>a.notRequired()}),profession:d().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),companyName:d().when("mainSourceOfIncome",{is:a=>!["5","6"].includes(a),then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),additionalIncome:d().required(l("error_select_one_of_the_options","Please select one of the options")).test("not-empty",l("error_select_one_of_the_options","Please select one of the options"),a=>a!=null&&a!==""),additionalIncomeAmount:P().when("additionalIncome",{is:a=>a!=null&&a!==""&&a!=="no_additional_income",then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),obligation:d().required(l("error_select_one_of_the_options","Please select one of the options")),bank:d().when("obligation",{is:a=>a!=null&&a!==""&&a!=="no_obligations",then:a=>a.required(l("error_select_bank","Please select a bank")),otherwise:a=>a.notRequired()}),monthlyPaymentForAnotherBank:P().when("obligation",{is:a=>a!=null&&a!==""&&a!=="no_obligations",then:a=>a.required(l("error_fill_field","Please fill this field")),otherwise:a=>a.notRequired()}),endDate:d().when("obligation",{is:a=>a!=null&&a!==""&&a!=="no_obligations",then:a=>a.required(l("error_date","Please enter a valid date")),otherwise:a=>a.notRequired()})});oe();const Ia=()=>{const a=M(),h=I(),{i18n:i}=w(),[c,o]=x.useState(()=>oe()),n=F(S=>S.credit);x.useEffect(()=>{(async()=>{console.log("🔄 ThirdStep: Preloading validation errors for language:",i.language),await Be();const t=oe();o(t),console.log("✅ ThirdStep: Validation schema updated for language:",i.language)})()},[i.language]);const r={mainSourceOfIncome:n.mainSourceOfIncome||"",monthlyIncome:n.monthlyIncome||null,startDate:n.startDate||new Date().toISOString().split("T")[0],fieldOfActivity:n.fieldOfActivity||"",profession:n.profession||"",companyName:n.companyName||"",additionalIncome:n.additionalIncome||"no_additional_income",additionalIncomeAmount:n.additionalIncomeAmount||null,obligation:n.obligation||"no_obligations",bank:n.bank||"",monthlyPaymentForAnotherBank:n.monthlyPaymentForAnotherBank||null,endDate:n.endDate||new Date().toISOString().split("T")[0],amountIncomeCurrentYear:(n==null?void 0:n.amountIncomeCurrentYear)||null,noIncome:n.noIncome||new Date().toISOString().split("T")[0]};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(H,{initialValues:r,validationSchema:c,validateOnMount:!0,onSubmit:S=>{a(V(S)),h("/services/calculate-credit/4")},children:e.jsxDEV(J,{children:[e.jsxDEV(W,{children:e.jsxDEV(Ma,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:72,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:71,columnNumber:11},globalThis),e.jsxDEV(ne,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:74,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:70,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:61,columnNumber:7},globalThis),e.jsxDEV(Xe,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:77,columnNumber:7},globalThis),e.jsxDEV(Ze,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:78,columnNumber:7},globalThis),e.jsxDEV(ea,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:79,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/pages/ThirdStep/ThirdStep.tsx",lineNumber:60,columnNumber:5},globalThis)},vs=()=>{const{stepNumber:a}=Re(),{t:h,i18n:i}=w(),c=I(),o=F(S=>S.login.isLogin);if(x.useEffect(()=>{!o&&a!=="1"&&c("/services/calculate-credit/1")},[o,a,c]),!o&&a!=="1")return e.jsxDEV(he,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:31,columnNumber:12},globalThis);const n=[h("mobile_step_1"),h("mobile_step_2"),h("mobile_step_3"),h("mobile_step_4")];let r;switch(a){case"1":r=e.jsxDEV(ja,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:45,columnNumber:23},globalThis);break;case"2":r=e.jsxDEV(Oa,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:48,columnNumber:23},globalThis);break;case"3":r=e.jsxDEV(Ia,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:51,columnNumber:23},globalThis);break;case"4":r=e.jsxDEV(Va,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:54,columnNumber:23},globalThis);break;default:r=e.jsxDEV(Le,{type:"NOT_FOUND"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:57,columnNumber:23},globalThis);break}return e.jsxDEV(e.Fragment,{children:[e.jsxDEV($e,{progress:a,data:n},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:63,columnNumber:7},globalThis),e.jsxDEV(x.Suspense,{fallback:e.jsxDEV(he,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:64,columnNumber:27},globalThis),children:r},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:64,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:62,columnNumber:5},globalThis)};export{vs as default};
