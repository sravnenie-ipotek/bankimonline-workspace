import{a9 as p}from"./utils-vendor-f2764326.js";const c={}.REACT_APP_API_URL||"http://localhost:8003",o=p.create({baseURL:c,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(s=>{var e;const t=localStorage.getItem("adminToken");return t&&((e=s.url)!=null&&e.includes("/admin/"))&&(s.headers.Authorization=`Bearer ${t}`),s},s=>(console.error("API Request Error:",s),Promise.reject(s)));o.interceptors.response.use(s=>s,s=>{var t,e;return console.error("API Response Error:",((t=s.response)==null?void 0:t.data)||s.message),((e=s.response)==null?void 0:e.status)===401&&(localStorage.removeItem("adminToken"),window.location.pathname.includes("/admin/")&&(window.location.href="/admin")),Promise.reject(s)});class d{async getRegistrationForm(t){var e,r;try{return(await o.get(`/api/bank-worker/register/${t}`)).data}catch(a){throw new Error(((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to load registration form")}}async completeRegistration(t){var e,r;try{return(await o.post("/api/bank-worker/register",t)).data}catch(a){throw new Error(((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"Registration failed")}}async getWorkerStatus(t){var e,r;try{return(await o.get(`/api/bank-worker/status/${t}`)).data}catch(a){throw new Error(((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get worker status")}}async sendInvitation(t){var e,r;try{return(await o.post("/api/bank-worker/invite",t)).data}catch(a){throw new Error(((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to send invitation")}}async getInvitations(t){var e,r;try{return(await o.get("/api/admin/invitations",{params:t})).data}catch(a){throw new Error(((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get invitations")}}async getApprovalQueue(t){var e,r;try{return(await o.get("/api/admin/approval-queue",{params:t})).data}catch(a){throw new Error(((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get approval queue")}}async approveWorker(t,e){var r,a;try{return(await o.post(`/api/admin/approve/${t}`,{comments:e})).data}catch(n){throw new Error(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to approve worker")}}async rejectWorker(t,e,r){var a,n;try{return(await o.post(`/api/admin/reject/${t}`,{reason:e,comments:r})).data}catch(i){throw new Error(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to reject worker")}}async getBanks(){var t,e;try{return(await o.get("/api/admin/banks")).data}catch(r){throw new Error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to get banks")}}}const m=new d;export{m as b};
