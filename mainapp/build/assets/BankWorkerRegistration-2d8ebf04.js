import{c as L,j as e}from"./index-2fc954dd.js";import{k as q,f as $,r as c}from"./react-vendor-ede63a09.js";import{F as w,b as z,a as H,c as p,h as O}from"./form-vendor-a2ef071d.js";import{Q}from"./components-vendor-6941efab.js";import{L as Z,a as y,T,E as h,B as f,M as G}from"./index-b30bb6dd.js";import{F as j}from"./FormattedInput-1824430f.js";import{D as J}from"./DropdownMenu-a6989861.js";import{b as R}from"./bankWorkerApi-847be6ea.js";import{u as K}from"./i18n-vendor-9df1c3c6.js";import"./state-vendor-2038687c.js";import"./ui-vendor-93d59293.js";import"./utils-vendor-9f88f55c.js";import"./Control-6a12006a.js";const X="_registrationContainer_jjbl6_8",Y="_header_jjbl6_19",ee="_invitationInfo_jjbl6_23",ae="_bankName_jjbl6_30",se="_email_jjbl6_36",re="_form_jjbl6_42",ie="_formField_jjbl6_48",ne="_termsField_jjbl6_52",oe="_termsLabel_jjbl6_56",te="_termsCheckbox_jjbl6_63",le="_termsText_jjbl6_70",me="_termsLink_jjbl6_74",ce="_validationErrors_jjbl6_83",be="_errorMessage_jjbl6_94",ue="_submitSection_jjbl6_102",ke="_submitButton_jjbl6_105",de="_errorContainer_jjbl6_118",ge="_backButton_jjbl6_122",pe="_successModal_jjbl6_127",he="_successContent_jjbl6_127",Ne="_successMessage_jjbl6_131",ve="_successDetails_jjbl6_137",fe="_successButton_jjbl6_151",je="_loading_jjbl6_268",_e={registrationContainer:X,header:Y,invitationInfo:ee,bankName:ae,email:se,form:re,formField:ie,termsField:ne,termsLabel:oe,termsCheckbox:te,termsText:le,termsLink:me,validationErrors:ce,errorMessage:be,submitSection:ue,submitButton:ke,errorContainer:de,backButton:ge,successModal:pe,successContent:he,successMessage:Ne,successDetails:ve,successButton:fe,loading:je},s=L.bind(_e),xe=i=>H({fullName:p().min(2,i("validation.fullName.min")).max(100,i("validation.fullName.max")).matches(/^[\u0590-\u05FF\u0020A-Za-z\s]+$/,i("validation.fullName.format")).required(i("validation.fullName.required")),position:p().min(2,i("validation.position.min")).max(100,i("validation.position.max")).required(i("validation.position.required")),branchId:p().required(i("validation.branchId.required")),bankNumber:p().matches(/^[0-9]+$/,i("validation.bankNumber.format")).min(3,i("validation.bankNumber.min")).max(10,i("validation.bankNumber.max")).required(i("validation.bankNumber.required")),termsAccepted:O().oneOf([!0],i("validation.termsAccepted.required")).required(i("validation.termsAccepted.required"))}),Fe=()=>{const{token:i}=q(),N=$(),{t:a,i18n:V}=K(),[P,v]=c.useState(!0),[_,x]=c.useState(!1),[t,U]=c.useState(null),[C,S]=c.useState([]),[d,b]=c.useState(null),[B,D]=c.useState([]),[I,W]=c.useState(!1),[u,F]=c.useState(null),g=V.language||"en";c.useEffect(()=>{(async()=>{if(!i){b(a("errors.invalidToken")),v(!1);return}try{v(!0);const n=await R.getRegistrationForm(i);n.status==="success"?(U(n.data.invitation),S(n.data.branches),b(null)):b(n.message||a("errors.failedToLoadForm"))}catch(n){console.error("Error loading invitation data:",n),b(n.message||a("errors.networkError"))}finally{v(!1)}})()},[i,a]);const A=async(o,{setFieldError:n,setSubmitting:k})=>{try{x(!0),D([]),b(null);const l={invitationToken:i,fullName:o.fullName.trim(),position:o.position.trim(),branchId:o.branchId,bankNumber:o.bankNumber.trim(),termsAccepted:o.termsAccepted,language:g},m=await R.completeRegistration(l);m.status==="success"?(F(m.data),W(!0),Q.success(a("registration.success.message"))):m.errors&&Array.isArray(m.errors)?(D(m.errors),m.errors.forEach(r=>{n(r.field,r.message)})):b(m.message||a("errors.registrationFailed"))}catch(l){console.error("Registration error:",l),b(l.message||a("errors.networkError"))}finally{x(!1),k(!1)}},E=()=>{W(!1),u!=null&&u.id?N(`/bank-worker/status/${u.id}`):N("/")};return P?e.jsxDEV(Z,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:224,columnNumber:12},globalThis):d&&!t?e.jsxDEV(y,{children:e.jsxDEV("div",{className:s("errorContainer"),children:[e.jsxDEV(T,{title:a("registration.error.title")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:232,columnNumber:11},globalThis),e.jsxDEV(h,{message:d},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:233,columnNumber:11},globalThis),e.jsxDEV(f,{variant:"primary",onClick:()=>N("/"),className:s("backButton"),children:a("common.backToHome")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:234,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:231,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:230,columnNumber:7},globalThis):e.jsxDEV(y,{children:e.jsxDEV("div",{className:s("registrationContainer"),children:[e.jsxDEV("div",{className:s("header"),children:[e.jsxDEV(T,{title:a("registration.title"),tooltip:a("registration.tooltip")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:252,columnNumber:11},globalThis),e.jsxDEV("div",{className:s("invitationInfo"),children:[e.jsxDEV("p",{className:s("bankName"),children:t==null?void 0:t.bankName},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:257,columnNumber:13},globalThis),e.jsxDEV("p",{className:s("email"),children:t==null?void 0:t.email},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:258,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:256,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:251,columnNumber:9},globalThis),e.jsxDEV(w,{initialValues:{fullName:"",position:"",branchId:(t==null?void 0:t.branchId)||"",bankNumber:"",termsAccepted:!1,language:g},validationSchema:xe(a),onSubmit:A,enableReinitialize:!0,children:({values:o,errors:n,touched:k,setFieldValue:l,isSubmitting:m})=>e.jsxDEV(z,{className:s("form"),children:[e.jsxDEV("div",{className:s("formField"),children:e.jsxDEV(j,{name:"fullName",title:a("registration.fields.fullName.label"),placeholder:a("registration.fields.fullName.placeholder"),value:o.fullName,handleChange:r=>l("fullName",r),error:k.fullName&&n.fullName,tooltip:a("registration.fields.fullName.tooltip")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:280,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:279,columnNumber:15},globalThis),e.jsxDEV("div",{className:s("formField"),children:e.jsxDEV(j,{name:"position",title:a("registration.fields.position.label"),placeholder:a("registration.fields.position.placeholder"),value:o.position,handleChange:r=>l("position",r),error:k.position&&n.position,tooltip:a("registration.fields.position.tooltip")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:293,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:292,columnNumber:15},globalThis),e.jsxDEV("div",{className:s("formField"),children:e.jsxDEV(J,{name:"branchId",title:a("registration.fields.branch.label"),placeholder:a("registration.fields.branch.placeholder"),options:C.map(r=>({value:r.id,label:g==="he"?r.name_he:g==="ru"?r.name_ru:r.name_en,subtitle:`${r.branch_code} - ${r.city}`})),value:o.branchId,onChange:r=>l("branchId",r),error:k.branchId&&n.branchId,tooltip:a("registration.fields.branch.tooltip")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:306,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:305,columnNumber:15},globalThis),e.jsxDEV("div",{className:s("formField"),children:e.jsxDEV(j,{name:"bankNumber",title:a("registration.fields.bankNumber.label"),placeholder:a("registration.fields.bankNumber.placeholder"),value:o.bankNumber,handleChange:r=>l("bankNumber",r),error:k.bankNumber&&n.bankNumber,tooltip:a("registration.fields.bankNumber.tooltip")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:326,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:325,columnNumber:15},globalThis),e.jsxDEV("div",{className:s("formField","termsField"),children:[e.jsxDEV("label",{className:s("termsLabel"),children:[e.jsxDEV("input",{type:"checkbox",name:"termsAccepted",checked:o.termsAccepted,onChange:r=>l("termsAccepted",r.target.checked),className:s("termsCheckbox")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:340,columnNumber:19},globalThis),e.jsxDEV("span",{className:s("termsText"),children:[a("registration.fields.terms.text"),e.jsxDEV("a",{href:"/terms",target:"_blank",className:s("termsLink"),children:a("registration.fields.terms.link")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:349,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:347,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:339,columnNumber:17},globalThis),k.termsAccepted&&n.termsAccepted&&e.jsxDEV(h,{message:n.termsAccepted},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:359,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:338,columnNumber:15},globalThis),B.length>0&&e.jsxDEV("div",{className:s("validationErrors"),children:B.map((r,M)=>e.jsxDEV(h,{message:r.message},M,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:367,columnNumber:21},globalThis))},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:365,columnNumber:17},globalThis),d&&e.jsxDEV("div",{className:s("errorMessage"),children:e.jsxDEV(h,{message:d},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:375,columnNumber:19},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:374,columnNumber:17},globalThis),e.jsxDEV("div",{className:s("submitSection"),children:e.jsxDEV(f,{type:"submit",variant:"primary",size:"full",disabled:_||m,className:s("submitButton"),children:a(_?"common.submitting":"registration.submit")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:381,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:380,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:277,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:263,columnNumber:9},globalThis),e.jsxDEV(G,{isVisible:I,title:a("registration.success.title"),onCancel:E,className:s("successModal"),children:e.jsxDEV("div",{className:s("successContent"),children:[e.jsxDEV("p",{className:s("successMessage"),children:a("registration.success.description")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:403,columnNumber:13},globalThis),e.jsxDEV("div",{className:s("successDetails"),children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:[a("registration.success.id"),":"]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:407,columnNumber:18},globalThis)," ",u==null?void 0:u.id]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:407,columnNumber:15},globalThis),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:[a("registration.success.status"),":"]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:408,columnNumber:18},globalThis)," ",a("registration.success.pendingApproval")]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:408,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:406,columnNumber:13},globalThis),e.jsxDEV(f,{variant:"primary",onClick:E,className:s("successButton"),children:a("registration.success.continue")},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:410,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:402,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:396,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:249,columnNumber:7},globalThis)},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/BankWorker/BankWorkerRegistration.tsx",lineNumber:248,columnNumber:5},globalThis)};export{Fe as BankWorkerRegistration,Fe as default};
