import{k as he,r as N,d as D,a as e,m as r,i as M,x as S,R as Z,y as _e,z as pe,A as ge,J as xe,K as je,M as ye,D as fe,E as be,F as ve,G as ee,H as we,j as y,I as Ce}from"./index-595b925c.js";import{u as Q,b as x,c as O,E as F,D as f,T as K,d as B,f as h,e as b,F as k,o as Se,g as T,a as V,h as ae,L as De}from"./index-26c8a1fd.js";import{P as Pe}from"./ProgressBar-f2ea6a6b.js";import{V as Ne}from"./VideoPoster-3d6468f1.js";import{S as te,a as Me,L as Oe,U as Ie,A as Ae,F as Fe,B as Ee,b as qe,P as Be,c as ke,d as Te,e as Ve,O as Ye}from"./SourceOfIncomeModal-fcac2152.js";import{F as Y,a as L,R as p,C as c,D as E,b as oe,c as X}from"./StringInput-ca22fd84.js";import{s as H,I as Le}from"./IncreasePayment-f66b51b6.js";import{Y as Re,R as Ue,I as $e,N as ze,B as We,E as He,A as Ge,C as Je,T as Ke,a as Qe,b as Xe,H as Ze,M as ea,c as aa,P as ta}from"./Taxes-f12f7249.js";import{c as G,a as oa}from"./calculatePeriod-d6d018d2.js";import{U as C,a as na,c as ne,A as q,b as ra,d as ia,O as sa,e as re,g as J}from"./componentsByIncomeSource-28387ecb.js";import{F as la,o as ie,d as ca}from"./otherBorrowersSlice-420de176.js";import"./borrowersPersonalDataSlice-b4b343b1.js";import"./ShieldCheckIcon-d1e3dad8.js";const da=he({name:"credit",initialState:{},reducers:{updateCreditData:(a,d)=>({...a,...d.payload})}}),{updateCreditData:ua}=da.actions,ma=()=>{const[a,d]=N.useState(51130),[o,m]=N.useState(2654),{t,i18n:_}=D();_.language=_.language.split("-")[0];const g=[{value:"option_1",label:t("calculate_credit_target_option_1")},{value:"option_2",label:t("calculate_credit_target_option_2")},{value:"option_3",label:t("calculate_credit_target_option_3")},{value:"option_4",label:t("calculate_credit_target_option_4")},{value:"option_5",label:t("calculate_credit_target_option_5")},{value:"option_6",label:t("calculate_credit_target_option_6")}],l=[{value:"option_1",label:t("calculate_mortgage_when_options_1")},{value:"option_2",label:t("calculate_mortgage_when_options_2")},{value:"option_3",label:t("calculate_mortgage_when_options_3")},{value:"option_4",label:t("calculate_mortgage_when_options_4")}],R=[{value:"option_1",label:t("calculate_credit_prolong_option_1")},{value:"option_2",label:t("calculate_credit_prolong_option_2")},{value:"option_3",label:t("calculate_credit_prolong_option_3")},{value:"option_4",label:t("calculate_credit_prolong_option_4")},{value:"option_5",label:t("calculate_credit_prolong_option_5")},{value:"option_6",label:t("calculate_credit_prolong_option_6")},{value:"option_7",label:t("calculate_credit_prolong_option_7")}],U=[{value:"city_1",label:t("calculate_mortgage_city_1")},{value:"city_2",label:t("calculate_mortgage_city_2")},{value:"city_3",label:t("calculate_mortgage_city_3")}],{setFieldValue:j,values:s,errors:u,touched:v,setFieldTouched:w}=Q(),I=x(i=>i.activeField),P=O(),$=i=>{P(H("period")),j("period",i)},z=i=>{P(H("monthlyPayment")),j("monthlyPayment",i)};return N.useEffect(()=>{if(I==="period"){const i=G(s.loanAmount,0,s.period,5);Number.isNaN(i)||j("monthlyPayment",i)}else{const i=oa(s.loanAmount,0,s.monthlyPayment,5);Number.isNaN(i)||j("period",i)}},[I,j,s.loanAmount,s.monthlyPayment,s.period]),N.useLayoutEffect(()=>{const i=G(s.loanAmount,0,1,5),W=G(s.loanAmount,0,30,5);Number.isNaN(i)||d(i),i===0&&d(1),Number.isNaN(i)||m(W)},[s.loanAmount]),e.jsx(e.Fragment,{children:e.jsxs(Y,{children:[e.jsx(L,{title:t("sidebar_sub_calculate_credit")}),e.jsxs(p,{children:[e.jsx(c,{children:e.jsx(E,{title:t("calculate_why"),data:g,placeholder:t("calculate_credit_target_ph"),value:s.purposeOfLoan,onChange:i=>j("purposeOfLoan",i),onBlur:()=>w("purposeOfLoan",!0),error:v.purposeOfLoan&&u.purposeOfLoan})}),e.jsxs(c,{children:[e.jsx(oe,{handleChange:i=>{P(H("period")),j("loanAmount",i)},name:"loanAmount",title:t("calculate_amount"),value:s.loanAmount,placeholder:"1,000,000",error:u.loanAmount}),u.loanAmount&&e.jsx(F,{error:u.loanAmount})]}),e.jsx(c,{children:e.jsx(E,{title:t("calculate_when"),data:l,placeholder:t("calculate_mortgage_when_options_ph"),value:s.whenDoYouNeedMoney,onChange:i=>j("whenDoYouNeedMoney",i),onBlur:()=>w("whenDoYouNeedMoney",!0),error:v.whenDoYouNeedMoney&&u.whenDoYouNeedMoney})})]}),e.jsx(p,{children:e.jsx(c,{children:e.jsx(E,{title:t("calculate_prolong"),data:R,placeholder:t("calculate_mortgage_first_ph"),value:s.loanDeferral,onChange:i=>j("loanDeferral",i),onBlur:()=>w("loanDeferral",!0),error:v.loanDeferral&&u.loanDeferral})})}),s.purposeOfLoan&&s.purposeOfLoan==="option_6"&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(oe,{handleChange:i=>{j("priceOfEstate",i)},name:"PriceOfEstate",title:t("calculate_mortgage_price"),value:s.priceOfEstate,placeholder:"1,000,000",error:u.priceOfEstate}),u.priceOfEstate&&e.jsx(F,{error:u.priceOfEstate})]}),e.jsx(c,{children:e.jsx(E,{title:t("calculate_mortgage_city"),data:U,placeholder:t("city"),value:s.cityWhereYouBuy,onChange:i=>j("cityWhereYouBuy",i),onBlur:()=>w("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:t("search"),nothingFoundText:t("nothing_found"),error:v.cityWhereYouBuy&&u.cityWhereYouBuy})}),e.jsxs(c,{children:[e.jsx(K,{title:t("have_mortgage_title")}),e.jsx(Re,{value:s.haveMortgage,onChange:i=>j("haveMortgage",i),error:v.haveMortgage&&u.haveMortgage})]})]})]}),e.jsx(f,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(te,{disableCurrency:!0,unitsMax:t("calculate_mortgage_period_units_max"),unitsMin:t("calculate_mortgage_period_units_min"),value:s.period,name:"Period",min:1,max:30,error:u.period,title:t("calculate_mortgage_period"),handleChange:$}),u.period&&e.jsx(F,{error:u.period})]}),e.jsxs(c,{children:[e.jsx(te,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:o,max:a,error:u.monthlyPayment,title:t("calculate_mortgage_initial_payment"),handleChange:z,value:s.monthlyPayment}),e.jsx(Le,{}),u.monthlyPayment&&e.jsx(F,{error:u.monthlyPayment})]}),e.jsx(c,{})]})]})})},ha=B().shape({purposeOfLoan:h().required("Выберите ответ"),loanAmount:b().when("purposeOfLoan",{is:r.t("calculate_credit_target_option_6"),then:a=>a.max(1e6,r.t("error_loan_of_amount_credit_max_1000000")),otherwise:a=>a.max(2e5,r.t("error_loan_of_amount_credit_max_200000"))}).required(r.t("error_required_to_fill_out")),whenDoYouNeedMoney:h().required(r.t("error_select_answer")),loanDeferral:h().required(r.t("error_select_answer")),period:b().min(1,r.t("error_min__credit_period")).max(30,r.t("error_max_credit_period")).required(r.t("error_required_to_fill_out")),monthlyPayment:b().required(r.t("error_required_to_fill_out"))}),_a=()=>{const{t:a,i18n:d}=D();d.language=d.language.split("-")[0];const o=O(),m=M(),t=x(l=>l.credit),_=x(l=>l.login.isLogin),g={purposeOfLoan:t.purposeOfLoan||"",loanAmount:t.loanAmount||2e5,whenDoYouNeedMoney:t.whenDoYouNeedMoney||"",loanDeferral:t.loanDeferral||"",priceOfEstate:t.priceOfEstate||null,cityWhereYouBuy:t.cityWhereYouBuy||"",haveMortgage:t.haveMortgage||null,period:t.period||30,monthlyPayment:t.monthlyPayment||5368};return e.jsxs(e.Fragment,{children:[e.jsx(k,{initialValues:g,validationSchema:ha,validateOnMount:!0,onSubmit:l=>{o(ua(l)),_?m("/services/calculate-credit/2"):o(Se())},children:e.jsxs(T,{children:[e.jsxs(V,{children:[e.jsx(Ne,{title:a("sidebar_sub_calculate_credit"),text:a("calculate_mortgage_banner_subtext"),size:"small"}),e.jsx(ma,{})]}),e.jsx(Me,{})]})}),e.jsx(Oe,{})]})},pa=()=>{const{t:a,i18n:d}=D();d.language=d.language.split("-")[0];const o=x(t=>t.login.loginData),m=x(t=>t.credit);return e.jsxs(Y,{children:[e.jsx(L,{title:a("calculate_mortgage_final")}),e.jsx(Ie,{credit:m.loanAmount,nameSurname:o==null?void 0:o.nameSurname,phoneNumber:o==null?void 0:o.phoneNumber}),e.jsx(Ae,{text:a("calculate_mortgage_warning")}),e.jsx(p,{children:e.jsx(Fe,{})}),e.jsx(Ee,{})]})},ga={},xa=B().shape({}),ja=()=>e.jsx(k,{initialValues:ga,validationSchema:xa,validateOnMount:!0,onSubmit:()=>{console.log("нажата кнопка")},children:e.jsxs(T,{children:[e.jsx(V,{children:e.jsx(pa,{})}),e.jsx(X,{})]})}),ya=()=>{const{t:a,i18n:d}=D();d.language=d.language.split("-")[0];const{values:o}=Q(),m=x(t=>t.login.loginData);return e.jsxs(Y,{children:[e.jsx(L,{title:a("calculate_mortgage_step2_title")}),e.jsxs(Ue,{children:[e.jsx($e,{}),e.jsx(C,{name:m==null?void 0:m.nameSurname,phone:m==null?void 0:m.phoneNumber})]}),e.jsxs(p,{children:[e.jsx(ze,{}),e.jsx(We,{}),e.jsx(He,{})]}),e.jsxs(p,{children:[e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Ge,{}),o.additionalCitizenships==="yes"&&e.jsx(Je,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Ke,{}),o.taxes==="yes"&&e.jsx(Qe,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Xe,{}),o.childrens==="yes"&&e.jsx(Ze,{})]})]}),e.jsx(f,{}),e.jsxs(p,{children:[e.jsx(ea,{}),e.jsx(aa,{}),e.jsx(ta,{})]}),e.jsx(f,{}),e.jsxs(p,{children:[e.jsx(qe,{}),e.jsx(c,{}),e.jsx(c,{})]}),e.jsx(f,{}),e.jsxs(p,{children:[e.jsx(la,{}),e.jsx(c,{children:o.familyStatus==="option_2"&&e.jsx(Be,{})}),e.jsx(c,{children:o.partnerPayMortgage==="yes"&&o.familyStatus==="option_2"&&e.jsx(ke,{})})]})]})},fa=B().shape({nameSurname:h().required(r.t("error_name_surname")),birthday:h().required(r.t("error_date")),education:h().required(r.t("error_select_answer")),additionalCitizenships:h().required(r.t("error_select_answer")),citizenshipsDropdown:ae().when("additionalCitizenships",{is:"yes",then:a=>a.min(1,r.t("error_select_answer")),otherwise:a=>a.min(0)}),taxes:h().required(r.t("error_select_answer")),countriesPayTaxes:ae().when("taxes",{is:"yes",then:a=>a.min(1,r.t("error_select_answer")),otherwise:a=>a.min(0)}),childrens:h().required(r.t("error_select_answer")),howMuchChildrens:b().required(r.t("error_fill_field")),medicalInsurance:h().required(r.t("error_select_answer")),isForeigner:h().required(r.t("error_select_answer")),publicPerson:h().required(r.t("error_select_answer")),borrowers:b().min(1,r.t("error_quantity_borrowers")).required(r.t("error_quantity_borrowers")),familyStatus:h().required(r.t("error_select_answer")),partnerPayMortgage:h().when("familyStatus",{is:r.t("calculate_mortgage_family_status_option_2"),then:a=>a.required(r.t("error_select_answer")),otherwise:a=>a.notRequired()})}),ba=()=>{const a=O(),d=M(),o=x(_=>_.mortgage),t={nameSurname:x(_=>_.login.loginData).nameSurname||o.nameSurname||"",birthday:o.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:o.education||"",additionalCitizenships:o.additionalCitizenships||null,citizenshipsDropdown:o.citizenshipsDropdown||[],taxes:o.taxes||null,countriesPayTaxes:o.countriesPayTaxes||[],childrens:o.childrens||null,howMuchChildrens:o.howMuchChildrens||1,medicalInsurance:o.medicalInsurance||null,isForeigner:o.isForeigner||null,publicPerson:o.publicPerson||null,borrowers:o.borrowers||null,familyStatus:o.familyStatus||"",partnerPayMortgage:o.partnerPayMortgage||null,addPartner:o.addPartner||""};return e.jsx(k,{initialValues:t,validationSchema:fa,validateOnMount:!0,onSubmit:_=>{a(S(_)),d("/services/calculate-credit/3")},children:e.jsxs(T,{children:[e.jsx(V,{children:e.jsx(ya,{})}),e.jsx(X,{})]})})},va=()=>{const{t:a,i18n:d}=D();d.language=d.language.split("-")[0];const o=M(),{values:m}=Q(),{mainSourceOfIncome:t,additionalIncome:_,obligation:g}=m,l=O(),R=x(n=>n.borrowers.sourceOfIncomeModal),U=x(n=>n.borrowers.additionalIncomeModal),j=x(n=>n.borrowers.obligationModal),s=x(n=>n.otherBorrowers.otherBorrowers),u=x(n=>n.login.loginData),v=()=>{l(S(m)),l(_e())},w=()=>{l(S(m)),l(pe())},I=()=>{l(S(m)),l(ge())},P=n=>{l(xe({id:n}))},$=n=>{l(je({id:n}))},z=n=>{l(ye({id:n}))},i=n=>{l(fe(n))},W=n=>{l(be(n))},se=n=>{l(ve(n))},le=n=>{l(ie(n));const ue=!s.some(me=>me.id===n)?J(s):n;o({pathname:"/services/other-borrowers/1/",search:ee({pageId:String(ue)}).toString()})},ce=()=>{l(ie(J(s))),l(S(m)),o({pathname:"/services/other-borrowers/1/",search:ee({pageId:J(s).toString()}).toString()})},de=n=>{l(ca(n))};return e.jsxs(Y,{children:[e.jsx(L,{title:a("calculate_mortgage_step3_title")}),e.jsx(C,{name:u==null?void 0:u.nameSurname,phone:u==null?void 0:u.phoneNumber}),e.jsxs(p,{children:[e.jsx(na,{}),ne[t]&&ne[t].map((n,A)=>e.jsx(Z.Fragment,{children:n},A)),e.jsx(c,{})]}),e.jsx(p,{children:t&&e.jsxs(c,{children:[R.map(n=>e.jsx(C,{onEdit:()=>i(n.id),onDelete:()=>P(n.id),enableEdit:!0,name:`${a("source_of_income")}${n.id+1}`},n.id)),e.jsx(q,{onClick:v,color:"#FBE54D",value:a("add_place_to_work"),variant:"none"})]})}),e.jsx(f,{}),e.jsxs(p,{children:[e.jsx(ra,{}),_&&_!=="option_1"&&e.jsx(ia,{}),e.jsx(c,{})]}),_&&_!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[U.map(n=>e.jsx(C,{onEdit:()=>W(n.id),onDelete:()=>$(n.id),enableEdit:!0,name:`${a("additional_source_of_income")}${n.id+1}`},n.id)),e.jsx(q,{onClick:w,color:"#FBE54D",value:a("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(f,{}),e.jsxs(p,{children:[e.jsx(sa,{}),re[g]&&re[g].map((n,A)=>e.jsx(Z.Fragment,{children:n},A)),e.jsx(c,{})]}),g&&g!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[j.map(n=>e.jsx(C,{onEdit:()=>se(n.id),onDelete:()=>z(n.id),enableEdit:!0,name:`${a("obligation")}${n.id+1}`},n.id)),e.jsx(q,{onClick:I,color:"#FBE54D",value:a("add_obligation"),variant:"none"})]})}),e.jsx(f,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[s&&e.jsx(K,{title:a("borrower")}),e.jsxs(p,{style:{columnGap:"2rem"},children:[s.map(n=>e.jsx(c,{children:e.jsx(C,{onEdit:()=>le(n.id),onDelete:()=>de(n.id),enableEdit:!0,name:n.nameSurname},n.id)},n.id)),!s&&e.jsx(K,{title:a("borrower")}),e.jsx(c,{children:e.jsx(q,{value:a("add_borrower"),onClick:ce,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(c,{})]})]})]})},wa=B().shape({mainSourceOfIncome:h().required(r.t("error_select_answer")),monthlyIncome:b().required(r.t("error_fill_field")),startDate:h().required(r.t("error_date")),fieldOfActivity:h().when("mainSourceOfIncome",{is:a=>a!=null&&a!=="",then:a=>a.required(r.t("error_select_field_of_activity")),otherwise:a=>a.notRequired()}),profession:h().required(r.t("error_fill_field")),companyName:h().required(r.t("error_fill_field")),additionalIncome:h().required(r.t("error_select_one_of_the_options")),additionalIncomeAmount:b().when("additionalIncome",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_fill_field")),otherwise:a=>a.notRequired()}),obligation:h().required(r.t("error_select_one_of_the_options")),bank:h().when("obligation",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_select_bank")),otherwise:a=>a.notRequired()}),monthlyPaymentForAnotherBank:b().when("obligation",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_fill_field")),otherwise:a=>a.notRequired()}),endDate:h().required(r.t("error_date"))}),Ca=()=>{const a=O(),d=M(),o=x(t=>t.mortgage),m={mainSourceOfIncome:o.mainSourceOfIncome||"",monthlyIncome:o.monthlyIncome||null,startDate:o.startDate||new Date().getTime(),fieldOfActivity:o.fieldOfActivity||"",profession:o.profession||"",companyName:o.companyName||"",additionalIncome:o.additionalIncome||"",additionalIncomeAmount:o.additionalIncomeAmount||null,obligation:o.obligation||"",bank:o.bank||"",monthlyPaymentForAnotherBank:o.monthlyPaymentForAnotherBank||null,endDate:o.endDate||new Date().getTime(),amountIncomeCurrentYear:(o==null?void 0:o.amountIncomeCurrentYear)||null,noIncome:o.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(k,{initialValues:m,validationSchema:wa,validateOnMount:!0,onSubmit:t=>{a(S(t)),d("/services/calculate-credit/4")},children:e.jsxs(T,{children:[e.jsx(V,{children:e.jsx(va,{})}),e.jsx(X,{})]})}),e.jsx(Te,{}),e.jsx(Ve,{}),e.jsx(Ye,{})]})},Ta=()=>{const{stepNumber:a}=we(),{t:d,i18n:o}=D(),m=M();if(o.language=o.language.split("-")[0],!x(l=>l.login.isLogin)&&a!=="1"){m("/services/calculate-credit/1");return}const _=[d("calculate_credit_calculator"),d("mortgage_refinance_step_2"),d("calculate_mortgage_income"),d("calculate_mortgage_programs")];let g;switch(a){case"1":g=y.jsxDEV(_a,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:39,columnNumber:23},globalThis);break;case"2":g=y.jsxDEV(ba,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:42,columnNumber:23},globalThis);break;case"3":g=y.jsxDEV(Ca,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:45,columnNumber:23},globalThis);break;case"4":g=y.jsxDEV(ja,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:48,columnNumber:23},globalThis);break;default:g=y.jsxDEV(Ce,{type:"NOT_FOUND"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:51,columnNumber:23},globalThis);break}return y.jsxDEV(y.Fragment,{children:[y.jsxDEV(Pe,{progress:a,data:_},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:57,columnNumber:7},globalThis),y.jsxDEV(N.Suspense,{fallback:y.jsxDEV(De,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:58,columnNumber:27},globalThis),children:g},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:58,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:56,columnNumber:5},globalThis)};export{Ta as default};
