import{j as e}from"./ui-vendor-99260b86.js";import{k as t,f as s,r as a}from"./react-vendor-21ec1e1c.js";import{c as i}from"./index-be42ab03.js";import{L as n,b as r,T as l,E as c,B as o}from"./index-73dd41d9.js";import{b as m}from"./bankWorkerApi-cec77c3a.js";import{u as d}from"./i18n-vendor-18addd5f.js";import"./state-vendor-069efcec.js";import"./utils-vendor-8f040048.js";import"./form-vendor-6d56d196.js";import"./components-vendor-62dc47c0.js";const u={statusContainer:"_statusContainer_1fflh_7",header:"_header_1fflh_18",refreshButton:"_refreshButton_1fflh_24",statusOverview:"_statusOverview_1fflh_39",statusHeader:"_statusHeader_1fflh_46",workerName:"_workerName_1fflh_52",mainStatus:"_mainStatus_1fflh_58",statusDetails:"_statusDetails_1fflh_72",detailRow:"_detailRow_1fflh_76",label:"_label_1fflh_86",value:"_value_1fflh_91",statusBadge:"_statusBadge_1fflh_114","statusBadge--success":"_statusBadge--success_1fflh_123","statusBadge--warning":"_statusBadge--warning_1fflh_128","statusBadge--error":"_statusBadge--error_1fflh_133","statusBadge--neutral":"_statusBadge--neutral_1fflh_138",timeline:"_timeline_1fflh_144",timelineTitle:"_timelineTitle_1fflh_147",timelineItems:"_timelineItems_1fflh_153",timelineItem:"_timelineItem_1fflh_153",timelineIcon:"_timelineIcon_1fflh_173",timelineContent:"_timelineContent_1fflh_183",timelineItemTitle:"_timelineItemTitle_1fflh_183",timelineItemDate:"_timelineItemDate_1fflh_189",timelineItemDescription:"_timelineItemDescription_1fflh_194",rejectionReason:"_rejectionReason_1fflh_199",adminComments:"_adminComments_1fflh_200","timelineItem--completed":"_timelineItem--completed_1fflh_216","timelineItem--pending":"_timelineItem--pending_1fflh_220","timelineItem--error":"_timelineItem--error_1fflh_224",nextSteps:"_nextSteps_1fflh_242",nextStepsTitle:"_nextStepsTitle_1fflh_249",nextStepsDescription:"_nextStepsDescription_1fflh_255",nextStepsActions:"_nextStepsActions_1fflh_261",actionButton:"_actionButton_1fflh_266",footerActions:"_footerActions_1fflh_282",backButton:"_backButton_1fflh_287",accessButton:"_accessButton_1fflh_288",errorContainer:"_errorContainer_1fflh_302",errorActions:"_errorActions_1fflh_306",retryButton:"_retryButton_1fflh_313",errorMessage:"_errorMessage_1fflh_327",demoNotice:"_demoNotice_1fflh_449"},_=i.bind(u),h=({status:t,className:s})=>{const{t:a}=d(),i=(e=>{switch(e.toLowerCase()){case"pending":return{color:"warning",text:a("status.pending")};case"approved":return{color:"success",text:a("status.approved")};case"rejected":return{color:"error",text:a("status.rejected")};case"active":return{color:"success",text:a("status.active")};case"inactive":return{color:"neutral",text:a("status.inactive")};default:return{color:"neutral",text:e}}})(t);return e.jsx("span",{className:_("statusBadge",`statusBadge--${i.color}`,s),children:i.text})},p=()=>{const{id:i}=t(),u=s(),{t:p,i18n:f}=d(),[x,j]=a.useState(!0),[v,N]=a.useState(null),[g,I]=a.useState(null),[S,D]=a.useState(!1),B=async(e=!1)=>{if(!i)return I(p("errors.invalidWorkerId")),void j(!1);try{e?D(!0):j(!0);const t=await m.getWorkerStatus(i);"success"===t.status&&t.data?(N(t.data),I(null)):I(t.message||p("errors.failedToLoadStatus"))}catch(t){I(t.message||p("errors.networkError"))}finally{j(!1),D(!1)}};a.useEffect(()=>{B()},[i,p]);const w=()=>{B(!0)};if(x)return e.jsx(n,{});if(g&&!v)return e.jsx(r,{children:e.jsxs("div",{className:_("errorContainer"),children:[e.jsx(l,{title:p("status.error.title")}),e.jsx(c,{message:g}),e.jsxs("div",{className:_("errorActions"),children:[e.jsx(o,{variant:"primary",onClick:()=>u("/"),className:_("backButton"),children:p("common.backToHome")}),e.jsx(o,{variant:"secondary",onClick:w,className:_("retryButton"),children:p("common.retry")})]})]})});if(!v)return null;const b=(e=>{switch(e.status.toLowerCase()){case"pending":return{title:p("nextSteps.pending.title"),description:p("nextSteps.pending.description"),actions:[{text:p("nextSteps.pending.contactAdmin"),action:()=>window.location.href="mailto:admin@bankimonline.com"}]};case"approved":return{title:p("nextSteps.approved.title"),description:p("nextSteps.approved.description"),actions:[{text:p("nextSteps.approved.accessSystem"),action:()=>u("/personal-cabinet")}]};case"rejected":return{title:p("nextSteps.rejected.title"),description:p("nextSteps.rejected.description"),actions:[{text:p("nextSteps.rejected.contactSupport"),action:()=>window.location.href="mailto:support@bankimonline.com"}]};default:return null}})(v);return e.jsx(r,{children:e.jsxs("div",{className:_("statusContainer"),children:[e.jsxs("div",{className:_("header"),children:[e.jsx(l,{title:p("status.title"),tooltip:p("status.tooltip")}),e.jsx(o,{variant:"secondary",onClick:w,disabled:S,className:_("refreshButton"),children:p(S?"common.refreshing":"common.refresh")})]}),e.jsxs("div",{className:_("statusOverview"),children:[e.jsxs("div",{className:_("statusHeader"),children:[e.jsx("h2",{className:_("workerName"),children:v.fullName}),e.jsx(h,{status:v.status,className:_("mainStatus")})]}),e.jsxs("div",{className:_("statusDetails"),children:[e.jsxs("div",{className:_("detailRow"),children:[e.jsxs("span",{className:_("label"),children:[p("status.fields.position"),":"]}),e.jsx("span",{className:_("value"),children:v.position})]}),e.jsxs("div",{className:_("detailRow"),children:[e.jsxs("span",{className:_("label"),children:[p("status.fields.bank"),":"]}),e.jsx("span",{className:_("value"),children:v.bankName})]}),e.jsxs("div",{className:_("detailRow"),children:[e.jsxs("span",{className:_("label"),children:[p("status.fields.branch"),":"]}),e.jsx("span",{className:_("value"),children:v.branchName})]}),e.jsxs("div",{className:_("detailRow"),children:[e.jsxs("span",{className:_("label"),children:[p("status.fields.registrationDate"),":"]}),e.jsx("span",{className:_("value"),children:new Date(v.registrationDate).toLocaleDateString(f.language,{year:"numeric",month:"long",day:"numeric"})})]})]})]}),e.jsxs("div",{className:_("timeline"),children:[e.jsx("h3",{className:_("timelineTitle"),children:p("status.timeline.title")}),e.jsxs("div",{className:_("timelineItems"),children:[e.jsxs("div",{className:_("timelineItem","timelineItem--completed"),children:[e.jsx("div",{className:_("timelineIcon")}),e.jsxs("div",{className:_("timelineContent"),children:[e.jsx("h4",{className:_("timelineItemTitle"),children:p("status.timeline.registration")}),e.jsx("p",{className:_("timelineItemDate"),children:new Date(v.registrationDate).toLocaleDateString(f.language,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:_("timelineItem",{"timelineItem--completed":v.approvalDate||v.rejectionDate,"timelineItem--pending":!v.approvalDate&&!v.rejectionDate,"timelineItem--error":v.rejectionDate}),children:[e.jsx("div",{className:_("timelineIcon")}),e.jsxs("div",{className:_("timelineContent"),children:[e.jsx("h4",{className:_("timelineItemTitle"),children:v.approvalDate?p("status.timeline.approved"):v.rejectionDate?p("status.timeline.rejected"):p("status.timeline.pendingApproval")}),(v.approvalDate||v.rejectionDate)&&e.jsx("p",{className:_("timelineItemDate"),children:new Date(v.approvalDate||v.rejectionDate).toLocaleDateString(f.language,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),v.rejectionReason&&e.jsxs("p",{className:_("rejectionReason"),children:[e.jsxs("strong",{children:[p("status.rejectionReason"),":"]})," ",v.rejectionReason]}),v.adminComments&&e.jsxs("p",{className:_("adminComments"),children:[e.jsxs("strong",{children:[p("status.adminComments"),":"]})," ",v.adminComments]})]})]}),v.approvalDate&&e.jsxs("div",{className:_("timelineItem",{"timelineItem--completed":"active"===v.status,"timelineItem--pending":"active"!==v.status}),children:[e.jsx("div",{className:_("timelineIcon")}),e.jsxs("div",{className:_("timelineContent"),children:[e.jsx("h4",{className:_("timelineItemTitle"),children:p("status.timeline.systemAccess")}),e.jsx("p",{className:_("timelineItemDescription"),children:"active"===v.status?p("status.timeline.accessGranted"):p("status.timeline.accessPending")})]})]})]})]}),b&&e.jsxs("div",{className:_("nextSteps"),children:[e.jsx("h3",{className:_("nextStepsTitle"),children:b.title}),e.jsx("p",{className:_("nextStepsDescription"),children:b.description}),b.actions&&b.actions.length>0&&e.jsx("div",{className:_("nextStepsActions"),children:b.actions.map((t,s)=>e.jsx(o,{variant:"primary",onClick:t.action,className:_("actionButton"),children:t.text},s))})]}),g&&e.jsx("div",{className:_("errorMessage"),children:e.jsx(c,{message:g})}),e.jsxs("div",{className:_("footerActions"),children:[e.jsx(o,{variant:"secondary",onClick:()=>u("/"),className:_("backButton"),children:p("common.backToHome")}),"approved"===v.status&&e.jsx(o,{variant:"primary",onClick:()=>u("/personal-cabinet"),className:_("accessButton"),children:p("status.accessSystem")})]})]})})};export{p as BankWorkerStatus,p as default};
