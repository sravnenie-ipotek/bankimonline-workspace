import{k as e,r as a,d as r,a as t,m as o,i as n,x as i,R as l,y as s,z as c,A as u,J as d,K as m,M as _,D as h,E as p,F as g,G as x,H as j,j as b,I as v}from"./index-09bacb8e.js";import{u as y,b as f,c as w,E as D,D as C,T as N,d as S,f as P,e as q,F as O,o as M,g as I,a as E,h as A,L as k}from"./index-df54a9f4.js";import{P as F}from"./ProgressBar-c0a0f0bc.js";import{V as B}from"./VideoPoster-49f2043b.js";import{S as T,a as Y,L,U as V,A as U,F as z,B as R,b as W,P as $,c as G,d as H,e as J,O as K}from"./SourceOfIncomeModal-4125ee39.js";import{F as Q,a as X,R as Z,C as ee,D as ae,b as re,c as te}from"./StringInput-a6a30de1.js";import{s as oe,I as ne}from"./IncreasePayment-fca01107.js";import{Y as ie,R as le,I as se,N as ce,B as ue,E as de,A as me,C as _e,T as he,a as pe,b as ge,H as xe,M as je,c as be,P as ve}from"./Taxes-55a9aa5d.js";import{c as ye,a as fe}from"./calculatePeriod-00770cec.js";import{U as we,a as De,c as Ce,A as Ne,b as Se,d as Pe,O as qe,e as Oe,g as Me}from"./componentsByIncomeSource-e4854958.js";import{F as Ie,o as Ee,d as Ae}from"./otherBorrowersSlice-9edd9333.js";import"./borrowersPersonalDataSlice-9c68a163.js";import"./ShieldCheckIcon-05b1104d.js";const ke=e({name:"credit",initialState:{},reducers:{updateCreditData:(e,a)=>({...e,...a.payload})}}),{updateCreditData:Fe}=ke.actions,Be=()=>{const[e,o]=a.useState(51130),[n,i]=a.useState(2654),{t:l,i18n:s}=r();s.language=s.language.split("-")[0];const c=[{value:"option_1",label:l("calculate_credit_target_option_1")},{value:"option_2",label:l("calculate_credit_target_option_2")},{value:"option_3",label:l("calculate_credit_target_option_3")},{value:"option_4",label:l("calculate_credit_target_option_4")},{value:"option_5",label:l("calculate_credit_target_option_5")},{value:"option_6",label:l("calculate_credit_target_option_6")}],u=[{value:"option_1",label:l("calculate_mortgage_when_options_1")},{value:"option_2",label:l("calculate_mortgage_when_options_2")},{value:"option_3",label:l("calculate_mortgage_when_options_3")},{value:"option_4",label:l("calculate_mortgage_when_options_4")}],d=[{value:"option_1",label:l("calculate_credit_prolong_option_1")},{value:"option_2",label:l("calculate_credit_prolong_option_2")},{value:"option_3",label:l("calculate_credit_prolong_option_3")},{value:"option_4",label:l("calculate_credit_prolong_option_4")},{value:"option_5",label:l("calculate_credit_prolong_option_5")},{value:"option_6",label:l("calculate_credit_prolong_option_6")},{value:"option_7",label:l("calculate_credit_prolong_option_7")}],m=[{value:"city_1",label:l("calculate_mortgage_city_1")},{value:"city_2",label:l("calculate_mortgage_city_2")},{value:"city_3",label:l("calculate_mortgage_city_3")}],{setFieldValue:_,values:h,errors:p,touched:g,setFieldTouched:x}=y(),j=f(e=>e.activeField),b=w();return a.useEffect(()=>{if("period"===j){const e=ye(h.loanAmount,0,h.period,5);Number.isNaN(e)||_("monthlyPayment",e)}else{const e=fe(h.loanAmount,0,h.monthlyPayment,5);Number.isNaN(e)||_("period",e)}},[j,_,h.loanAmount,h.monthlyPayment,h.period]),a.useLayoutEffect(()=>{const e=ye(h.loanAmount,0,1,5),a=ye(h.loanAmount,0,30,5);Number.isNaN(e)||o(e),0===e&&o(1),Number.isNaN(e)||i(a)},[h.loanAmount]),t.jsx(t.Fragment,{children:t.jsxs(Q,{children:[t.jsx(X,{title:l("sidebar_sub_calculate_credit")}),t.jsxs(Z,{children:[t.jsx(ee,{children:t.jsx(ae,{title:l("calculate_why"),data:c,placeholder:l("calculate_credit_target_ph"),value:h.purposeOfLoan,onChange:e=>_("purposeOfLoan",e),onBlur:()=>x("purposeOfLoan",!0),error:g.purposeOfLoan&&p.purposeOfLoan})}),t.jsxs(ee,{children:[t.jsx(re,{handleChange:e=>{b(oe("period")),_("loanAmount",e)},name:"loanAmount",title:l("calculate_amount"),value:h.loanAmount,placeholder:"1,000,000",error:p.loanAmount}),p.loanAmount&&t.jsx(D,{error:p.loanAmount})]}),t.jsx(ee,{children:t.jsx(ae,{title:l("calculate_when"),data:u,placeholder:l("calculate_mortgage_when_options_ph"),value:h.whenDoYouNeedMoney,onChange:e=>_("whenDoYouNeedMoney",e),onBlur:()=>x("whenDoYouNeedMoney",!0),error:g.whenDoYouNeedMoney&&p.whenDoYouNeedMoney})})]}),t.jsx(Z,{children:t.jsx(ee,{children:t.jsx(ae,{title:l("calculate_prolong"),data:d,placeholder:l("calculate_mortgage_first_ph"),value:h.loanDeferral,onChange:e=>_("loanDeferral",e),onBlur:()=>x("loanDeferral",!0),error:g.loanDeferral&&p.loanDeferral})})}),h.purposeOfLoan&&"option_6"===h.purposeOfLoan&&t.jsxs(t.Fragment,{children:[t.jsx(C,{}),t.jsxs(Z,{children:[t.jsxs(ee,{children:[t.jsx(re,{handleChange:e=>{_("priceOfEstate",e)},name:"PriceOfEstate",title:l("calculate_mortgage_price"),value:h.priceOfEstate,placeholder:"1,000,000",error:p.priceOfEstate}),p.priceOfEstate&&t.jsx(D,{error:p.priceOfEstate})]}),t.jsx(ee,{children:t.jsx(ae,{title:l("calculate_mortgage_city"),data:m,placeholder:l("city"),value:h.cityWhereYouBuy,onChange:e=>_("cityWhereYouBuy",e),onBlur:()=>x("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:l("search"),nothingFoundText:l("nothing_found"),error:g.cityWhereYouBuy&&p.cityWhereYouBuy})}),t.jsxs(ee,{children:[t.jsx(N,{title:l("have_mortgage_title")}),t.jsx(ie,{value:h.haveMortgage,onChange:e=>_("haveMortgage",e),error:g.haveMortgage&&p.haveMortgage})]})]})]}),t.jsx(C,{}),t.jsxs(Z,{children:[t.jsxs(ee,{children:[t.jsx(T,{disableCurrency:!0,unitsMax:l("calculate_mortgage_period_units_max"),unitsMin:l("calculate_mortgage_period_units_min"),value:h.period,name:"Period",min:1,max:30,error:p.period,title:l("calculate_mortgage_period"),handleChange:e=>{b(oe("period")),_("period",e)}}),p.period&&t.jsx(D,{error:p.period})]}),t.jsxs(ee,{children:[t.jsx(T,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:n,max:e,error:p.monthlyPayment,title:l("calculate_mortgage_initial_payment"),handleChange:e=>{b(oe("monthlyPayment")),_("monthlyPayment",e)},value:h.monthlyPayment}),t.jsx(ne,{}),p.monthlyPayment&&t.jsx(D,{error:p.monthlyPayment})]}),t.jsx(ee,{})]})]})})},Te=S().shape({purposeOfLoan:P().required("Выберите ответ"),loanAmount:q().when("purposeOfLoan",{is:o.t("calculate_credit_target_option_6"),then:e=>e.max(1e6,o.t("error_loan_of_amount_credit_max_1000000")),otherwise:e=>e.max(2e5,o.t("error_loan_of_amount_credit_max_200000"))}).required(o.t("error_required_to_fill_out")),whenDoYouNeedMoney:P().required(o.t("error_select_answer")),loanDeferral:P().required(o.t("error_select_answer")),period:q().min(1,o.t("error_min__credit_period")).max(30,o.t("error_max_credit_period")).required(o.t("error_required_to_fill_out")),monthlyPayment:q().required(o.t("error_required_to_fill_out"))}),Ye=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const o=w(),i=n(),l=f(e=>e.credit),s=f(e=>e.login.isLogin),c={purposeOfLoan:l.purposeOfLoan||"",loanAmount:l.loanAmount||2e5,whenDoYouNeedMoney:l.whenDoYouNeedMoney||"",loanDeferral:l.loanDeferral||"",priceOfEstate:l.priceOfEstate||null,cityWhereYouBuy:l.cityWhereYouBuy||"",haveMortgage:l.haveMortgage||null,period:l.period||30,monthlyPayment:l.monthlyPayment||5368};return t.jsxs(t.Fragment,{children:[t.jsx(O,{initialValues:c,validationSchema:Te,validateOnMount:!0,onSubmit:e=>{o(Fe(e)),s?i("/services/calculate-credit/2"):o(M())},children:t.jsxs(I,{children:[t.jsxs(E,{children:[t.jsx(B,{title:e("sidebar_sub_calculate_credit"),text:e("calculate_mortgage_banner_subtext"),size:"small"}),t.jsx(Be,{})]}),t.jsx(Y,{})]})}),t.jsx(L,{})]})},Le=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const o=f(e=>e.login.loginData),n=f(e=>e.credit);return t.jsxs(Q,{children:[t.jsx(X,{title:e("calculate_mortgage_final")}),t.jsx(V,{credit:n.loanAmount,nameSurname:null==o?void 0:o.nameSurname,phoneNumber:null==o?void 0:o.phoneNumber}),t.jsx(U,{text:e("calculate_mortgage_warning")}),t.jsx(Z,{children:t.jsx(z,{})}),t.jsx(R,{})]})},Ve={},Ue=S().shape({}),ze=()=>t.jsx(O,{initialValues:Ve,validationSchema:Ue,validateOnMount:!0,onSubmit:()=>{console.log("нажата кнопка")},children:t.jsxs(I,{children:[t.jsx(E,{children:t.jsx(Le,{})}),t.jsx(te,{})]})}),Re=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const{values:o}=y(),n=f(e=>e.login.loginData);return t.jsxs(Q,{children:[t.jsx(X,{title:e("calculate_mortgage_step2_title")}),t.jsxs(le,{children:[t.jsx(se,{}),t.jsx(we,{name:null==n?void 0:n.nameSurname,phone:null==n?void 0:n.phoneNumber})]}),t.jsxs(Z,{children:[t.jsx(ce,{}),t.jsx(ue,{}),t.jsx(de,{})]}),t.jsxs(Z,{children:[t.jsxs(ee,{style:{gap:"2rem"},children:[t.jsx(me,{}),"yes"===o.additionalCitizenships&&t.jsx(_e,{})]}),t.jsxs(ee,{style:{gap:"2rem"},children:[t.jsx(he,{}),"yes"===o.taxes&&t.jsx(pe,{})]}),t.jsxs(ee,{style:{gap:"2rem"},children:[t.jsx(ge,{}),"yes"===o.childrens&&t.jsx(xe,{})]})]}),t.jsx(C,{}),t.jsxs(Z,{children:[t.jsx(je,{}),t.jsx(be,{}),t.jsx(ve,{})]}),t.jsx(C,{}),t.jsxs(Z,{children:[t.jsx(W,{}),t.jsx(ee,{}),t.jsx(ee,{})]}),t.jsx(C,{}),t.jsxs(Z,{children:[t.jsx(Ie,{}),t.jsx(ee,{children:"option_2"===o.familyStatus&&t.jsx($,{})}),t.jsx(ee,{children:"yes"===o.partnerPayMortgage&&"option_2"===o.familyStatus&&t.jsx(G,{})})]})]})},We=S().shape({nameSurname:P().required(o.t("error_name_surname")),birthday:P().required(o.t("error_date")),education:P().required(o.t("error_select_answer")),additionalCitizenships:P().required(o.t("error_select_answer")),citizenshipsDropdown:A().when("additionalCitizenships",{is:"yes",then:e=>e.min(1,o.t("error_select_answer")),otherwise:e=>e.min(0)}),taxes:P().required(o.t("error_select_answer")),countriesPayTaxes:A().when("taxes",{is:"yes",then:e=>e.min(1,o.t("error_select_answer")),otherwise:e=>e.min(0)}),childrens:P().required(o.t("error_select_answer")),howMuchChildrens:q().required(o.t("error_fill_field")),medicalInsurance:P().required(o.t("error_select_answer")),isForeigner:P().required(o.t("error_select_answer")),publicPerson:P().required(o.t("error_select_answer")),borrowers:q().min(1,o.t("error_quantity_borrowers")).required(o.t("error_quantity_borrowers")),familyStatus:P().required(o.t("error_select_answer")),partnerPayMortgage:P().when("familyStatus",{is:o.t("calculate_mortgage_family_status_option_2"),then:e=>e.required(o.t("error_select_answer")),otherwise:e=>e.notRequired()})}),$e=()=>{const e=w(),a=n(),r=f(e=>e.mortgage),o={nameSurname:f(e=>e.login.loginData).nameSurname||r.nameSurname||"",birthday:r.birthday||new Date((new Date).setFullYear((new Date).getFullYear()-18)).getTime(),education:r.education||"",additionalCitizenships:r.additionalCitizenships||null,citizenshipsDropdown:r.citizenshipsDropdown||[],taxes:r.taxes||null,countriesPayTaxes:r.countriesPayTaxes||[],childrens:r.childrens||null,howMuchChildrens:r.howMuchChildrens||1,medicalInsurance:r.medicalInsurance||null,isForeigner:r.isForeigner||null,publicPerson:r.publicPerson||null,borrowers:r.borrowers||null,familyStatus:r.familyStatus||"",partnerPayMortgage:r.partnerPayMortgage||null,addPartner:r.addPartner||""};return t.jsx(O,{initialValues:o,validationSchema:We,validateOnMount:!0,onSubmit:r=>{e(i(r)),a("/services/calculate-credit/3")},children:t.jsxs(I,{children:[t.jsx(E,{children:t.jsx(Re,{})}),t.jsx(te,{})]})})},Ge=()=>{const{t:e,i18n:a}=r();a.language=a.language.split("-")[0];const o=n(),{values:j}=y(),{mainSourceOfIncome:b,additionalIncome:v,obligation:D}=j,S=w(),P=f(e=>e.borrowers.sourceOfIncomeModal),q=f(e=>e.borrowers.additionalIncomeModal),O=f(e=>e.borrowers.obligationModal),M=f(e=>e.otherBorrowers.otherBorrowers),I=f(e=>e.login.loginData);return t.jsxs(Q,{children:[t.jsx(X,{title:e("calculate_mortgage_step3_title")}),t.jsx(we,{name:null==I?void 0:I.nameSurname,phone:null==I?void 0:I.phoneNumber}),t.jsxs(Z,{children:[t.jsx(De,{}),Ce[b]&&Ce[b].map((e,a)=>t.jsx(l.Fragment,{children:e},a)),t.jsx(ee,{})]}),t.jsx(Z,{children:b&&t.jsxs(ee,{children:[P.map(a=>t.jsx(we,{onEdit:()=>{return e=a.id,void S(h(e));var e},onDelete:()=>{return e=a.id,void S(d({id:e}));var e},enableEdit:!0,name:`${e("source_of_income")}${a.id+1}`},a.id)),t.jsx(Ne,{onClick:()=>{S(i(j)),S(s())},color:"#FBE54D",value:e("add_place_to_work"),variant:"none"})]})}),t.jsx(C,{}),t.jsxs(Z,{children:[t.jsx(Se,{}),v&&"option_1"!==v&&t.jsx(Pe,{}),t.jsx(ee,{})]}),v&&"option_1"!==v&&t.jsx(Z,{children:t.jsxs(ee,{children:[q.map(a=>t.jsx(we,{onEdit:()=>{return e=a.id,void S(p(e));var e},onDelete:()=>{return e=a.id,void S(m({id:e}));var e},enableEdit:!0,name:`${e("additional_source_of_income")}${a.id+1}`},a.id)),t.jsx(Ne,{onClick:()=>{S(i(j)),S(c())},color:"#FBE54D",value:e("add_additional_source_of_income"),variant:"none"})]})}),t.jsx(C,{}),t.jsxs(Z,{children:[t.jsx(qe,{}),Oe[D]&&Oe[D].map((e,a)=>t.jsx(l.Fragment,{children:e},a)),t.jsx(ee,{})]}),D&&"option_1"!==D&&t.jsx(Z,{children:t.jsxs(ee,{children:[O.map(a=>t.jsx(we,{onEdit:()=>{return e=a.id,void S(g(e));var e},onDelete:()=>{return e=a.id,void S(_({id:e}));var e},enableEdit:!0,name:`${e("obligation")}${a.id+1}`},a.id)),t.jsx(Ne,{onClick:()=>{S(i(j)),S(u())},color:"#FBE54D",value:e("add_obligation"),variant:"none"})]})}),t.jsx(C,{}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[M&&t.jsx(N,{title:e("borrower")}),t.jsxs(Z,{style:{columnGap:"2rem"},children:[M.map(e=>t.jsx(ee,{children:t.jsx(we,{onEdit:()=>(e=>{S(Ee(e));const a=M.some(a=>a.id===e)?e:Me(M);o({pathname:"/services/other-borrowers/1/",search:x({pageId:String(a)}).toString()})})(e.id),onDelete:()=>{return a=e.id,void S(Ae(a));var a},enableEdit:!0,name:e.nameSurname},e.id)},e.id)),!M&&t.jsx(N,{title:e("borrower")}),t.jsx(ee,{children:t.jsx(Ne,{value:e("add_borrower"),onClick:()=>{S(Ee(Me(M))),S(i(j)),o({pathname:"/services/other-borrowers/1/",search:x({pageId:Me(M).toString()}).toString()})},style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),t.jsx(ee,{})]})]})]})},He=S().shape({mainSourceOfIncome:P().required(o.t("error_select_answer")),monthlyIncome:q().required(o.t("error_fill_field")),startDate:P().required(o.t("error_date")),fieldOfActivity:P().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e,then:e=>e.required(o.t("error_select_field_of_activity")),otherwise:e=>e.notRequired()}),profession:P().required(o.t("error_fill_field")),companyName:P().required(o.t("error_fill_field")),additionalIncome:P().required(o.t("error_select_one_of_the_options")),additionalIncomeAmount:q().when("additionalIncome",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(o.t("error_fill_field")),otherwise:e=>e.notRequired()}),obligation:P().required(o.t("error_select_one_of_the_options")),bank:P().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(o.t("error_select_bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:q().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(o.t("error_fill_field")),otherwise:e=>e.notRequired()}),endDate:P().required(o.t("error_date"))}),Je=()=>{const e=w(),a=n(),r=f(e=>e.mortgage),o={mainSourceOfIncome:r.mainSourceOfIncome||"",monthlyIncome:r.monthlyIncome||null,startDate:r.startDate||(new Date).getTime(),fieldOfActivity:r.fieldOfActivity||"",profession:r.profession||"",companyName:r.companyName||"",additionalIncome:r.additionalIncome||"",additionalIncomeAmount:r.additionalIncomeAmount||null,obligation:r.obligation||"",bank:r.bank||"",monthlyPaymentForAnotherBank:r.monthlyPaymentForAnotherBank||null,endDate:r.endDate||(new Date).getTime(),amountIncomeCurrentYear:(null==r?void 0:r.amountIncomeCurrentYear)||null,noIncome:r.noIncome||(new Date).getTime()};return t.jsxs(t.Fragment,{children:[t.jsx(O,{initialValues:o,validationSchema:He,validateOnMount:!0,onSubmit:r=>{e(i(r)),a("/services/calculate-credit/4")},children:t.jsxs(I,{children:[t.jsx(E,{children:t.jsx(Ge,{})}),t.jsx(te,{})]})}),t.jsx(H,{}),t.jsx(J,{}),t.jsx(K,{})]})},Ke=()=>{const{stepNumber:e}=j(),{t:t,i18n:o}=r(),i=n();o.language=o.language.split("-")[0];if(!f(e=>e.login.isLogin)&&"1"!==e)return void i("/services/calculate-credit/1");const l=[t("calculate_credit_calculator"),t("mortgage_refinance_step_2"),t("calculate_mortgage_income"),t("calculate_mortgage_programs")];let s;switch(e){case"1":s=b.jsxDEV(Ye,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:39,columnNumber:23},globalThis);break;case"2":s=b.jsxDEV($e,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:42,columnNumber:23},globalThis);break;case"3":s=b.jsxDEV(Je,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:45,columnNumber:23},globalThis);break;case"4":s=b.jsxDEV(ze,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:48,columnNumber:23},globalThis);break;default:s=b.jsxDEV(v,{type:"NOT_FOUND"},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:51,columnNumber:23},globalThis)}return b.jsxDEV(b.Fragment,{children:[b.jsxDEV(F,{progress:e,data:l},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:57,columnNumber:7},globalThis),b.jsxDEV(a.Suspense,{fallback:b.jsxDEV(k,{},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:58,columnNumber:27},globalThis),children:s},void 0,!1,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:58,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx",lineNumber:56,columnNumber:5},globalThis)};export{Ke as default};
