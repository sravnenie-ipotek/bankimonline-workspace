import{j as e}from"./ui-vendor-99260b86.js";import{u as t}from"./form-vendor-6d56d196.js";import{r as s}from"./react-vendor-21ec1e1c.js";import{C as l}from"./Column-8e9274b3.js";import{g as c,h as r,E as i,T as a,a as o}from"./index-73dd41d9.js";import{c as n}from"./index-be42ab03.js";import{M as u}from"./DropdownMenu-9b978d84.js";import{u as _}from"./i18n-vendor-18addd5f.js";import{F as h}from"./FormattedInput-8631259e.js";const m=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none",...t,children:e.jsx("path",{fill:"#fff",d:"M5.634 10.867a.632.632 0 0 0 .467.184.632.632 0 0 0 .466-.184l1.934-1.933 1.95 1.95c.122.122.275.18.458.175a.65.65 0 0 0 .458-.192.632.632 0 0 0 .184-.466.632.632 0 0 0-.184-.467L9.434 8.001l1.95-1.95a.594.594 0 0 0 .175-.459.65.65 0 0 0-.192-.458.632.632 0 0 0-.466-.183.632.632 0 0 0-.467.183L8.501 7.067l-1.95-1.95a.595.595 0 0 0-.458-.175.653.653 0 0 0-.459.192.632.632 0 0 0-.183.467c0 .189.06.344.183.466l1.933 1.934-1.95 1.95a.593.593 0 0 0-.174.458.65.65 0 0 0 .191.458Zm2.867 3.8a6.489 6.489 0 0 1-2.6-.525 6.728 6.728 0 0 1-2.117-1.425 6.728 6.728 0 0 1-1.425-2.116A6.489 6.489 0 0 1 1.834 8c0-.923.175-1.79.525-2.6a6.728 6.728 0 0 1 1.425-2.117c.6-.6 1.306-1.075 2.117-1.425a6.495 6.495 0 0 1 2.6-.525c.922 0 1.789.175 2.6.525.81.35 1.516.825 2.116 1.425.6.6 1.075 1.306 1.425 2.117.35.81.525 1.677.525 2.6 0 .922-.175 1.789-.525 2.6a6.728 6.728 0 0 1-1.425 2.116c-.6.6-1.305 1.075-2.116 1.425a6.49 6.49 0 0 1-2.6.525Zm0-1.333c1.477 0 2.736-.52 3.775-1.558 1.039-1.04 1.558-2.298 1.558-3.775 0-1.478-.52-2.737-1.558-3.776-1.04-1.038-2.298-1.558-3.775-1.558-1.478 0-2.736.52-3.775 1.558-1.04 1.04-1.559 2.298-1.559 3.776 0 1.477.52 2.736 1.559 3.775 1.039 1.039 2.297 1.558 3.775 1.558Z"})}),d={multiselect:"_multiselect_18kzf_1","multiselect-scroll":"_multiselect-scroll_18kzf_10","multiselect-wrapper":"_multiselect-wrapper_18kzf_14","multiselect-placeholder":"_multiselect-placeholder_18kzf_22","multiselect-input":"_multiselect-input_18kzf_33","multiselect-input__item":"_multiselect-input__item_18kzf_38","multiselect-select":"_multiselect-select_18kzf_50","multiselect-select__button":"_multiselect-select__button_18kzf_61","multiselect-select__button-item":"_multiselect-select__button-item_18kzf_64","multiselect-select__subtitle":"_multiselect-select__subtitle_18kzf_75","multiselect-select__item":"_multiselect-select__item_18kzf_84","multiselect-select__item-title":"_multiselect-select__item-title_18kzf_99","multiselect-select__search":"_multiselect-select__search_18kzf_104","multiselect-select__search-wrapper":"_multiselect-select__search-wrapper_18kzf_107","multiselect-select__search-input":"_multiselect-select__search-input_18kzf_117","multiselect-select__search-no-result":"_multiselect-select__search-no-result_18kzf_134",focus:"_focus_18kzf_140",error:"_error_18kzf_144",checkbox:"_checkbox_18kzf_148"},p=n.bind(d),x=({data:t,placeholder:l,onChange:a,value:o,searchable:n,searchPlaceholder:h,nothingFoundText:d,searchDescription:x,onBlur:f,error:g})=>{const{t:j,i18n:w}=_(),[k,v]=s.useState(!1),[b,z]=s.useState(""),[C,y]=s.useState([]),N=s.useRef(null);s.useEffect(()=>{k&&y(o||[])},[k,o]);const T=s.useCallback(e=>{N.current&&!N.current.contains(e.target)&&v(!1)},[]),P=s.useCallback(e=>{N.current&&N.current.contains(e.relatedTarget)||(k&&JSON.stringify(C.sort())!==JSON.stringify((o||[]).sort())&&(null==a||a(C)),v(!1),null==f||f())},[k,C,o,a,f]),F=e=>{y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};s.useEffect(()=>(document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)),[T]);const D=Array.isArray(t)?t.filter(e=>("string"==typeof e?e:String(e)).toLowerCase().includes(b.toLowerCase())):[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:N,onBlur:P,className:p("multiselect",`${k&&"focus"}`,`${g&&!k&&"error"}`),children:[e.jsxs("div",{className:p("multiselect-wrapper"),onClick:()=>v(!k),tabIndex:0,children:[e.jsx("div",{className:p("multiselect-input","truncate"),children:o&&o.length>0?o.map(t=>e.jsxs("div",{className:p("multiselect-input__item"),children:[t,e.jsx(m,{onClick:e=>((e,t)=>{const s=(null==o?void 0:o.filter(t=>t!==e))||[];null==a||a(s),y(t=>t.filter(t=>t!==e)),t.stopPropagation()})(t,e)})]},t)):e.jsx("span",{className:p("multiselect-placeholder"),children:l})}),k?e.jsx(c,{className:"cursor-pointer",onClick:()=>v(!1)}):e.jsx(r,{className:"cursor-pointer",onClick:()=>v(!0)})]}),k&&e.jsxs("div",{className:p("multiselect-select"),onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:p("multiselect-scroll","scrollbar scrollbar-thumb-gray-600 scrollbar-thumb-rounded-md scrollbar-w-1"),children:[n&&e.jsx("div",{className:p("multiselect-select__search"),children:e.jsxs("div",{className:p("multiselect-select__search-wrapper"),children:[e.jsx(u,{}),e.jsx("input",{tabIndex:0,className:p("multiselect-select__search-input"),value:b,onChange:e=>z(e.target.value),placeholder:h,autoComplete:"off"})]})}),e.jsx("div",{className:p("multiselect-select__subtitle"),children:x}),D.length>0?D.map((t,s)=>e.jsx("div",{tabIndex:0,className:p("multiselect-select__item"),onClick:e=>{e.stopPropagation(),F(t)},children:e.jsxs("div",{className:p("multiselect-select__item-title"),children:[e.jsx("input",{type:"checkbox",id:`${t}-${s}`,className:p("checkbox"),checked:C.includes(t),onChange:()=>F(t),onClick:e=>e.stopPropagation()}),e.jsx("label",{htmlFor:`${t}-${s}`,onClick:e=>e.stopPropagation(),children:t})]})},s)):e.jsx("p",{className:p("multiselect-select__search-no-result"),children:d})]}),e.jsx("div",{className:p("multiselect-select__button"),children:e.jsx("button",{type:"button",className:p("multiselect-select__button-item"),onClick:e=>{e.stopPropagation(),null==a||a(C),v(!1)},children:j("apply")})})]})]}),g&&!k&&e.jsx(i,{error:g})]})},f=()=>{const{values:c,setFieldValue:r,errors:i,touched:o,setFieldTouched:n,validateField:u}=t(),[_,h]=s.useState([]),[m,d]=s.useState(!0),[p,f]=s.useState(null);s.useEffect(()=>{(async()=>{try{d(!0),f(null);const e=await fetch("/api/dropdowns/mortgage_step2/he");if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=await e.json(),s=[];Object.keys(t.options).forEach(e=>{if(e.includes("citizenship")&&"mortgage_step2_citizenship"!==e){const l=t.options[e];Array.isArray(l)&&l.length>0&&s.push(...l)}});const l=s.filter((e,t,s)=>s.findIndex(t=>t.value===e.value)===t);h(l)}catch(e){f(e instanceof Error?e.message:"Unknown error")}finally{d(!1)}})()},[]);if(m)return e.jsxs(l,{gap:"16px",children:[e.jsx(a,{title:"אזרחות"}),e.jsx("div",{children:"Loading citizenship options..."})]});if(p)return e.jsxs(l,{gap:"16px",children:[e.jsx(a,{title:"אזרחות"}),e.jsxs("div",{children:["Error loading citizenship options: ",p]})]});const g=c.citizenshipsDropdown||[];return e.jsxs(l,{gap:"16px",children:[e.jsx(a,{title:"אזרחות"}),e.jsx(x,{data:_.map(e=>e.label),value:g,onChange:e=>{r("citizenshipsDropdown",e,!0),n("citizenshipsDropdown",!0,!0),setTimeout(()=>{e.includes("option_1"),u("citizenshipsDropdown")},100)},onBlur:()=>n("citizenshipsDropdown",!0),placeholder:"בחר אזרחות",searchable:!0,searchPlaceholder:"חפש מדינה...",searchDescription:"בחר אזרחויות נוספות ולחץ על 'החל'",nothingFoundText:"לא נמצאו תוצאות",error:o.citizenshipsDropdown&&i.citizenshipsDropdown})]})},g=()=>{const{getContent:s}=o("mortgage_step2"),{values:c,setFieldValue:r,errors:i,touched:n,setFieldTouched:u}=t();return e.jsxs(l,{children:[e.jsx(a,{title:s("calculate_mortgage_tax","calculate_mortgage_tax")}),e.jsx(x,{data:["ישראל","ארצות הברית","רוסיה","גרמניה","צרפת","בריטניה","קנדה","אוסטרליה","איטליה","ספרד","הולנד","בלגיה","שוויץ","אוסטריה","שוודיה","נורווגיה","דנמרק","פינלנד","פולין","צ'כיה","הונגריה","רומניה","בולגריה","יוון","קפריסין","פורטוגל","אירלנד","לוקסמבורג","מלטה","סלובקיה","סלובניה","קרואטיה","ליטא","לטביה","אסטוניה","אוקראינה","בלרוס","מולדובה","ארגנטינה","ברזיל","צ'ילה","מקסיקו","יפן","דרום קוריאה","סין","הודו","תאילנד","סינגפור","מלזיה","פיליפינים","אינדונזיה","וייטנאם","דרום אפריקה","מרוקו","מצרים","טורקיה","אחר"],placeholder:s("calculate_mortgage_citizenship_ph","calculate_mortgage_citizenship_ph"),searchable:!0,searchPlaceholder:s("search","search"),nothingFoundText:s("nothing_found","nothing_found"),searchDescription:s("countries","countries"),value:c.countriesPayTaxes,onChange:e=>r("countriesPayTaxes",e),onBlur:()=>u("countriesPayTaxes",!0),error:n.countriesPayTaxes&&i.countriesPayTaxes})]})},j=()=>{const{getContent:s}=o("mortgage_step2"),{values:c,setFieldValue:r,errors:a,touched:n}=t();return e.jsxs(l,{children:[e.jsx(h,{name:"HowManyBorrowers",handleChange:e=>r("howMuchChildrens",e),title:s("calculate_mortgage_how_much_childrens","calculate_mortgage_how_much_childrens"),placeholder:"0",disableCurrency:!0,value:c.howMuchChildrens,error:a.howMuchChildrens}),n.howMuchChildrens&&a.howMuchChildrens&&e.jsx(i,{error:a.howMuchChildrens})]})};export{f as C,j as H,g as a};
