import{j as e}from"./ui-vendor-19e4e52b.js";import{r as I,f as B,b as ie,j as oe,k as fe}from"./react-vendor-9ed0ad78.js";import{c as xe,u as je,a as ue,D as P,E as ye,b as U,A as be,T as se,L as de}from"./index-3333763f.js";import{P as we}from"./ProgressBar-f8ded9a7.js";import{c as De,a as T,u as w,G as M,H as ve,m as Ce,d as he,n as i,l as Pe,o as Se,p as Ie,q as qe,r as ke,t as Fe,v as Me,w as Oe,x as Be,y as Ae,z as Ne,A as le,B as Re,N as Te}from"./index-6e45afc9.js";import{u as H,F as W,b as G,a as O,c as g,f as v,g as te}from"./form-vendor-67b0fc1d.js";import{V as Ee}from"./VideoPoster-36364f6b.js";import{S as Ve,a as $e,M as ze,U as Ye,A as Le,F as Ue,B as He,b as We,c as Ge,O as Je}from"./SourceOfIncomeModal-2f50d7a8.js";import{C as m}from"./Column-a8ef8409.js";import{D as ae}from"./DropdownMenu-dc5040a3.js";import{F as J}from"./FormContainer-e92386a0.js";import{F as S}from"./FormattedInput-a9b4c8dd.js";import{R as y}from"./Row-389aebbb.js";import{F as K}from"./FormCaption-192297af.js";import{D as ce}from"./DeleteIcon-3538ba96.js";import{A as F,U as k}from"./AddButton-23292c66.js";import{C as Y}from"./Calendar-bb4f5a89.js";import{E as Ke}from"./ExitModule-02111446.js";import{b as L,M as Qe,A as Xe,a as Ze,O as et,c as me,g as tt}from"./componentsByIncomeSource-dc390bb7.js";import{u as q}from"./i18n-vendor-e8db3f4c.js";import{D as re}from"./DoubleButtons-a5f374ca.js";import{R as at}from"./RowTwo-b38b6984.js";import{B as rt,P as nt,A as it}from"./PartnerPayMortgage-ee8f6548.js";import{N as ot,B as st,E as dt,A as lt,T as ct,C as mt,M as _t,I as ut,P as ht}from"./Taxes-97e3a2c4.js";import{C as pt,a as gt,H as ft}from"./HowMuchChildrens-9499306b.js";import{F as xt}from"./FamilyStatus-c8680f7f.js";import{I as jt}from"./Info-52842d63.js";import"./components-vendor-66cd084e.js";import"./utils-vendor-f2764326.js";import"./state-vendor-8e443ca8.js";import"./MortgageParameters-5c900b37.js";import"./PercentIcon-65a66346.js";import"./useDropdownData-05964376.js";import"./Control-ea4fbaf0.js";import"./ShieldCheckIcon-7bae9c5d.js";const yt={"mortgage-data":"_mortgage-data_1kje2_1","mortgage-data-title":"_mortgage-data-title_1kje2_6","mortgage-data-title__text":"_mortgage-data-title__text_1kje2_12","mortgage-data-title__button":"_mortgage-data-title__button_1kje2_18","mortgage-data-form":"_mortgage-data-form_1kje2_28","mortgage-data-form__items":"_mortgage-data-form__items_1kje2_36","mortgage-data-form__item-delete-wrapper":"_mortgage-data-form__item-delete-wrapper_1kje2_42","mortgage-data-form__item-delete-button":"_mortgage-data-form__item-delete-button_1kje2_48","mortgage-data-form__add":"_mortgage-data-form__add_1kje2_70","button-left__icon":"_button-left__icon_1kje2_84"},D=De.bind(yt),bt=()=>{const[t,o]=I.useState([]),[r,h]=I.useState(null),{values:s,setFieldValue:c,errors:f,touched:d,setFieldTouched:j}=H(),x=typeof f.creditData=="string"?f.creditData:void 0,[A,{open:C,close:b}]=xe(!1),{isDesktop:E,isTablet:Q,isMobile:X}=je(),{t:_,i18n:ne}=q(),{getContent:u}=ue("refinance_credit_1"),N=s.refinancingCredit==="option_2";I.useEffect(()=>{o(s.creditData)},[s.creditData]);const V=()=>{const p={id:L(t),bank:"",amount:null,monthlyPayment:null,startDate:"",endDate:"",earlyRepayment:null};c("creditData",[...t,p]),j("creditData",!1,!1)},$=l=>{h(l),C()},Z=()=>{if(r!==null){const l=t.filter(p=>p.id!==r);c("creditData",l)}b()},z=[{value:"hapoalim",label:u("bank_hapoalim",_("bank_hapoalim"))},{value:"leumi",label:u("bank_leumi",_("bank_leumi"))},{value:"discount",label:u("bank_discount",_("bank_discount"))},{value:"massad",label:u("bank_massad",_("bank_massad"))},{value:"israel",label:u("bank_israel",_("bank_israel"))}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:D("mortgage-data"),children:[e.jsx("div",{className:D("mortgage-data-title"),children:e.jsx("h4",{className:D("mortgage-data-title__text"),children:u("list_credits_title",_("list_credits_title"))})}),E&&e.jsxs("div",{className:D("mortgage-data-form"),children:[e.jsx("div",{className:D("mortgage-data-form__items"),children:t.map(l=>e.jsxs(I.Fragment,{children:[e.jsxs(y,{children:[e.jsx(m,{children:e.jsx(ae,{data:z,title:u("bank_apply_credit",_("bank_apply_credit")),placeholder:u("calculate_mortgage_first_ph",_("calculate_mortgage_first_ph")),value:l.bank,onChange:p=>{const a=t.map(n=>n.id===l.id?{...n,bank:p}:n);c("creditData",a)},onBlur:()=>j("creditData"),error:d.creditData&&x})}),e.jsx(m,{children:e.jsx(S,{title:u("amount_credit_title",_("amount_credit_title")),handleChange:p=>{const a=t.map(n=>n.id===l.id?{...n,amount:p}:n);c("creditData",a)},value:l.amount,onBlur:()=>j("creditData"),error:d.creditData&&x})}),e.jsx(m,{children:e.jsx(S,{title:u("calculate_mortgage_initial_payment",_("calculate_mortgage_initial_payment")),handleChange:p=>{const a=t.map(n=>n.id===l.id?{...n,monthlyPayment:p}:n);c("creditData",a)},value:l.monthlyPayment,onBlur:()=>j("creditData"),error:d.creditData&&x})})]}),e.jsxs(y,{children:[e.jsx(m,{children:e.jsx(Y,{title:u("refinance_credit_start_date",_("refinance_credit_start_date")),placeholder:u("date_ph",_("date_ph")),value:l.startDate,onChange:p=>{const a=t.map(n=>n.id===l.id?{...n,startDate:p}:n);c("creditData",a)},onBlur:()=>j("creditData"),error:d.creditData&&x})}),e.jsx(m,{children:e.jsx(Y,{title:u("refinance_credit_end_date",_("refinance_credit_end_date")),placeholder:u("date_ph",_("date_ph")),value:l.endDate,onChange:p=>{const a=t.map(n=>n.id===l.id?{...n,endDate:p}:n);c("creditData",a)},onBlur:()=>j("creditData"),error:d.creditData&&x,blockPastDates:!0,allowFuture:!0})}),N&&e.jsx(m,{children:e.jsx(S,{title:u("early_repayment",_("early_repayment")),handleChange:p=>{const a=t.map(n=>n.id===l.id?{...n,earlyRepayment:p}:n);c("creditData",a)},value:l.earlyRepayment,onBlur:()=>j("creditData"),error:d.creditData&&x})}),!N&&e.jsx(m,{})]}),e.jsx("div",{className:D("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:D("mortgage-data-form__item-delete-button"),onClick:()=>$(l.id),children:e.jsx(ce,{})})}),e.jsx(P,{})]},l.id))}),e.jsx("div",{className:D("mortgage-data-form__add"),children:e.jsx(F,{value:u("add_credit",_("add_credit")),onClick:V})})]}),(Q||X)&&e.jsxs("div",{className:D("mortgage-data-form"),children:[e.jsx("div",{className:D("mortgage-data-form__items"),children:t.map(l=>e.jsxs(I.Fragment,{children:[e.jsxs(y,{children:[e.jsx(m,{children:e.jsx(ae,{data:z,title:u("bank_apply_credit",_("bank_apply_credit")),placeholder:u("calculate_mortgage_first_ph",_("calculate_mortgage_first_ph")),value:l.bank,onChange:p=>{const a=t.map(n=>n.id===l.id?{...n,bank:p}:n);c("creditData",a)},onBlur:()=>j("creditData"),error:d.creditData&&x})}),e.jsx(m,{children:e.jsx(S,{title:u("amount_credit_title",_("amount_credit_title")),handleChange:p=>{const a=t.map(n=>n.id===l.id?{...n,amount:p}:n);c("creditData",a)},value:l.amount,onBlur:()=>j("creditData"),error:d.creditData&&x})}),e.jsx(m,{children:e.jsx(S,{title:u("calculate_mortgage_initial_payment",_("calculate_mortgage_initial_payment")),handleChange:p=>{const a=t.map(n=>n.id===l.id?{...n,monthlyPayment:p}:n);c("creditData",a)},value:l.monthlyPayment,onBlur:()=>j("creditData"),error:d.creditData&&x})}),e.jsx(m,{children:e.jsx(Y,{title:u("refinance_credit_start_date",_("refinance_credit_start_date")),placeholder:u("date_ph",_("date_ph")),value:l.startDate,onChange:p=>{const a=t.map(n=>n.id===l.id?{...n,startDate:p}:n);c("creditData",a)},onBlur:()=>j("creditData"),error:d.creditData&&x})}),e.jsx(m,{children:e.jsx(Y,{title:u("refinance_credit_end_date",_("refinance_credit_end_date")),placeholder:u("date_ph",_("date_ph")),value:l.endDate,onChange:p=>{const a=t.map(n=>n.id===l.id?{...n,endDate:p}:n);c("creditData",a)},onBlur:()=>j("creditData"),error:d.creditData&&x,blockPastDates:!0,allowFuture:!0})}),N&&e.jsx(m,{children:e.jsx(S,{title:u("early_repayment",_("early_repayment")),handleChange:p=>{const a=t.map(n=>n.id===l.id?{...n,earlyRepayment:p}:n);c("creditData",a)},value:l.earlyRepayment,onBlur:()=>j("creditData"),error:d.creditData&&x})})]}),e.jsx("div",{className:D("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:D("mortgage-data-form__item-delete-button"),onClick:()=>$(l.id),children:e.jsx(ce,{})})}),e.jsx(P,{})]},l.id))}),e.jsx("div",{className:D("mortgage-data-form__add"),children:e.jsx(F,{value:u("add_credit",_("add_credit")),onClick:V})})]})]}),e.jsx(Ke,{opened:A,onClose:b,title:u("remove_credit",_("remove_credit")),subtitle:u("remove_credit_subtitle",_("remove_credit_subtitle")),onConfirm:Z,confirmText:u("delete",_("delete"))})]})},wt=()=>{const{t,i18n:o}=q(),{getContent:r}=ue("refinance_credit_1"),h=[{value:"option_1",label:r("calculate_credit_why_option_1",t("calculate_credit_why_option_1"))},{value:"option_2",label:r("calculate_credit_why_option_2",t("calculate_credit_why_option_2"))},{value:"option_3",label:r("calculate_credit_why_option_3",t("calculate_credit_why_option_3"))},{value:"option_4",label:r("calculate_credit_why_option_4",t("calculate_credit_why_option_4"))}],{setFieldValue:s,values:c,errors:f,touched:d,setFieldTouched:j}=H();return e.jsxs(J,{children:[e.jsx(K,{title:r("credit_refinance_title",t("credit_refinance_title"))}),e.jsx(y,{children:e.jsx(m,{children:e.jsx(ae,{data:h,title:r("mortgage_credit_why",t("mortgage_credit_why")),placeholder:r("credit_refinance_why_ph",t("credit_refinance_why_ph")),value:c.refinancingCredit,onChange:x=>s("refinancingCredit",x),onBlur:()=>j("refinancingCredit"),error:d.refinancingCredit&&f.refinancingCredit})})}),e.jsx(P,{}),e.jsx(y,{children:e.jsx(bt,{})}),c.refinancingCredit==="option_3"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(y,{children:e.jsx(m,{children:e.jsx(S,{name:"desiredMonthlyPayment",title:r("desired_monthly_payment",t("desired_monthly_payment")),handleChange:x=>s("desiredMonthlyPayment",x),value:c.desiredMonthlyPayment,onBlur:()=>j("desiredMonthlyPayment"),error:d.desiredMonthlyPayment&&f.desiredMonthlyPayment})})})]}),c.refinancingCredit==="option_4"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(y,{children:e.jsxs(m,{children:[e.jsx(Ve,{disableCurrency:!0,unitsMax:r("calculate_mortgage_period_units_max",t("calculate_mortgage_period_units_max")),unitsMin:r("calculate_mortgage_period_units_min",t("calculate_mortgage_period_units_min")),value:c.desiredTerm,name:"desiredTerm",min:4,max:30,error:f.desiredTerm,title:r("credit_loan_period",t("credit_loan_period")),handleChange:x=>s("desiredTerm",x)}),f.desiredTerm&&e.jsx(ye,{error:f.desiredTerm})]})})]})]})},Dt=()=>O().shape({refinancingCredit:g().required(i("error_select_answer","Please select an answer")),desiredMonthlyPayment:v().positive(i("error_credit_payment_positive","Payment must be positive")).when("refinancingCredit",{is:"option_3",then:t=>t.required(i("error_required_to_fill_out","This field is required")),otherwise:t=>t.notRequired()}),desiredTerm:v().min(4,i("error_min_period","Minimum period is 4 years")).max(30,i("error_max_period","Maximum period is 30 years")).when("refinancingCredit",{is:"option_4",then:t=>t.required(i("error_required_to_fill_out","This field is required")),otherwise:t=>t.notRequired()}),period:v().min(4,i("error_min_period","Minimum period is 4 years")).max(30,i("error_max_period","Maximum period is 30 years")).notRequired(),monthlyPayment:v().notRequired(),creditData:te().of(O().shape({bank:g().required(i("error_credit_bank_required","Bank selection is required")),amount:v().positive(i("error_credit_amount_positive","Amount must be positive")).required(i("error_credit_amount_required","Credit amount is required")),monthlyPayment:v().positive(i("error_credit_payment_positive","Payment must be positive")).required(i("error_credit_payment_required","Monthly payment is required")),startDate:g().required(i("error_credit_start_date_required","Start date is required")),endDate:g().required(i("error_credit_end_date_required","End date is required")).test("end-date-after-start",i("error_credit_end_date_validation","End date must be after start date"),function(t){const{startDate:o}=this.parent;return!t||!o?!0:new Date(t)>new Date(o)}),earlyRepayment:v().positive(i("error_credit_early_payment_positive","Early payment must be positive")).nullable().notRequired()})).min(1,i("error_credit_data_required","At least one credit entry is required"))}),vt=()=>{const{t,i18n:o}=q(),r=T(),h=B(),s=w(b=>b.refinanceCredit),c=w(b=>b.login.isLogin),f=new Date;f.setDate(f.getDate()+1),f.toISOString().split("T")[0];const d=new Date;d.setFullYear(d.getFullYear()-5);const j=d.toISOString().split("T")[0],x=new Date;x.setFullYear(x.getFullYear()+10);const A=x.toISOString().split("T")[0],C={refinancingCredit:s.refinancingCredit||"",period:s.period||30,monthlyPayment:s.monthlyPayment||1e6,desiredMonthlyPayment:s.desiredMonthlyPayment||null,desiredTerm:s.desiredTerm||null,creditData:s.creditData||[{id:1,bank:"hapoalim",amount:null,monthlyPayment:null,startDate:j,endDate:A,earlyRepayment:null}]};return e.jsxs(e.Fragment,{children:[e.jsx(W,{initialValues:C,validationSchema:Dt(),validateOnMount:!0,onSubmit:b=>{r(M(b)),r(ve({data:b})),c?h("/services/refinance-credit/2"):(r(Ce()),r(he("phoneVerification")))},children:e.jsxs(G,{children:[e.jsxs(U,{children:[e.jsx(Ee,{title:t("credit_refinance_title"),text:t("credit_refinance_banner_subtext"),size:"small"}),e.jsx(wt,{})]}),e.jsx($e,{showValidationHints:!0})]})}),e.jsx(ze,{}),e.jsx(be,{})]})},Ct=()=>{const{t,i18n:o}=q(),r=w(s=>s.login.loginData),h=w(s=>s.refinanceCredit);return e.jsxs(J,{children:[e.jsx(K,{title:t("refinance_credit_final")}),e.jsx(Ye,{credit:h!=null&&h.period?h.period*1e3:void 0,nameSurname:r==null?void 0:r.nameSurname,phoneNumber:r==null?void 0:r.phoneNumber}),e.jsx(Le,{text:t("refinance_credit_warning")}),e.jsx(y,{children:e.jsx(Ue,{})}),e.jsx(He,{})]})},Pt={selectedBank:"",selectedOffer:null},St=O().shape({selectedBank:g(),selectedOffer:O().nullable()}),It=()=>{const t=T(),o=B(),r=w(s=>s.login.loginData),h=w(s=>s.login.isLogin);return e.jsx(W,{initialValues:Pt,validationSchema:St,validateOnMount:!0,onSubmit:s=>{t(Pe(s)),!h||!(r!=null&&r.phoneNumber)?(t(Se()),t(he("signUp"))):o("/services/application-submitted")},children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsx(Ct,{})}),e.jsx(re,{})]})})},qt=()=>{const{t,i18n:o}=q(),{values:r}=H(),h=w(s=>s.login.loginData);return e.jsxs(J,{children:[e.jsx(K,{title:t("calculate_mortgage_step2_title")}),e.jsxs(at,{children:[e.jsx(jt,{}),e.jsx(k,{name:h==null?void 0:h.nameSurname,phone:h==null?void 0:h.phoneNumber})]}),e.jsxs(y,{children:[e.jsx(ot,{}),e.jsx(st,{}),e.jsx(dt,{})]}),e.jsxs(y,{children:[e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(lt,{}),r.additionalCitizenships==="yes"&&e.jsx(pt,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(ct,{}),r.taxes==="yes"&&e.jsx(gt,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(mt,{}),r.childrens==="yes"&&e.jsx(ft,{})]})]}),e.jsx(P,{}),e.jsxs(y,{children:[e.jsx(_t,{}),e.jsx(ut,{}),e.jsx(ht,{})]}),e.jsx(P,{}),e.jsxs(y,{children:[e.jsx(rt,{}),e.jsx(m,{}),e.jsx(m,{})]}),e.jsx(P,{}),e.jsxs(y,{children:[e.jsx(xt,{}),e.jsx(m,{children:r.familyStatus==="option_2"&&e.jsx(nt,{})}),e.jsx(m,{children:r.partnerPayMortgage==="yes"&&r.familyStatus==="option_2"&&e.jsx(it,{})})]})]})},kt=()=>O().shape({nameSurname:g().required(i("error_name_surname","Please enter your name and surname")),birthday:g().required(i("error_date","Please enter a valid date")),education:g().required(i("error_select_answer","Please select an answer")),additionalCitizenships:g().required(i("error_select_answer","Please select an answer")),citizenshipsDropdown:te().when("additionalCitizenships",{is:"yes",then:t=>t.min(1,i("error_select_answer","Please select an answer")),otherwise:t=>t.min(0)}),taxes:g().required(i("error_select_answer","Please select an answer")),countriesPayTaxes:te().when("taxes",{is:"yes",then:t=>t.min(1,i("error_select_answer","Please select an answer")),otherwise:t=>t.min(0)}),childrens:g().required(i("error_select_answer","Please select an answer")),howMuchChildrens:v().required(i("error_fill_field","Please fill this field")),medicalInsurance:g().required(i("error_select_answer","Please select an answer")),isForeigner:g().required(i("error_select_answer","Please select an answer")),publicPerson:g().required(i("error_select_answer","Please select an answer")),borrowers:v().min(1,i("error_quantity_borrowers","Please specify number of borrowers")).required(i("error_quantity_borrowers","Please specify number of borrowers")),familyStatus:g().required(i("error_select_answer","Please select an answer")),partnerPayMortgage:g().when("familyStatus",{is:"option_2",then:t=>t.required(i("error_select_answer","Please select an answer")),otherwise:t=>t.notRequired()})}),Ft=kt(),Mt=()=>{const t=T(),o=B(),r=w(c=>c.refinanceCredit),s={nameSurname:w(c=>c.login.loginData).nameSurname||r.nameSurname||"",birthday:r.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:r.education||"",additionalCitizenships:r.additionalCitizenships||null,citizenshipsDropdown:r.citizenshipsDropdown||[],taxes:r.taxes||null,countriesPayTaxes:r.countriesPayTaxes||[],childrens:r.childrens||null,howMuchChildrens:r.howMuchChildrens||1,medicalInsurance:r.medicalInsurance||null,isForeigner:r.isForeigner||null,publicPerson:r.publicPerson||null,borrowers:r.borrowers||null,familyStatus:r.familyStatus||"",partnerPayMortgage:r.partnerPayMortgage||null,addPartner:r.addPartner||""};return e.jsx(W,{initialValues:s,validationSchema:Ft,validateOnMount:!0,onSubmit:c=>{t(M(c)),o("/services/refinance-credit/3")},children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsx(qt,{})}),e.jsx(re,{})]})})},_e=t=>{if(!t)return!1;const o=t.toLowerCase();return o==="option_1"||o==="1"||o==="no_additional_income"||o.includes("no_additional")||o.includes("no additional")||o.includes("none")},Ot=()=>{const{t,i18n:o}=q(),r=B(),{values:h}=H(),{mainSourceOfIncome:s,additionalIncome:c,obligation:f}=h,d=T(),j=w(a=>a.borrowers.sourceOfIncomeModal),x=w(a=>a.borrowers.additionalIncomeModal),A=w(a=>a.borrowers.obligationModal),C=w(a=>a.otherBorrowers.otherBorrowers),b=w(a=>a.login.loginData),E=tt("refinance_step3"),Q=()=>{d(M(h)),d(Ie())},X=()=>{d(M(h)),d(qe())},_=()=>{d(M(h)),d(ke())},ne=a=>{d(Fe({id:a}))},u=a=>{d(Me({id:a}))},N=a=>{d(Oe({id:a}))},V=a=>{d(Be(a))},$=a=>{d(Ae(a))},Z=a=>{d(Ne(a))},z=a=>{d(le(a));const pe=!C.some(ge=>ge.id===a)?L(C):a;r({pathname:"/services/other-borrowers/1/",search:oe({pageId:String(pe)}).toString()})},l=()=>{d(le(L(C))),r({pathname:"/services/other-borrowers/1/",search:oe({pageId:L(C).toString()}).toString()})},p=a=>{d(Re(a))};return e.jsxs(J,{children:[e.jsx(K,{title:t("calculate_mortgage_step3_title")}),e.jsx(k,{name:b==null?void 0:b.nameSurname,phone:b==null?void 0:b.phoneNumber}),e.jsxs(y,{children:[e.jsx(Qe,{}),E[s]&&E[s].map((a,n)=>e.jsx(ie.Fragment,{children:a},n)),e.jsx(m,{})]}),e.jsx(y,{children:s&&e.jsxs(m,{children:[j.map(a=>e.jsx(k,{onEdit:()=>V(a.id),onDelete:()=>ne(a.id),enableEdit:!0,name:`${t("source_of_income")}${a.id+1}`},a.id)),e.jsx(F,{onClick:Q,color:"#FBE54D",value:t("add_place_to_work"),variant:"none"})]})}),e.jsx(P,{}),e.jsxs(y,{children:[e.jsx(Xe,{}),c&&!_e(c)&&e.jsx(Ze,{}),e.jsx(m,{})]}),c&&!_e(c)&&e.jsx(y,{children:e.jsxs(m,{children:[x.map(a=>e.jsx(k,{onEdit:()=>$(a.id),onDelete:()=>u(a.id),enableEdit:!0,name:`${t("additional_source_of_income")}${a.id+1}`},a.id)),e.jsx(F,{onClick:X,color:"#FBE54D",value:t("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(P,{}),e.jsxs(y,{children:[e.jsx(et,{}),me[f]&&me[f].map((a,n)=>e.jsx(ie.Fragment,{children:a},n)),e.jsx(m,{})]}),f&&f!=="option_1"&&e.jsx(y,{children:e.jsxs(m,{children:[A.map(a=>e.jsx(k,{onEdit:()=>Z(a.id),onDelete:()=>N(a.id),enableEdit:!0,name:`${t("obligation")}${a.id+1}`},a.id)),e.jsx(F,{onClick:_,color:"#FBE54D",value:t("add_obligation"),variant:"none"})]})}),e.jsx(P,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[C&&e.jsx(se,{title:t("borrower")}),e.jsxs(y,{style:{columnGap:"2rem"},children:[C.map(a=>e.jsx(m,{children:e.jsx(k,{onEdit:()=>z(a.id),onDelete:()=>p(a.id),enableEdit:!0,name:a.nameSurname},a.id)},a.id)),!C&&e.jsx(se,{title:t("borrower")}),e.jsx(m,{children:e.jsx(F,{value:t("add_borrower"),onClick:l,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(m,{})]})]})]})},Bt=t=>{if(!t)return!1;const o=t.toLowerCase();return o==="option_1"||o==="1"||o==="no_additional_income"||o.includes("no_additional")||o.includes("no additional")||o.includes("none")},ee=t=>{if(!t)return!1;const o=t.toLowerCase();return o==="option_1"||o==="1"||o==="no_obligations"||o.includes("no_obligation")||o.includes("no obligation")||o.includes("none")},R=t=>{if(!t)return!1;const o=t.toLowerCase();return!["unemployed","student","unpaid_leave","other"].includes(o)},At=()=>O().shape({mainSourceOfIncome:g().required(i("error_select_answer","Please select an answer")).test("not-empty",i("error_select_answer","Please select an answer"),t=>t!=null&&t!==""),monthlyIncome:v().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),startDate:g().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(i("error_date","Please enter a valid date")),otherwise:t=>t.notRequired()}),fieldOfActivity:g().when("mainSourceOfIncome",{is:t=>t!=null&&t!==""&&R(t),then:t=>t.required(i("error_select_field_of_activity","Please select field of activity")),otherwise:t=>t.notRequired()}),profession:g().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),companyName:g().when("mainSourceOfIncome",{is:t=>R(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),additionalIncome:g().required(i("error_select_one_of_the_options","Please select one of the options")).test("not-empty",i("error_select_one_of_the_options","Please select one of the options"),t=>t!=null&&t!==""),additionalIncomeAmount:v().when("additionalIncome",{is:t=>t!=null&&t!==""&&!Bt(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),obligation:g().required(i("error_select_one_of_the_options","Please select one of the options")),bank:g().when("obligation",{is:t=>t!=null&&t!==""&&!ee(t),then:t=>t.required(i("error_select_bank","Please select a bank")),otherwise:t=>t.notRequired()}),monthlyPaymentForAnotherBank:v().when("obligation",{is:t=>t!=null&&t!==""&&!ee(t),then:t=>t.required(i("error_fill_field","Please fill this field")),otherwise:t=>t.notRequired()}),endDate:g().when("obligation",{is:t=>t!=null&&t!==""&&!ee(t),then:t=>t.required(i("error_date","Please enter a valid date")),otherwise:t=>t.notRequired()})}),Nt=At(),Rt=()=>{const t=T(),o=B(),r=w(s=>s.refinanceCredit),h={mainSourceOfIncome:r.mainSourceOfIncome||"",monthlyIncome:r.monthlyIncome||null,startDate:r.startDate||new Date().getTime(),fieldOfActivity:r.fieldOfActivity||"",profession:r.profession||"",companyName:r.companyName||"",additionalIncome:r.additionalIncome||"",additionalIncomeAmount:r.additionalIncomeAmount||null,obligation:r.obligation||"option_1",bank:r.bank||"",monthlyPaymentForAnotherBank:r.monthlyPaymentForAnotherBank||null,endDate:r.endDate||new Date().getTime(),amountIncomeCurrentYear:r.amountIncomeCurrentYear||null,noIncome:r.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(W,{initialValues:h,validationSchema:Nt,validateOnMount:!0,onSubmit:s=>{t(M(s)),o("/services/refinance-credit/4")},children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsx(Ot,{})}),e.jsx(re,{})]})}),e.jsx(We,{}),e.jsx(Ge,{}),e.jsx(Je,{})]})},Tt=()=>{const{stepNumber:t}=fe(),{t:o,i18n:r}=q(),h=B(),s=w(d=>d.login.isLogin);if(I.useEffect(()=>{!s&&t!=="1"&&h("/services/refinance-credit/1")},[s,t,h]),!s&&t!=="1")return e.jsx(de,{});const c=[o("mobile_step_1"),o("mobile_step_2"),o("mobile_step_3"),o("mobile_step_4")];let f;switch(t){case"1":f=e.jsx(vt,{});break;case"2":f=e.jsx(Mt,{});break;case"3":f=e.jsx(Rt,{});break;case"4":f=e.jsx(It,{});break;default:f=e.jsx(Te,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[e.jsx(we,{progress:t,data:c}),e.jsx(I.Suspense,{fallback:e.jsx(de,{}),children:f})]})},ya=Tt;export{ya as RefinanceCredit};
