import{j as e}from"./ui-vendor-99260b86.js";import{u as o,a as n,c as i,f as t,F as a,b as l}from"./form-vendor-6d56d196.js";import{r as s,b as r,f as d}from"./react-vendor-21ec1e1c.js";import{B as m,a as c,M as u,D as _,b as h}from"./index-73dd41d9.js";import{c as p,a as f,j as v,J as b,u as j,n as x,X as g,Y as I,E as w,Z as y,W as S,q,r as P,$ as O,a0 as D,y as k,z as C}from"./index-be42ab03.js";import{D as A}from"./DoubleButtons-2dfe33b8.js";import{A as N,a as F,b as R,O as B,c as M,M as $,d as V}from"./componentsByIncomeSource-4950a17f.js";import{u as E}from"./i18n-vendor-18addd5f.js";import{C as z}from"./Column-8e9274b3.js";import{F as T}from"./FormContainer-3c74d758.js";import{R as Y}from"./Row-1fe205ed.js";import{U as J,A as U}from"./AddButton-c0dadcb9.js";import{F as W}from"./FormCaption-99de3b25.js";import"./components-vendor-62dc47c0.js";import"./utils-vendor-8f040048.js";import"./state-vendor-069efcec.js";import"./useDropdownData-1fd3cd06.js";import"./DropdownMenu-9b978d84.js";import"./FormattedInput-8631259e.js";import"./Control-99ce6a52.js";import"./Calendar-372900a0.js";const X={modal:"_modal_lzcpe_1","modal-item":"_modal-item_lzcpe_18","modal-buttons":"_modal-buttons_lzcpe_31",buttons:"_buttons_lzcpe_49"},Z=p.bind(X),G=()=>{const{t:n,i18n:i}=E(),{handleSubmit:t,isValid:a,values:l}=o(),s=f();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:Z("modal"),children:[e.jsxs("div",{className:Z("modal-item"),children:[e.jsx(N,{excludeNoIncome:!0}),l.additionalIncome&&"no_additional_income"!==l.additionalIncome&&e.jsx(F,{})]}),e.jsx("div",{className:Z("modal-buttons"),children:e.jsxs("div",{className:Z("buttons"),children:[e.jsx(m,{variant:"modalBase",type:"submit",onClick:()=>s(v()),children:n("button_back")}),e.jsx(m,{type:"submit",isDisabled:!a,onClick:t,size:"full",children:n("button_next_save")})]})})]})})},H=()=>{const{t:o,i18n:r}=E(),{getContent:d}=c("common");s.useEffect(()=>{b()},[r.language]);const m=f(),_=j(e=>e.modalSlice.isOpenAdditionalIncome),h=j(e=>e.modalSlice.currentId),p=j(e=>e.borrowersPersonalData.additionalIncomeModal),I=void 0!==p[h-1]?p[h-1]:void 0,w=()=>{m(v())},y=!p.some(e=>e.id===h)?R(p):h,S={additionalIncome:(null==I?void 0:I.additionalIncome)||"",additionalIncomeAmount:(null==I?void 0:I.additionalIncomeAmount)||null},q=n().shape({additionalIncome:i().required(x("error_select_one_of_the_options","Please select one of the options")).test("not-empty",x("error_select_one_of_the_options","Please select one of the options"),e=>null!=e&&""!==e),additionalIncomeAmount:t().when("additionalIncome",{is:e=>e&&"no_additional_income"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()})});return e.jsx(u,{isVisible:_,onCancel:w,title:`${d("additional_source_of_income_modal_title","Additional Source of Income")} ${y+1}`,children:e.jsx(a,{initialValues:S,validationSchema:q,validateOnMount:!0,onSubmit:e=>{m(g({id:y,...e})),w()},children:e.jsx(l,{children:e.jsx(G,{})})})})},K={modal:"_modal_r2hy9_1","modal-item":"_modal-item_r2hy9_18","modal-buttons":"_modal-buttons_r2hy9_23",container:"_container_r2hy9_41",component:"_component_r2hy9_47",buttons:"_buttons_r2hy9_59"},L=p.bind(K),Q=()=>{const{t:n,i18n:i}=E(),{handleSubmit:t,isValid:a,values:l}=o(),s=f(),{obligation:r}=l;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:L("modal"),children:[e.jsxs("div",{className:L("container"),children:[e.jsx(B,{}),M[r]&&M[r].map((o,n)=>e.jsx("div",{className:L("component"),children:o},n)),e.jsx(z,{})]}),e.jsx("div",{className:L("modal-buttons"),children:e.jsxs("div",{className:L("buttons"),children:[e.jsx(m,{variant:"modalBase",type:"submit",onClick:()=>s(v()),children:n("button_back")}),e.jsx(m,{type:"submit",isDisabled:!a,onClick:t,size:"full",children:n("button_next_save")})]})})]})})};function ee(){return n().shape({obligation:i().required(x("error_select_one_of_the_options","Please select one of the options")),bank:i().when("obligation",{is:e=>e&&"no_obligations"!==e&&"other"!==e,then:e=>e.required(x("error_select_bank","Please select a bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:t().when("obligation",{is:e=>e&&"no_obligations"!==e&&"other"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),endDate:i().when("obligation",{is:e=>e&&"no_obligations"!==e&&"other"!==e,then:e=>e.required(x("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()})})}const oe=()=>{const{t:o,i18n:n}=E(),{getContent:i}=c("common"),[t,r]=s.useState(()=>ee()),d=f();s.useEffect(()=>{(async()=>{await w();const e=ee();r(e)})()},[n.language]);const m=j(e=>e.modalSlice.isOpenObligation),_=j(e=>e.modalSlice.currentId),h=j(e=>e.borrowersPersonalData.obligationModal),p=void 0!==h[_-1]?h[_-1]:void 0,b=()=>{d(v())},x=!h.some(e=>e.id===_)?R(h):_,g={obligation:(null==p?void 0:p.obligation)||"",bank:(null==p?void 0:p.bank)||"",monthlyPaymentForAnotherBank:(null==p?void 0:p.monthlyPaymentForAnotherBank)||null,endDate:(null==p?void 0:p.endDate)||(new Date).toISOString().split("T")[0],noIncome:(null==p?void 0:p.noIncome)||(new Date).toISOString().split("T")[0]};return e.jsx(u,{isVisible:m,onCancel:b,title:`${i("obligation_modal_title","Obligation")} ${x+1}`,children:e.jsx(a,{initialValues:g,validationSchema:t,validateOnMount:!0,onSubmit:e=>{d(I({id:x,...e})),b()},children:e.jsx(l,{children:e.jsx(Q,{})})})})},ne={modal:"_modal_1gdud_1","modal-item":"_modal-item_1gdud_18","modal-buttons":"_modal-buttons_1gdud_23",container:"_container_1gdud_41",component:"_component_1gdud_47",buttons:"_buttons_1gdud_59"},ie=p.bind(ne),te=()=>{const{t:n,i18n:i}=E(),{handleSubmit:t,isValid:a,values:l,errors:s,touched:r}=o(),{mainSourceOfIncome:d}=l,c=f();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:ie("modal"),children:[e.jsxs("div",{className:ie("container"),children:[e.jsx("div",{className:ie("component"),children:e.jsx($,{})}),V[d]&&V[d].map((o,n)=>e.jsx("div",{className:ie("component"),children:o},n)),e.jsx(z,{})]}),e.jsx("div",{className:ie("modal-buttons"),children:e.jsxs("div",{className:ie("buttons"),children:[e.jsx(m,{variant:"modalBase",type:"submit",onClick:()=>c(v()),children:n("button_back")}),e.jsx(m,{type:"submit",isDisabled:!a,onClick:t,size:"full",children:n("button_next_save")})]})})]})})},ae=()=>{E();const{getContent:o}=c("common"),s=f(),r=j(e=>e.modalSlice.isOpenSourceOfIncome),d=j(e=>e.modalSlice.currentId),m=j(e=>e.borrowersPersonalData.sourceOfIncomeModal),_=void 0!==m[d-1]?m[d-1]:void 0,h=()=>{s(v())},p=!m.some(e=>e.id===d)?R(m):d,b={mainSourceOfIncome:(null==_?void 0:_.mainSourceOfIncome)||"",monthlyIncome:(null==_?void 0:_.monthlyIncome)||null,startDate:(null==_?void 0:_.startDate)||(new Date).getTime(),fieldOfActivity:(null==_?void 0:_.fieldOfActivity)||"",profession:(null==_?void 0:_.profession)||"",companyName:(null==_?void 0:_.companyName)||"",amountIncomeCurrentYear:(null==_?void 0:_.amountIncomeCurrentYear)||null},g=n().shape({mainSourceOfIncome:i().required(x("error_select_answer","Please select an answer")),monthlyIncome:t().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),startDate:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_date","Please select a date")),otherwise:e=>e.notRequired()}),fieldOfActivity:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_select_field_of_activity","Please select field of activity")),otherwise:e=>e.notRequired()}),profession:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),companyName:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["unpaid_leave","unemployed"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()})});return e.jsx(u,{isVisible:r,onCancel:h,title:`${o("source_of_income_modal_title","Source of Income")} ${p+1}`,children:e.jsx(a,{initialValues:b,validationSchema:g,validateOnMount:!0,onSubmit:e=>{s(y({id:p,...e})),h()},children:e.jsx(l,{children:e.jsx(te,{})})})})},le=()=>{const{t:n,i18n:i}=E(),{values:t}=o(),{mainSourceOfIncome:a,additionalIncome:l,obligation:s}=t,d=f();j(e=>e.borrowersPersonalData.sourceOfIncomeModal);const m=j(e=>e.borrowersPersonalData.additionalIncomeModal),c=j(e=>e.borrowersPersonalData.obligationModal);return e.jsxs(T,{children:[e.jsx(W,{title:n("borrowers_personal_data_title")}),e.jsxs(Y,{children:[e.jsx($,{}),V[a]&&V[a].map((o,n)=>e.jsx(r.Fragment,{children:o},n)),e.jsx(z,{})]}),e.jsx(_,{}),e.jsxs(Y,{children:[e.jsx(N,{}),l&&"option_1"!==l&&e.jsx(F,{}),e.jsx(z,{})]}),l&&"option_1"!==l&&e.jsx(Y,{children:e.jsxs(z,{children:[m.map(o=>e.jsx(J,{onEdit:()=>{return e=o.id,void d(k(e));var e},onDelete:()=>{return e=o.id,void d(O({id:e}));var e},enableEdit:!0,name:`${n("additional_source_of_income")}${o.id+1}`},o.id)),e.jsx(U,{onClick:()=>{d(S(t)),d(q())},color:"#FBE54D",value:n("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(_,{}),e.jsxs(Y,{children:[e.jsx(B,{}),M[s]&&M[s].map((o,n)=>e.jsx(r.Fragment,{children:o},n)),e.jsx(z,{})]}),s&&"option_1"!==s&&e.jsx(Y,{children:e.jsxs(z,{children:[c.map(o=>e.jsx(J,{onEdit:()=>{return e=o.id,void d(C(e));var e},onDelete:()=>{return e=o.id,void d(D({id:e}));var e},enableEdit:!0,name:`${n("obligation")}${o.id+1}`},o.id)),e.jsx(U,{onClick:()=>{d(S(t)),d(P())},color:"#FBE54D",value:n("add_obligation"),variant:"none"})]})})]})},se=n().shape({mainSourceOfIncome:i().required(x("error_select_answer","Please select an answer")).test("not-empty",x("error_select_answer","Please select an answer"),e=>null!=e&&""!==e),monthlyIncome:t().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),startDate:i().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()}),fieldOfActivity:i().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_select_field_of_activity","Please select field of activity")),otherwise:e=>e.notRequired()}),profession:i().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),companyName:i().when("mainSourceOfIncome",{is:e=>!["app.mortgage.step3.main_source_income_option_5","app.mortgage.step3.main_source_income_option_6"].includes(e),then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),additionalIncome:i().required(x("error_select_one_of_the_options","Please select one of the options")).test("not-empty",x("error_select_one_of_the_options","Please select one of the options"),e=>null!=e&&""!==e),additionalIncomeAmount:t().when("additionalIncome",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),obligation:i().required(x("error_select_one_of_the_options","Please select one of the options")),bank:i().when("obligation",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_select_bank","Please select a bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:t().when("obligation",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),endDate:i().when("obligation",{is:e=>null!=e&&""!==e&&"option_1"!==e,then:e=>e.required(x("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()})}),re=()=>{const o=f(),n=d(),i=j(e=>e.borrowersPersonalData.borrowersPersonalData),t=void 0!==i?i:void 0,s={mainSourceOfIncome:(null==t?void 0:t.mainSourceOfIncome)||"",monthlyIncome:(null==t?void 0:t.monthlyIncome)||null,startDate:(null==t?void 0:t.startDate)||(new Date).getTime(),fieldOfActivity:(null==t?void 0:t.fieldOfActivity)||"",profession:(null==t?void 0:t.profession)||"",companyName:(null==t?void 0:t.companyName)||"",additionalIncome:(null==t?void 0:t.additionalIncome)||"",additionalIncomeAmount:(null==t?void 0:t.additionalIncomeAmount)||null,obligation:(null==t?void 0:t.obligation)||"",bank:(null==t?void 0:t.bank)||"",monthlyPaymentForAnotherBank:(null==t?void 0:t.monthlyPaymentForAnotherBank)||null,endDate:(null==t?void 0:t.endDate)||(new Date).getTime(),amountIncomeCurrentYear:(null==t?void 0:t.amountIncomeCurrentYear)||null};return e.jsxs(e.Fragment,{children:[e.jsx(a,{initialValues:s,validationSchema:se,validateOnMount:!0,onSubmit:e=>{o(S(e)),n("/services/calculate-mortgage/2")},children:e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(le,{})}),e.jsx(A,{})]})}),e.jsx(ae,{}),e.jsx(H,{}),e.jsx(oe,{})]})};export{re as default};
