import{j as e}from"./ui-vendor-99260b86.js";import{r as t,f as r,b as a,j as i,k as n}from"./react-vendor-21ec1e1c.js";import{c as s,u as o,a as l,D as d,E as c,b as m,A as _,T as u,L as h}from"./index-73dd41d9.js";import{P as p}from"./ProgressBar-b3b43754.js";import{c as j,a as x,u as g,G as f,H as y,m as b,d as w,n as v,l as D,o as P,p as C,q,r as k,t as S,v as I,w as F,x as M,y as B,z as T,A as R,B as O,N}from"./index-be42ab03.js";import{u as E,F as A,b as z,a as V,c as L,f as Y,g as $}from"./form-vendor-6d56d196.js";import{V as H}from"./VideoPoster-3a2202a4.js";import{S as U,a as G,M as J,U as K,A as Q,F as W,B as X,b as Z,c as ee,O as te}from"./SourceOfIncomeModal-5b87dc20.js";import{C as re}from"./Column-8e9274b3.js";import{D as ae}from"./DropdownMenu-9b978d84.js";import{F as ie}from"./FormContainer-3c74d758.js";import{F as ne}from"./FormattedInput-8631259e.js";import{R as se}from"./Row-1fe205ed.js";import{F as oe}from"./FormCaption-99de3b25.js";import{D as le}from"./DeleteIcon-eb6b754c.js";import{A as de,U as ce}from"./AddButton-c0dadcb9.js";import{C as me}from"./Calendar-372900a0.js";import{E as _e}from"./ExitModule-e9c22241.js";import{b as ue,M as he,A as pe,a as je,O as xe,c as ge,g as fe}from"./componentsByIncomeSource-4950a17f.js";import{u as ye}from"./i18n-vendor-18addd5f.js";import{D as be}from"./DoubleButtons-2dfe33b8.js";import{R as we}from"./RowTwo-70a22b13.js";import{B as ve,P as De,A as Pe}from"./PartnerPayMortgage-b13fb03c.js";import{N as Ce,B as qe,E as ke,A as Se,T as Ie,C as Fe,M as Me,I as Be,P as Te}from"./Taxes-1bf08f0c.js";import{C as Re,a as Oe,H as Ne}from"./HowMuchChildrens-ecebc3ca.js";import{F as Ee}from"./FamilyStatus-d89d99b4.js";import{I as Ae}from"./Info-29cf2572.js";import"./components-vendor-62dc47c0.js";import"./utils-vendor-8f040048.js";import"./state-vendor-069efcec.js";import"./MortgageParameters-98c61379.js";import"./PercentIcon-e1c53aea.js";import"./useDropdownData-1fd3cd06.js";import"./Control-99ce6a52.js";import"./ShieldCheckIcon-30f9c17a.js";const ze=j.bind({"mortgage-data":"_mortgage-data_1kje2_1","mortgage-data-title":"_mortgage-data-title_1kje2_6","mortgage-data-title__text":"_mortgage-data-title__text_1kje2_12","mortgage-data-title__button":"_mortgage-data-title__button_1kje2_18","mortgage-data-form":"_mortgage-data-form_1kje2_28","mortgage-data-form__items":"_mortgage-data-form__items_1kje2_36","mortgage-data-form__item-delete-wrapper":"_mortgage-data-form__item-delete-wrapper_1kje2_42","mortgage-data-form__item-delete-button":"_mortgage-data-form__item-delete-button_1kje2_48","mortgage-data-form__add":"_mortgage-data-form__add_1kje2_70","button-left__icon":"_button-left__icon_1kje2_84"}),Ve=()=>{const[r,a]=t.useState([]),[i,n]=t.useState(null),{values:c,setFieldValue:m,errors:_,touched:u,setFieldTouched:h}=E(),p="string"==typeof _.creditData?_.creditData:void 0,[j,{open:x,close:g}]=s(!1),{isDesktop:f,isTablet:y,isMobile:b}=o(),{t:w,i18n:v}=ye(),{getContent:D}=l("refinance_credit_1"),P="option_2"===c.refinancingCredit;t.useEffect(()=>{a(c.creditData)},[c.creditData]);const C=()=>{const e={id:ue(r),bank:"",amount:null,monthlyPayment:null,startDate:"",endDate:"",earlyRepayment:null};m("creditData",[...r,e]),h("creditData",!1,!1)},q=e=>{n(e),x()},k=[{value:"hapoalim",label:D("bank_hapoalim",w("bank_hapoalim"))},{value:"leumi",label:D("bank_leumi",w("bank_leumi"))},{value:"discount",label:D("bank_discount",w("bank_discount"))},{value:"massad",label:D("bank_massad",w("bank_massad"))},{value:"israel",label:D("bank_israel",w("bank_israel"))}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:ze("mortgage-data"),children:[e.jsx("div",{className:ze("mortgage-data-title"),children:e.jsx("h4",{className:ze("mortgage-data-title__text"),children:D("list_credits_title",w("list_credits_title"))})}),f&&e.jsxs("div",{className:ze("mortgage-data-form"),children:[e.jsx("div",{className:ze("mortgage-data-form__items"),children:r.map(a=>e.jsxs(t.Fragment,{children:[e.jsxs(se,{children:[e.jsx(re,{children:e.jsx(ae,{data:k,title:D("bank_apply_credit",w("bank_apply_credit")),placeholder:D("calculate_mortgage_first_ph",w("calculate_mortgage_first_ph")),value:a.bank,onChange:e=>{const t=r.map(t=>t.id===a.id?{...t,bank:e}:t);m("creditData",t)},onBlur:()=>h("creditData"),error:u.creditData&&p})}),e.jsx(re,{children:e.jsx(ne,{title:D("amount_credit_title",w("amount_credit_title")),handleChange:e=>{const t=r.map(t=>t.id===a.id?{...t,amount:e}:t);m("creditData",t)},value:a.amount,onBlur:()=>h("creditData"),error:u.creditData&&p})}),e.jsx(re,{children:e.jsx(ne,{title:D("calculate_mortgage_initial_payment",w("calculate_mortgage_initial_payment")),handleChange:e=>{const t=r.map(t=>t.id===a.id?{...t,monthlyPayment:e}:t);m("creditData",t)},value:a.monthlyPayment,onBlur:()=>h("creditData"),error:u.creditData&&p})})]}),e.jsxs(se,{children:[e.jsx(re,{children:e.jsx(me,{title:D("refinance_credit_start_date",w("refinance_credit_start_date")),placeholder:D("date_ph",w("date_ph")),value:a.startDate,onChange:e=>{const t=r.map(t=>t.id===a.id?{...t,startDate:e}:t);m("creditData",t)},onBlur:()=>h("creditData"),error:u.creditData&&p})}),e.jsx(re,{children:e.jsx(me,{title:D("refinance_credit_end_date",w("refinance_credit_end_date")),placeholder:D("date_ph",w("date_ph")),value:a.endDate,onChange:e=>{const t=r.map(t=>t.id===a.id?{...t,endDate:e}:t);m("creditData",t)},onBlur:()=>h("creditData"),error:u.creditData&&p,blockPastDates:!0,allowFuture:!0})}),P&&e.jsx(re,{children:e.jsx(ne,{title:D("early_repayment",w("early_repayment")),handleChange:e=>{const t=r.map(t=>t.id===a.id?{...t,earlyRepayment:e}:t);m("creditData",t)},value:a.earlyRepayment,onBlur:()=>h("creditData"),error:u.creditData&&p})}),!P&&e.jsx(re,{})]}),e.jsx("div",{className:ze("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:ze("mortgage-data-form__item-delete-button"),onClick:()=>q(a.id),children:e.jsx(le,{})})}),e.jsx(d,{})]},a.id))}),e.jsx("div",{className:ze("mortgage-data-form__add"),children:e.jsx(de,{value:D("add_credit",w("add_credit")),onClick:C})})]}),(y||b)&&e.jsxs("div",{className:ze("mortgage-data-form"),children:[e.jsx("div",{className:ze("mortgage-data-form__items"),children:r.map(a=>e.jsxs(t.Fragment,{children:[e.jsxs(se,{children:[e.jsx(re,{children:e.jsx(ae,{data:k,title:D("bank_apply_credit",w("bank_apply_credit")),placeholder:D("calculate_mortgage_first_ph",w("calculate_mortgage_first_ph")),value:a.bank,onChange:e=>{const t=r.map(t=>t.id===a.id?{...t,bank:e}:t);m("creditData",t)},onBlur:()=>h("creditData"),error:u.creditData&&p})}),e.jsx(re,{children:e.jsx(ne,{title:D("amount_credit_title",w("amount_credit_title")),handleChange:e=>{const t=r.map(t=>t.id===a.id?{...t,amount:e}:t);m("creditData",t)},value:a.amount,onBlur:()=>h("creditData"),error:u.creditData&&p})}),e.jsx(re,{children:e.jsx(ne,{title:D("calculate_mortgage_initial_payment",w("calculate_mortgage_initial_payment")),handleChange:e=>{const t=r.map(t=>t.id===a.id?{...t,monthlyPayment:e}:t);m("creditData",t)},value:a.monthlyPayment,onBlur:()=>h("creditData"),error:u.creditData&&p})}),e.jsx(re,{children:e.jsx(me,{title:D("refinance_credit_start_date",w("refinance_credit_start_date")),placeholder:D("date_ph",w("date_ph")),value:a.startDate,onChange:e=>{const t=r.map(t=>t.id===a.id?{...t,startDate:e}:t);m("creditData",t)},onBlur:()=>h("creditData"),error:u.creditData&&p})}),e.jsx(re,{children:e.jsx(me,{title:D("refinance_credit_end_date",w("refinance_credit_end_date")),placeholder:D("date_ph",w("date_ph")),value:a.endDate,onChange:e=>{const t=r.map(t=>t.id===a.id?{...t,endDate:e}:t);m("creditData",t)},onBlur:()=>h("creditData"),error:u.creditData&&p,blockPastDates:!0,allowFuture:!0})}),P&&e.jsx(re,{children:e.jsx(ne,{title:D("early_repayment",w("early_repayment")),handleChange:e=>{const t=r.map(t=>t.id===a.id?{...t,earlyRepayment:e}:t);m("creditData",t)},value:a.earlyRepayment,onBlur:()=>h("creditData"),error:u.creditData&&p})})]}),e.jsx("div",{className:ze("mortgage-data-form__item-delete-wrapper"),children:e.jsx("button",{type:"button",className:ze("mortgage-data-form__item-delete-button"),onClick:()=>q(a.id),children:e.jsx(le,{})})}),e.jsx(d,{})]},a.id))}),e.jsx("div",{className:ze("mortgage-data-form__add"),children:e.jsx(de,{value:D("add_credit",w("add_credit")),onClick:C})})]})]}),e.jsx(_e,{opened:j,onClose:g,title:D("remove_credit",w("remove_credit")),subtitle:D("remove_credit_subtitle",w("remove_credit_subtitle")),onConfirm:()=>{if(null!==i){const e=r.filter(e=>e.id!==i);m("creditData",e)}g()},confirmText:D("delete",w("delete"))})]})},Le=()=>{const{t:t,i18n:r}=ye(),{getContent:a}=l("refinance_credit_1"),i=[{value:"option_1",label:a("calculate_credit_why_option_1",t("calculate_credit_why_option_1"))},{value:"option_2",label:a("calculate_credit_why_option_2",t("calculate_credit_why_option_2"))},{value:"option_3",label:a("calculate_credit_why_option_3",t("calculate_credit_why_option_3"))},{value:"option_4",label:a("calculate_credit_why_option_4",t("calculate_credit_why_option_4"))}],{setFieldValue:n,values:s,errors:o,touched:m,setFieldTouched:_}=E();return e.jsxs(ie,{children:[e.jsx(oe,{title:a("credit_refinance_title",t("credit_refinance_title"))}),e.jsx(se,{children:e.jsx(re,{children:e.jsx(ae,{data:i,title:a("mortgage_credit_why",t("mortgage_credit_why")),placeholder:a("credit_refinance_why_ph",t("credit_refinance_why_ph")),value:s.refinancingCredit,onChange:e=>n("refinancingCredit",e),onBlur:()=>_("refinancingCredit"),error:m.refinancingCredit&&o.refinancingCredit})})}),e.jsx(d,{}),e.jsx(se,{children:e.jsx(Ve,{})}),"option_3"===s.refinancingCredit&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(se,{children:e.jsx(re,{children:e.jsx(ne,{name:"desiredMonthlyPayment",title:a("desired_monthly_payment",t("desired_monthly_payment")),handleChange:e=>n("desiredMonthlyPayment",e),value:s.desiredMonthlyPayment,onBlur:()=>_("desiredMonthlyPayment"),error:m.desiredMonthlyPayment&&o.desiredMonthlyPayment})})})]}),"option_4"===s.refinancingCredit&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(se,{children:e.jsxs(re,{children:[e.jsx(U,{disableCurrency:!0,unitsMax:a("calculate_mortgage_period_units_max",t("calculate_mortgage_period_units_max")),unitsMin:a("calculate_mortgage_period_units_min",t("calculate_mortgage_period_units_min")),value:s.desiredTerm,name:"desiredTerm",min:4,max:30,error:o.desiredTerm,title:a("credit_loan_period",t("credit_loan_period")),handleChange:e=>n("desiredTerm",e)}),o.desiredTerm&&e.jsx(c,{error:o.desiredTerm})]})})]})]})},Ye=()=>V().shape({refinancingCredit:L().required(v("error_select_answer","Please select an answer")),desiredMonthlyPayment:Y().positive(v("error_credit_payment_positive","Payment must be positive")).when("refinancingCredit",{is:"option_3",then:e=>e.required(v("error_required_to_fill_out","This field is required")),otherwise:e=>e.notRequired()}),desiredTerm:Y().min(4,v("error_min_period","Minimum period is 4 years")).max(30,v("error_max_period","Maximum period is 30 years")).when("refinancingCredit",{is:"option_4",then:e=>e.required(v("error_required_to_fill_out","This field is required")),otherwise:e=>e.notRequired()}),period:Y().min(4,v("error_min_period","Minimum period is 4 years")).max(30,v("error_max_period","Maximum period is 30 years")).notRequired(),monthlyPayment:Y().notRequired(),creditData:$().of(V().shape({bank:L().required(v("error_credit_bank_required","Bank selection is required")),amount:Y().positive(v("error_credit_amount_positive","Amount must be positive")).required(v("error_credit_amount_required","Credit amount is required")),monthlyPayment:Y().positive(v("error_credit_payment_positive","Payment must be positive")).required(v("error_credit_payment_required","Monthly payment is required")),startDate:L().required(v("error_credit_start_date_required","Start date is required")),endDate:L().required(v("error_credit_end_date_required","End date is required")).test("end-date-after-start",v("error_credit_end_date_validation","End date must be after start date"),function(e){const{startDate:t}=this.parent;return!e||!t||new Date(e)>new Date(t)}),earlyRepayment:Y().positive(v("error_credit_early_payment_positive","Early payment must be positive")).nullable().notRequired()})).min(1,v("error_credit_data_required","At least one credit entry is required"))}),$e=()=>{const{t:t,i18n:a}=ye(),i=x(),n=r(),s=g(e=>e.refinanceCredit),o=g(e=>e.login.isLogin),l=new Date;l.setDate(l.getDate()+1),l.toISOString().split("T")[0];const d=new Date;d.setFullYear(d.getFullYear()-5);const c=d.toISOString().split("T")[0],u=new Date;u.setFullYear(u.getFullYear()+10);const h=u.toISOString().split("T")[0],p={refinancingCredit:s.refinancingCredit||"",period:s.period||30,monthlyPayment:s.monthlyPayment||1e6,desiredMonthlyPayment:s.desiredMonthlyPayment||null,desiredTerm:s.desiredTerm||null,creditData:s.creditData||[{id:1,bank:"hapoalim",amount:null,monthlyPayment:null,startDate:c,endDate:h,earlyRepayment:null}]};return e.jsxs(e.Fragment,{children:[e.jsx(A,{initialValues:p,validationSchema:Ye(),validateOnMount:!0,onSubmit:e=>{i(f(e)),i(y({data:e})),o?n("/services/refinance-credit/2"):(i(b()),i(w("phoneVerification")))},children:e.jsxs(z,{children:[e.jsxs(m,{children:[e.jsx(H,{title:t("credit_refinance_title"),text:t("credit_refinance_banner_subtext"),size:"small"}),e.jsx(Le,{})]}),e.jsx(G,{showValidationHints:!0})]})}),e.jsx(J,{}),e.jsx(_,{})]})},He=()=>{const{t:t,i18n:r}=ye(),a=g(e=>e.login.loginData),i=g(e=>e.refinanceCredit);return e.jsxs(ie,{children:[e.jsx(oe,{title:t("refinance_credit_final")}),e.jsx(K,{credit:(null==i?void 0:i.period)?1e3*i.period:void 0,nameSurname:null==a?void 0:a.nameSurname,phoneNumber:null==a?void 0:a.phoneNumber}),e.jsx(Q,{text:t("refinance_credit_warning")}),e.jsx(se,{children:e.jsx(W,{})}),e.jsx(X,{})]})},Ue={selectedBank:"",selectedOffer:null},Ge=V().shape({selectedBank:L(),selectedOffer:V().nullable()}),Je=()=>{const t=x(),a=r(),i=g(e=>e.login.loginData),n=g(e=>e.login.isLogin);return e.jsx(A,{initialValues:Ue,validationSchema:Ge,validateOnMount:!0,onSubmit:e=>{t(D(e)),n&&(null==i?void 0:i.phoneNumber)?a("/services/application-submitted"):(t(P()),t(w("signUp")))},children:e.jsxs(z,{children:[e.jsx(m,{children:e.jsx(He,{})}),e.jsx(be,{})]})})},Ke=()=>{const{t:t,i18n:r}=ye(),{values:a}=E(),i=g(e=>e.login.loginData);return e.jsxs(ie,{children:[e.jsx(oe,{title:t("calculate_mortgage_step2_title")}),e.jsxs(we,{children:[e.jsx(Ae,{}),e.jsx(ce,{name:null==i?void 0:i.nameSurname,phone:null==i?void 0:i.phoneNumber})]}),e.jsxs(se,{children:[e.jsx(Ce,{}),e.jsx(qe,{}),e.jsx(ke,{})]}),e.jsxs(se,{children:[e.jsxs(re,{style:{gap:"2rem"},children:[e.jsx(Se,{}),"yes"===a.additionalCitizenships&&e.jsx(Re,{})]}),e.jsxs(re,{style:{gap:"2rem"},children:[e.jsx(Ie,{}),"yes"===a.taxes&&e.jsx(Oe,{})]}),e.jsxs(re,{style:{gap:"2rem"},children:[e.jsx(Fe,{}),"yes"===a.childrens&&e.jsx(Ne,{})]})]}),e.jsx(d,{}),e.jsxs(se,{children:[e.jsx(Me,{}),e.jsx(Be,{}),e.jsx(Te,{})]}),e.jsx(d,{}),e.jsxs(se,{children:[e.jsx(ve,{}),e.jsx(re,{}),e.jsx(re,{})]}),e.jsx(d,{}),e.jsxs(se,{children:[e.jsx(Ee,{}),e.jsx(re,{children:"option_2"===a.familyStatus&&e.jsx(De,{})}),e.jsx(re,{children:"yes"===a.partnerPayMortgage&&"option_2"===a.familyStatus&&e.jsx(Pe,{})})]})]})},Qe=V().shape({nameSurname:L().required(v("error_name_surname","Please enter your name and surname")),birthday:L().required(v("error_date","Please enter a valid date")),education:L().required(v("error_select_answer","Please select an answer")),additionalCitizenships:L().required(v("error_select_answer","Please select an answer")),citizenshipsDropdown:$().when("additionalCitizenships",{is:"yes",then:e=>e.min(1,v("error_select_answer","Please select an answer")),otherwise:e=>e.min(0)}),taxes:L().required(v("error_select_answer","Please select an answer")),countriesPayTaxes:$().when("taxes",{is:"yes",then:e=>e.min(1,v("error_select_answer","Please select an answer")),otherwise:e=>e.min(0)}),childrens:L().required(v("error_select_answer","Please select an answer")),howMuchChildrens:Y().required(v("error_fill_field","Please fill this field")),medicalInsurance:L().required(v("error_select_answer","Please select an answer")),isForeigner:L().required(v("error_select_answer","Please select an answer")),publicPerson:L().required(v("error_select_answer","Please select an answer")),borrowers:Y().min(1,v("error_quantity_borrowers","Please specify number of borrowers")).required(v("error_quantity_borrowers","Please specify number of borrowers")),familyStatus:L().required(v("error_select_answer","Please select an answer")),partnerPayMortgage:L().when("familyStatus",{is:"option_2",then:e=>e.required(v("error_select_answer","Please select an answer")),otherwise:e=>e.notRequired()})}),We=()=>{const t=x(),a=r(),i=g(e=>e.refinanceCredit),n={nameSurname:g(e=>e.login.loginData).nameSurname||i.nameSurname||"",birthday:i.birthday||new Date((new Date).setFullYear((new Date).getFullYear()-18)).getTime(),education:i.education||"",additionalCitizenships:i.additionalCitizenships||null,citizenshipsDropdown:i.citizenshipsDropdown||[],taxes:i.taxes||null,countriesPayTaxes:i.countriesPayTaxes||[],childrens:i.childrens||null,howMuchChildrens:i.howMuchChildrens||1,medicalInsurance:i.medicalInsurance||null,isForeigner:i.isForeigner||null,publicPerson:i.publicPerson||null,borrowers:i.borrowers||null,familyStatus:i.familyStatus||"",partnerPayMortgage:i.partnerPayMortgage||null,addPartner:i.addPartner||""};return e.jsx(A,{initialValues:n,validationSchema:Qe,validateOnMount:!0,onSubmit:e=>{t(f(e)),a("/services/refinance-credit/3")},children:e.jsxs(z,{children:[e.jsx(m,{children:e.jsx(Ke,{})}),e.jsx(be,{})]})})},Xe=e=>{if(!e)return!1;const t=e.toLowerCase();return"option_1"===t||"1"===t||"no_additional_income"===t||t.includes("no_additional")||t.includes("no additional")||t.includes("none")},Ze=()=>{const{t:t,i18n:n}=ye(),s=r(),{values:o}=E(),{mainSourceOfIncome:l,additionalIncome:c,obligation:m}=o,_=x(),h=g(e=>e.borrowers.sourceOfIncomeModal),p=g(e=>e.borrowers.additionalIncomeModal),j=g(e=>e.borrowers.obligationModal),y=g(e=>e.otherBorrowers.otherBorrowers),b=g(e=>e.login.loginData),w=fe("refinance_step3");return e.jsxs(ie,{children:[e.jsx(oe,{title:t("calculate_mortgage_step3_title")}),e.jsx(ce,{name:null==b?void 0:b.nameSurname,phone:null==b?void 0:b.phoneNumber}),e.jsxs(se,{children:[e.jsx(he,{}),w[l]&&w[l].map((t,r)=>e.jsx(a.Fragment,{children:t},r)),e.jsx(re,{})]}),e.jsx(se,{children:l&&e.jsxs(re,{children:[h.map(r=>e.jsx(ce,{onEdit:()=>{return e=r.id,void _(M(e));var e},onDelete:()=>{return e=r.id,void _(S({id:e}));var e},enableEdit:!0,name:`${t("source_of_income")}${r.id+1}`},r.id)),e.jsx(de,{onClick:()=>{_(f(o)),_(C())},color:"#FBE54D",value:t("add_place_to_work"),variant:"none"})]})}),e.jsx(d,{}),e.jsxs(se,{children:[e.jsx(pe,{}),c&&!Xe(c)&&e.jsx(je,{}),e.jsx(re,{})]}),c&&!Xe(c)&&e.jsx(se,{children:e.jsxs(re,{children:[p.map(r=>e.jsx(ce,{onEdit:()=>{return e=r.id,void _(B(e));var e},onDelete:()=>{return e=r.id,void _(I({id:e}));var e},enableEdit:!0,name:`${t("additional_source_of_income")}${r.id+1}`},r.id)),e.jsx(de,{onClick:()=>{_(f(o)),_(q())},color:"#FBE54D",value:t("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(d,{}),e.jsxs(se,{children:[e.jsx(xe,{}),ge[m]&&ge[m].map((t,r)=>e.jsx(a.Fragment,{children:t},r)),e.jsx(re,{})]}),m&&"option_1"!==m&&e.jsx(se,{children:e.jsxs(re,{children:[j.map(r=>e.jsx(ce,{onEdit:()=>{return e=r.id,void _(T(e));var e},onDelete:()=>{return e=r.id,void _(F({id:e}));var e},enableEdit:!0,name:`${t("obligation")}${r.id+1}`},r.id)),e.jsx(de,{onClick:()=>{_(f(o)),_(k())},color:"#FBE54D",value:t("add_obligation"),variant:"none"})]})}),e.jsx(d,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[y&&e.jsx(u,{title:t("borrower")}),e.jsxs(se,{style:{columnGap:"2rem"},children:[y.map(t=>e.jsx(re,{children:e.jsx(ce,{onEdit:()=>(e=>{_(R(e));const t=y.some(t=>t.id===e)?e:ue(y);s({pathname:"/services/other-borrowers/1/",search:i({pageId:String(t)}).toString()})})(t.id),onDelete:()=>{return e=t.id,void _(O(e));var e},enableEdit:!0,name:t.nameSurname},t.id)},t.id)),!y&&e.jsx(u,{title:t("borrower")}),e.jsx(re,{children:e.jsx(de,{value:t("add_borrower"),onClick:()=>{_(R(ue(y))),s({pathname:"/services/other-borrowers/1/",search:i({pageId:ue(y).toString()}).toString()})},style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(re,{})]})]})]})},et=e=>{if(!e)return!1;const t=e.toLowerCase();return"option_1"===t||"1"===t||"no_obligations"===t||t.includes("no_obligation")||t.includes("no obligation")||t.includes("none")},tt=e=>{if(!e)return!1;const t=e.toLowerCase();return!["unemployed","student","unpaid_leave","other"].includes(t)},rt=V().shape({mainSourceOfIncome:L().required(v("error_select_answer","Please select an answer")).test("not-empty",v("error_select_answer","Please select an answer"),e=>null!=e&&""!==e),monthlyIncome:Y().when("mainSourceOfIncome",{is:e=>tt(e),then:e=>e.required(v("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),startDate:L().when("mainSourceOfIncome",{is:e=>tt(e),then:e=>e.required(v("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()}),fieldOfActivity:L().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e&&tt(e),then:e=>e.required(v("error_select_field_of_activity","Please select field of activity")),otherwise:e=>e.notRequired()}),profession:L().when("mainSourceOfIncome",{is:e=>tt(e),then:e=>e.required(v("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),companyName:L().when("mainSourceOfIncome",{is:e=>tt(e),then:e=>e.required(v("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),additionalIncome:L().required(v("error_select_one_of_the_options","Please select one of the options")).test("not-empty",v("error_select_one_of_the_options","Please select one of the options"),e=>null!=e&&""!==e),additionalIncomeAmount:Y().when("additionalIncome",{is:e=>null!=e&&""!==e&&!(e=>{if(!e)return!1;const t=e.toLowerCase();return"option_1"===t||"1"===t||"no_additional_income"===t||t.includes("no_additional")||t.includes("no additional")||t.includes("none")})(e),then:e=>e.required(v("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),obligation:L().required(v("error_select_one_of_the_options","Please select one of the options")),bank:L().when("obligation",{is:e=>null!=e&&""!==e&&!et(e),then:e=>e.required(v("error_select_bank","Please select a bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:Y().when("obligation",{is:e=>null!=e&&""!==e&&!et(e),then:e=>e.required(v("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),endDate:L().when("obligation",{is:e=>null!=e&&""!==e&&!et(e),then:e=>e.required(v("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()})}),at=()=>{const t=x(),a=r(),i=g(e=>e.refinanceCredit),n={mainSourceOfIncome:i.mainSourceOfIncome||"",monthlyIncome:i.monthlyIncome||null,startDate:i.startDate||(new Date).getTime(),fieldOfActivity:i.fieldOfActivity||"",profession:i.profession||"",companyName:i.companyName||"",additionalIncome:i.additionalIncome||"",additionalIncomeAmount:i.additionalIncomeAmount||null,obligation:i.obligation||"option_1",bank:i.bank||"",monthlyPaymentForAnotherBank:i.monthlyPaymentForAnotherBank||null,endDate:i.endDate||(new Date).getTime(),amountIncomeCurrentYear:i.amountIncomeCurrentYear||null,noIncome:i.noIncome||(new Date).getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(A,{initialValues:n,validationSchema:rt,validateOnMount:!0,onSubmit:e=>{t(f(e)),a("/services/refinance-credit/4")},children:e.jsxs(z,{children:[e.jsx(m,{children:e.jsx(Ze,{})}),e.jsx(be,{})]})}),e.jsx(Z,{}),e.jsx(ee,{}),e.jsx(te,{})]})},it=()=>{const{stepNumber:a}=n(),{t:i,i18n:s}=ye(),o=r(),l=g(e=>e.login.isLogin);if(t.useEffect(()=>{l||"1"===a||o("/services/refinance-credit/1")},[l,a,o]),!l&&"1"!==a)return e.jsx(h,{});const d=[i("mobile_step_1"),i("mobile_step_2"),i("mobile_step_3"),i("mobile_step_4")];let c;switch(a){case"1":c=e.jsx($e,{});break;case"2":c=e.jsx(We,{});break;case"3":c=e.jsx(at,{});break;case"4":c=e.jsx(Je,{});break;default:c=e.jsx(N,{type:"NOT_FOUND"})}return e.jsxs(e.Fragment,{children:[e.jsx(p,{progress:a,data:d}),e.jsx(t.Suspense,{fallback:e.jsx(h,{}),children:c})]})};export{it as RefinanceCredit};
