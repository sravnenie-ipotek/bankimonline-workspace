import{j as c}from"./ui-vendor-19e4e52b.js";import{a as B,u as $,j as L,d as pe,o as Ve,c as O,l as Ze,I as Je,J as Qe,n as E,K as et,L as tt,E as nt,M as rt}from"./index-6e45afc9.js";import{P as at,e as it,B as Y,I as ot,a as U,D as st,E as lt,M as we}from"./index-3333763f.js";import{u as N}from"./i18n-vendor-e8db3f4c.js";import{u as ce,a as je,c as H,f as Se,F as ke,b as Ie}from"./form-vendor-67b0fc1d.js";import{r as D,b as T,u as ct,f as dt}from"./react-vendor-9ed0ad78.js";import{F as ut}from"./FormattedInput-a9b4c8dd.js";import{w as se}from"./components-vendor-66cd084e.js";import{W as ft,f as mt}from"./AddButton-23292c66.js";import{u as ht,P as pt,t as _t,f as vt,a as gt,M as yt}from"./MortgageParameters-5c900b37.js";import{a as bt}from"./useDropdownData-05964376.js";import{C as ne}from"./Column-a8ef8409.js";import{D as xt}from"./DropdownMenu-dc5040a3.js";import{R as wt}from"./Row-389aebbb.js";import{A as jt,a as St,b as Pe,O as kt,c as Me,M as It,g as Pt}from"./componentsByIncomeSource-dc390bb7.js";const sr=()=>{const{i18n:e}=N(),n=B(),t=$(i=>i.modalSlice.isOpenLogin),r=()=>{n(L()),n(pe("login"))},o=()=>{n(L()),n(pe("codeSignUp")),n(Ve())};return t?e.language==="he"?c.jsx(at,{onClose:r,onSuccess:o}):c.jsx(it,{onClose:r,onSuccess:o}):null},Dt="_buttons_17878_16",$t="_wrapper_17878_28",Tt={"submit-btn":"_submit-btn_17878_1",buttons:Dt,wrapper:$t},ue=O.bind(Tt),lr=({showValidationHints:e=!1})=>{const{t:n}=N(),{isValid:t,handleSubmit:r,errors:o,values:i,setFieldTouched:u}=ce(),[a,l]=D.useState(!1),d=()=>{Object.keys(i).forEach(m=>{u(m,!0,!1)}),t?r():l(!0)};return c.jsx("div",{className:ue("submit-btn"),children:c.jsx("div",{className:ue("wrapper"),children:c.jsx("div",{className:ue("buttons"),children:c.jsx(Y,{onClick:d,size:"smallLong",type:"button",style:{opacity:t?1:.7,cursor:t?"pointer":"not-allowed",pointerEvents:"auto",zIndex:9999},children:n("button_next")})})})})};var Oe=Math.sqrt(50),Ne=Math.sqrt(10),Ce=Math.sqrt(2);function Mt(e,n,t){var r,o=-1,i,u,a;if(n=+n,e=+e,t=+t,e===n&&t>0)return[e];if((r=n<e)&&(i=e,e=n,n=i),(a=Ot(e,n,t))===0||!isFinite(a))return[];if(a>0){let l=Math.round(e/a),d=Math.round(n/a);for(l*a<e&&++l,d*a>n&&--d,u=new Array(i=d-l+1);++o<i;)u[o]=(l+o)*a}else{a=-a;let l=Math.round(e*a),d=Math.round(n*a);for(l/a<e&&++l,d/a>n&&--d,u=new Array(i=d-l+1);++o<i;)u[o]=(l+o)/a}return r&&u.reverse(),u}function Ot(e,n,t){var r=(n-e)/Math.max(0,t),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return o>=0?(i>=Oe?10:i>=Ne?5:i>=Ce?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=Oe?10:i>=Ne?5:i>=Ce?2:1)}function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ee(Object(t),!0).forEach(function(r){Nt(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function G(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ae(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,n,t){return n&&Ae(e.prototype,n),t&&Ae(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function re(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_e(e,n)}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},le(e)}function _e(e,n){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_e(e,n)}function Ct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function q(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function ae(e){var n=Ct();return function(){var r=le(e),o;if(n){var i=le(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return Et(this,o)}}function ve(e,n){return Rt(e)||Ht(e,n)||qe(e,n)||Lt()}function ge(e){return At(e)||Ft(e)||qe(e)||Bt()}function At(e){if(Array.isArray(e))return ye(e)}function Rt(e){if(Array.isArray(e))return e}function Ft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ht(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r=[],o=!0,i=!1,u,a;try{for(t=t.call(e);!(o=(u=t.next()).done)&&(r.push(u.value),!(n&&r.length===n));o=!0);}catch(l){i=!0,a=l}finally{try{!o&&t.return!=null&&t.return()}finally{if(i)throw a}}return r}}function qe(e,n){if(e){if(typeof e=="string")return ye(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ye(e,n)}}function ye(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Bt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var be="react-compound-slider:";function Ke(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return function(t,r){return t.val>r.val?e?-1:1:r.val>t.val?e?1:-1:0}}function te(e,n,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=e.findIndex(function(l){return l.key===n});if(o!==-1){var i=e[o],u=i.key,a=i.val;return a===t?e:[].concat(ge(e.slice(0,o)),[{key:u,val:t}],ge(e.slice(o+1))).sort(Ke(r))}return e}function Z(e,n){if(!e)return[0,0];var t=e.getBoundingClientRect(),r=n?t.top:t.left,o=n?t.bottom:t.right;return[r,o]}function Re(e){var n=e.type,t=n===void 0?"":n,r=e.touches;return!r||r.length>1||t.toLowerCase()==="touchend"&&r.length>0}function fe(e,n){return e?n.touches[0].clientY:n.touches[0].pageX}function Fe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=0,i=e.map(function(u){var a=t.getValue(u);return u!==a&&(o+=1,se(!r,"".concat(be," Invalid value encountered. Changing ").concat(u," to ").concat(a,"."))),a}).map(function(u,a){return{key:"$$-".concat(a),val:u}}).sort(Ke(n));return{handles:i,changes:o}}function Ut(e,n){return n}function zt(e,n){for(var t=0;t<e.length;t++)if(e[t].key!==n[t].key||n[t+1]&&n[t].val===n[t+1].val)return e;return n}function xe(e,n,t,r,o){for(var i=-1,u=!0,a=0;a<e.length;a++){var l=e[a],d=n[a];if(!d||d.key!==l.key)return e;d.val!==l.val&&(i=a,u=d.val-l.val>0)}if(i===-1)return e;for(var m=u?t:-t,s=0;s<n.length;s++){var h=n[s],p=n[s+1];if(p&&h.val===p.val)if(s===i){var f=p.val+m;if(o(f)===f){var v=te(n,p.key,p.val+m,r),g=xe(n,v,t,r,o);return g===n?e:g}else return e}else{var y=h.val+m;if(o(y)===y){var j=te(n,h.key,h.val+m,r),k=xe(n,j,t,r,o);return k===n?e:k}else return e}}return n}function K(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(r){return n.forEach(function(o){return o&&o(r)})}}var Vt=function(){return{value:0,percent:0}},Ye=function(e){re(t,e);var n=ae(t);function t(){var r;G(this,t);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return r=n.call.apply(n,[this].concat(i)),r.getRailProps=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=r.props,d=l.emitMouse,m=l.emitTouch;return F(F({},a),{},{onMouseDown:K(a&&a.onMouseDown,d),onTouchStart:K(a&&a.onTouchStart,m)})},r}return W(t,[{key:"render",value:function(){var o=this.getRailProps,i=this.props,u=i.getEventData,a=i.activeHandleID,l=a===void 0?"":a,d=i.children,m=d({getEventData:u||Vt,activeHandleID:l,getRailProps:o});return m&&T.Children.only(m)}}]),t}(D.Component),Ge=function(e){re(t,e);var n=ae(t);function t(){var r;G(this,t);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return r=n.call.apply(n,[this].concat(i)),r.autofocus=function(a){a.target instanceof HTMLElement&&a.target.focus()},r.getHandleProps=function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=r.props,m=d.emitKeyboard,s=d.emitMouse,h=d.emitTouch;return F(F({},l),{},{onKeyDown:K(l&&l.onKeyDown,function(p){return m&&m(p,a)}),onMouseDown:K(l&&l.onMouseDown,r.autofocus,function(p){return s&&s(p,a)}),onTouchStart:K(l&&l.onTouchStart,function(p){return h&&h(p,a)})})},r}return W(t,[{key:"render",value:function(){var o=this.getHandleProps,i=this.props,u=i.activeHandleID,a=u===void 0?"":u,l=i.children,d=i.handles,m=d===void 0?[]:d,s=l({handles:m,activeHandleID:a,getHandleProps:o});return s&&T.Children.only(s)}}]),t}(D.Component),De=function(){function e(){G(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return W(e,[{key:"createInterpolator",value:function(t,r){var o=this,i=t[0],u=t[1],a=r[0],l=r[1];return u<i?function(d){return o.interpolateValue(l,a)(o.deinterpolateValue(u,i)(d))}:function(d){return o.interpolateValue(a,l)(o.deinterpolateValue(i,u)(d))}}},{key:"interpolateValue",value:function(t,r){return t=+t,r-=t,function(i){return t+r*i}}},{key:"deinterpolateValue",value:function(t,r){return(r-=t=+t)?function(o){return(o-t)/r}:function(){return r}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(t){var r=this.domain,o=this.range;return(this.interpolator||(this.interpolator=this.createInterpolator(r,o)))(+t)}},{key:"setDomain",value:function(t){return this.domain=[t[0],t[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(t){return this.range=[t[0],t[1]],this}},{key:"getRange",value:function(){return this.range}},{key:"getTicks",value:function(t){var r=this.domain;return Mt(r[0],r[r.length-1],t||10)}}]),e}(),qt=function(){return{value:0,percent:0}},Kt=function(e){re(t,e);var n=ae(t);function t(){return G(this,t),n.apply(this,arguments)}return W(t,[{key:"render",value:function(){var o=this.props,i=o.children,u=o.values,a=o.scale,l=a===void 0?new De:a,d=o.count,m=d===void 0?10:d,s=o.getEventData,h=s===void 0?qt:s,p=o.activeHandleID,f=p===void 0?"":p,v=(u||l.getTicks(m)).map(function(y){return{id:"$$-".concat(y),value:y,percent:l.getValue(y)}}),g=i({getEventData:h,activeHandleID:f,ticks:v});return g&&T.Children.only(g)}}]),t}(D.Component),Yt=function(){return{value:0,percent:0}},We=function(e){re(t,e);var n=ae(t);function t(){var r;G(this,t);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return r=n.call.apply(n,[this].concat(i)),r.getTrackProps=function(a){var l=r.props,d=l.emitMouse,m=l.emitTouch;return F(F({},a||{}),{},{onMouseDown:K(a&&a.onMouseDown,d),onTouchStart:K(a&&a.onTouchStart,m)})},r}return W(t,[{key:"render",value:function(){for(var o=this.getTrackProps,i=this.props,u=i.children,a=i.left,l=a===void 0?!0:a,d=i.right,m=d===void 0?!0:d,s=i.scale,h=s===void 0?new De:s,p=i.handles,f=p===void 0?[]:p,v=i.getEventData,g=v===void 0?Yt:v,y=i.activeHandleID,j=y===void 0?"":y,k=h.getDomain(),I=[],x=0;x<f.length+1;x++){var S=f[x-1],_=f[x];x===0&&l===!0?S={id:"$",value:k[0],percent:0}:x===f.length&&m===!0&&(_={id:"$",value:k[1],percent:100}),S&&_&&I.push({id:"".concat(S.id,"-").concat(_.id),source:S,target:_})}var w=u({getEventData:g,activeHandleID:j,tracks:I,getTrackProps:o});return w&&T.Children.only(w)}}]),t}(D.Component);function He(e,n,t){return Math.min(Math.max(e,n),t)}var Be=W(function e(){var n=this;G(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(t){return n.domain=[t[0],t[1]],n},this.setRange=function(t){return n.range=[t[0],t[1]],n},this.setStep=function(t){return n.step=t,n},this.getValue=function(t){var r=ve(n.domain,2),o=r[0],i=r[1],u=ve(n.range,2),a=u[0],l=u[1],d=n.step,m=(He(t,o,i)-o)/(i-o),s=d*Math.round(m*(l-a)/d)+a;return He(s,a<l?a:l,l>a?l:a)}}),J=typeof window<"u"&&typeof document<"u",R=function(){},Gt=function(n){return function(t,r,o){return t&&n[o]===r}},Wt=function(n,t){return n===t||n.length===t.length&&n.reduce(Gt(t),!0)},Xt=function(n){if(!D.isValidElement(n))return!1;var t=n.type,r=t?t.name:"";return r===Ge.name||r===Ye.name||r===Kt.name||r===We.name},Zt=function(n,t,r,o){var i=o?n-t:n+t;return o?Math.max(r[0],i):Math.min(r[1],i)},Jt=function(n,t,r,o){var i=o?n+t:n-t;return o?Math.min(r[1],i):Math.max(r[0],i)},ie=[0,100],Qt=function(e){re(t,e);var n=ae(t);function t(){var r;G(this,t);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return r=n.call.apply(n,[this].concat(i)),r.state={step:.1,values:[],domain:ie,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},r.slider=T.createRef(),r.onKeyDown=function(a,l){var d=["ArrowRight","ArrowUp"],m=["ArrowDown","ArrowLeft"],s=q(r),h=s.state.handles,p=s.props,f=p.step,v=f===void 0?.1:f,g=p.reversed,y=g===void 0?!1:g,j=p.vertical,k=j===void 0?!1:j,I=p.domain,x=I===void 0?[0,100]:I,S=a.key||"".concat(a.keyCode);if(d.concat(m).includes(S)){if(k){var _=[m,d];d=_[0],m=_[1]}a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault();var w=h.find(function(A){return A.key===l});if(w){var b=w.val,C=b;d.includes(S)?C=Zt(b,v,x,y):m.includes(S)&&(C=Jt(b,v,x,y));var P=h.map(function(A){return A.key===l?{key:A.key,val:C}:A});r.submitUpdate(P,!0)}}},r.onMouseDown=function(a,l){r.onStart(a,l,!1)},r.onTouchStart=function(a,l){Re(a)||r.onStart(a,l,!0)},r.getEventData=function(a,l){var d=q(r),m=d.state,s=m.pixelToStep,h=m.valueToPerc,p=d.props.vertical;s.setDomain(Z(r.slider.current,p));var f;return l&&a instanceof TouchEvent?f=s.getValue(fe(p,a)):a instanceof MouseEvent&&(f=s.getValue(p?a.clientY:a.pageX)),{value:f,percent:h.getValue(f)}},r.onMouseMove=function(a){var l=q(r),d=l.state,m=d.handles,s=d.pixelToStep,h=d.activeHandleID,p=h===void 0?"":h,f=l.props,v=f.vertical,g=f.reversed,y=g===void 0?!1:g;s.setDomain(Z(r.slider.current,v));var j=s.getValue(v?a.clientY:a.pageX),k=te(m,p,j,y);r.submitUpdate(k)},r.onTouchMove=function(a){var l=q(r),d=l.state,m=d.handles,s=d.pixelToStep,h=d.activeHandleID,p=l.props,f=p.vertical,v=p.reversed;if(!(s===null||Re(a))){s.setDomain(Z(r.slider.current,f));var g=s.getValue(fe(f,a)),y=te(m,h,g,v);r.submitUpdate(y)}},r.onMouseUp=function(){var a=q(r),l=a.state,d=l.handles,m=d===void 0?[]:d,s=l.activeHandleID,h=a.props,p=h.onChange,f=p===void 0?R:p,v=h.onSlideEnd,g=v===void 0?R:v;f(m.map(function(y){return y.val})),g(m.map(function(y){return y.val}),{activeHandleID:s}),r.setState({activeHandleID:""}),J&&(document.removeEventListener("mousemove",r.onMouseMove),document.removeEventListener("mouseup",r.onMouseUp))},r.onTouchEnd=function(){var a=q(r),l=a.state,d=l.handles,m=l.activeHandleID,s=a.props,h=s.onChange,p=h===void 0?R:h,f=s.onSlideEnd,v=f===void 0?R:f;p(d.map(function(g){return g.val})),v(d.map(function(g){return g.val}),{activeHandleID:m}),r.setState({activeHandleID:""}),J&&(document.removeEventListener("touchmove",r.onTouchMove),document.removeEventListener("touchend",r.onTouchEnd))},r}return W(t,[{key:"componentDidMount",value:function(){var o=this.state.pixelToStep,i=this.props.vertical;o.setDomain(Z(this.slider.current,i))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){J&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(o,i,u){var a=this.state.handles,l=this.props.onSlideStart,d=l===void 0?R:l;u||o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation();var m=a.find(function(s){return s.key===i});m?(this.setState({activeHandleID:i}),d(a.map(function(s){return s.val}),{activeHandleID:i}),u?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(o,u))}},{key:"handleRailAndTrackClicks",value:function(o,i){var u=this,a=this.state,l=a.handles,d=a.pixelToStep,m=this.props,s=m.vertical,h=m.reversed,p=h===void 0?!1:h,f=this.slider;d.setDomain(Z(f.current,s));var v;i?v=d.getValue(fe(s,o)):v=d.getValue(s?o.clientY:o.pageX);for(var g="",y=1/0,j=0;j<l.length;j++){var k=l[j],I=k.key,x=k.val,S=Math.abs(x-v);S<y&&(g=I,y=S)}var _=te(l,g,v,p);this.setState({activeHandleID:g},function(){u.submitUpdate(_,!0),i?u.addTouchEvents():u.addMouseEvents()})}},{key:"addMouseEvents",value:function(){J&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"addTouchEvents",value:function(){J&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}},{key:"submitUpdate",value:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=this.props,a=u.mode,l=a===void 0?1:a,d=u.step,m=d===void 0?.1:d,s=u.onUpdate,h=s===void 0?R:s,p=u.onChange,f=p===void 0?R:p,v=u.reversed,g=v===void 0?!1:v,y=this.state.valueToStep.getValue;this.setState(function(j){var k=j.handles,I=[];if(typeof l=="function")I=l(k,o,m,g,y),se(Array.isArray(I),"Custom mode function did not return an array.");else switch(l){case 1:I=Ut(k,o);break;case 2:I=zt(k,o);break;case 3:I=xe(k,o,m,g,y);break;default:I=o,se(!1,"".concat(be," Invalid mode value."))}return h(I.map(function(x){return x.val})),i&&f(I.map(function(x){return x.val})),{handles:I}})}},{key:"render",value:function(){var o=this,i=this.state,u=i.handles,a=i.valueToPerc,l=i.activeHandleID,d=this.props,m=d.className,s=d.rootStyle,h=s===void 0?{}:s,p=d.rootProps,f=p===void 0?{}:p,v=d.component,g=v===void 0?"div":v,y=d.disabled,j=y===void 0?!1:y,k=d.flatten,I=k===void 0?!1:k,x=u.map(function(_){var w=_.key,b=_.val;return{id:w,value:b,percent:a.getValue(b)}}),S=T.Children.map(this.props.children,function(_){return Xt(_)===!0?T.cloneElement(_,{scale:a,handles:x,activeHandleID:l,getEventData:o.getEventData,emitKeyboard:j?R:o.onKeyDown,emitMouse:j?R:o.onMouseDown,emitTouch:j?R:o.onTouchStart}):_});return I?T.createElement(T.Fragment,null,T.createElement(g,F(F({},f),{},{style:h,className:m,ref:this.slider})),S):T.createElement(T.Fragment,null,T.createElement(g,F(F({},f),{},{style:h,className:m,ref:this.slider}),S))}}],[{key:"getDerivedStateFromProps",value:function(o,i){var u=o.step,a=u===void 0?.1:u,l=o.values,d=o.domain,m=d===void 0?ie:d,s=o.reversed,h=s===void 0?!1:s,p=o.onUpdate,f=p===void 0?R:p,v=o.onChange,g=v===void 0?R:v,y=o.warnOnChanges,j=y===void 0?!1:y,k=i.valueToPerc,I=i.valueToStep,x=i.pixelToStep,S={};if((!k||!I||!x)&&(k=new De,I=new Be,x=new Be,S.valueToPerc=k,S.valueToStep=I,S.pixelToStep=x),i.domain===ie||i.step===null||i.domain===null||i.reversed===null||a!==i.step||m[0]!==i.domain[0]||m[1]!==i.domain[1]||h!==i.reversed){var _=ve(m,2),w=_[0],b=_[1];I.setStep(a).setRange([w,b]).setDomain([w,b]),h===!0?(k.setDomain([w,b]).setRange([100,0]),x.setStep(a).setRange([b,w])):(k.setDomain([w,b]).setRange([0,100]),x.setStep(a).setRange([w,b])),se(b>w,"".concat(be," Max must be greater than min (even if reversed). Max is ").concat(b,". Min is ").concat(w,"."));var C=Fe(l||i.values,h,I,j),P=C.handles,A=C.changes;(A||l===void 0||l===i.values)&&(f(P.map(function(z){return z.val})),g(P.map(function(z){return z.val}))),S.step=a,S.values=l,S.domain=m===ie?ge(m):m,S.handles=P,S.reversed=h}else if(!Wt(l,i.values)){var Te=Fe(l,h,I,j),de=Te.handles,Xe=Te.changes;Xe&&(f(de.map(function(z){return z.val})),g(de.map(function(z){return z.val}))),S.values=l,S.handles=de}return Object.keys(S).length?S:null}}]),t}(D.PureComponent);const en="_slider_w5hmp_1",tn="_rail_w5hmp_7",nn="_handle_w5hmp_15",rn="_track_w5hmp_36",$e={slider:en,rail:tn,handle:nn,track:rn},an=O.bind($e),on=({source:e,target:n,getTrackProps:t})=>c.jsx("div",{className:an("track","bg-accent-primary"),style:{width:`${n.percent-e.percent}%`},...t()}),sn=O.bind($e),ln=({handle:{id:e,percent:n},getHandleProps:t})=>{const{i18n:r}=N();return c.jsx("div",{className:sn("handle","bg-accent-primary"),style:{left:`${n}%`,marginLeft:r.language==="he"?"-12px":"0px"},...t(e)})},Le=O.bind($e),cn=({min:e,max:n,step:t,values:r,onUpdate:o,onChange:i,"data-testid":u})=>{const{i18n:a}=N();return c.jsxs(Qt,{mode:1,step:t,domain:[e,n],onUpdate:o,onChange:i,values:r,reversed:a.language==="he",className:Le("slider"),"data-testid":u,children:[c.jsx(Ye,{children:({getRailProps:l})=>c.jsx("div",{className:Le("rail","bg-base-secondaryDefaultButton"),...l()})}),c.jsx(Ge,{children:({handles:l,getHandleProps:d})=>c.jsx("div",{className:"slider-handles",children:l.map(m=>c.jsx(ln,{handle:m,domain:[e,n],getHandleProps:d},m.id))})}),c.jsx(We,{left:a.language!=="he",right:a.language==="he",children:({tracks:l,getTrackProps:d})=>c.jsx("div",{className:"slider-tracks",children:l.map(({id:m,source:s,target:h})=>c.jsx(on,{source:s,target:h,getTrackProps:d},m))})})]})},dn={"slider-input":"_slider-input_2u5jo_1","range-ranges":"_range-ranges_2u5jo_12"},Ue=O.bind(dn),un=({value:e,max:n,min:t,name:r,error:o,title:i,handleChange:u,disableRangeValues:a,tooltip:l,disableCurrency:d,unitsMax:m,unitsMin:s,"data-testid":h})=>{const[p,f]=D.useState(e),v=j=>{f(j[0])},g=j=>{u(j[0])},y=j=>{u(j)};return D.useLayoutEffect(()=>{f(e)},[e]),c.jsx(c.Fragment,{children:c.jsxs("div",{className:Ue("slider-input"),children:[c.jsx(ut,{disableCurrency:d,title:i,tooltip:l,name:r,error:o,value:p,handleChange:y,"data-testid":h}),c.jsx(cn,{min:0,max:n,step:1,values:[e],onUpdate:v,onChange:g,"data-testid":h?`${h}-slider`:void 0}),!a&&c.jsxs("div",{className:Ue("range-ranges"),children:[c.jsx("div",{children:c.jsxs("span",{className:r+"Min",children:[t.toLocaleString("en-US")," ",s&&s]})}),c.jsx("div",{children:c.jsxs("span",{className:r+"Max",children:[n.toLocaleString("en-US")," ",m&&m]})})]})]})})},cr=D.memo(un),fn="_filled_1kf35_18",mn={"alert-warning":"_alert-warning_1kf35_1","alert-warning__text":"_alert-warning__text_1kf35_10",filled:fn},me=O.bind(mn),dr=({children:e,filled:n,icon:t,text:r})=>c.jsxs("div",{className:me("alert-warning",{filled:n}),children:[c.jsx("div",{className:me("alert-warning__icon"),children:t||c.jsx(ft,{})}),c.jsx("span",{className:me("alert-warning__text"),children:e||r})]}),hn="_info_1vgj8_1",pn={info:hn,"info-title":"_info-title_1vgj8_11","info-icon":"_info-icon_1vgj8_19"},he=O.bind(pn),_n=({title:e})=>c.jsxs("div",{className:he("info"),children:[c.jsx(ot,{className:he("info-icon"),size:24}),c.jsx("p",{className:he("info-title"),children:e})]}),vn="_card_wewux_1",gn={card:vn,"card-title":"_card-title_wewux_10","card-title__text":"_card-title__text_wewux_21","card-children":"_card-children_wewux_34","card-footer":"_card-footer_wewux_39","card-check":"_card-check_wewux_44","card-check__title":"_card-check__title_wewux_49","card-check__price":"_card-check__price_wewux_61","card-button":"_card-button_wewux_72"},M=O.bind(gn),yn=({title:e,infoTitle:n,children:t,mortgageAmount:r,totalAmount:o,mothlyPayment:i,bankOffer:u,onBankSelect:a})=>{N();const{getContent:l}=U("mortgage_step4"),d=B(),m=r.toLocaleString("en-US"),s=o.toLocaleString("en-US"),h=i.toLocaleString("en-US"),p=()=>{const f=u||{id:`bank_${Date.now()}`,bankName:e,program:n,rate:0,monthlyPayment:i,totalAmount:o,mortgageAmount:r};d(Ze({selectedBank:f,selectedBankId:f.id,selectedBankName:f.bankName})),a&&a(f),d(pe("signUp")),d(Ve())};return c.jsxs("div",{className:M("card"),children:[c.jsxs("div",{className:M("card-title"),children:[c.jsx("h3",{className:M("card-title__text"),children:e}),c.jsx(_n,{title:n})]}),c.jsx("div",{className:M("card-children"),children:t}),c.jsx(st,{}),c.jsxs("div",{className:M("card-footer"),children:[c.jsxs("div",{className:M("card-check"),children:[c.jsx("p",{className:M("card-check__title"),children:l("mortgage_total","mortgage_total")}),c.jsxs("p",{className:M("card-check__price"),children:[m," ₪"]})]}),c.jsxs("div",{className:M("card-check"),children:[c.jsx("p",{className:M("card-check__title"),children:l("mortgage_total_return","mortgage_total_return")}),c.jsxs("p",{className:M("card-check__price"),children:[s," ₪"]})]}),c.jsxs("div",{className:M("card-check"),children:[c.jsx("p",{className:M("card-check__title"),children:l("mortgage_monthly","mortgage_monthly")}),c.jsxs("p",{className:M("card-check__price"),children:[h," ₪"]})]})]}),c.jsx("button",{type:"button",className:M("card-button"),onClick:p,children:l("mortgage_select_bank","mortgage_select_bank")})]})},bn="_container_ceieu_1",xn="_column_ceieu_8",wn={container:bn,column:xn},Q=O.bind(wn),ur=()=>{const{t:e,i18n:n}=N(),t=ht(),{getContent:r}=U("bank_offers"),[o,i]=D.useState([]),[u,a]=D.useState([]),[l,d]=D.useState(!0),[m,s]=D.useState(null),h=$(_=>_.mortgage),p=$(_=>_.credit),f=$(_=>_.refinanceMortgage),v=$(_=>_.refinanceCredit),g=()=>{switch(t){case"credit":return p;case"refinance-mortgage":return f;case"refinance-credit":return v;default:return h}},y=()=>{switch(t){case"credit":return p;case"refinance-mortgage":return f;case"refinance-credit":return v;default:return h.incomeData}},j=g(),k=y(),I=$(_=>_.filter.mortgageType),x=t==="credit";D.useEffect(()=>{(async()=>{try{d(!0),s(null);const b=_t((()=>{switch(t){case"credit":return p;case"refinance-mortgage":return f;case"refinance-credit":return v;default:return h}})(),j,k,t||void 0);console.log("Bank offers request payload prepared");const C=await vt(b);C.length===0&&console.warn("⚠️ [BANK-OFFERS] NO BANK OFFERS FOUND!"),i(C)}catch(w){console.error("💥 [BANK-OFFERS] Error fetching bank offers:",w),s(w.message||"Unknown error occurred")}finally{d(!1)}})()},[h,p,f,v,j,k,t,e]),D.useEffect(()=>{(async()=>{try{const w=await gt(),b=n.language||"en",C=w.map(P=>{let A=b==="he"?P.title:b==="ru"?P.title_ru:P.title_en;switch(P.id){case"prime":A=x?e("credit_prime_percent","Prime Rate Credit"):e("mortgage_prime_percent","Prime Rate Mortgage");break;case"fixed_inflation":A=x?e("credit_fix_percent","Fixed Rate Credit"):e("mortgage_fix_percent","Fixed Rate Mortgage");break;case"variable_inflation":A=x?e("credit_float_percent","Variable Rate Credit"):e("mortgage_float_percent","Variable Rate Mortgage");break;default:break}return{id:P.id,title:A,description:b==="he"?P.description:b==="ru"?P.description_ru:P.description_en,conditionFinance:b==="he"?P.conditionFinance:b==="ru"?P.conditionFinance_ru:P.conditionFinance_en,conditionPeriod:b==="he"?P.conditionPeriod:b==="ru"?P.conditionPeriod_ru:P.conditionPeriod_en,conditionBid:b==="he"?P.conditionBid:b==="ru"?P.conditionBid_ru:P.conditionBid_en,interestRate:P.interestRate,termYears:P.termYears}});a(C)}catch{console.warn("⚠️ [MORTGAGE-PROGRAMS] Failed to fetch programs, using fallback"),a(x?[{id:"prime",title:e("credit_prime_percent","Prime Rate Credit"),description:e("prime_description","Prime rate linked credit program"),conditionFinance:e("up_to_33_percent","Up to 33%"),conditionPeriod:e("4_to_30_years","4-30 years"),conditionBid:e("prime_rate_structure","Variable + Fixed components")},{id:"fixed_inflation",title:e("credit_fix_percent","Fixed rate linked to inflation"),description:e("fixed_inflation_description","Fixed rate with inflation adjustment"),conditionFinance:e("up_to_70_percent","Up to 70%"),conditionPeriod:e("5_to_30_years","5-30 years"),conditionBid:e("fixed_rate_structure","Fixed rate structure")},{id:"variable_inflation",title:e("credit_float_percent","Variable rate linked to inflation"),description:e("variable_inflation_description","Variable rate with inflation adjustment"),conditionFinance:e("up_to_75_percent","Up to 75%"),conditionPeriod:e("4_to_25_years","4-25 years"),conditionBid:e("variable_rate_structure","Variable rate structure")}]:[{id:"prime",title:e("mortgage_prime_percent","Prime Rate Mortgage"),description:e("prime_description","Prime rate linked mortgage program"),conditionFinance:e("up_to_33_percent","Up to 33%"),conditionPeriod:e("4_to_30_years","4-30 years"),conditionBid:e("prime_rate_structure","Variable + Fixed components")},{id:"fixed_inflation",title:e("mortgage_fix_percent","Fixed rate linked to inflation"),description:e("fixed_inflation_description","Fixed rate with inflation adjustment"),conditionFinance:e("up_to_70_percent","Up to 70%"),conditionPeriod:e("5_to_30_years","5-30 years"),conditionBid:e("fixed_rate_structure","Fixed rate structure")},{id:"variable_inflation",title:e("mortgage_float_percent","Variable rate linked to inflation"),description:e("variable_inflation_description","Variable rate with inflation adjustment"),conditionFinance:e("up_to_75_percent","Up to 75%"),conditionPeriod:e("4_to_25_years","4-25 years"),conditionBid:e("variable_rate_structure","Variable rate structure")}])}})()},[e,n.language,x]);const S=_=>I==="all"||x?_:_.filter(w=>{switch(I){case"prime":return w.id==="prime";case"fixed":return w.id==="fixed_inflation";case"variable":return w.id==="variable_inflation";default:return!0}});return l?c.jsx("div",{className:Q("container"),children:r("loading_bank_offers",e("loading_bank_offers"))}):m?c.jsxs("div",{className:Q("container"),children:[r("bank_offers_error",e("bank_offers_error")),m]}):c.jsx("div",{className:Q("container"),children:o.length===0?c.jsxs("div",{className:Q("no-offers"),children:[c.jsx("h3",{children:r("no_bank_offers_available",e("no_bank_offers_available"))}),c.jsx("p",{children:r("no_offers_message",e("no_offers_message"))})]}):o.map((_,w)=>c.jsx(D.Fragment,{children:c.jsx("div",{className:Q("column"),children:c.jsx(yn,{title:_.bank_name||`${r("bank_name","Bank")} #${w+1}`,infoTitle:x?r("bank_offers_credit_register","Credit Registration"):r("mortgage_register","Mortgage Registration"),mortgageAmount:_.loan_amount,totalAmount:_.total_payment,mothlyPayment:_.monthly_payment,bankOffer:{id:_.bank_id,bankName:_.bank_name,program:x?"Credit Program":"Mortgage Program",rate:_.interest_rate,monthlyPayment:_.monthly_payment,totalAmount:_.total_payment,mortgageAmount:_.loan_amount},children:!x&&(S(u).length>0?S(u).map((b,C)=>c.jsx(pt,{title:b.title,percent:_.interest_rate||b.interestRate||2.1,mortgageAmount:_.loan_amount,monthlyPayment:_.monthly_payment,period:_.term_years||b.termYears||20,description:b.description,conditionFinance:b.conditionFinance,conditionPeriod:b.conditionPeriod,conditionBid:b.conditionBid},C)):c.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:r("no_programs_match_filter",'No programs match your selected filter. Try selecting "All Programs" to see all available options.')}))},_.bank_id||w)})},_.bank_id||w))})},jn="_dropdown_s6dzj_1",Sn={dropdown:jn},kn=O.bind(Sn),fr=({screenLocation:e}={})=>{N();const n=ct(),t=$(f=>f.filter),r=B(),i=(()=>e||(n.pathname.includes("refinance-credit"),"mortgage_step4"))(),{getContent:u}=U(i),a=bt(i,"filter","full");a.loading,a.error&&console.warn("❌ Filter dropdown error:",a.error);const l=()=>{switch(t.mortgageType){case"all":return"filter_1";case"prime":return"filter_2";case"fixed":return"filter_3";case"variable":return"filter_4";default:return"filter_1"}},d=n.pathname.includes("refinance-credit"),m=()=>d?[{value:"filter_1",label:u("calculate_mortgage_filter_1","כל הצעות האשראי")},{value:"filter_2",label:u("calculate_mortgage_filter_2","הצעות בריבית מועדפת")},{value:"filter_3",label:u("calculate_mortgage_filter_3","הצעות בריבית קבועה")},{value:"filter_4",label:u("calculate_mortgage_filter_4","הצעות בריבית משתנה")}]:[{value:"filter_1",label:u("calculate_mortgage_filter_1","כל תוכניות המשכנתא")},{value:"filter_2",label:u("calculate_mortgage_filter_2","משכנתאות בריבית פריים")},{value:"filter_3",label:u("calculate_mortgage_filter_3","משכנתאות בריבית קבועה")},{value:"filter_4",label:u("calculate_mortgage_filter_4","משכנתאות בריבית משתנה")}],s=a.options.length>0?a.options:m(),p=(()=>d?{title:u("calculate_mortgage_filter_title","סנן הצעות אשראי"),placeholder:u("calculate_mortgage_filter_title","סנן הצעות אשראי")}:{title:u("calculate_mortgage_filter_title","סנן לפי סוג משכנתא"),placeholder:u("calculate_mortgage_filter_title","סנן לפי סוג משכנתא")})();return c.jsxs(ne,{children:[c.jsx(xt,{data:s,title:a.label||p.title,placeholder:a.placeholder||p.placeholder,value:l(),onChange:f=>r(Je(f)),className:kn("dropdown"),style:{background:"transparent !important"},disabled:a.loading}),a.error&&c.jsx(lt,{error:u("error_dropdown_load_failed","Failed to load filter options. Please refresh the page.")})]})},In=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...e,children:c.jsx("path",{fill:"#FBE54D",d:"m21.31 6.88-4.188-4.19a1.5 1.5 0 0 0-2.122 0L3.44 14.25A1.487 1.487 0 0 0 3 15.312v4.19A1.5 1.5 0 0 0 4.5 21h4.19a1.487 1.487 0 0 0 1.06-.44l11.56-11.56a1.5 1.5 0 0 0 0-2.122ZM8.69 19.5H4.5v-4.189l8.25-8.25 4.19 4.19-8.25 8.25ZM18 10.19 13.81 6l2.25-2.25 4.19 4.19L18 10.19Z"})}),Pn="_profile_dtpha_1",Dn={profile:Pn,"profile-title":"_profile-title_dtpha_16","profile-title__text":"_profile-title__text_dtpha_21","profile-title__icon":"_profile-title__icon_dtpha_27","profile-data":"_profile-data_dtpha_34","profile-data__name":"_profile-data__name_dtpha_39","profile-data__phone":"_profile-data__phone_dtpha_45"},V=O.bind(Dn),$n=({name:e,phone:n})=>{const{t,i18n:r}=N(),{getContent:o}=U("mortgage_step4"),i=dt();return c.jsx(ne,{children:c.jsxs("div",{className:V("profile"),children:[c.jsxs("div",{className:V("profile-title"),children:[c.jsx("p",{className:V("profile-title__text"),children:o("calculate_mortgage_profile_title","calculate_mortgage_profile_title")}),c.jsx(In,{onClick:()=>i("/services/calculate-mortgage/2"),className:V("profile-title__icon")})]}),c.jsxs("div",{className:V("profile-data"),children:[c.jsx("div",{className:V("profile-data__name"),children:e}),c.jsx("div",{className:V("profile-data__phone"),children:n&&mt(n,r.language)})]})]})})},mr=({cost:e,initialPayment:n,period:t,credit:r,nameSurname:o,phoneNumber:i})=>c.jsxs(wt,{style:{columnGap:"3rem",justifyContent:"flex-start"},children:[c.jsx(yt,{cost:e,initialPayment:n,period:t,credit:r}),c.jsx($n,{name:o,phone:i}),c.jsx(ne,{})]}),Tn="_modal_lzcpe_1",Mn="_buttons_lzcpe_49",On={modal:Tn,"modal-item":"_modal-item_lzcpe_18","modal-buttons":"_modal-buttons_lzcpe_31",buttons:Mn},oe=O.bind(On),Nn=()=>{const{t:e,i18n:n}=N(),{handleSubmit:t,isValid:r,values:o}=ce(),i=B();return c.jsx(c.Fragment,{children:c.jsxs("div",{className:oe("modal"),children:[c.jsxs("div",{className:oe("modal-item"),children:[c.jsx(jt,{excludeNoIncome:!0}),o.additionalIncome&&o.additionalIncome!=="no_additional_income"&&c.jsx(St,{})]}),c.jsx("div",{className:oe("modal-buttons"),children:c.jsxs("div",{className:oe("buttons"),children:[c.jsx(Y,{variant:"modalBase",type:"submit",onClick:()=>i(L()),children:e("button_back")}),c.jsx(Y,{type:"submit",isDisabled:!r,onClick:t,size:"full",children:e("button_next_save")})]})})]})})},hr=()=>{const{t:e,i18n:n}=N(),{getContent:t}=U("common");D.useEffect(()=>{Qe()},[n.language]);const r=B(),o=$(f=>f.modalSlice.isOpenAdditionalIncome),i=$(f=>f.modalSlice.currentId),u=$(f=>f.borrowers.additionalIncomeModal),a=u[i-1]!==void 0?u[i-1]:void 0,l=()=>{r(L())},d=$(f=>f.borrowers.additionalIncomeModal),s=!d.some(f=>f.id===i)?Pe(d):i,h={additionalIncome:(a==null?void 0:a.additionalIncome)||"",additionalIncomeAmount:(a==null?void 0:a.additionalIncomeAmount)||null},p=je().shape({additionalIncome:H().required(E("error_select_one_of_the_options","Please select one of the options")).test("not-empty",E("error_select_one_of_the_options","Please select one of the options"),f=>f!=null&&f!==""),additionalIncomeAmount:Se().when("additionalIncome",{is:f=>f&&f!=="no_additional_income",then:f=>f.required(E("error_fill_field","Please fill this field")),otherwise:f=>f.notRequired()})});return c.jsx(we,{isVisible:o,onCancel:l,title:`${t("additional_source_of_income_modal_title","Additional Source of Income")} ${s+1}`,children:c.jsx(ke,{initialValues:h,validationSchema:p,validateOnMount:!0,onSubmit:f=>{r(et({id:s,...f})),l()},children:c.jsx(Ie,{children:c.jsx(Nn,{})})})})},Cn="_modal_r2hy9_1",En="_container_r2hy9_41",An="_component_r2hy9_47",Rn="_buttons_r2hy9_59",Fn={modal:Cn,"modal-item":"_modal-item_r2hy9_18","modal-buttons":"_modal-buttons_r2hy9_23",container:En,component:An,buttons:Rn},ee=O.bind(Fn),Hn=()=>{const{t:e,i18n:n}=N(),{getContent:t}=U("common"),{handleSubmit:r,isValid:o,values:i,errors:u}=ce(),a=B(),{obligation:l}=i,m=(s=>!s||s==="5"||s==="no_obligations"?"":s&&!s.match(/^\d+$/)?s:{1:"bank_loan",2:"consumer_credit",3:"credit_card",4:"other"}[s]||"")(l);return console.log("ObligationForm debug completed"),c.jsx(c.Fragment,{children:c.jsxs("div",{className:ee("modal"),children:[c.jsxs("div",{className:ee("container"),children:[c.jsx(kt,{}),Me[m]&&Me[m].map((s,h)=>c.jsx("div",{className:ee("component"),children:s},h)),c.jsx(ne,{})]}),c.jsx("div",{className:ee("modal-buttons"),children:c.jsxs("div",{className:ee("buttons"),children:[c.jsx(Y,{variant:"modalBase",type:"button",onClick:()=>a(L()),children:t("button_back")||(n.language==="he"?"חזור":n.language==="ru"?"Назад":"Back")}),c.jsx(Y,{type:"submit",isDisabled:!o,onClick:r,size:"full",children:t("button_next_save")||(n.language==="he"?"שמור והמשך":n.language==="ru"?"Сохранить и продолжить":"Save and Continue")})]})})]})})};function ze(){return je().shape({obligation:H().required(E("error_select_one_of_the_options","Please select one of the options")),bank:H().when("obligation",{is:e=>e&&e!=="no_obligations"&&e!=="other",then:e=>e.required(E("error_select_bank","Please select a bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:Se().when("obligation",{is:e=>e&&e!=="no_obligations"&&e!=="other",then:e=>e.required(E("error_fill_field","Please fill this field")),otherwise:e=>e.notRequired()}),endDate:H().when("obligation",{is:e=>e&&e!=="no_obligations"&&e!=="other",then:e=>e.required(E("error_date","Please enter a valid date")),otherwise:e=>e.notRequired()})})}const pr=()=>{const{t:e,i18n:n}=N(),{getContent:t}=U("common"),[r,o]=D.useState(()=>ze()),i=B();D.useEffect(()=>{(async()=>{await nt();const v=ze();o(v)})()},[n.language]);const u=$(f=>f.modalSlice.isOpenObligation),a=$(f=>f.modalSlice.currentId),l=$(f=>f.borrowers.obligationModal),d=l[a-1]!==void 0?l[a-1]:void 0,m=()=>{i(L())},h=!l.some(f=>f.id===a)?Pe(l):a,p={obligation:(d==null?void 0:d.obligation)||"",bank:(d==null?void 0:d.bank)||"",monthlyPaymentForAnotherBank:(d==null?void 0:d.monthlyPaymentForAnotherBank)||null,endDate:(d==null?void 0:d.endDate)||new Date().toISOString().split("T")[0],noIncome:(d==null?void 0:d.noIncome)||new Date().toISOString().split("T")[0]};return c.jsx(we,{isVisible:u,onCancel:m,title:`${t("obligation_modal_title",e("obligation_modal_title"))} ${h+1}`,children:c.jsx(ke,{initialValues:p,validationSchema:r,validateOnMount:!0,onSubmit:f=>{i(tt({id:h,...f})),m()},children:c.jsx(Ie,{children:c.jsx(Hn,{})})})})},Bn="_modal_1gdud_1",Ln="_container_1gdud_41",Un="_component_1gdud_47",zn="_buttons_1gdud_59",Vn={modal:Bn,"modal-item":"_modal-item_1gdud_18","modal-buttons":"_modal-buttons_1gdud_23",container:Ln,component:Un,buttons:zn},X=O.bind(Vn),qn=()=>{const{t:e,i18n:n}=N(),{handleSubmit:t,isValid:r,values:o,errors:i,touched:u,validateForm:a}=ce(),l=window.location.pathname,d=l.includes("calculate-credit")?"credit_step3":l.includes("calculate-mortgage")?"mortgage_step3":l.includes("refinance-mortgage")?"refinance_step3":l.includes("other-borrowers")?"other_borrowers_step2":"credit_step3",{mainSourceOfIncome:m}=o,h=(v=>v&&!v.match(/^\d+$/)?v:{1:"employee",2:"selfemployed",3:"selfemployed",4:"pension",5:"student",6:"unemployed",7:"other"}[v]||"")(m),p=Pt(d);T.useEffect(()=>{console.log("SourceOfIncomeForm debug:",{incomeSourceKey:h,willRender:!!p[h]})},[m,h,d,p]);const f=B();return T.useEffect(()=>{},[r,o,i,u]),T.useEffect(()=>{m&&a()},[m,a]),c.jsx(c.Fragment,{children:c.jsxs("div",{className:X("modal"),children:[c.jsxs("div",{className:X("container"),children:[c.jsx("div",{className:X("component"),children:c.jsx(It,{})}),p[h]&&p[h].map((v,g)=>c.jsx("div",{className:X("component"),children:v},g)),c.jsx(ne,{})]}),c.jsx("div",{className:X("modal-buttons"),children:c.jsxs("div",{className:X("buttons"),children:[c.jsx(Y,{variant:"modalBase",type:"button",onClick:()=>f(L()),children:e("button_back")}),c.jsx(Y,{type:"button",isDisabled:!r,onClick:t,size:"full",children:e("button_next_save")})]})})]})})},_r=()=>{N();const{getContent:e}=U("common"),n=B(),t=$(s=>s.modalSlice.isOpenSourceOfIncome),r=$(s=>s.modalSlice.currentId),o=$(s=>s.borrowers.sourceOfIncomeModal),i=o[r-1]!==void 0?o[r-1]:void 0,u=()=>{n(L())},l=!o.some(s=>s.id===r)?Pe(o):r,d={mainSourceOfIncome:(i==null?void 0:i.mainSourceOfIncome)||"",monthlyIncome:(i==null?void 0:i.monthlyIncome)||null,startDate:(i==null?void 0:i.startDate)||new Date().getTime(),fieldOfActivity:(i==null?void 0:i.fieldOfActivity)||"",profession:(i==null?void 0:i.profession)||"",companyName:(i==null?void 0:i.companyName)||"",amountIncomeCurrentYear:(i==null?void 0:i.amountIncomeCurrentYear)||null},m=je().shape({mainSourceOfIncome:H().required(E("error_select_answer","Please select an answer")),monthlyIncome:Se().transform((s,h)=>{if(typeof h=="string"){const p=h.replace(/[^0-9]/g,"");return p?parseInt(p,10):null}return s}).when("mainSourceOfIncome",{is:s=>s!=null&&s!==""&&!["unpaid_leave","unemployed"].includes(s),then:s=>s.required(E("error_fill_field","Please fill this field")),otherwise:s=>s.notRequired()}),startDate:H().when("mainSourceOfIncome",{is:s=>s!=null&&s!==""&&!["unpaid_leave","unemployed"].includes(s),then:s=>s.required(E("error_date","Please select a date")),otherwise:s=>s.notRequired()}),fieldOfActivity:H().when("mainSourceOfIncome",{is:s=>s!=null&&s!==""&&!["unpaid_leave","unemployed"].includes(s),then:s=>s.required(E("error_select_field_of_activity","Please select field of activity")),otherwise:s=>s.notRequired()}),profession:H().when("mainSourceOfIncome",{is:s=>s!=null&&s!==""&&!["unpaid_leave","unemployed"].includes(s),then:s=>s.required(E("error_fill_field","Please fill this field")),otherwise:s=>s.notRequired()}),companyName:H().when("mainSourceOfIncome",{is:s=>s!=null&&s!==""&&!["unpaid_leave","unemployed"].includes(s),then:s=>s.required(E("error_fill_field","Please fill this field")),otherwise:s=>s.notRequired()})});return c.jsx(we,{isVisible:t,onCancel:u,title:`${e("source_of_income_modal_title","Source of Income")} ${l+1}`,children:c.jsx(ke,{initialValues:d,validationSchema:m,validateOnMount:!1,validateOnChange:!0,validateOnBlur:!0,onSubmit:s=>{n(rt({id:l,...s})),u()},children:c.jsx(Ie,{children:c.jsx(qn,{})})})})};export{dr as A,ur as B,fr as F,sr as M,pr as O,cr as S,mr as U,lr as a,_r as b,hr as c};
