import{j as e}from"./ui-vendor-19e4e52b.js";import{r as b,f as E,b as te,j as ue,k as ve}from"./react-vendor-9ed0ad78.js";import{a as U,E as V,D as A,T as re,b as H,A as Ie,L as _e}from"./index-3333763f.js";import{P as Ce}from"./ProgressBar-f8ded9a7.js";import{u as j,a as L,k as ne,D as q,m as qe,d as xe,n as r,o as Ae,p as Fe,q as De,r as Ne,t as Be,v as Ee,w as Le,x as ke,y as Te,z as Ye,A as me,B as Re,E as $e,N as Ve}from"./index-6e45afc9.js";import{u as se,F as G,b as J,a as Y,c as _,f as M,g as pe}from"./form-vendor-67b0fc1d.js";import{V as ze}from"./VideoPoster-36364f6b.js";import{S as he,a as We,M as Ke,U as Ue,A as He,F as Ge,B as Je,b as Qe,c as Xe,O as Ze}from"./SourceOfIncomeModal-2f50d7a8.js";import{C as m}from"./Column-a8ef8409.js";import{D as z}from"./DropdownMenu-dc5040a3.js";import{F as Q}from"./FormContainer-e92386a0.js";import{F as ge}from"./FormattedInput-a9b4c8dd.js";import{R as w}from"./Row-389aebbb.js";import{I as eo,c as W}from"./IncreasePayment-cbf5fc51.js";import{F as X}from"./FormCaption-192297af.js";import{Y as oo,N as to,B as no,E as ao,A as ro,T as io,C as so,M as lo,I as co,P as uo}from"./Taxes-97e3a2c4.js";import{u as N}from"./i18n-vendor-e8db3f4c.js";import{D as le}from"./DoubleButtons-a5f374ca.js";import{U as B,A as K}from"./AddButton-23292c66.js";import{R as _o}from"./RowTwo-b38b6984.js";import{B as mo,P as po,A as ho}from"./PartnerPayMortgage-ee8f6548.js";import{C as go,a as fo,H as xo}from"./HowMuchChildrens-9499306b.js";import{F as yo}from"./FamilyStatus-c8680f7f.js";import{I as wo}from"./Info-52842d63.js";import{c as C,M as jo,A as bo,a as Po,O as So,g as Mo,b as ae}from"./componentsByIncomeSource-dc390bb7.js";import"./components-vendor-66cd084e.js";import"./utils-vendor-f2764326.js";import"./state-vendor-8e443ca8.js";import"./MortgageParameters-5c900b37.js";import"./PercentIcon-65a66346.js";import"./useDropdownData-05964376.js";import"./Control-ea4fbaf0.js";import"./Calendar-bb4f5a89.js";import"./ShieldCheckIcon-7bae9c5d.js";const Oo=()=>{const[o,p]=b.useState(51130),[a,c]=b.useState(2654),[i,l]=b.useState([]),{t:n,i18n:f}=N(),{getContent:s}=U("calculate_credit_1"),F=b.useMemo(()=>[{value:"option_1",label:s("calculate_credit_target_option_1",n("calculate_credit_target_option_1"))},{value:"option_2",label:s("calculate_credit_target_option_2",n("calculate_credit_target_option_2"))},{value:"option_3",label:s("calculate_credit_target_option_3",n("calculate_credit_target_option_3"))},{value:"option_4",label:s("calculate_credit_target_option_4",n("calculate_credit_target_option_4"))},{value:"option_5",label:s("calculate_credit_target_option_5",n("calculate_credit_target_option_5"))},{value:"option_6",label:s("calculate_credit_target_option_6",n("calculate_credit_target_option_6"))}],[s,n]),O=b.useMemo(()=>[{value:"option_1",label:s("calculate_mortgage_when_options_1",n("calculate_mortgage_when_options_1"))},{value:"option_2",label:s("calculate_mortgage_when_options_2",n("calculate_mortgage_when_options_2"))},{value:"option_3",label:s("calculate_mortgage_when_options_3",n("calculate_mortgage_when_options_3"))},{value:"option_4",label:s("calculate_mortgage_when_options_4",n("calculate_mortgage_when_options_4"))}],[s,n]),ce=b.useMemo(()=>[{value:"option_1",label:s("calculate_credit_prolong_option_1",n("calculate_credit_prolong_option_1"))},{value:"option_2",label:s("calculate_credit_prolong_option_2",n("calculate_credit_prolong_option_2"))},{value:"option_3",label:s("calculate_credit_prolong_option_3",n("calculate_credit_prolong_option_3"))},{value:"option_4",label:s("calculate_credit_prolong_option_4",n("calculate_credit_prolong_option_4"))},{value:"option_5",label:s("calculate_credit_prolong_option_5",n("calculate_credit_prolong_option_5"))},{value:"option_6",label:s("calculate_credit_prolong_option_6",n("calculate_credit_prolong_option_6"))},{value:"option_7",label:s("calculate_credit_prolong_option_7",n("calculate_credit_prolong_option_7"))}],[s,n]),{setFieldValue:x,values:h,errors:u,touched:P,setFieldTouched:g}=se(),R=j(d=>d.activeField),k=L();b.useEffect(()=>{(async()=>{try{const v=await(await fetch(`/api/get-cities?lang=${f.language}`)).json();if(v.status==="success"){const ee=v.data.map($=>({value:$.value,label:$.name}));l(ee)}else console.error("Failed to fetch cities:",v.message)}catch(y){console.error("Error fetching cities:",y)}})()},[f.language]);const Z=d=>{k(ne("period")),x("period",d)},S=d=>{k(ne("monthlyPayment")),x("monthlyPayment",d)};return b.useEffect(()=>{(async()=>{try{if(R==="period"){const y=await W.calculateCreditPayment(h.loanAmount,h.period);Number.isNaN(y)||x("monthlyPayment",y)}else{const y=await W.calculateLoanPeriod(h.loanAmount,0,h.monthlyPayment);Number.isNaN(y)||x("period",y)}}catch(y){console.error("❌ Error calculating credit values:",y)}})()},[R,x,h.loanAmount,h.monthlyPayment,h.period]),b.useLayoutEffect(()=>{(async()=>{try{const y=await W.calculateCreditPayment(h.loanAmount,1),v=await W.calculateCreditPayment(h.loanAmount,30);Number.isNaN(y)||p(y),y===0&&p(1),Number.isNaN(v)||c(v)}catch(y){console.error("❌ Error calculating payment limits:",y),p(51130),c(2654)}})()},[h.loanAmount]),e.jsx(e.Fragment,{children:e.jsxs(Q,{children:[e.jsx(X,{title:n("sidebar_sub_calculate_credit")}),e.jsxs(w,{children:[e.jsx(m,{children:e.jsx(z,{title:s("calculate_why",n("calculate_why")),data:F,placeholder:s("calculate_credit_target_ph",n("calculate_credit_target_ph")),value:h.purposeOfLoan,onChange:d=>x("purposeOfLoan",d),onBlur:()=>g("purposeOfLoan",!0),error:P.purposeOfLoan&&u.purposeOfLoan})}),e.jsxs(m,{children:[e.jsx(ge,{handleChange:d=>{k(ne("period")),x("loanAmount",d)},name:"loanAmount",title:s("calculate_amount",n("calculate_amount")),value:h.loanAmount,placeholder:"1,000,000",error:u.loanAmount}),u.loanAmount&&e.jsx(V,{error:u.loanAmount})]}),e.jsx(m,{children:e.jsx(z,{title:s("calculate_when",n("calculate_when")),data:O,placeholder:s("calculate_mortgage_when_options_Time",n("calculate_mortgage_when_options_Time")),value:h.whenDoYouNeedMoney,onChange:d=>x("whenDoYouNeedMoney",d),onBlur:()=>g("whenDoYouNeedMoney",!0),error:P.whenDoYouNeedMoney&&u.whenDoYouNeedMoney})})]}),e.jsx(w,{children:e.jsx(m,{children:e.jsx(z,{title:s("calculate_prolong",n("calculate_prolong")),data:ce,placeholder:s("calculate_credit_prolong_ph",n("calculate_credit_prolong_ph")),value:h.loanDeferral,onChange:d=>x("loanDeferral",d),onBlur:()=>g("loanDeferral",!0),error:P.loanDeferral&&u.loanDeferral})})}),h.purposeOfLoan&&h.purposeOfLoan==="option_2"&&e.jsxs(e.Fragment,{children:[e.jsx(A,{}),e.jsxs(w,{children:[e.jsxs(m,{children:[e.jsx(ge,{handleChange:d=>{x("priceOfEstate",d)},name:"PriceOfEstate",title:n("calculate_mortgage_price"),value:h.priceOfEstate,placeholder:"1,000,000",error:u.priceOfEstate}),u.priceOfEstate&&e.jsx(V,{error:u.priceOfEstate})]}),e.jsx(m,{children:e.jsx(z,{title:n("calculate_mortgage_city"),data:i,placeholder:n("city"),value:h.cityWhereYouBuy,onChange:d=>x("cityWhereYouBuy",d),onBlur:()=>g("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:n("search"),nothingFoundText:n("nothing_found"),error:P.cityWhereYouBuy&&u.cityWhereYouBuy})}),e.jsxs(m,{children:[e.jsx(re,{title:n("have_mortgage_title")}),e.jsx(oo,{value:h.haveMortgage,onChange:d=>x("haveMortgage",d),error:P.haveMortgage&&u.haveMortgage})]})]})]}),e.jsx(A,{}),e.jsxs(w,{children:[e.jsxs(m,{children:[e.jsx(he,{disableCurrency:!0,unitsMax:n("calculate_mortgage_period_units_max"),unitsMin:n("calculate_mortgage_period_units_min"),value:h.period,name:"Period",min:1,max:30,error:u.period,title:n("calculate_mortgage_period"),handleChange:Z}),u.period&&e.jsx(V,{error:u.period})]}),e.jsxs(m,{children:[e.jsx(he,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:a,max:o,error:u.monthlyPayment,title:n("calculate_mortgage_initial_payment"),handleChange:S,value:h.monthlyPayment}),e.jsx(eo,{}),u.monthlyPayment&&e.jsx(V,{error:u.monthlyPayment})]}),e.jsx(m,{})]})]})})},vo=()=>Y().shape({purposeOfLoan:_().required(r("error_select_answer","Please select an answer")),loanAmount:M().when("purposeOfLoan",{is:"option_6",then:o=>o.max(1e6,r("error_loan_of_amount_credit_max_1000000","Maximum loan amount is 1,000,000 NIS")),otherwise:o=>o.max(2e5,r("error_loan_of_amount_credit_max_200000","Maximum loan amount is 200,000 NIS"))}).required(r("error_required_to_fill_out","This field is required")),whenDoYouNeedMoney:_().required(r("error_select_answer","Please select an answer")),loanDeferral:_().required(r("error_select_answer","Please select an answer")),priceOfEstate:M().when("purposeOfLoan",{is:"option_2",then:o=>o.required(r("error_required_to_fill_out","This field is required")),otherwise:o=>o.notRequired()}),cityWhereYouBuy:_().when("purposeOfLoan",{is:"option_2",then:o=>o.required(r("error_select_answer","Please select an answer")),otherwise:o=>o.notRequired()}),haveMortgage:_().when("purposeOfLoan",{is:"option_2",then:o=>o.required(r("error_select_answer","Please select an answer")),otherwise:o=>o.notRequired()}),period:M().min(1,r("error_min_credit_period","Minimum period is 1 year")).max(30,r("error_max_credit_period","Maximum period is 30 years")).required(r("error_required_to_fill_out","This field is required")),monthlyPayment:M().required(r("error_required_to_fill_out","This field is required"))}),Io=()=>{const{t:o,i18n:p}=N(),a=L(),c=E(),i=j(f=>f.credit),l=j(f=>f.login.isLogin),n={purposeOfLoan:i.purposeOfLoan||"",loanAmount:i.loanAmount||2e5,whenDoYouNeedMoney:i.whenDoYouNeedMoney||"",loanDeferral:i.loanDeferral||"",priceOfEstate:i.priceOfEstate||null,cityWhereYouBuy:i.cityWhereYouBuy||"",haveMortgage:i.haveMortgage||null,period:i.period||30,monthlyPayment:i.monthlyPayment||5368};return e.jsxs(e.Fragment,{children:[e.jsx(G,{initialValues:n,validationSchema:vo(),validateOnMount:!0,onSubmit:f=>{a(q(f)),l?f.purposeOfLoan==="option_2"&&f.haveMortgage==="yes"?c("/services/refinance-mortgage/1"):c("/services/calculate-credit/2"):(a(qe()),a(xe("phoneVerification")))},children:e.jsxs(J,{children:[e.jsxs(H,{children:[e.jsx(ze,{title:o("sidebar_sub_calculate_credit"),text:o("calculate_mortgage_banner_subtext"),size:"small"}),e.jsx(Oo,{})]}),e.jsx(We,{})]})}),e.jsx(Ke,{}),e.jsx(Ie,{})]})},Co=()=>{const{t:o,i18n:p}=N(),{getContent:a}=U("mortgage_step4"),c=j(l=>l.login.loginData),i=j(l=>l.credit);return e.jsxs(Q,{children:[e.jsx(X,{title:a("calculate_credit_final",o("calculate_credit_final"))}),e.jsx(Ue,{credit:i.loanAmount,nameSurname:c==null?void 0:c.nameSurname,phoneNumber:c==null?void 0:c.phoneNumber}),e.jsx(He,{text:a("calculate_credit_warning",o("calculate_credit_warning"))}),e.jsx(w,{children:e.jsx(Ge,{})}),e.jsx(Je,{})]})},qo={selectedBank:"",selectedOffer:null},Ao=Y().shape({selectedBank:_(),selectedOffer:Y().nullable()}),Fo=()=>{const o=L(),p=E(),a=j(i=>i.login.loginData),c=j(i=>i.login.isLogin);return e.jsx(G,{initialValues:qo,validationSchema:Ao,validateOnMount:!0,onSubmit:i=>{o(q(i)),!c||!(a!=null&&a.phoneNumber)?(o(Ae()),o(xe("signUp"))):p("/services/application-submitted")},children:e.jsxs(J,{children:[e.jsx(H,{children:e.jsx(Co,{})}),e.jsx(le,{})]})})},Do=()=>{const{t:o,i18n:p}=N(),{getContent:a}=U("calculate_credit_2"),{values:c}=se(),i=j(l=>l.login.loginData);return e.jsxs(Q,{children:[e.jsx(X,{title:a("calculate_credit_step2_title",o("calculate_mortgage_step2_title"))}),e.jsxs(_o,{children:[e.jsx(wo,{}),e.jsx(B,{name:i==null?void 0:i.nameSurname,phone:i==null?void 0:i.phoneNumber})]}),e.jsxs(w,{children:[e.jsx(to,{}),e.jsx(no,{}),e.jsx(ao,{})]}),e.jsxs(w,{children:[e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(ro,{}),c.additionalCitizenships==="yes"&&e.jsx(go,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(io,{}),c.taxes==="yes"&&e.jsx(fo,{})]}),e.jsxs(m,{style:{gap:"2rem"},children:[e.jsx(so,{}),c.childrens==="yes"&&e.jsx(xo,{})]})]}),e.jsx(A,{}),e.jsxs(w,{children:[e.jsx(lo,{}),e.jsx(co,{}),e.jsx(uo,{})]}),e.jsx(A,{}),e.jsxs(w,{children:[e.jsx(mo,{}),e.jsx(m,{}),e.jsx(m,{})]}),e.jsx(A,{}),e.jsxs(w,{children:[e.jsx(yo,{}),e.jsx(m,{children:c.familyStatus==="option_2"&&e.jsx(po,{})}),e.jsx(m,{children:c.partnerPayMortgage==="yes"&&c.familyStatus==="option_2"&&e.jsx(ho,{})})]})]})},No=Y().shape({nameSurname:_().required(r("error_name_surname","Please enter your name and surname")),birthday:_().required(r("error_date","Please enter a valid date")),education:_().required(r("error_select_answer","Please select an answer")),additionalCitizenships:_().required(r("error_select_answer","Please select an answer")),citizenshipsDropdown:pe().when("additionalCitizenships",{is:"yes",then:o=>o.min(1,r("error_select_answer","Please select an answer")),otherwise:o=>o.min(0)}),taxes:_().required(r("error_select_answer","Please select an answer")),countriesPayTaxes:pe().when("taxes",{is:"yes",then:o=>o.min(1,r("error_select_answer","Please select an answer")),otherwise:o=>o.min(0)}),childrens:_().required(r("error_select_answer","Please select an answer")),howMuchChildrens:M().required(r("error_fill_field","Please fill this field")),medicalInsurance:_().required(r("error_select_answer","Please select an answer")),isForeigner:_().required(r("error_select_answer","Please select an answer")),publicPerson:_().required(r("error_select_answer","Please select an answer")),borrowers:M().min(1,r("error_quantity_borrowers","At least one borrower is required")).required(r("error_quantity_borrowers","Number of borrowers is required")),familyStatus:_().required(r("error_select_answer","Please select an answer")),partnerPayMortgage:_().when("familyStatus",{is:"Married",then:o=>o.required(r("error_select_answer","Please select an answer")),otherwise:o=>o.notRequired()})}),Bo=()=>{const o=L(),p=E(),a=j(l=>l.credit),i={nameSurname:j(l=>l.login.loginData).nameSurname||a.nameSurname||"",birthday:a.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:a.education||"",additionalCitizenships:a.additionalCitizenships||null,citizenshipsDropdown:a.citizenshipsDropdown||[],taxes:a.taxes||null,countriesPayTaxes:a.countriesPayTaxes||[],childrens:a.childrens||null,howMuchChildrens:a.howMuchChildrens||1,medicalInsurance:a.medicalInsurance||null,isForeigner:a.isForeigner||null,publicPerson:a.publicPerson||null,borrowers:a.borrowers||null,familyStatus:a.familyStatus||"",partnerPayMortgage:a.partnerPayMortgage||null,addPartner:a.addPartner||""};return e.jsx(G,{initialValues:i,validationSchema:No,validateOnMount:!0,onSubmit:l=>{o(q(l)),p("/services/calculate-credit/3")},children:e.jsxs(J,{children:[e.jsx(H,{children:e.jsx(Do,{})}),e.jsx(le,{})]})})},fe=o=>{if(!o)return!1;const p=o.toLowerCase();return p==="option_1"||p==="1"||p.includes("no_additional")||p.includes("no additional")||p.includes("none")},Eo=()=>{var de;const{t:o,i18n:p}=N(),{getContent:a}=U("credit_step3"),c=E(),{values:i,errors:l,isValid:n,touched:f}=se(),{mainSourceOfIncome:s,additionalIncome:F,obligation:O}=i;te.useEffect(()=>{},[i,l,n,f,s,F,O]);const x=(t=>t&&!t.match(/^\d+$/)?t:{1:"employee",2:"selfemployed",3:"selfemployed",4:"pension",5:"student",6:"unemployed",7:"other"}[t]||"")(s),u=(t=>!t||t==="5"||t==="no_obligations"?"":t&&!t.match(/^\d+$/)?t:{1:"bank_loan",2:"consumer_credit",3:"credit_card",4:"other"}[t]||"")(O),P=Mo("credit_step3");console.log("ThirdStepForm debug:",{obligationMapping:{originalValue:O,mappedKey:u,hasComponents:!!C[u],componentsCount:((de=C[u])==null?void 0:de.length)||0,availableKeys:Object.keys(C)},shouldShowIncomeComponents:!!(s&&P[x]),shouldShowObligationComponents:!!(O&&C[u])});const g=L(),R=j(t=>t.borrowers.sourceOfIncomeModal),k=j(t=>t.borrowers.additionalIncomeModal),Z=j(t=>t.borrowers.obligationModal),S=j(t=>t.otherBorrowers.otherBorrowers),d=j(t=>t.login.loginData),y=()=>{g(q(i)),g(Fe())},v=()=>{g(q(i)),g(De())},ee=()=>{g(q(i)),g(Ne())},$=t=>{g(Be({id:t}))},ye=t=>{g(Ee({id:t}))},we=t=>{g(Le({id:t}))},je=t=>{g(ke(t))},be=t=>{g(Te(t))},Pe=t=>{g(Ye(t))},Se=t=>{g(me(t));const D=!S.some(T=>T.id===t)?ae(S):t;c({pathname:"/services/other-borrowers/1/",search:ue({pageId:String(D)}).toString()})},Me=()=>{g(me(ae(S))),g(q(i)),c({pathname:"/services/other-borrowers/1/",search:ue({pageId:ae(S).toString()}).toString()})},Oe=t=>{g(Re(t))};return e.jsxs(Q,{children:[e.jsx(X,{title:a("calculate_credit_step3_title","פרטי הכנסה ופיננסיים")}),e.jsx(B,{name:d==null?void 0:d.nameSurname,phone:d==null?void 0:d.phoneNumber}),e.jsxs(w,{children:[e.jsx(jo,{screenLocation:"credit_step3"}),(()=>{var I,D;console.log("Income source components debug:",{componentCountForMapped:((I=P[x])==null?void 0:I.length)||0,componentCountForRaw:((D=P[s])==null?void 0:D.length)||0,mappingFunction:"getIncomeSourceKey working?",isNumeric:s==null?void 0:s.match(/^\d+$/),shouldShowComponents:!!(x&&P[x])});const t=P[x];return t==null?void 0:t.map((T,oe)=>e.jsx(te.Fragment,{children:T},oe))})(),e.jsx(m,{})]}),e.jsx(w,{children:s&&e.jsxs(m,{children:[R.map(t=>e.jsx(B,{onEdit:()=>je(t.id),onDelete:()=>$(t.id),enableEdit:!0,name:`${a("calculate_credit_source_of_income",o("main_income_source"))}${t.id+1}`},t.id)),e.jsx(K,{onClick:y,color:"#FBE54D",value:a("calculate_credit_add_place_to_work",o("add_place_to_work")),variant:"none"})]})}),e.jsx(A,{}),e.jsxs(w,{children:[e.jsx(bo,{screenLocation:"credit_step3"}),F&&!fe(F)&&e.jsx(Po,{}),e.jsx(m,{})]}),F&&!fe(F)&&e.jsx(w,{children:e.jsxs(m,{children:[k.map(t=>e.jsx(B,{onEdit:()=>be(t.id),onDelete:()=>ye(t.id),enableEdit:!0,name:`${a("calculate_credit_additional_income",o("additional_source_of_income"))}${t.id+1}`},t.id)),e.jsx(K,{onClick:v,color:"#FBE54D",value:a("calculate_credit_add_additional_income",o("add_additional_source_of_income")),variant:"none"})]})}),e.jsx(A,{}),e.jsxs(w,{children:[e.jsx(So,{screenLocation:"credit_step3"}),(()=>{var I,D;console.log("Obligation source components debug:",{componentCountForMapped:((I=C[u])==null?void 0:I.length)||0,componentCountForRaw:((D=C[O])==null?void 0:D.length)||0,shouldShowObligationComponents:!!(u&&C[u])});const t=C[u];return t==null?void 0:t.map((T,oe)=>e.jsx(te.Fragment,{children:T},oe))})(),e.jsx(m,{})]}),O&&u&&e.jsx(w,{children:e.jsxs(m,{children:[Z.map(t=>e.jsx(B,{onEdit:()=>Pe(t.id),onDelete:()=>we(t.id),enableEdit:!0,name:`${a("calculate_credit_obligation",o("obligation"))}${t.id+1}`},t.id)),e.jsx(K,{onClick:ee,color:"#FBE54D",value:a("calculate_credit_add_obligation",o("add_obligation")),variant:"none"})]})}),e.jsx(A,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[S&&e.jsx(re,{title:a("calculate_credit_borrower",o("borrower"))}),e.jsxs(w,{style:{columnGap:"2rem"},children:[S.map(t=>e.jsx(m,{children:e.jsx(B,{onEdit:()=>Se(t.id),onDelete:()=>Oe(t.id),enableEdit:!0,name:t.nameSurname},t.id)},t.id)),!S&&e.jsx(re,{title:a("calculate_credit_borrower",o("borrower"))}),e.jsx(m,{children:e.jsx(K,{value:a("calculate_credit_add_borrower",o("add_borrower")),onClick:Me,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(m,{})]})]})]})},ie=()=>Y().shape({mainSourceOfIncome:_().required(r("error_select_answer","Please select an answer")).test("not-empty",r("error_select_answer","Please select an answer"),o=>o!=null&&o!==""),monthlyIncome:M().when("mainSourceOfIncome",{is:o=>!["5","6"].includes(o),then:o=>o.required(r("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),startDate:_().when("mainSourceOfIncome",{is:o=>!["5","6"].includes(o),then:o=>o.required(r("error_date","Please enter a valid date")),otherwise:o=>o.notRequired()}),fieldOfActivity:_().when("mainSourceOfIncome",{is:o=>o!=null&&o!==""&&!["5","6"].includes(o),then:o=>o.required(r("error_select_field_of_activity","Please select field of activity")),otherwise:o=>o.notRequired()}),profession:_().when("mainSourceOfIncome",{is:o=>!["5","6"].includes(o),then:o=>o.required(r("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),companyName:_().when("mainSourceOfIncome",{is:o=>!["5","6"].includes(o),then:o=>o.required(r("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),additionalIncome:_().required(r("error_select_one_of_the_options","Please select one of the options")).test("not-empty",r("error_select_one_of_the_options","Please select one of the options"),o=>o!=null&&o!==""),additionalIncomeAmount:M().when("additionalIncome",{is:o=>o!=null&&o!==""&&o!=="no_additional_income",then:o=>o.required(r("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),obligation:_().required(r("error_select_one_of_the_options","Please select one of the options")),bank:_().when("obligation",{is:o=>o!=null&&o!==""&&o!=="no_obligations",then:o=>o.required(r("error_select_bank","Please select a bank")),otherwise:o=>o.notRequired()}),monthlyPaymentForAnotherBank:M().when("obligation",{is:o=>o!=null&&o!==""&&o!=="no_obligations",then:o=>o.required(r("error_fill_field","Please fill this field")),otherwise:o=>o.notRequired()}),endDate:_().when("obligation",{is:o=>o!=null&&o!==""&&o!=="no_obligations",then:o=>o.required(r("error_date","Please enter a valid date")),otherwise:o=>o.notRequired()})});ie();const Lo=()=>{const o=L(),p=E(),{i18n:a}=N(),[c,i]=b.useState(()=>ie()),l=j(f=>f.credit);b.useEffect(()=>{(async()=>{await $e();const s=ie();i(s)})()},[a.language]);const n={mainSourceOfIncome:l.mainSourceOfIncome||"",monthlyIncome:l.monthlyIncome||null,startDate:l.startDate||new Date().toISOString().split("T")[0],fieldOfActivity:l.fieldOfActivity||"",profession:l.profession||"",companyName:l.companyName||"",additionalIncome:l.additionalIncome||"no_additional_income",additionalIncomeAmount:l.additionalIncomeAmount||null,obligation:l.obligation||"no_obligations",bank:l.bank||"",monthlyPaymentForAnotherBank:l.monthlyPaymentForAnotherBank||null,endDate:l.endDate||new Date().toISOString().split("T")[0],amountIncomeCurrentYear:(l==null?void 0:l.amountIncomeCurrentYear)||null,noIncome:l.noIncome||new Date().toISOString().split("T")[0]};return e.jsxs(e.Fragment,{children:[e.jsx(G,{initialValues:n,validationSchema:c,validateOnMount:!0,onSubmit:f=>{o(q(f)),p("/services/calculate-credit/4")},children:e.jsxs(J,{children:[e.jsx(H,{children:e.jsx(Eo,{})}),e.jsx(le,{})]})}),e.jsx(Qe,{}),e.jsx(Xe,{}),e.jsx(Ze,{})]})},xt=()=>{const{stepNumber:o}=ve(),{t:p,i18n:a}=N(),c=E(),i=j(f=>f.login.isLogin);if(b.useEffect(()=>{!i&&o!=="1"&&c("/services/calculate-credit/1")},[i,o,c]),!i&&o!=="1")return e.jsx(_e,{});const l=[p("mobile_step_1"),p("mobile_step_2"),p("mobile_step_3"),p("mobile_step_4")];let n;switch(o){case"1":n=e.jsx(Io,{});break;case"2":n=e.jsx(Bo,{});break;case"3":n=e.jsx(Lo,{});break;case"4":n=e.jsx(Fo,{});break;default:n=e.jsx(Ve,{type:"NOT_FOUND"});break}return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{progress:o,data:l}),e.jsx(b.Suspense,{fallback:e.jsx(_e,{}),children:n})]})};export{xt as default};
