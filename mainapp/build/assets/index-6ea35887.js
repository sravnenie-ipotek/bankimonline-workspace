import{b as e,j as o,X as n,l as r,g as i,h as a,F as s,c as l,f as t,T as d,R as c,G as u,H as m,r as h}from"./index-d69ab70d.js";import{u as _,k as x,E as g,D as j,d as v,f as p,h as w,e as b,c as f,b as I,F as y,g as B,a as S,z as q,B as F,M as O,A,G as D,H as k,J as C,K as M,N,L as Y}from"./index-c89ce6ee.js";import{P as z}from"./ProgressBar-397d0063.js";import{F as P,u as $,a as T,b as V,c as E,e as R,f as H,g as G}from"./otherBorrowersSlice-ca4a7504.js";import{g as L,b as U,d as J,O as K,e as X,a as Q,c as W,U as Z,A as ee}from"./componentsByIncomeSource-b5bab525.js";import{C as oe,F as ne,a as re,R as ie,c as ae}from"./StringInput-0f4f0b36.js";import{R as se,I as le,N as te,B as de,E as ce,A as ue,T as me,b as he,C as _e,a as xe,H as ge,M as je,c as ve,P as pe}from"./Taxes-3755a9d7.js";import"./ShieldCheckIcon-97c4fe2d.js";const we=()=>{const{t:n,i18n:r}=e();r.language=r.language.split("-")[0];const{values:i,setFieldValue:a,errors:s,touched:l,setFieldTouched:t}=_();return o.jsxs(oe,{children:[o.jsx(x,{title:n("who_are_you_for_borrowers"),placeholder:n("who_are_you_for_borrowers_ph"),name:"whoAreYouForBorrowers",onChange:e=>a("whoAreYouForBorrowers",e),onBlur:()=>t("whoAreYouForBorrowers"),error:l.whoAreYouForBorrowers&&s.whoAreYouForBorrowers,value:i.whoAreYouForBorrowers}),l.whoAreYouForBorrowers&&s.whoAreYouForBorrowers&&o.jsx(g,{error:s.whoAreYouForBorrowers})]})},be=()=>{const{t:r,i18n:i}=e();i.language=i.language.split("-")[0];const[a]=n(),s=a.get("pageId"),{values:l}=_();return console.log(s),o.jsxs(ne,{children:[o.jsx(re,{title:r("personal_data_borrowers_title")+s}),o.jsx(se,{children:o.jsx(le,{})}),o.jsxs(ie,{children:[o.jsx(te,{}),o.jsx(de,{}),o.jsx(ce,{})]}),o.jsxs(ie,{children:[o.jsx(ue,{}),o.jsx(me,{}),o.jsx(he,{}),"yes"===l.additionalCitizenships&&o.jsx(_e,{}),"yes"===l.taxes&&o.jsx(xe,{}),"yes"===l.childrens&&o.jsx(ge,{})]}),o.jsx(j,{}),o.jsxs(ie,{children:[o.jsx(je,{}),o.jsx(ve,{}),o.jsx(pe,{})]}),o.jsx(j,{}),o.jsxs(ie,{children:[o.jsx(we,{}),o.jsx(P,{}),o.jsx(oe,{})]})]})},fe=v().shape({nameSurname:p().required(r.t("error_name_surname")),birthday:p().required(r.t("error_date")),education:p().required(r.t("error_select_answer")),additionalCitizenships:p().required(r.t("error_select_answer")),citizenshipsDropdown:w().when("additionalCitizenships",{is:"yes",then:e=>e.min(1,r.t("error_select_answer")),otherwise:e=>e.min(0)}),taxes:p().required(r.t("error_select_answer")),countriesPayTaxes:w().when("taxes",{is:"yes",then:e=>e.min(1,r.t("error_select_answer")),otherwise:e=>e.min(0)}),childrens:p().required(r.t("error_select_answer")),howMuchChildrens:b().required(r.t("error_fill_field")),medicalInsurance:p().required(r.t("error_select_answer")),isForeigner:p().required(r.t("error_select_answer")),publicPerson:p().required(r.t("error_select_answer")),whoAreYouForBorrowers:p().required(r.t("error_fill_field")),familyStatus:p().required(r.t("error_select_answer"))}),Ie=()=>{const e=f(),n=i(),r=a(),l=I(e=>e.otherBorrowers.otherBorrowersPageId),t=I(e=>e.otherBorrowers.otherBorrowers),d=t.find(e=>e.id===l),c=!t.some(e=>e.id===l)?L(t):l;n.search.includes(`?pageId=${c}`)||r({pathname:"/services/other-borrowers/1/",search:s({pageId:String(c)}).toString()});const u={nameSurname:(null==d?void 0:d.nameSurname)||"",birthday:(null==d?void 0:d.birthday)||new Date((new Date).setFullYear((new Date).getFullYear()-18)).getTime(),education:(null==d?void 0:d.education)||"",additionalCitizenships:(null==d?void 0:d.additionalCitizenships)||null,citizenshipsDropdown:(null==d?void 0:d.citizenshipsDropdown)||[],taxes:(null==d?void 0:d.taxes)||null,countriesPayTaxes:(null==d?void 0:d.countriesPayTaxes)||[],childrens:(null==d?void 0:d.childrens)||null,howMuchChildrens:(null==d?void 0:d.howMuchChildrens)||1,medicalInsurance:(null==d?void 0:d.medicalInsurance)||null,isForeigner:(null==d?void 0:d.isForeigner)||null,publicPerson:(null==d?void 0:d.publicPerson)||null,whoAreYouForBorrowers:(null==d?void 0:d.whoAreYouForBorrowers)||"",familyStatus:(null==d?void 0:d.familyStatus)||"",sourceOfIncomeModal:(null==d?void 0:d.sourceOfIncomeModal)||[],additionalIncomeModal:(null==d?void 0:d.additionalIncomeModal)||[],obligationModal:(null==d?void 0:d.obligationModal)||[]};return o.jsx(y,{initialValues:u,validationSchema:fe,validateOnMount:!0,onSubmit:o=>{e($({id:c,newFields:o})),r({pathname:"/services/other-borrowers/2/",search:s({pageId:String(c)}).toString()})},children:o.jsxs(B,{children:[o.jsx(S,{children:o.jsx(be,{})}),o.jsx(ae,{})]})})},ye={modal:"_modal_lzcpe_1","modal-item":"_modal-item_lzcpe_18","modal-buttons":"_modal-buttons_lzcpe_31",buttons:"_buttons_lzcpe_49"},Be=l.bind(ye),Se=()=>{const{t:n,i18n:r}=e();r.language=r.language.split("-")[0];const{handleSubmit:i,isValid:a,values:s}=_(),l=t();return o.jsx(o.Fragment,{children:o.jsxs("div",{className:Be("modal"),children:[o.jsxs("div",{className:Be("modal-item"),children:[o.jsx(U,{}),s.additionalIncome&&o.jsx(J,{})]}),o.jsx("div",{className:Be("modal-buttons"),children:o.jsxs("div",{className:Be("buttons"),children:[o.jsx(q,{title:n("button_back"),handleClick:()=>l(d())}),o.jsx(F,{type:"submit",isDisabled:!a,onClick:i,size:"full",children:n("button_next_save")})]})})]})})},qe=()=>{const{t:i,i18n:a}=e();a.language=a.language.split("-")[0];const s=f(),[l]=n(),t=l.get("pageId"),c=parseInt(t),u=I(e=>e.modalSlice.isOpenAdditionalIncome),m=I(e=>e.modalSlice.currentId),h=I(e=>{var o;return(null==(o=e.otherBorrowers.otherBorrowers[c-1])?void 0:o.additionalIncomeModal)||[]}),_=h.find(e=>e.id===m),x=()=>{s(d())},g=!h.some(e=>e.id===m)?L(h):m,j={additionalIncome:(null==_?void 0:_.additionalIncome)||"",additionalIncomeAmount:(null==_?void 0:_.additionalIncomeAmount)||null},w=v().shape({additionalIncome:p().required(i("error_select_one_of_the_options")),additionalIncomeAmount:b().when("additionalIncome",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(r.t("error_fill_field")),otherwise:e=>e.notRequired()})});return o.jsx(O,{isVisible:u,onCancel:x,title:`${i("additional_source_of_income")} ${g+1}`,children:o.jsx(y,{initialValues:j,validationSchema:w,validateOnMount:!0,onSubmit:e=>{s(T({id:g,pageId:c,...e})),x()},children:o.jsx(B,{children:o.jsx(Se,{})})})})},Fe={modal:"_modal_r2hy9_1","modal-item":"_modal-item_r2hy9_18","modal-buttons":"_modal-buttons_r2hy9_23",container:"_container_r2hy9_41",component:"_component_r2hy9_47",buttons:"_buttons_r2hy9_59"},Oe=l.bind(Fe),Ae=()=>{const{t:n,i18n:r}=e();r.language=r.language.split("-")[0];const{handleSubmit:i,isValid:a,values:s}=_(),l=t(),{obligation:c}=s;return o.jsx(o.Fragment,{children:o.jsxs("div",{className:Oe("modal"),children:[o.jsxs("div",{className:Oe("container"),children:[o.jsx(K,{}),X[c]&&X[c].map((e,n)=>o.jsx("div",{className:Oe("component"),children:e},n)),o.jsx(oe,{})]}),o.jsx("div",{className:Oe("modal-buttons"),children:o.jsxs("div",{className:Oe("buttons"),children:[o.jsx(q,{title:n("button_back"),handleClick:()=>l(d())}),o.jsx(F,{type:"submit",isDisabled:!a,onClick:i,size:"full",children:n("button_next_save")})]})})]})})},De=()=>{const{t:r,i18n:i}=e();i.language=i.language.split("-")[0];const a=f(),[s]=n(),l=s.get("pageId"),t=parseInt(l),c=I(e=>e.modalSlice.isOpenObligation),u=I(e=>e.modalSlice.currentId),m=I(e=>{var o;return(null==(o=e.otherBorrowers.otherBorrowers[t-1])?void 0:o.obligationModal)||[]}),h=m.find(e=>e.id===u),_=()=>{a(d())},x=!m.some(e=>e.id===u)?L(m):u,g={obligation:(null==h?void 0:h.obligation)||"",bank:(null==h?void 0:h.bank)||"",monthlyPaymentForAnotherBank:(null==h?void 0:h.monthlyPaymentForAnotherBank)||null,endDate:(null==h?void 0:h.endDate)||(new Date).getTime(),noIncome:(null==h?void 0:h.noIncome)||(new Date).getTime()},j=v().shape({obligation:p().required(r("error_select_one_of_the_options")),bank:p().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(r("error_select_bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:b().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(r("error_fill_field")),otherwise:e=>e.notRequired()}),endDate:p().required(r("error_date"))});return o.jsx(O,{isVisible:c,onCancel:_,title:`${r("obligation")} ${x+1}`,children:o.jsx(y,{initialValues:g,validationSchema:j,validateOnMount:!0,onSubmit:e=>{a(V({id:x,pageId:t,...e})),_()},children:o.jsx(B,{children:o.jsx(Ae,{})})})})},ke={modal:"_modal_1gdud_1","modal-item":"_modal-item_1gdud_18","modal-buttons":"_modal-buttons_1gdud_23",container:"_container_1gdud_41",component:"_component_1gdud_47",buttons:"_buttons_1gdud_59"},Ce=l.bind(ke),Me=()=>{const{t:n,i18n:r}=e();r.language=r.language.split("-")[0];const{handleSubmit:i,isValid:a,values:s}=_(),{mainSourceOfIncome:l}=s,c=t();return o.jsx(o.Fragment,{children:o.jsxs("div",{className:Ce("modal"),children:[o.jsxs("div",{className:Ce("container"),children:[o.jsx("div",{className:Ce("component"),children:o.jsx(Q,{})}),W[l]&&W[l].map((e,n)=>o.jsx("div",{className:Ce("component"),children:e},n)),o.jsx(oe,{})]}),o.jsx("div",{className:Ce("modal-buttons"),children:o.jsxs("div",{className:Ce("buttons"),children:[o.jsx(q,{title:n("button_back"),handleClick:()=>c(d())}),o.jsx(F,{type:"submit",isDisabled:!a,onClick:i,size:"full",children:n("button_next_save")})]})})]})})},Ne=()=>{const{t:r,i18n:i}=e();i.language=i.language.split("-")[0];const a=f(),[s]=n(),l=s.get("pageId"),t=parseInt(l),c=I(e=>e.modalSlice.isOpenSourceOfIncome),u=I(e=>e.modalSlice.currentId),m=I(e=>{var o;return(null==(o=e.otherBorrowers.otherBorrowers[t-1])?void 0:o.sourceOfIncomeModal)||[]}),h=m.find(e=>e.id===u),_=()=>{a(d())},x=!m.some(e=>e.id===u)?L(m):u,g={mainSourceOfIncome:(null==h?void 0:h.mainSourceOfIncome)||"",monthlyIncome:(null==h?void 0:h.monthlyIncome)||null,startDate:(null==h?void 0:h.startDate)||(new Date).getTime(),fieldOfActivity:(null==h?void 0:h.fieldOfActivity)||"",profession:(null==h?void 0:h.profession)||"",companyName:(null==h?void 0:h.companyName)||"",amountIncomeCurrentYear:(null==h?void 0:h.amountIncomeCurrentYear)||null},j=v().shape({mainSourceOfIncome:p().required(r("error_select_answer")),monthlyIncome:b().required(r("error_fill_field")),startDate:p().required(r("error_date")),fieldOfActivity:v().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e,then:e=>e.required(r("error_select_field_of_activity")),otherwise:e=>e.notRequired()}),profession:p().required(r("error_fill_field")),companyName:p().required(r("error_fill_field"))});return o.jsx(O,{isVisible:c,onCancel:_,title:`${r("source_of_income")} ${x+1}`,children:o.jsx(y,{initialValues:g,validationSchema:j,validateOnMount:!0,onSubmit:e=>{a(E({id:x,pageId:t,...e})),_()},children:o.jsx(B,{children:o.jsx(Me,{})})})})},Ye=()=>{const{t:r,i18n:i}=e();i.language=i.language.split("-")[0];const[a]=n(),s=a.get("pageId"),l=parseInt(s),{values:t}=_(),{mainSourceOfIncome:d,additionalIncome:u,obligation:m}=t,h=f(),x=I(e=>{var o;return(null==(o=e.otherBorrowers.otherBorrowers[l-1])?void 0:o.sourceOfIncomeModal)||[]}),g=I(e=>{var o;return(null==(o=e.otherBorrowers.otherBorrowers[l-1])?void 0:o.additionalIncomeModal)||[]}),v=I(e=>{var o;return(null==(o=e.otherBorrowers.otherBorrowers[l-1])?void 0:o.obligationModal)||[]});return o.jsxs(ne,{children:[o.jsx(re,{title:`${r("borrowers_income")}#${l}`}),o.jsxs(ie,{children:[o.jsx(Q,{}),W[d]&&W[d].map((e,n)=>o.jsx(c.Fragment,{children:e},n)),o.jsx(oe,{})]}),o.jsx(ie,{children:d&&o.jsxs(oe,{children:[x&&x.map(e=>o.jsx(Z,{onEdit:()=>{return o=e.id,void h(C(o));var o},onDelete:()=>{return o=e.id,void h(R({id:o,pageId:l}));var o},enableEdit:!0,name:`${r("source_of_income")}${e.id+1}`},e.id)),o.jsx(ee,{onClick:()=>{h(A())},color:"#FBE54D",value:r("add_place_to_work"),variant:"none"})]})}),o.jsx(j,{}),o.jsxs(ie,{children:[o.jsx(U,{}),u&&"option_1"!==u&&o.jsx(J,{}),o.jsx(oe,{})]}),u&&"option_1"!==u&&o.jsx(ie,{children:o.jsxs(oe,{children:[g&&g.map(e=>o.jsx(Z,{onEdit:()=>{return o=e.id,void h(M(o));var o},onDelete:()=>{return o=e.id,void h(H({id:o,pageId:l}));var o},enableEdit:!0,name:`${r("additional_source_of_income")}${e.id+1}`},e.id)),o.jsx(ee,{onClick:()=>{h(D())},color:"#FBE54D",value:r("add_additional_source_of_income"),variant:"none"})]})}),o.jsx(j,{}),o.jsxs(ie,{children:[o.jsx(K,{}),X[m]&&X[m].map((e,n)=>o.jsx(c.Fragment,{children:e},n)),o.jsx(oe,{})]}),m&&"option_1"!==m&&o.jsx(ie,{children:o.jsxs(oe,{children:[v&&v.map(e=>o.jsx(Z,{onEdit:()=>{return o=e.id,void h(N(o));var o},onDelete:()=>{return o=e.id,void h(G({id:o,pageId:l}));var o},enableEdit:!0,name:`${r("obligation")}${e.id+1}`},e.id)),o.jsx(ee,{onClick:()=>{h(k())},color:"#FBE54D",value:r("add_obligation"),variant:"none"})]})})]})},ze=v().shape({mainSourceOfIncome:p().required(r.t("error_select_answer")),monthlyIncome:b().required(r.t("error_fill_field")),startDate:p().required(r.t("error_date")),fieldOfActivity:p().when("mainSourceOfIncome",{is:e=>null!=e&&""!==e,then:e=>e.required(r.t("error_select_field_of_activity")),otherwise:e=>e.notRequired()}),profession:p().required(r.t("error_fill_field")),companyName:p().required(r.t("error_fill_field")),additionalIncome:p().required(r.t("error_select_one_of_the_options")),additionalIncomeAmount:b().when("additionalIncome",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(r.t("error_fill_field")),otherwise:e=>e.notRequired()}),obligation:p().required(r.t("error_select_one_of_the_options")),bank:p().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(r.t("error_select_bank")),otherwise:e=>e.notRequired()}),monthlyPaymentForAnotherBank:b().when("obligation",{is:e=>null!=e&&""!==e&&"no"===e,then:e=>e.required(r.t("error_fill_field")),otherwise:e=>e.notRequired()}),endDate:p().required(r.t("error_date"))}),Pe=()=>{const e=f(),n=a(),r=i(),l=I(e=>e.otherBorrowers.otherBorrowersPageId),t=I(e=>e.otherBorrowers.otherBorrowers),d=t.find(e=>e.id===l),c=!t.some(e=>e.id===l)?L(t):l;r.search.includes(`?pageId=${c}`)||n({pathname:"/services/other-borrowers/2/",search:s({pageId:String(c)}).toString()});const u={mainSourceOfIncome:(null==d?void 0:d.mainSourceOfIncome)||"",monthlyIncome:(null==d?void 0:d.monthlyIncome)||null,startDate:(null==d?void 0:d.startDate)||(new Date).getTime(),fieldOfActivity:(null==d?void 0:d.fieldOfActivity)||"",profession:(null==d?void 0:d.profession)||"",companyName:(null==d?void 0:d.companyName)||"",additionalIncome:(null==d?void 0:d.additionalIncome)||"",additionalIncomeAmount:(null==d?void 0:d.additionalIncomeAmount)||null,obligation:(null==d?void 0:d.obligation)||"",bank:(null==d?void 0:d.bank)||"",monthlyPaymentForAnotherBank:(null==d?void 0:d.monthlyPaymentForAnotherBank)||null,endDate:(null==d?void 0:d.endDate)||(new Date).getTime(),amountIncomeCurrentYear:(null==d?void 0:d.amountIncomeCurrentYear)||null,noIncome:(null==d?void 0:d.noIncome)||(new Date).getTime(),sourceOfIncomeModal:(null==d?void 0:d.sourceOfIncomeModal)||[],additionalIncomeModal:(null==d?void 0:d.additionalIncomeModal)||[],obligationModal:(null==d?void 0:d.obligationModal)||[]};return o.jsxs(o.Fragment,{children:[o.jsx(y,{initialValues:u,validationSchema:ze,validateOnMount:!0,onSubmit:o=>{e($({id:c,newFields:o})),n(-2)},children:o.jsxs(B,{children:[o.jsx(S,{children:o.jsx(Ye,{})}),o.jsx(ae,{})]})}),o.jsx(Ne,{}),o.jsx(qe,{}),o.jsx(De,{})]})},$e=()=>{const{stepNumber:n}=u(),{t:r,i18n:i}=e();i.language=i.language.split("-")[0];const s=a();if(!I(e=>e.login.isLogin))return void s("/");const l=[r("calculate_mortgage_anketa"),r("calculate_mortgage_income")];let t;switch(n){case"1":t=o.jsx(Ie,{});break;case"2":t=o.jsx(Pe,{});break;default:t=o.jsx(m,{type:"NOT_FOUND"})}return o.jsxs(o.Fragment,{children:[o.jsx(z,{progress:n,data:l}),o.jsx(h.Suspense,{fallback:o.jsx(Y,{}),children:t})]})};export{$e as OtherBorrowers};
