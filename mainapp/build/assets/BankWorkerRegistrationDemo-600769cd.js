import{j as e}from"./ui-vendor-99260b86.js";import{r as s}from"./react-vendor-21ec1e1c.js";import{a,c as n,f as i,h as r,F as l,b as t,j as c}from"./form-vendor-6d56d196.js";import{s as d}from"./BankWorkerRegistration.module-bf3f0170.js";import{u as o}from"./i18n-vendor-18addd5f.js";import"./utils-vendor-8f040048.js";import"./state-vendor-069efcec.js";const h=({name:s,errors:a,touched:n})=>e.jsx("div",{className:d.errorMessage,children:n[s]&&a[s]?a[s]:""}),m=()=>{const{t:m,i18n:x}=o();s.useState(1);const[u,j]=s.useState(!1),[k,_]=s.useState(!1),[v,p]=s.useState(""),[N,b]=s.useState(""),[w,g]=s.useState([]),[f,C]=s.useState([]),[y,L]=s.useState([]),[S,I]=s.useState(!0),[T,q]=s.useState(!1),[B,F]=s.useState(!0),[M,W]=s.useState(null),[$,E]=s.useState(null),[R,U]=s.useState(null),[V,z]=s.useState(!1),[A,H]=s.useState(""),O=a({fullName:n().min(2,m("bank_worker_validation_name_min")).required(m("bank_worker_validation_name_required")),position:n().min(2,m("bank_worker_validation_position_min")).required(m("bank_worker_validation_position_required")),email:n().email(m("bank_worker_validation_email_invalid")).required(m("bank_worker_validation_email_required")),bankId:i().required(m("bank_worker_validation_bank_required")),branchId:i().required(m("bank_worker_validation_branch_required")),bankNumber:n().min(3,m("bank_worker_validation_bank_number_min")).required(m("bank_worker_validation_bank_number_required")),acceptTerms:r().oneOf([!0],m("bank_worker_validation_terms_required")).required(m("bank_worker_validation_terms_required"))});s.useEffect(()=>{(async()=>{try{I(!0);const e=await fetch("/api/banks/list"),s=await e.json();"success"===s.status&&s.data?g(s.data):g([])}catch(e){g([])}finally{I(!1)}})()},[]),s.useEffect(()=>{(async()=>{try{F(!0);const e=await fetch(`/api/get-cities?lang=${x.language}`),s=await e.json();"success"===s.status&&s.data?L(s.data):L([])}catch(e){L([])}finally{F(!1)}})()},[]),s.useEffect(()=>{M&&(async e=>{try{q(!0);const s=await fetch(`/api/banks/${e}/branches`),a=await s.json();"success"===a.status&&a.data?C(a.data):C([])}catch(s){C([])}finally{q(!1)}})(M)},[M]);const D=e=>e[`name_${x.language}`]||e.name_en||e.name||`Bank ${e.id}`,G=e=>e[`name_${x.language}`]||e.name_en||e.name||`City ${e.id}`,J=w.filter(e=>D(e).toLowerCase().includes(v.toLowerCase()));f.filter(e=>(e=>e[`name_${x.language}`]||e.name_en||e.name||`Branch ${e.id}`)(e).toLowerCase().includes(N.toLowerCase()));const K=y.filter(e=>G(e).toLowerCase().includes(A.toLowerCase())),P=w.find(e=>e.id===M);f.find(e=>e.id===$);const Q=y.find(e=>e.id===R);return s.useEffect(()=>{const e=e=>{e.target.closest(`.${d.dropdown}`)||(j(!1),_(!1),z(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),e.jsxs("div",{className:d.container,children:[e.jsx("div",{className:d.header,children:e.jsx("div",{className:d.logo,children:e.jsx("span",{children:"BankIM"})})}),e.jsx("div",{className:d.pageBackground,children:e.jsxs("div",{className:d.signUpForm,children:[e.jsxs("div",{className:d.titleSection,children:[e.jsx("h1",{className:d.mainTitle,children:m("bank_worker_registration")}),e.jsx("p",{className:d.subtitle,children:m("bank_worker_register_subtitle")})]}),e.jsx("div",{className:d.stepperNavigation,children:e.jsxs("div",{className:d.navigation,children:[e.jsxs("div",{className:d.navItemStepper,children:[e.jsx("div",{className:d.shape,children:e.jsx("span",{className:d.stepNumber,children:"1"})}),e.jsx("span",{className:d.stepText,children:m("bank_worker_basic_info")})]}),e.jsx("div",{className:d.chevronRight,children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:e.jsx("path",{d:"M6 4L10 8L6 12",stroke:"currentColor",strokeWidth:"1.33"})})}),e.jsxs("div",{className:`${d.navItemStepper} ${d.inactive}`,children:[e.jsx("div",{className:d.shape,children:e.jsx("span",{className:d.stepNumber,children:"2"})}),e.jsx("span",{className:d.stepText,children:m("bank_worker_service_selection")})]})]})}),e.jsx("div",{className:d.containerWithForms,children:e.jsx(l,{initialValues:{fullName:"",position:"",email:"",bankId:"",branchId:"",bankNumber:"",acceptTerms:!1},validationSchema:O,onSubmit:e=>{alert(`${m("bank_worker_demo_description")}\n\nIn the real system, after successful registration, you would be redirected to:\n/bank-worker/status/[registration-id]\n\nThis page would show your registration status and next steps.`)},children:({values:s,setFieldValue:a,errors:n,touched:i})=>e.jsxs(t,{children:[e.jsxs("div",{className:d.firstRow,children:[e.jsxs("div",{className:d.inputField,children:[e.jsx("label",{className:d.label,children:m("bank_worker_full_name")}),e.jsx("div",{className:d.input,children:e.jsx("div",{className:d.content,children:e.jsx(c,{type:"text",name:"fullName",placeholder:m("bank_worker_full_name_placeholder"),className:d.inputText})})}),e.jsx(h,{name:"fullName",errors:n,touched:i})]}),e.jsxs("div",{className:d.inputField,children:[e.jsx("label",{className:d.label,children:m("bank_worker_position")}),e.jsx("div",{className:d.input,children:e.jsx("div",{className:d.content,children:e.jsx(c,{type:"text",name:"position",placeholder:m("bank_worker_position_placeholder"),className:d.inputText})})}),e.jsx(h,{name:"position",errors:n,touched:i})]})]}),e.jsx("div",{className:d.line}),e.jsxs("div",{className:d.secondRow,children:[e.jsxs("div",{className:d.inputField,children:[e.jsx("label",{className:d.label,children:m("bank_worker_bank_email")}),e.jsx("div",{className:d.input,children:e.jsxs("div",{className:d.content,children:[e.jsx("div",{className:d.envelope,children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[e.jsx("path",{d:"M2.5 3.5h11a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1z",stroke:"currentColor",strokeWidth:"1",fill:"none"}),e.jsx("path",{d:"m2.5 4.5 5.5 4 5.5-4",stroke:"currentColor",strokeWidth:"1"})]})}),e.jsx(c,{type:"email",name:"email",placeholder:m("bank_worker_bank_email_placeholder"),className:d.inputText})]})}),e.jsx(h,{name:"email",errors:n,touched:i})]}),e.jsxs("div",{className:d.inputField,children:[e.jsx("label",{className:d.label,children:m("bank_worker_bank")}),e.jsxs("div",{className:d.dropdown,children:[e.jsx("div",{className:d.input,onClick:()=>!S&&j(!u),children:e.jsxs("div",{className:d.content,children:[e.jsx("span",{className:d.selectedText,children:S?m("bank_worker_loading_banks"):P?D(P):m("bank_worker_select_bank")}),e.jsx("div",{className:d.chevronUp,children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:e.jsx("path",{d:"M4 10L8 6L12 10",stroke:"currentColor",strokeWidth:"1.33"})})})]})}),u&&!S&&e.jsx("div",{className:d.dropdownMenu,children:e.jsx("div",{className:d.dropdownMenuContainer,children:e.jsxs("div",{className:d.dropdownMenuContent,children:[e.jsx("div",{className:d.searchSection,children:e.jsx("div",{className:d.searchInputField,children:e.jsx("div",{className:d.searchInput,children:e.jsxs("div",{className:d.searchContent,children:[e.jsx("div",{className:d.searchIcon,children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[e.jsx("circle",{cx:"7.5",cy:"7.5",r:"5.5",stroke:"currentColor",strokeWidth:"1"}),e.jsx("path",{d:"m13 13-3-3",stroke:"currentColor",strokeWidth:"1"})]})}),e.jsx("input",{type:"text",placeholder:m("bank_worker_search_banks"),value:v,onChange:e=>p(e.target.value),className:d.searchInputText})]})})})}),J.map(s=>e.jsxs("div",{className:d.navLink,onClick:()=>{W(s.id),a("bankId",s.id),j(!1),p(""),E(null),a("branchId","")},children:[e.jsx("div",{className:d.title,children:e.jsx("span",{className:d.text,children:D(s)})}),M===s.id&&e.jsx("div",{className:d.check,children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:e.jsx("path",{d:"M3 8L6.5 11.5L13 5",stroke:"currentColor",strokeWidth:"2"})})})]},s.id))]})})})]}),e.jsx(h,{name:"bankId",errors:n,touched:i})]})]}),e.jsxs("div",{className:d.thirdRow,children:[e.jsxs("div",{className:d.inputField,children:[e.jsx("label",{className:d.label,children:m("bank_worker_city")}),e.jsxs("div",{className:d.dropdown,children:[e.jsx("div",{className:d.input,onClick:()=>z(!V),children:e.jsxs("div",{className:d.content,children:[e.jsx("span",{className:d.selectedText,children:Q?G(Q):m("bank_worker_select_city")}),e.jsx("div",{className:d.chevronUp,children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:e.jsx("path",{d:"M4 10L8 6L12 10",stroke:"currentColor",strokeWidth:"1.33"})})})]})}),V&&e.jsx("div",{className:d.dropdownMenu,children:e.jsx("div",{className:d.dropdownMenuContainer,children:e.jsxs("div",{className:d.dropdownMenuContent,children:[e.jsx("div",{className:d.searchSection,children:e.jsx("div",{className:d.searchInputField,children:e.jsx("div",{className:d.searchInput,children:e.jsxs("div",{className:d.searchContent,children:[e.jsx("div",{className:d.searchIcon,children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[e.jsx("circle",{cx:"7.5",cy:"7.5",r:"5.5",stroke:"currentColor",strokeWidth:"1"}),e.jsx("path",{d:"m13 13-3-3",stroke:"currentColor",strokeWidth:"1"})]})}),e.jsx("input",{type:"text",placeholder:m("bank_worker_search_cities"),value:A,onChange:e=>H(e.target.value),className:d.searchInputText})]})})})}),K.map(s=>e.jsxs("div",{className:d.navLink,onClick:()=>{U(s.id),a("cityId",s.id),z(!1),H("")},children:[e.jsx("div",{className:d.title,children:e.jsx("span",{className:d.text,children:G(s)})}),R===s.id&&e.jsx("div",{className:d.check,children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:e.jsx("path",{d:"M3 8L6.5 11.5L13 5",stroke:"currentColor",strokeWidth:"2"})})})]},s.id))]})})})]}),e.jsx(h,{name:"cityId",errors:n,touched:i})]}),e.jsxs("div",{className:d.inputField,children:[e.jsx("label",{className:d.label,children:m("bank_worker_bank_number")}),e.jsx("div",{className:d.input,children:e.jsx("div",{className:d.content,children:e.jsx(c,{type:"text",name:"bankNumber",placeholder:m("bank_worker_bank_number_placeholder"),className:d.inputText})})}),e.jsx(h,{name:"bankNumber",errors:n,touched:i})]})]}),e.jsxs("div",{className:d.checkboxContainer,children:[e.jsxs("div",{className:d.checkboxRow,children:[e.jsx(c,{type:"checkbox",id:"acceptTerms",name:"acceptTerms",className:d.checkbox}),e.jsx("div",{className:d.labelAndHelperText,children:e.jsx("label",{htmlFor:"acceptTerms",className:d.checkboxLabel,children:"he"===x.language?e.jsxs(e.Fragment,{children:["אני מסכים ",e.jsx("span",{className:d.termsLink,children:"לכללי הפלטפורמה"})]}):m("bank_worker_accept_terms")})})]}),e.jsx(h,{name:"acceptTerms",errors:n,touched:i})]}),e.jsx("button",{type:"submit",className:d.submitButton,children:e.jsx("span",{className:d.buttonText,children:m("bank_worker_continue")})}),e.jsx("div",{className:d.line}),e.jsx("div",{className:d.loginLink,children:e.jsx("span",{children:m("bank_worker_already_account")})})]})})})]})}),e.jsxs("div",{className:d.demoNotice,children:[e.jsx("h3",{children:m("bank_worker_demo_notice")}),e.jsx("p",{children:m("bank_worker_demo_description")})]})]})};export{m as default};
