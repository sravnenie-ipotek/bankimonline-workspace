import{i as _e,r as P,b as M,j as e,l as r,h as I,w as N,R as Z,x as he,y as pe,z as ge,I as xe,J as je,K as fe,A as ye,D as be,E as we,F as ee,G as ve,H as Se}from"./index-eb3aa3d7.js";import{u as Q,b as x,c as D,E as F,D as y,T as K,d as B,f as _,e as b,F as R,o as Ne,g as Y,a as k,h as ae,L as Me}from"./index-a5a970b9.js";import{P as Oe}from"./ProgressBar-7c664ab9.js";import{V as Pe}from"./VideoPoster-3c593808.js";import{S as te,a as Ie,L as De,U as Ae,A as Ce,F as Fe,B as qe,b as Ee,P as Be,c as Re,d as Ye,e as ke,O as Le}from"./SourceOfIncomeModal-f670e2a1.js";import{F as L,a as T,R as p,C as c,D as q,b as oe,c as X}from"./StringInput-15bd80b7.js";import{s as H,I as Te}from"./IncreasePayment-3d28b849.js";import{Y as Ve,R as $e,I as ze,N as We,B as Ue,E as He,A as Ge,C as Je,T as Ke,a as Qe,b as Xe,H as Ze,M as ea,c as aa,P as ta}from"./Taxes-33bde268.js";import{c as G,a as oa}from"./calculatePeriod-d6d018d2.js";import{U as S,a as na,c as ne,A as E,b as ra,d as ia,O as la,e as re,g as J}from"./componentsByIncomeSource-e43343be.js";import{F as sa,o as ie,d as ca}from"./otherBorrowersSlice-40a60261.js";import"./borrowersPersonalDataSlice-a434629b.js";import"./ShieldCheckIcon-185d94af.js";const da=_e({name:"credit",initialState:{},reducers:{updateCreditData:(a,d)=>({...a,...d.payload})}}),{updateCreditData:ua}=da.actions,ma=()=>{const[a,d]=P.useState(51130),[o,m]=P.useState(2654),{t,i18n:h}=M();h.language=h.language.split("-")[0];const g=[{value:"option_1",label:t("calculate_credit_target_option_1")},{value:"option_2",label:t("calculate_credit_target_option_2")},{value:"option_3",label:t("calculate_credit_target_option_3")},{value:"option_4",label:t("calculate_credit_target_option_4")},{value:"option_5",label:t("calculate_credit_target_option_5")},{value:"option_6",label:t("calculate_credit_target_option_6")}],s=[{value:"option_1",label:t("calculate_mortgage_when_options_1")},{value:"option_2",label:t("calculate_mortgage_when_options_2")},{value:"option_3",label:t("calculate_mortgage_when_options_3")},{value:"option_4",label:t("calculate_mortgage_when_options_4")}],V=[{value:"option_1",label:t("calculate_credit_prolong_option_1")},{value:"option_2",label:t("calculate_credit_prolong_option_2")},{value:"option_3",label:t("calculate_credit_prolong_option_3")},{value:"option_4",label:t("calculate_credit_prolong_option_4")},{value:"option_5",label:t("calculate_credit_prolong_option_5")},{value:"option_6",label:t("calculate_credit_prolong_option_6")},{value:"option_7",label:t("calculate_credit_prolong_option_7")}],$=[{value:"city_1",label:t("calculate_mortgage_city_1")},{value:"city_2",label:t("calculate_mortgage_city_2")},{value:"city_3",label:t("calculate_mortgage_city_3")}],{setFieldValue:j,values:l,errors:u,touched:w,setFieldTouched:v}=Q(),A=x(i=>i.activeField),O=D(),z=i=>{O(H("period")),j("period",i)},W=i=>{O(H("monthlyPayment")),j("monthlyPayment",i)};return P.useEffect(()=>{if(A==="period"){const i=G(l.loanAmount,0,l.period,5);Number.isNaN(i)||j("monthlyPayment",i)}else{const i=oa(l.loanAmount,0,l.monthlyPayment,5);Number.isNaN(i)||j("period",i)}},[A,j,l.loanAmount,l.monthlyPayment,l.period]),P.useLayoutEffect(()=>{const i=G(l.loanAmount,0,1,5),U=G(l.loanAmount,0,30,5);Number.isNaN(i)||d(i),i===0&&d(1),Number.isNaN(i)||m(U)},[l.loanAmount]),e.jsx(e.Fragment,{children:e.jsxs(L,{children:[e.jsx(T,{title:t("sidebar_sub_calculate_credit")}),e.jsxs(p,{children:[e.jsx(c,{children:e.jsx(q,{title:t("calculate_why"),data:g,placeholder:t("calculate_credit_target_ph"),value:l.purposeOfLoan,onChange:i=>j("purposeOfLoan",i),onBlur:()=>v("purposeOfLoan",!0),error:w.purposeOfLoan&&u.purposeOfLoan})}),e.jsxs(c,{children:[e.jsx(oe,{handleChange:i=>{O(H("period")),j("loanAmount",i)},name:"loanAmount",title:t("calculate_amount"),value:l.loanAmount,placeholder:"1,000,000",error:u.loanAmount}),u.loanAmount&&e.jsx(F,{error:u.loanAmount})]}),e.jsx(c,{children:e.jsx(q,{title:t("calculate_when"),data:s,placeholder:t("calculate_mortgage_when_options_ph"),value:l.whenDoYouNeedMoney,onChange:i=>j("whenDoYouNeedMoney",i),onBlur:()=>v("whenDoYouNeedMoney",!0),error:w.whenDoYouNeedMoney&&u.whenDoYouNeedMoney})})]}),e.jsx(p,{children:e.jsx(c,{children:e.jsx(q,{title:t("calculate_prolong"),data:V,placeholder:t("calculate_mortgage_first_ph"),value:l.loanDeferral,onChange:i=>j("loanDeferral",i),onBlur:()=>v("loanDeferral",!0),error:w.loanDeferral&&u.loanDeferral})})}),l.purposeOfLoan&&l.purposeOfLoan==="option_6"&&e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(oe,{handleChange:i=>{j("priceOfEstate",i)},name:"PriceOfEstate",title:t("calculate_mortgage_price"),value:l.priceOfEstate,placeholder:"1,000,000",error:u.priceOfEstate}),u.priceOfEstate&&e.jsx(F,{error:u.priceOfEstate})]}),e.jsx(c,{children:e.jsx(q,{title:t("calculate_mortgage_city"),data:$,placeholder:t("city"),value:l.cityWhereYouBuy,onChange:i=>j("cityWhereYouBuy",i),onBlur:()=>v("cityWhereYouBuy",!0),searchable:!0,searchPlaceholder:t("search"),nothingFoundText:t("nothing_found"),error:w.cityWhereYouBuy&&u.cityWhereYouBuy})}),e.jsxs(c,{children:[e.jsx(K,{title:t("have_mortgage_title")}),e.jsx(Ve,{value:l.haveMortgage,onChange:i=>j("haveMortgage",i),error:w.haveMortgage&&u.haveMortgage})]})]})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsxs(c,{children:[e.jsx(te,{disableCurrency:!0,unitsMax:t("calculate_mortgage_period_units_max"),unitsMin:t("calculate_mortgage_period_units_min"),value:l.period,name:"Period",min:1,max:30,error:u.period,title:t("calculate_mortgage_period"),handleChange:z}),u.period&&e.jsx(F,{error:u.period})]}),e.jsxs(c,{children:[e.jsx(te,{unitsMax:"₪",unitsMin:"₪",name:"MonthlyPayment",min:o,max:a,error:u.monthlyPayment,title:t("calculate_mortgage_initial_payment"),handleChange:W,value:l.monthlyPayment}),e.jsx(Te,{}),u.monthlyPayment&&e.jsx(F,{error:u.monthlyPayment})]}),e.jsx(c,{})]})]})})},_a=B().shape({purposeOfLoan:_().required("Выберите ответ"),loanAmount:b().when("purposeOfLoan",{is:r.t("calculate_credit_target_option_6"),then:a=>a.max(1e6,r.t("error_loan_of_amount_credit_max_1000000")),otherwise:a=>a.max(2e5,r.t("error_loan_of_amount_credit_max_200000"))}).required(r.t("error_required_to_fill_out")),whenDoYouNeedMoney:_().required(r.t("error_select_answer")),loanDeferral:_().required(r.t("error_select_answer")),period:b().min(1,r.t("error_min__credit_period")).max(30,r.t("error_max_credit_period")).required(r.t("error_required_to_fill_out")),monthlyPayment:b().required(r.t("error_required_to_fill_out"))}),ha=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const o=D(),m=I(),t=x(s=>s.credit),h=x(s=>s.login.isLogin),g={purposeOfLoan:t.purposeOfLoan||"",loanAmount:t.loanAmount||2e5,whenDoYouNeedMoney:t.whenDoYouNeedMoney||"",loanDeferral:t.loanDeferral||"",priceOfEstate:t.priceOfEstate||null,cityWhereYouBuy:t.cityWhereYouBuy||"",haveMortgage:t.haveMortgage||null,period:t.period||30,monthlyPayment:t.monthlyPayment||5368};return e.jsxs(e.Fragment,{children:[e.jsx(R,{initialValues:g,validationSchema:_a,validateOnMount:!0,onSubmit:s=>{o(ua(s)),h?m("/services/calculate-credit/2"):o(Ne())},children:e.jsxs(Y,{children:[e.jsxs(k,{children:[e.jsx(Pe,{title:a("sidebar_sub_calculate_credit"),text:a("calculate_mortgage_banner_subtext"),size:"small"}),e.jsx(ma,{})]}),e.jsx(Ie,{})]})}),e.jsx(De,{})]})},pa=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const o=x(t=>t.login.loginData),m=x(t=>t.credit);return e.jsxs(L,{children:[e.jsx(T,{title:a("calculate_mortgage_final")}),e.jsx(Ae,{credit:m.loanAmount,nameSurname:o==null?void 0:o.nameSurname,phoneNumber:o==null?void 0:o.phoneNumber}),e.jsx(Ce,{text:a("calculate_mortgage_warning")}),e.jsx(p,{children:e.jsx(Fe,{})}),e.jsx(qe,{})]})},ga={},xa=B().shape({}),ja=()=>e.jsx(R,{initialValues:ga,validationSchema:xa,validateOnMount:!0,onSubmit:()=>{console.log("нажата кнопка")},children:e.jsxs(Y,{children:[e.jsx(k,{children:e.jsx(pa,{})}),e.jsx(X,{})]})}),fa=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const{values:o}=Q(),m=x(t=>t.login.loginData);return e.jsxs(L,{children:[e.jsx(T,{title:a("calculate_mortgage_step2_title")}),e.jsxs($e,{children:[e.jsx(ze,{}),e.jsx(S,{name:m==null?void 0:m.nameSurname,phone:m==null?void 0:m.phoneNumber})]}),e.jsxs(p,{children:[e.jsx(We,{}),e.jsx(Ue,{}),e.jsx(He,{})]}),e.jsxs(p,{children:[e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Ge,{}),o.additionalCitizenships==="yes"&&e.jsx(Je,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Ke,{}),o.taxes==="yes"&&e.jsx(Qe,{})]}),e.jsxs(c,{style:{gap:"2rem"},children:[e.jsx(Xe,{}),o.childrens==="yes"&&e.jsx(Ze,{})]})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(ea,{}),e.jsx(aa,{}),e.jsx(ta,{})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(Ee,{}),e.jsx(c,{}),e.jsx(c,{})]}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(sa,{}),e.jsx(c,{children:o.familyStatus==="option_2"&&e.jsx(Be,{})}),e.jsx(c,{children:o.partnerPayMortgage==="yes"&&o.familyStatus==="option_2"&&e.jsx(Re,{})})]})]})},ya=B().shape({nameSurname:_().required(r.t("error_name_surname")),birthday:_().required(r.t("error_date")),education:_().required(r.t("error_select_answer")),additionalCitizenships:_().required(r.t("error_select_answer")),citizenshipsDropdown:ae().when("additionalCitizenships",{is:"yes",then:a=>a.min(1,r.t("error_select_answer")),otherwise:a=>a.min(0)}),taxes:_().required(r.t("error_select_answer")),countriesPayTaxes:ae().when("taxes",{is:"yes",then:a=>a.min(1,r.t("error_select_answer")),otherwise:a=>a.min(0)}),childrens:_().required(r.t("error_select_answer")),howMuchChildrens:b().required(r.t("error_fill_field")),medicalInsurance:_().required(r.t("error_select_answer")),isForeigner:_().required(r.t("error_select_answer")),publicPerson:_().required(r.t("error_select_answer")),borrowers:b().min(1,r.t("error_quantity_borrowers")).required(r.t("error_quantity_borrowers")),familyStatus:_().required(r.t("error_select_answer")),partnerPayMortgage:_().when("familyStatus",{is:r.t("calculate_mortgage_family_status_option_2"),then:a=>a.required(r.t("error_select_answer")),otherwise:a=>a.notRequired()})}),ba=()=>{const a=D(),d=I(),o=x(h=>h.mortgage),t={nameSurname:x(h=>h.login.loginData).nameSurname||o.nameSurname||"",birthday:o.birthday||new Date(new Date().setFullYear(new Date().getFullYear()-18)).getTime(),education:o.education||"",additionalCitizenships:o.additionalCitizenships||null,citizenshipsDropdown:o.citizenshipsDropdown||[],taxes:o.taxes||null,countriesPayTaxes:o.countriesPayTaxes||[],childrens:o.childrens||null,howMuchChildrens:o.howMuchChildrens||1,medicalInsurance:o.medicalInsurance||null,isForeigner:o.isForeigner||null,publicPerson:o.publicPerson||null,borrowers:o.borrowers||null,familyStatus:o.familyStatus||"",partnerPayMortgage:o.partnerPayMortgage||null,addPartner:o.addPartner||""};return e.jsx(R,{initialValues:t,validationSchema:ya,validateOnMount:!0,onSubmit:h=>{a(N(h)),d("/services/calculate-credit/3")},children:e.jsxs(Y,{children:[e.jsx(k,{children:e.jsx(fa,{})}),e.jsx(X,{})]})})},wa=()=>{const{t:a,i18n:d}=M();d.language=d.language.split("-")[0];const o=I(),{values:m}=Q(),{mainSourceOfIncome:t,additionalIncome:h,obligation:g}=m,s=D(),V=x(n=>n.borrowers.sourceOfIncomeModal),$=x(n=>n.borrowers.additionalIncomeModal),j=x(n=>n.borrowers.obligationModal),l=x(n=>n.otherBorrowers.otherBorrowers),u=x(n=>n.login.loginData),w=()=>{s(N(m)),s(he())},v=()=>{s(N(m)),s(pe())},A=()=>{s(N(m)),s(ge())},O=n=>{s(xe({id:n}))},z=n=>{s(je({id:n}))},W=n=>{s(fe({id:n}))},i=n=>{s(ye(n))},U=n=>{s(be(n))},le=n=>{s(we(n))},se=n=>{s(ie(n));const ue=!l.some(me=>me.id===n)?J(l):n;o({pathname:"/services/other-borrowers/1/",search:ee({pageId:String(ue)}).toString()})},ce=()=>{s(ie(J(l))),s(N(m)),o({pathname:"/services/other-borrowers/1/",search:ee({pageId:J(l).toString()}).toString()})},de=n=>{s(ca(n))};return e.jsxs(L,{children:[e.jsx(T,{title:a("calculate_mortgage_step3_title")}),e.jsx(S,{name:u==null?void 0:u.nameSurname,phone:u==null?void 0:u.phoneNumber}),e.jsxs(p,{children:[e.jsx(na,{}),ne[t]&&ne[t].map((n,C)=>e.jsx(Z.Fragment,{children:n},C)),e.jsx(c,{})]}),e.jsx(p,{children:t&&e.jsxs(c,{children:[V.map(n=>e.jsx(S,{onEdit:()=>i(n.id),onDelete:()=>O(n.id),enableEdit:!0,name:`${a("source_of_income")}${n.id+1}`},n.id)),e.jsx(E,{onClick:w,color:"#FBE54D",value:a("add_place_to_work"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(ra,{}),h&&h!=="option_1"&&e.jsx(ia,{}),e.jsx(c,{})]}),h&&h!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[$.map(n=>e.jsx(S,{onEdit:()=>U(n.id),onDelete:()=>z(n.id),enableEdit:!0,name:`${a("additional_source_of_income")}${n.id+1}`},n.id)),e.jsx(E,{onClick:v,color:"#FBE54D",value:a("add_additional_source_of_income"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs(p,{children:[e.jsx(la,{}),re[g]&&re[g].map((n,C)=>e.jsx(Z.Fragment,{children:n},C)),e.jsx(c,{})]}),g&&g!=="option_1"&&e.jsx(p,{children:e.jsxs(c,{children:[j.map(n=>e.jsx(S,{onEdit:()=>le(n.id),onDelete:()=>W(n.id),enableEdit:!0,name:`${a("obligation")}${n.id+1}`},n.id)),e.jsx(E,{onClick:A,color:"#FBE54D",value:a("add_obligation"),variant:"none"})]})}),e.jsx(y,{}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[l&&e.jsx(K,{title:a("borrower")}),e.jsxs(p,{style:{columnGap:"2rem"},children:[l.map(n=>e.jsx(c,{children:e.jsx(S,{onEdit:()=>se(n.id),onDelete:()=>de(n.id),enableEdit:!0,name:n.nameSurname},n.id)},n.id)),!l&&e.jsx(K,{title:a("borrower")}),e.jsx(c,{children:e.jsx(E,{value:a("add_borrower"),onClick:ce,style:{height:"3.5rem",borderRadius:"0.25rem",padding:"0",width:"13.125rem"}})}),e.jsx(c,{})]})]})]})},va=B().shape({mainSourceOfIncome:_().required(r.t("error_select_answer")),monthlyIncome:b().required(r.t("error_fill_field")),startDate:_().required(r.t("error_date")),fieldOfActivity:_().when("mainSourceOfIncome",{is:a=>a!=null&&a!=="",then:a=>a.required(r.t("error_select_field_of_activity")),otherwise:a=>a.notRequired()}),profession:_().required(r.t("error_fill_field")),companyName:_().required(r.t("error_fill_field")),additionalIncome:_().required(r.t("error_select_one_of_the_options")),additionalIncomeAmount:b().when("additionalIncome",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_fill_field")),otherwise:a=>a.notRequired()}),obligation:_().required(r.t("error_select_one_of_the_options")),bank:_().when("obligation",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_select_bank")),otherwise:a=>a.notRequired()}),monthlyPaymentForAnotherBank:b().when("obligation",{is:a=>a!=null&&a!==""&&a==="no",then:a=>a.required(r.t("error_fill_field")),otherwise:a=>a.notRequired()}),endDate:_().required(r.t("error_date"))}),Sa=()=>{const a=D(),d=I(),o=x(t=>t.mortgage),m={mainSourceOfIncome:o.mainSourceOfIncome||"",monthlyIncome:o.monthlyIncome||null,startDate:o.startDate||new Date().getTime(),fieldOfActivity:o.fieldOfActivity||"",profession:o.profession||"",companyName:o.companyName||"",additionalIncome:o.additionalIncome||"",additionalIncomeAmount:o.additionalIncomeAmount||null,obligation:o.obligation||"",bank:o.bank||"",monthlyPaymentForAnotherBank:o.monthlyPaymentForAnotherBank||null,endDate:o.endDate||new Date().getTime(),amountIncomeCurrentYear:(o==null?void 0:o.amountIncomeCurrentYear)||null,noIncome:o.noIncome||new Date().getTime()};return e.jsxs(e.Fragment,{children:[e.jsx(R,{initialValues:m,validationSchema:va,validateOnMount:!0,onSubmit:t=>{a(N(t)),d("/services/calculate-credit/4")},children:e.jsxs(Y,{children:[e.jsx(k,{children:e.jsx(wa,{})}),e.jsx(X,{})]})}),e.jsx(Ye,{}),e.jsx(ke,{}),e.jsx(Le,{})]})};var f="/Users/michaelmishayev/Projects/bankDev2_standalone/mainapp/src/pages/Services/pages/CalculateCredit/CalculateCredit.tsx";const Ya=()=>{const{stepNumber:a}=ve(),{t:d,i18n:o}=M(),m=I();if(o.language=o.language.split("-")[0],!x(s=>s.login.isLogin)&&a!=="1"){m("/services/calculate-credit/1");return}const h=[d("calculate_credit_calculator"),d("mortgage_refinance_step_2"),d("calculate_mortgage_income"),d("calculate_mortgage_programs")];let g;switch(a){case"1":g=React.createElement(ha,{__self:void 0,__source:{fileName:f,lineNumber:39,columnNumber:23}});break;case"2":g=React.createElement(ba,{__self:void 0,__source:{fileName:f,lineNumber:42,columnNumber:23}});break;case"3":g=React.createElement(Sa,{__self:void 0,__source:{fileName:f,lineNumber:45,columnNumber:23}});break;case"4":g=React.createElement(ja,{__self:void 0,__source:{fileName:f,lineNumber:48,columnNumber:23}});break;default:g=React.createElement(Se,{type:"NOT_FOUND",__self:void 0,__source:{fileName:f,lineNumber:51,columnNumber:23}});break}return React.createElement(React.Fragment,null,React.createElement(Oe,{progress:a,data:h,__self:void 0,__source:{fileName:f,lineNumber:57,columnNumber:7}}),React.createElement(P.Suspense,{fallback:React.createElement(Me,{__self:void 0,__source:{fileName:f,lineNumber:58,columnNumber:27}}),__self:void 0,__source:{fileName:f,lineNumber:58,columnNumber:7}},g))};export{Ya as default};
